//PASDKe20 cd3.0.1
"undefined"==typeof Symbol&&(window.Symbol=function(n){return n});
"undefined"==typeof Promise&&!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()}(0,function(){"use strict";function e(){}function n(e){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],f(e,this)}function t(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,n._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(f){return void r(t.promise,f)}o(t.promise,i)}else(1===e._state?o:r)(t.promise,e._value)})):e._deferreds.push(t)}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var o=t.then;if(t instanceof n)return e._state=3,e._value=t,void i(e);if("function"==typeof o)return void f(function(e,n){return function(){e.apply(n,arguments)}}(o,t),e)}e._state=1,e._value=t,i(e)}catch(u){r(e,u)}}function r(e,n){e._state=2,e._value=n,i(e)}function i(e){2===e._state&&0===e._deferreds.length&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var o=0,r=e._deferreds.length;r>o;o++)t(e,e._deferreds[o]);e._deferreds=null}function f(e,n){var t=!1;try{e(function(e){t||(t=!0,o(n,e))},function(e){t||(t=!0,r(n,e))})}catch(i){if(t)return;t=!0,r(n,i)}}var u=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})},c=setTimeout;n.prototype["catch"]=function(e){return this.then(null,e)},n.prototype.then=function(n,o){var r=new this.constructor(e);return t(this,new function(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}(n,o,r)),r},n.prototype["finally"]=u,n.all=function(e){return new n(function(n,t){function o(e,f){try{if(f&&("object"==typeof f||"function"==typeof f)){var u=f.then;if("function"==typeof u)return void u.call(f,function(n){o(e,n)},t)}r[e]=f,0==--i&&n(r)}catch(c){t(c)}}if(!e||"undefined"==typeof e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);for(var i=r.length,f=0;r.length>f;f++)o(f,r[f])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(n){n(e)})},n.reject=function(e){return new n(function(n,t){t(e)})},n.race=function(e){return new n(function(n,t){for(var o=0,r=e.length;r>o;o++)e[o].then(n,t)})},n._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},n._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var l=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();l.Promise?l.Promise.prototype["finally"]||(l.Promise.prototype["finally"]=u):l.Promise=n});
//colyseus
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Colyseus=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=function(){function a(a){void 0===a&&(a=!1),this.running=!1,this.now="undefined"!=typeof window&&window.performance&&window.performance.now&&window.performance.now.bind(window.performance)||Date.now,this.start(a)}return a.prototype.start=function(a){void 0===a&&(a=!1),this.deltaTime=0,this.currentTime=this.now(),this.elapsedTime=0,this.running=!0,a&&(this._interval=setInterval(this.tick.bind(this),1e3/60))},a.prototype.stop=function(){this.running=!1,this._interval&&clearInterval(this._interval)},a.prototype.tick=function(a){void 0===a&&(a=this.now()),this.deltaTime=a-this.currentTime,this.currentTime=a,this.elapsedTime+=this.deltaTime},a}();b.exports=d},{}],2:[function(a,b,c){"use strict";function d(a,b){return new e(f[a],b)}function e(a,b){this.func=a,this.attempts=0,this.delay="undefined"!=typeof b.initialDelay?b.initialDelay:100}Object.defineProperty(c,"__esModule",{value:!0}),c.createBackoff=d;var f={exponential:function(a,b){return Math.floor(Math.random()*Math.pow(2,a)*b)},fibonacci:function(a,b){var c=1;if(a>c)for(var d=1,c=2,e=2;e<a;e++){var f=d+c;d=c,c=f}return Math.floor(Math.random()*c*b)}};e.prototype.backoff=function(){setTimeout(this.onReady,this.func(++this.attempts,this.delay))}},{}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./backoff").createBackoff,g=function(){function a(b,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,a),this.url=b,this.protocols=c,this.reconnectEnabled=!0,this.listeners={},this.backoff=f(e.backoff||"exponential",e),this.backoff.onReady=this.onBackoffReady.bind(this),this.open()}return e(a,[{key:"open",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isReconnect=a;var b=this.ws&&this.ws.binaryType;this.ws=new WebSocket(this.url,this.protocols),this.ws.onclose=this.onCloseCallback.bind(this),this.ws.onerror=this.onErrorCallback.bind(this),this.ws.onmessage=this.onMessageCallback.bind(this),this.ws.onopen=this.onOpenCallback.bind(this),b&&(this.ws.binaryType=b)}},{key:"onBackoffReady",value:function(a,b){this.open(!0)}},{key:"onCloseCallback",value:function(a){!this.isReconnect&&this.listeners.onclose&&this.listeners.onclose.apply(null,arguments),this.reconnectEnabled&&a.code<3e3&&this.backoff.backoff()}},{key:"onErrorCallback",value:function(){this.listeners.onerror&&this.listeners.onerror.apply(null,arguments)}},{key:"onMessageCallback",value:function(){this.listeners.onmessage&&this.listeners.onmessage.apply(null,arguments)}},{key:"onOpenCallback",value:function(){this.listeners.onopen&&this.listeners.onopen.apply(null,arguments),this.isReconnect&&this.listeners.onreconnect&&this.listeners.onreconnect.apply(null,arguments),this.isReconnect=!1}},{key:"close",value:function(a,b){"undefined"==typeof a&&(a=1e3),this.reconnectEnabled=!1,this.ws.close(a,b)}},{key:"send",value:function(a){this.ws.send(a)}},{key:"bufferedAmount",get:function(){return this.ws.bufferedAmount}},{key:"readyState",get:function(){return this.ws.readyState}},{key:"binaryType",get:function(){return this.ws.binaryType},set:function(a){this.ws.binaryType=a}},{key:"extensions",get:function(){return this.ws.extensions},set:function(a){this.ws.extensions=a}},{key:"protocol",get:function(){return this.ws.protocol},set:function(a){this.ws.protocol=a}},{key:"onclose",set:function(a){this.listeners.onclose=a},get:function(){return this.listeners.onclose}},{key:"onerror",set:function(a){this.listeners.onerror=a},get:function(){return this.listeners.onerror}},{key:"onmessage",set:function(a){this.listeners.onmessage=a},get:function(){return this.listeners.onmessage}},{key:"onopen",set:function(a){this.listeners.onopen=a},get:function(){return this.listeners.onopen}},{key:"onreconnect",set:function(a){this.listeners.onreconnect=a},get:function(){return this.listeners.onreconnect}}]),a}();g.CONNECTING=WebSocket.CONNECTING,g.OPEN=WebSocket.OPEN,g.CLOSING=WebSocket.CLOSING,g.CLOSED=WebSocket.CLOSED,c["default"]=g},{"./backoff":2}],4:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===a[b-2]?2:"="===a[b-1]?1:0}function e(a){return 3*a.length/4-d(a)}function f(a){var b,c,e,f,g,h=a.length;f=d(a),g=new l(3*h/4-f),c=f>0?h-4:h;var i=0;for(b=0;b<c;b+=4)e=k[a.charCodeAt(b)]<<18|k[a.charCodeAt(b+1)]<<12|k[a.charCodeAt(b+2)]<<6|k[a.charCodeAt(b+3)],g[i++]=e>>16&255,g[i++]=e>>8&255,g[i++]=255&e;return 2===f?(e=k[a.charCodeAt(b)]<<2|k[a.charCodeAt(b+1)]>>4,g[i++]=255&e):1===f&&(e=k[a.charCodeAt(b)]<<10|k[a.charCodeAt(b+1)]<<4|k[a.charCodeAt(b+2)]>>2,g[i++]=e>>8&255,g[i++]=255&e),g}function g(a){return j[a>>18&63]+j[a>>12&63]+j[a>>6&63]+j[63&a]}function h(a,b,c){for(var d,e=[],f=b;f<c;f+=3)d=(a[f]<<16)+(a[f+1]<<8)+a[f+2],e.push(g(d));return e.join("")}function i(a){for(var b,c=a.length,d=c%3,e="",f=[],g=16383,i=0,k=c-d;i<k;i+=g)f.push(h(a,i,i+g>k?k:i+g));return 1===d?(b=a[c-1],e+=j[b>>2],e+=j[b<<4&63],e+="=="):2===d&&(b=(a[c-2]<<8)+a[c-1],e+=j[b>>10],e+=j[b>>4&63],e+=j[b<<2&63],e+="="),f.push(e),f.join("")}c.byteLength=e,c.toByteArray=f,c.fromByteArray=i;for(var j=[],k=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=m.length;n<o;++n)j[n]=m[n],k[m.charCodeAt(n)]=n;k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},{}],5:[function(a,b,c){"use strict";function d(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()}catch(b){return!1}}function e(a){if(a>Z)throw new RangeError("Invalid typed array length");var b=new Uint8Array(a);return b.__proto__=f.prototype,b}function f(a,b,c){if("number"==typeof a){if("string"==typeof b)throw new Error("If encoding is specified then the first argument must be a string");return j(a)}return g(a,b,c)}function g(a,b,c){if("number"==typeof a)throw new TypeError('"value" argument must not be a number');return U(a)?m(a,b,c):"string"==typeof a?k(a,b):n(a)}function h(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function i(a,b,c){return h(a),a<=0?e(a):void 0!==b?"string"==typeof c?e(a).fill(b,c):e(a).fill(b):e(a)}function j(a){return h(a),e(a<0?0:0|o(a))}function k(a,b){if("string"==typeof b&&""!==b||(b="utf8"),!f.isEncoding(b))throw new TypeError('"encoding" must be a valid string encoding');var c=0|q(a,b),d=e(c),g=d.write(a,b);return g!==c&&(d=d.slice(0,g)),d}function l(a){for(var b=a.length<0?0:0|o(a.length),c=e(b),d=0;d<b;d+=1)c[d]=255&a[d];return c}function m(a,b,c){if(b<0||a.byteLength<b)throw new RangeError("'offset' is out of bounds");if(a.byteLength<b+(c||0))throw new RangeError("'length' is out of bounds");var d;return d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),d.__proto__=f.prototype,d}function n(a){if(f.isBuffer(a)){var b=0|o(a.length),c=e(b);return 0===c.length?c:(a.copy(c,0,0,b),c)}if(a){if(V(a)||"length"in a)return"number"!=typeof a.length||W(a.length)?e(0):l(a);if("Buffer"===a.type&&Array.isArray(a.data))return l(a.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function o(a){if(a>=Z)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Z.toString(16)+" bytes");return 0|a}function p(a){return+a!=a&&(a=0),f.alloc(+a)}function q(a,b){if(f.isBuffer(a))return a.length;if(V(a)||U(a))return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return P(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return S(a).length;default:if(d)return P(a).length;b=(""+b).toLowerCase(),d=!0}}function r(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),c<=0)return"";if(c>>>=0,b>>>=0,c<=b)return"";for(a||(a="utf8");;)switch(a){case"hex":return G(this,b,c);case"utf8":case"utf-8":return C(this,b,c);case"ascii":return E(this,b,c);case"latin1":case"binary":return F(this,b,c);case"base64":return B(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function s(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function t(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,W(c)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(c<0){if(!e)return-1;c=0}if("string"==typeof b&&(b=f.from(b,d)),f.isBuffer(b))return 0===b.length?-1:u(a,b,c,d,e);if("number"==typeof b)return b=255&b,"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):u(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function u(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,i=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;g=2,h/=2,i/=2,c/=2}var j;if(e){var k=-1;for(j=c;j<h;j++)if(f(a,j)===f(b,k===-1?0:j-k)){if(k===-1&&(k=j),j-k+1===i)return k*g}else k!==-1&&(j-=j-k),k=-1}else for(c+i>h&&(c=h-i),j=c;j>=0;j--){for(var l=!0,m=0;m<i;m++)if(f(a,j+m)!==f(b,m)){l=!1;break}if(l)return j}return-1}function v(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h=parseInt(b.substr(2*g,2),16);if(W(h))return g;a[c+g]=h}return g}function w(a,b,c,d){return T(P(b,a.length-c),a,c,d)}function x(a,b,c,d){return T(Q(b),a,c,d)}function y(a,b,c,d){return x(a,b,c,d)}function z(a,b,c,d){return T(S(b),a,c,d)}function A(a,b,c,d){return T(R(b,a.length-c),a,c,d)}function B(a,b,c){return 0===b&&c===a.length?X.fromByteArray(a):X.fromByteArray(a.slice(b,c))}function C(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(l<55296||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&l<1114112&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return D(d)}function D(a){var b=a.length;if(b<=$)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=$));return c}function E(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function F(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function G(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=O(a[f]);return e}function H(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function I(a,b,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function J(a,b,c,d,e,g){if(!f.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<g)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function K(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function L(a,b,c,d,e){return b=+b,c>>>=0,e||K(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),Y.write(a,b,c,d,23,4),c+4}function M(a,b,c,d,e){return b=+b,c>>>=0,e||K(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),Y.write(a,b,c,d,52,8),c+8}function N(a){if(a=a.trim().replace(_,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function O(a){return a<16?"0"+a.toString(16):a.toString(16)}function P(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){if(c=a.charCodeAt(g),c>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function Q(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function R(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function S(a){return X.toByteArray(N(a))}function T(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function U(a){return a instanceof ArrayBuffer||null!=a&&null!=a.constructor&&"ArrayBuffer"===a.constructor.name&&"number"==typeof a.byteLength}function V(a){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(a)}function W(a){return a!==a}var X=a("base64-js"),Y=a("ieee754");c.Buffer=f,c.SlowBuffer=p,c.INSPECT_MAX_BYTES=50;var Z=2147483647;c.kMaxLength=Z,f.TYPED_ARRAY_SUPPORT=d(),!f.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&"function"==typeof console.error,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=function(a,b,c){return g(a,b,c)},f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(a,b,c){return i(a,b,c)},f.allocUnsafe=function(a){return j(a)},f.allocUnsafeSlow=function(a){return j(a)},f.isBuffer=function(a){return null!=a&&a._isBuffer===!0},f.compare=function(a,b){if(!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);e<g;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},f.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(a,b){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return f.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=f.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var g=a[c];if(!f.isBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(d,e),e+=g.length}return d},f.byteLength=q,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)s(this,b,b+1);return this},f.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)s(this,b,b+3),s(this,b+1,b+2);return this},f.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)s(this,b,b+7),s(this,b+1,b+6),s(this,b+2,b+5),s(this,b+3,b+4);return this},f.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?C(this,0,a):r.apply(this,arguments)},f.prototype.equals=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===f.compare(this,a)},f.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},f.prototype.compare=function(a,b,c,d,e){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var g=e-d,h=c-b,i=Math.min(g,h),j=this.slice(d,e),k=a.slice(b,c),l=0;l<i;++l)if(j[l]!==k[l]){g=j[l],h=k[l];break}return g<h?-1:h<g?1:0},f.prototype.includes=function(a,b,c){return this.indexOf(a,b,c)!==-1},f.prototype.indexOf=function(a,b,c){return t(this,a,b,c,!0)},f.prototype.lastIndexOf=function(a,b,c){return t(this,a,b,c,!1)},f.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return v(this,a,b,c);case"utf8":case"utf-8":return w(this,a,b,c);case"ascii":return x(this,a,b,c);case"latin1":case"binary":return y(this,a,b,c);case"base64":return z(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;f.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),b<0?(b+=c,b<0&&(b=0)):b>c&&(b=c),b<a&&(b=a);var d=this.subarray(a,b);return d.__proto__=f.prototype,d},f.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},f.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},f.prototype.readUInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),this[a]},f.prototype.readUInt16LE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]|this[a+1]<<8},f.prototype.readUInt16BE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]<<8|this[a+1]},f.prototype.readUInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},f.prototype.readUInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},f.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},f.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},f.prototype.readInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),128&this[a]?(255-this[a]+1)*-1:this[a]},f.prototype.readInt16LE=function(a,b){a>>>=0,b||I(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt16BE=function(a,b){a>>>=0,b||I(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},f.prototype.readInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},f.prototype.readFloatLE=function(a,b){return a>>>=0,b||I(a,4,this.length),Y.read(this,a,!0,23,4)},f.prototype.readFloatBE=function(a,b){return a>>>=0,b||I(a,4,this.length),Y.read(this,a,!1,23,4)},f.prototype.readDoubleLE=function(a,b){return a>>>=0,b||I(a,8,this.length),Y.read(this,a,!0,52,8)},f.prototype.readDoubleBE=function(a,b){return a>>>=0,b||I(a,8,this.length),Y.read(this,a,!1,52,8)},f.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){var e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}var f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},f.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){var e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}var f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},f.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,255,0),this[b]=255&a,b+1},f.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},f.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},f.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},f.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},f.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b>>>=0,!d){var e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},f.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},f.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},f.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},f.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},f.prototype.writeFloatLE=function(a,b,c){return L(this,a,b,!0,c)},f.prototype.writeFloatBE=function(a,b,c){return L(this,a,b,!1,c)},f.prototype.writeDoubleLE=function(a,b,c){return M(this,a,b,!0,c)},f.prototype.writeDoubleBE=function(a,b,c){return M(this,a,b,!1,c)},f.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,f=d-c;if(this===a&&c<b&&b<d)for(e=f-1;e>=0;--e)a[e+b]=this[e+c];else if(f<1e3)for(e=0;e<f;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+f),b);return f},f.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),1===a.length){var e=a.charCodeAt(0);e<256&&(a=e)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!f.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof a&&(a=255&a);if(b<0||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);var g;if("number"==typeof a)for(g=b;g<c;++g)this[g]=a;else{var h=f.isBuffer(a)?a:new f(a,d),i=h.length;for(g=0;g<c-b;++g)this[g+b]=h[g%i]}return this};var _=/[^+\/0-9A-Za-z-_]/g},{"base64-js":4,ieee754:17}],6:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("notepack.io"),e=a("signals.js"),f=a("./Protocol"),g=a("./Room"),h=a("./Connection"),i=function(){function a(a){var b=this;this.onOpen=new e.Signal,this.onMessage=new e.Signal,this.onClose=new e.Signal,this.onError=new e.Signal,this.rooms={},this.connectingRooms={},this.joinRequestId=0,this.storage=window.localStorage,this.hostname=a;var c=this.storage.getItem("colyseusid");c instanceof Promise?c.then(function(a){return b.createConnection(a)}):this.createConnection(c)}return a.prototype.createConnection=function(a){var b=this;this.id=a||"",this.connection=new h.Connection(this.hostname+"/?colyseusid="+this.id),this.connection.onmessage=this.onMessageCallback.bind(this),this.connection.onclose=function(a){return b.onClose.dispatch()},this.connection.onerror=function(a){return b.onError.dispatch()},this.connection.onopen=function(){b.id&&b.onOpen.dispatch()}},a.prototype.join=function(a,b){var c=this;void 0===b&&(b={}),b.requestId=++this.joinRequestId;var d=new g.Room(a);return d.onLeave.addOnce(function(){delete c.rooms[d.id],delete c.connectingRooms[b.requestId]}),this.connectingRooms[b.requestId]=d,this.connection.send([f.Protocol.JOIN_ROOM,a,b]),d},a.prototype.onMessageCallback=function(a){var b=d.decode(new Uint8Array(a.data)),c=b[0];if(c==f.Protocol.USER_ID)this.storage.setItem("colyseusid",b[1]),this.id=b[1],this.onOpen.dispatch();else if(c==f.Protocol.JOIN_ROOM){var e=b[2],g=this.connectingRooms[e];if(!g)return;this.rooms[g.id]=g,g.id=b[1],g.connect(new h.Connection(this.hostname+"/"+g.id+"?colyseusid="+this.id)),delete this.connectingRooms[e]}else c==f.Protocol.JOIN_ERROR?this.onError.dispatch(b[2]):this.onMessage.dispatch(b)},a}();c.Client=i},{"./Connection":7,"./Protocol":8,"./Room":9,"notepack.io":20,"signals.js":21}],7:[function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(c,"__esModule",{value:!0});var e=a("@gamestdio/websocket"),f=a("notepack.io"),g=function(a){function b(b,c){void 0===c&&(c={});var d=a.call(this,b)||this;return d._enqueuedCalls=[],d.binaryType="arraybuffer",d}return d(b,a),b.prototype.onOpenCallback=function(b){if(a.prototype.onOpenCallback.call(this),this._enqueuedCalls.length>0)for(var c=0;c<this._enqueuedCalls.length;c++){var d=this._enqueuedCalls[c],e=d[0],f=d[1];this[e].apply(this,f)}},b.prototype.send=function(b){return this.ws.readyState==WebSocket.OPEN?a.prototype.send.call(this,f.encode(b)):void this._enqueuedCalls.push(["send",[b]])},b}(e["default"]);c.Connection=g},{"@gamestdio/websocket":3,"notepack.io":20}],8:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d;!function(a){a[a.USER_ID=1]="USER_ID",a[a.JOIN_ROOM=10]="JOIN_ROOM",a[a.JOIN_ERROR=11]="JOIN_ERROR",a[a.LEAVE_ROOM=12]="LEAVE_ROOM",a[a.ROOM_DATA=13]="ROOM_DATA",a[a.ROOM_STATE=14]="ROOM_STATE",a[a.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",a[a.BAD_REQUEST=50]="BAD_REQUEST"}(d=c.Protocol||(c.Protocol={}))},{}],9:[function(a,b,c){(function(b){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(c,"__esModule",{value:!0});var e=a("signals.js"),f=a("@gamestdio/clock"),g=a("delta-listener"),h=a("notepack.io"),i=a("fossil-delta"),j=a("./Protocol"),k=function(a){function c(b){var c=a.call(this,{})||this;return c.clock=new f,c.remoteClock=new f,c.onJoin=new e.Signal,c.onUpdate=new e.Signal,c.onData=new e.Signal,c.onError=new e.Signal,c.onLeave=new e.Signal,c.id=null,c.name=b,c.onLeave.add(function(){return c.removeAllListeners()}),c}return d(c,a),c.prototype.connect=function(a){var b=this;this.connection=a,this.connection.onmessage=this.onMessageCallback.bind(this),this.connection.onclose=function(a){return b.onLeave.dispatch(a)}},c.prototype.onMessageCallback=function(a){var b=h.decode(new Uint8Array(a.data)),c=b[0];if(c==j.Protocol.JOIN_ROOM)this.sessionId=b[1],this.onJoin.dispatch();else if(c==j.Protocol.JOIN_ERROR)this.onError.dispatch(b[2]);else if(c==j.Protocol.ROOM_STATE){var d=b[2],e=b[3],f=b[4];this.setState(d,e,f)}else c==j.Protocol.ROOM_STATE_PATCH?this.patch(b[2]):c==j.Protocol.ROOM_DATA?this.onData.dispatch(b[2]):c==j.Protocol.LEAVE_ROOM&&this.leave()},c.prototype.setState=function(a,b,c){var d=h.decode(a);this.set(d),this._previousState=new Uint8Array(a),b&&c&&(this.remoteClock.currentTime=b,this.remoteClock.elapsedTime=c),this.clock.start(),this.onUpdate.dispatch(d)},c.prototype.patch=function(a){var c=Date.now();this.lastPatchTime&&(this.ping=c-this.lastPatchTime),this.lastPatchTime=c,this.clock.tick(),this._previousState=b.from(i.apply(this._previousState,a)),this.set(h.decode(this._previousState)),this.onUpdate.dispatch(this.data)},c.prototype.leave=function(){this.connection?this.connection.close():this.onLeave.dispatch()},c.prototype.send=function(a){this.connection.send([j.Protocol.ROOM_DATA,this.id,a])},c.prototype.removeAllListeners=function(){a.prototype.removeAllListeners.call(this),this.onJoin.removeAll(),this.onUpdate.removeAll(),this.onData.removeAll(),this.onError.removeAll(),this.onLeave.removeAll()},c}(g.DeltaContainer);c.Room=k}).call(this,a("buffer").Buffer)},{"./Protocol":8,"@gamestdio/clock":1,buffer:5,"delta-listener":15,"fossil-delta":16,"notepack.io":20,"signals.js":21}],10:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./Client");c.Client=d.Client;var e=a("./Protocol");c.Protocol=e.Protocol;var f=a("./Room");c.Room=f.Room;var g=a("./sync/helpers");c.initializeSync=g.initializeSync,c.sync=g.sync,c.syncMap=g.syncMap,c.syncObject=g.syncObject,c.syncVar=g.syncVar,c.syncList=g.syncList,c.key=g.key,c.room=g.room,c.listen=g.listen},{"./Client":6,"./Protocol":8,"./Room":9,"./sync/helpers":11}],11:[function(a,b,c){"use strict";function d(a,b){m(a,b,b)}function e(a,b,c){return k(a,"map",b,c)}function f(a,b,c){return k(a,"object",b,c)}function g(a,b,c){return k(a,"var")}function h(a,b,c){return k(a,"list",b,c)}function i(){return k(void 0,"key")}function j(){return function(a,b){Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:function(){return a.constructor.$room}})}}function k(a,b,c,d){
return void 0===b&&(b="var"),function(e,f){e.constructor.properties||(e.constructor.properties={});var g=f;"string"==typeof a&&(g=f,f=a,a=void 0),e.constructor.properties[f]={type:a,holderType:b,addCallback:c,removeCallback:d,variable:g}}}function l(a,b){return function(c,d,e){c.constructor.listeners||(c.constructor.listeners={}),c.constructor.listeners[a]={methodName:d,op:b}}}function m(a,b,c,d){n(b.constructor.properties||b.properties,a,b,c,d),o(b.constructor.listeners,a,b)}function n(a,b,c,d,e){if(a){Object.defineProperty(c,"$room",{value:b,enumerable:!1,configurable:!0,writable:!0}),c.$room=b;for(var f in a){var g=a[f],h=e?e+"/"+f:f;if("map"===g.holderType&&(h+="/:id"),q[h])return;q[h]=!0;var i=p[g.holderType+"Listener"];i&&(b.listen(h,i(b,g,c,d,h)),g.type&&m(b,g.type,c,h))}}}function o(a,b,c){if(a){var d=function(d){var e=a[d],f=e.op?function(a){a.operation===e.op&&c[e.methodName](a)}:c[e.methodName].bind(c);b.listen(d,f)};for(var e in a)d(e)}}Object.defineProperty(c,"__esModule",{value:!0});var p=a("./listeners");c.initializeSync=d,c.syncMap=e,c.syncObject=f,c.syncVar=g,c.syncList=h,c.key=i,c.room=j,c.sync=k,c.listen=l;var q={};c.createBindings=m,c.bindListeners=o},{"./listeners":12}],12:[function(a,b,c){"use strict";function d(a,b,c,d,e){"var"===b.holderType?a[c]=d:"key"===b.holderType&&(a[c]=e)}function e(a,b,c,e){for(var f in b)d(a,b[f],f,c[f],e)}function f(a,b,c){void 0===c&&(c=0);for(var d=a,e=0,f=b.length;e<f+c&&"object"==typeof d[b[e]];e++)d=d[b[e]];return d}function g(a,b,c,d,e){return function(e){if("add"===e.operation){var f=new b.type;for(var g in e.value)f[g]=e.value[g];j.bindListeners(b.type.listeners,a,f),c[b.variable]=f,b.addCallback&&b.addCallback.call(d,d,f,e)}else"replace"===e.operation?d[this.rawRules[0]][b.variable]=e.value:"remove"===e.operation&&(b.removeCallback&&b.removeCallback.call(d,d,c[b.variable][e.path.id],e),delete c[b.variable])}}function h(a,b,c,g,h){return function(h){var i=f(g,h.rawPath);if("add"===h.operation){var k=new b.type;Object.defineProperty(k,"__mapParent",{value:f(g,h.rawPath,-2),enumerable:!1,configurable:!0,writable:!0}),j.bindListeners(b.type.listeners,a,k),i[h.path.id]=k,e(k,b.type.properties,h.value,h.path.id),b.addCallback&&b.addCallback.call(k.__mapParent,k.__mapParent,k,h)}else"replace"===h.operation?d(i,b,b.variable,h.value):"remove"===h.operation&&(b.removeCallback&&b.removeCallback.call(i.__mapParent,i.__mapParent,i,h),delete c[b.variable][h.path.id])}}function i(a,b,c,e,g){return function(a){var c=f(e,a.rawPath);"remove"!==a.operation?d(c,b,b.variable,a.value):"remove"===a.operation&&delete c[b.variable]}}Object.defineProperty(c,"__esModule",{value:!0});var j=a("./helpers");c.objectListener=g,c.mapListener=h,c.varListener=i},{"./helpers":11}],13:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./compare"),e=function(){function a(a){this.listeners=[],this.matcherPlaceholders={":id":/^([a-zA-Z0-9\-_]+)$/,":number":/^([0-9]+)$/,":string":/^(\w+)$/,":axis":/^([xyz])$/,":*":/(.*)/},this.data=a,this.reset()}return a.prototype.set=function(a){var b=d.compare(this.data,a);return this.checkPatches(b),this.data=a,b},a.prototype.registerPlaceholder=function(a,b){this.matcherPlaceholders[a]=b},a.prototype.listen=function(a,b){var c,d=this;"function"==typeof a?(c=[],b=a):c=a.split("/"),b.length>1;var e={callback:b,rawRules:c,rules:c.map(function(a){return"string"==typeof a?0===a.indexOf(":")?d.matcherPlaceholders[a]||d.matcherPlaceholders[":*"]:new RegExp("^"+a+"$"):a})};return 0===c.length?this.defaultListener=e:this.listeners.push(e),e},a.prototype.removeListener=function(a){for(var b=this.listeners.length-1;b>=0;b--)this.listeners[b]===a&&this.listeners.splice(b,1)},a.prototype.removeAllListeners=function(){this.reset()},a.prototype.checkPatches=function(a){for(var b=a.length-1;b>=0;b--){for(var c=!1,d=0,e=this.listeners.length;d<e;d++){var f=this.listeners[d],g=f&&this.getPathVariables(a[b],f);g&&(f.callback({path:g,rawPath:a[b].path,operation:a[b].operation,value:a[b].value}),c=!0)}!c&&this.defaultListener&&this.defaultListener.callback(a[b])}},a.prototype.getPathVariables=function(a,b){if(a.path.length!==b.rules.length)return!1;for(var c={},d=0,e=b.rules.length;d<e;d++){var f=a.path[d].match(b.rules[d]);if(!f||0===f.length||f.length>2)return!1;":"===b.rawRules[d].substr(0,1)&&(c[b.rawRules[d].substr(1)]=f[1])}return c},a.prototype.reset=function(){this.listeners=[]},a}();c.DeltaContainer=e},{"./compare":14}],14:[function(a,b,c){"use strict";function d(a,b){var c=[];return g(a,b,c,[]),c}function e(a,b){var c=a.slice();return c.push(b),c}function f(a){if(Array.isArray(a)){for(var b=new Array(a.length),c=0;c<b.length;c++)b[c]=""+c;return b}if(Object.keys)return Object.keys(a);var d=[];for(var e in a)a.hasOwnProperty(e)&&d.push(e);return d}function g(a,b,c,d){for(var h=f(b),i=f(a),j=!1,k=!1,l=i.length-1;l>=0;l--){var m=i[l],n=a[m];if(!b.hasOwnProperty(m)||void 0===b[m]&&void 0!==n&&Array.isArray(b)===!1)c.push({operation:"remove",path:e(d,m)}),k=!0;else{var o=b[m];"object"==typeof n&&null!=n&&"object"==typeof o&&null!=o?g(n,o,c,e(d,m)):n!==o&&(j=!0,c.push({operation:"replace",path:e(d,m),value:o}))}}if(k||h.length!=i.length)for(var l=0;l<h.length;l++){var m=h[l];if(!a.hasOwnProperty(m)&&void 0!==b[m]){var o=b[m],p=e(d,m);"object"==typeof o&&null!=o&&g({},o,c,p),c.push({operation:"add",path:p,value:o})}}}Object.defineProperty(c,"__esModule",{value:!0}),c.compare=d},{}],15:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./DeltaContainer");c.DeltaContainer=d.DeltaContainer},{"./DeltaContainer":13}],16:[function(a,b,c){!function(a,c){"undefined"!=typeof b&&b.exports?b.exports=c():a.fossilDelta=c()}(this,function(){"use strict";function a(){this.a=0,this.b=0,this.i=0,this.z=new Array(g)}function b(a){this.a=a,this.pos=0}function c(){this.a=[]}function d(a){var b,c;for(b=1,c=64;a>=c;b++,c<<=6);return b}function e(a){for(var b=0,c=0,d=0,e=0,f=0,g=a.length;g>=16;)b=b+a[f+0]|0,c=c+a[f+1]|0,d=d+a[f+2]|0,e=e+a[f+3]|0,b=b+a[f+4]|0,c=c+a[f+5]|0,d=d+a[f+6]|0,e=e+a[f+7]|0,b=b+a[f+8]|0,c=c+a[f+9]|0,d=d+a[f+10]|0,e=e+a[f+11]|0,b=b+a[f+12]|0,c=c+a[f+13]|0,d=d+a[f+14]|0,e=e+a[f+15]|0,f+=16,g-=16;for(;g>=4;)b=b+a[f+0]|0,c=c+a[f+1]|0,d=d+a[f+2]|0,e=e+a[f+3]|0,f+=4,g-=4;switch(e=((e+(d<<8)|0)+(c<<16)|0)+(b<<24)|0,g){case 3:e=e+(a[f+2]<<8)|0;case 2:e=e+(a[f+1]<<16)|0;case 1:e=e+(a[f+0]<<24)|0}return e>>>0}var f={},g=16;a.prototype.init=function(a,b){var c,d,e=0,f=0;for(c=0;c<g;c++)d=a[b+c],e=e+d&65535,f=f+(g-c)*d&65535,this.z[c]=d;this.a=65535&e,this.b=65535&f,this.i=0},a.prototype.next=function(a){var b=this.z[this.i];this.z[this.i]=a,this.i=this.i+1&g-1,this.a=this.a-b+a&65535,this.b=this.b-g*b+this.a&65535},a.prototype.value=function(){return(65535&this.a|(65535&this.b)<<16)>>>0};var h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz~".split("").map(function(a){return a.charCodeAt(0)}),i=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,36,-1,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,-1,-1,-1,63,-1];return b.prototype.haveBytes=function(){return this.pos<this.a.length},b.prototype.getByte=function(){var a=this.a[this.pos];if(this.pos++,this.pos>this.a.length)throw new RangeError("out of bounds");return a},b.prototype.getChar=function(){return String.fromCharCode(this.getByte())},b.prototype.getInt=function(){for(var a,b=0;this.haveBytes()&&(a=i[127&this.getByte()])>=0;)b=(b<<6)+a;return this.pos--,b>>>0},c.prototype.toArray=function(){return this.a},c.prototype.putByte=function(a){this.a.push(255&a)},c.prototype.putChar=function(a){this.putByte(a.charCodeAt(0))},c.prototype.putInt=function(a){var b,c,d=[];if(0===a)return void this.putChar("0");for(b=0;a>0;b++,a>>>=6)d.push(h[63&a]);for(c=b-1;c>=0;c--)this.putByte(d[c])},c.prototype.putArray=function(a,b,c){for(var d=b;d<c;d++)this.a.push(a[d])},f.create=function(b,f){var h,i=new c,j=f.length,k=b.length,l=-1;if(i.putInt(j),i.putChar("\n"),k<=g)return i.putInt(j),i.putChar(":"),i.putArray(f,0,j),i.putInt(e(f)),i.putChar(";"),i.toArray();var m=Math.ceil(k/g),n=new Array(m),o=new Array(m);for(h=0;h<n.length;h++)n[h]=-1;for(h=0;h<o.length;h++)o[h]=-1;var p,q=new a;for(h=0;h<k-g;h+=g)q.init(b,h),p=q.value()%m,n[h/g]=o[p],o[p]=h/g;for(var r,s,t,u,v,w=0;w+g<j;)for(u=0,v=0,q.init(f,w),h=0,t=0;;){var x=250;for(p=q.value()%m,s=o[p];s>=0&&x-- >0;){var y,z,A,B,C,D,E,F;for(r=s*g,B=0,D=r,E=w+h;D<k&&E<j&&b[D]===f[E];B++,D++,E++);for(B--,C=1;C<r&&C<=h&&b[r-C]===f[w+h-C];C++);C--,z=r-C,y=B+C+1,A=h-C,F=d(h-C)+d(y)+d(z)+3,y>=F&&y>t&&(t=y,u=r-C,v=A),s=n[s]}if(t>0){v>0&&(i.putInt(v),i.putChar(":"),i.putArray(f,w,w+v),w+=v),w+=t,i.putInt(t),i.putChar("@"),i.putInt(u),i.putChar(","),u+t-1>l&&(l=u+t-1),t=0;break}if(w+h+g>=j){i.putInt(j-w),i.putChar(":"),i.putArray(f,w,w+j-w),w=j;break}q.next(f[w+h+g]),h++}return w<j&&(i.putInt(j-w),i.putChar(":"),i.putArray(f,w,w+j-w)),i.putInt(e(f)),i.putChar(";"),i.toArray()},f.outputSize=function(a){var c=new b(a),d=c.getInt();if("\n"!==c.getChar())throw new Error("size integer not terminated by '\\n'");return d},f.apply=function(a,d,f){var g,h=0,i=new b(d),j=a.length,k=d.length;if(g=i.getInt(),"\n"!==i.getChar())throw new Error("size integer not terminated by '\\n'");for(var l=new c;i.haveBytes();){var m,n;switch(m=i.getInt(),i.getChar()){case"@":if(n=i.getInt(),i.haveBytes()&&","!==i.getChar())throw new Error("copy command not terminated by ','");if(h+=m,h>g)throw new Error("copy exceeds output file size");if(n+m>j)throw new Error("copy extends past end of input");l.putArray(a,n,n+m);break;case":":if(h+=m,h>g)throw new Error("insert command gives an output larger than predicted");if(m>k)throw new Error("insert count exceeds size of delta");l.putArray(i.a,i.pos,i.pos+m),i.pos+=m;break;case";":var o=l.toArray();if((!f||f.verifyChecksum!==!1)&&m!==e(o))throw new Error("bad checksum");if(h!==g)throw new Error("generated size does not match predicted size");return o;default:throw new Error("unknown delta operator")}}throw new Error("unterminated delta")},f})},{}],17:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],18:[function(a,b,c){"use strict";function d(a){if(this.offset=0,a instanceof ArrayBuffer)this.buffer=a,this.view=new DataView(this.buffer);else{if(!ArrayBuffer.isView(a))throw new Error("Invalid argument");this.buffer=a.buffer,this.view=new DataView(this.buffer,a.byteOffset,a.byteLength)}}function e(a,b,c){for(var d="",e=0,f=b,g=b+c;f<g;f++){var h=a.getUint8(f);if(0!==(128&h))if(192!==(224&h))if(224!==(240&h)){if(240!==(248&h))throw new Error("Invalid byte "+h.toString(16));e=(7&h)<<18|(63&a.getUint8(++f))<<12|(63&a.getUint8(++f))<<6|(63&a.getUint8(++f))<<0,e>=65536?(e-=65536,d+=String.fromCharCode((e>>>10)+55296,(1023&e)+56320)):d+=String.fromCharCode(e)}else d+=String.fromCharCode((15&h)<<12|(63&a.getUint8(++f))<<6|(63&a.getUint8(++f))<<0);else d+=String.fromCharCode((15&h)<<6|63&a.getUint8(++f));else d+=String.fromCharCode(h)}return d}function f(a){var b=new d(a),c=b.parse();if(b.offset!==a.byteLength)throw new Error(a.byteLength-b.offset+" trailing bytes");return c}d.prototype.array=function(a){for(var b=new Array(a),c=0;c<a;c++)b[c]=this.parse();return b},d.prototype.map=function(a){for(var b="",c={},d=0;d<a;d++)b=this.parse(),c[b]=this.parse();return c},d.prototype.str=function(a){var b=e(this.view,this.offset,a);return this.offset+=a,b},d.prototype.bin=function(a){var b=this.buffer.slice(this.offset,this.offset+a);return this.offset+=a,b},d.prototype.parse=function(){var a,b=this.view.getUint8(this.offset++),c=0,d=0,e=0,f=0;if(b<192)return b<128?b:b<144?this.map(15&b):b<160?this.array(15&b):this.str(31&b);if(b>223)return(255-b+1)*-1;switch(b){case 192:return null;case 194:return!1;case 195:return!0;case 196:return c=this.view.getUint8(this.offset),this.offset+=1,this.bin(c);case 197:return c=this.view.getUint16(this.offset),this.offset+=2,this.bin(c);case 198:return c=this.view.getUint32(this.offset),this.offset+=4,this.bin(c);case 199:return c=this.view.getUint8(this.offset),d=this.view.getInt8(this.offset+1),this.offset+=2,[d,this.bin(c)];case 200:return c=this.view.getUint16(this.offset),d=this.view.getInt8(this.offset+2),this.offset+=3,[d,this.bin(c)];case 201:return c=this.view.getUint32(this.offset),d=this.view.getInt8(this.offset+4),this.offset+=5,[d,this.bin(c)];case 202:return a=this.view.getFloat32(this.offset),this.offset+=4,a;case 203:return a=this.view.getFloat64(this.offset),this.offset+=8,a;case 204:return a=this.view.getUint8(this.offset),this.offset+=1,a;case 205:return a=this.view.getUint16(this.offset),this.offset+=2,a;case 206:return a=this.view.getUint32(this.offset),this.offset+=4,a;case 207:return e=this.view.getUint32(this.offset)*Math.pow(2,32),f=this.view.getUint32(this.offset+4),this.offset+=8,e+f;case 208:return a=this.view.getInt8(this.offset),this.offset+=1,a;case 209:return a=this.view.getInt16(this.offset),this.offset+=2,a;case 210:return a=this.view.getInt32(this.offset),this.offset+=4,a;case 211:return e=this.view.getInt32(this.offset)*Math.pow(2,32),f=this.view.getUint32(this.offset+4),this.offset+=8,e+f;case 212:return d=this.view.getInt8(this.offset),this.offset+=1,0===d?void(this.offset+=1):[d,this.bin(1)];case 213:return d=this.view.getInt8(this.offset),this.offset+=1,[d,this.bin(2)];case 214:return d=this.view.getInt8(this.offset),this.offset+=1,[d,this.bin(4)];case 215:return d=this.view.getInt8(this.offset),this.offset+=1,0===d?(e=this.view.getInt32(this.offset)*Math.pow(2,32),f=this.view.getUint32(this.offset+4),this.offset+=8,new Date(e+f)):[d,this.bin(8)];case 216:return d=this.view.getInt8(this.offset),this.offset+=1,[d,this.bin(16)];case 217:return c=this.view.getUint8(this.offset),this.offset+=1,this.str(c);case 218:return c=this.view.getUint16(this.offset),this.offset+=2,this.str(c);case 219:return c=this.view.getUint32(this.offset),this.offset+=4,this.str(c);case 220:return c=this.view.getUint16(this.offset),this.offset+=2,this.array(c);case 221:return c=this.view.getUint32(this.offset),this.offset+=4,this.array(c);case 222:return c=this.view.getUint16(this.offset),this.offset+=2,this.map(c);case 223:return c=this.view.getUint32(this.offset),this.offset+=4,this.map(c)}throw new Error("Could not parse")},b.exports=f},{}],19:[function(a,b,c){"use strict";function d(a,b,c){for(var d=0,e=0,f=c.length;e<f;e++)d=c.charCodeAt(e),d<128?a.setUint8(b++,d):d<2048?(a.setUint8(b++,192|d>>6),a.setUint8(b++,128|63&d)):d<55296||d>=57344?(a.setUint8(b++,224|d>>12),a.setUint8(b++,128|d>>6&63),a.setUint8(b++,128|63&d)):(e++,d=65536+((1023&d)<<10|1023&c.charCodeAt(e)),a.setUint8(b++,240|d>>18),a.setUint8(b++,128|d>>12&63),a.setUint8(b++,128|d>>6&63),a.setUint8(b++,128|63&d))}function e(a){for(var b=0,c=0,d=0,e=a.length;d<e;d++)b=a.charCodeAt(d),b<128?c+=1:b<2048?c+=2:b<55296||b>=57344?c+=3:(d++,c+=4);return c}function f(a,b,c){var d=typeof c,g=0,h=0,i=0,j=0,k=0,l=0;if("string"===d){if(k=e(c),k<32)a.push(160|k),l=1;else if(k<256)a.push(217,k),l=2;else if(k<65536)a.push(218,k>>8,k),l=3;else{if(!(k<4294967296))throw new Error("String too long");a.push(219,k>>24,k>>16,k>>8,k),l=5}return b.push({str:c,length:k,offset:a.length}),l+k}if("number"===d)return Math.floor(c)===c&&isFinite(c)?c>=0?c<128?(a.push(c),1):c<256?(a.push(204,c),2):c<65536?(a.push(205,c>>8,c),3):c<4294967296?(a.push(206,c>>24,c>>16,c>>8,c),5):(i=c/Math.pow(2,32)>>0,j=c>>>0,a.push(207,i>>24,i>>16,i>>8,i,j>>24,j>>16,j>>8,j),9):c>=-32?(a.push(c),1):c>=-128?(a.push(208,c),2):c>=-32768?(a.push(209,c>>8,c),3):c>=-2147483648?(a.push(210,c>>24,c>>16,c>>8,c),5):(i=Math.floor(c/Math.pow(2,32)),j=c>>>0,a.push(211,i>>24,i>>16,i>>8,i,j>>24,j>>16,j>>8,j),9):(a.push(203),b.push({"float":c,length:8,offset:a.length}),9);if("object"===d){if(null===c)return a.push(192),1;if(Array.isArray(c)){if(k=c.length,k<16)a.push(144|k),l=1;else if(k<65536)a.push(220,k>>8,k),l=3;else{if(!(k<4294967296))throw new Error("Array too large");a.push(221,k>>24,k>>16,k>>8,k),l=5}for(g=0;g<k;g++)l+=f(a,b,c[g]);return l}if(c instanceof Date){var m=c.getTime();return i=Math.floor(m/Math.pow(2,32)),j=m>>>0,a.push(215,0,i>>24,i>>16,i>>8,i,j>>24,j>>16,j>>8,j),10}if(c instanceof ArrayBuffer){if(k=c.byteLength,k<256)a.push(196,k),l=2;else if(k<65536)a.push(197,k>>8,k),l=3;else{if(!(k<4294967296))throw new Error("Buffer too large");a.push(198,k>>24,k>>16,k>>8,k),l=5}return b.push({bin:c,length:k,offset:a.length}),l+k}if("function"==typeof c.toJSON)return f(a,b,c.toJSON());var n=[],o="",p=Object.keys(c);for(g=0,h=p.length;g<h;g++)o=p[g],"function"!=typeof c[o]&&n.push(o);if(k=n.length,k<16)a.push(128|k),l=1;else if(k<65536)a.push(222,k>>8,k),l=3;else{if(!(k<4294967296))throw new Error("Object too large");a.push(223,k>>24,k>>16,k>>8,k),l=5}for(g=0;g<k;g++)o=n[g],l+=f(a,b,o),l+=f(a,b,c[o]);return l}if("boolean"===d)return a.push(c?195:194),1;if("undefined"===d)return a.push(212,0,0),3;throw new Error("Could not encode")}function g(a){var b=[],c=[],e=f(b,c,a),g=new ArrayBuffer(e),h=new DataView(g),i=0,j=0,k=-1;c.length>0&&(k=c[0].offset);for(var l,m=0,n=0,o=0,p=b.length;o<p;o++)if(h.setUint8(j+o,b[o]),o+1===k){if(l=c[i],m=l.length,n=j+k,l.bin)for(var q=new Uint8Array(l.bin),r=0;r<m;r++)h.setUint8(n+r,q[r]);else l.str?d(h,n,l.str):void 0!==l["float"]&&h.setFloat64(n,l["float"]);i++,j+=m,c[i]&&(k=c[i].offset)}return g}b.exports=g},{}],20:[function(a,b,c){c.encode=a("./encode"),c.decode=a("./decode")},{"./decode":18,"./encode":19}],21:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./org/osflash/signals/DeluxeSignal");c.DeluxeSignal=d.DeluxeSignal;var e=a("./org/osflash/signals/events/GenericEvent");c.GenericEvent=e.GenericEvent;var f=a("./org/osflash/signals/IOnceSignal");c.IOnceSignal=f.IOnceSignal;var g=a("./org/osflash/signals/IPrioritySignal");c.IPrioritySignal=g.IPrioritySignal;var h=a("./org/osflash/signals/ISignal");c.ISignal=h.ISignal;var i=a("./org/osflash/signals/ISlot");c.ISlot=i.ISlot;var j=a("./org/osflash/signals/MonoSignal");c.MonoSignal=j.MonoSignal;var k=a("./org/osflash/signals/OnceSignal");c.OnceSignal=k.OnceSignal;var l=a("./org/osflash/signals/PrioritySignal");c.PrioritySignal=l.PrioritySignal;var m=a("./org/osflash/signals/Promise");c.Promise=m.Promise;var n=a("./org/osflash/signals/Signal");c.Signal=n.Signal;var o=a("./org/osflash/signals/Slot");c.Slot=o.Slot;var p=a("./org/osflash/signals/SlotList");c.SlotList=p.SlotList},{"./org/osflash/signals/DeluxeSignal":22,"./org/osflash/signals/IOnceSignal":23,"./org/osflash/signals/IPrioritySignal":24,"./org/osflash/signals/ISignal":25,"./org/osflash/signals/ISlot":26,"./org/osflash/signals/MonoSignal":27,"./org/osflash/signals/OnceSignal":28,"./org/osflash/signals/PrioritySignal":29,"./org/osflash/signals/Promise":30,"./org/osflash/signals/Signal":31,"./org/osflash/signals/Slot":32,"./org/osflash/signals/SlotList":33,"./org/osflash/signals/events/GenericEvent":34}],22:[function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(c,"__esModule",{value:!0});var e=a("./PrioritySignal"),f=function(a){function b(b){void 0===b&&(b=null);for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];var e=this;return c=1==c.length&&c[0]instanceof Array?c[0]:c,e=a.call(this,c)||this,e._target=b,e}return d(b,a),Object.defineProperty(b.prototype,"target",{get:function(){return this._target},set:function(a){a!=this._target&&(this.removeAll(),this._target=a)},enumerable:!0,configurable:!0}),b.prototype.dispatch=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=this._valueClasses.length,d=a.length;if(d<c)throw new Error("Incorrect number of arguments. Expected at least "+c+" but received "+d+".");for(var e=0;e<c;e++)if(null!==a[e]&&a[e].constructor!==this._valueClasses[e])throw new Error("Value object <"+a[e]+"> is not an instance of <"+this._valueClasses[e]+">.");var f=a[0];f&&(f.target&&(f=f.clone(),a[0]=f),f.target=this.target,f.currentTarget=this.target,f.signal=this);for(var g=this.slots;g.nonEmpty;)g.head.execute(a),g=g.tail;if(f&&f.bubbles)for(var h=this.target;h&&h.hasOwnProperty("parent")&&(h=h.parent)&&(void 0===h.onEventBubbled||(f.currentTarget=h,!h.onEventBubbled(f))););},b}(e.PrioritySignal);c.DeluxeSignal=f},{"./PrioritySignal":29}],23:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.IOnceSignal=Symbol("IOnceSignal")},{}],24:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.IPrioritySignal=Symbol("IPrioritySignal")},{}],25:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ISignal=Symbol("ISignal")},{}],26:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ISlot=Symbol("ISlot")},{}],27:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./Slot"),e=function(){function a(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.valueClasses=1==a.length&&a[0]instanceof Array?a[0]:a}return Object.defineProperty(a.prototype,"valueClasses",{get:function(){return this._valueClasses},set:function(a){this._valueClasses=a?a.slice():[];for(var b=this._valueClasses.length;b--;)if(!(this._valueClasses[b]instanceof Object))throw new Error("Invalid valueClasses argument: item at index "+b+" should be a Class but was:<"+this._valueClasses[b]+">."+this._valueClasses[b])},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numListeners",{get:function(){return this.slot?1:0},enumerable:!0,configurable:!0}),a.prototype.add=function(a){return this.registerListener(a)},a.prototype.addOnce=function(a){return this.registerListener(a,!0)},a.prototype.remove=function(a){if(this.slot&&this.slot.listener==a){var b=this.slot;return this.slot=null,b}return null},a.prototype.removeAll=function(){this.slot&&this.slot.remove()},a.prototype.dispatch=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=this._valueClasses.length,d=a.length;if(d<c)throw new Error("Incorrect number of arguments. Expected at least "+c+" but received "+d+".");for(var e=0;e<c;e++)if(!(null===a[e]||a[e]instanceof this._valueClasses[e]||a[e].constructor===this._valueClasses[e]))throw new Error("Value object <"+a[e]+"> is not an instance of <"+this._valueClasses[e]+">.");this.slot&&this.slot.execute(a)},a.prototype.registerListener=function(a,b){if(void 0===b&&(b=!1),this.slot)throw new Error("You cannot add or addOnce with a listener already added, remove the current listener first.");return this.slot=new d.Slot(a,this,b)},a}();c.MonoSignal=e},{"./Slot":32}],28:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("./SlotList"),e=a("./Slot"),f=function(){function a(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.slots=d.SlotList.NIL,this.valueClasses=1==a.length&&a[0]instanceof Array?a[0]:a}return Object.defineProperty(a.prototype,"valueClasses",{get:function(){return this._valueClasses},set:function(a){this._valueClasses=a?a.slice():[];for(var b=this._valueClasses.length;b--;)if(!(this._valueClasses[b]instanceof Object))throw new Error("Invalid valueClasses argument: item at index "+b+" should be a Class but was:<"+this._valueClasses[b]+">."+this._valueClasses[b])},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numListeners",{get:function(){return this.slots.length},enumerable:!0,configurable:!0}),a.prototype.addOnce=function(a){return this.registerListener(a,!0)},a.prototype.remove=function(a){var b=this.slots.find(a);return b?(this.slots=this.slots.filterNot(a),b):null},a.prototype.removeAll=function(){this.slots=d.SlotList.NIL},a.prototype.dispatch=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=this._valueClasses.length,d=a.length;if(d<c)throw new Error("Incorrect number of arguments. Expected at least "+c+" but received "+d+".");for(var e=0;e<c;e++)if(!(null===a[e]||a[e]instanceof this._valueClasses[e]||a[e].constructor===this._valueClasses[e]))throw new Error("Value object <"+a[e]+"> is not an instance of <"+this._valueClasses[e]+">.");var f=this.slots;if(f.nonEmpty)for(;f.nonEmpty;)f.head.execute(a),f=f.tail},a.prototype.registerListener=function(a,b){if(void 0===b&&(b=!1),this.registrationPossible(a,b)){var c=new e.Slot(a,this,b);return this.slots=this.slots.prepend(c),c}return this.slots.find(a)},a.prototype.registrationPossible=function(a,b){if(!this.slots.nonEmpty)return!0;var c=this.slots.find(a);if(!c)return!0;if(c.once!=b)throw new Error("You cannot addOnce() then add() the same listener without removing the relationship first.");return!1},a}();c.OnceSignal=f},{"./Slot":32,"./SlotList":33}],29:[function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(c,"__esModule",{value:!0});var e=a("./Signal"),f=a("./Slot"),g=function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=this;return b=1==b.length&&b[0]instanceof Array?b[0]:b,d=a.call(this,b)||this}return d(b,a),b.prototype.addWithPriority=function(a,b){return void 0===b&&(b=0),this.registerListenerWithPriority(a,!1,b)},b.prototype.addOnceWithPriority=function(a,b){return void 0===b&&(b=0),this.registerListenerWithPriority(a,!0,b)},b.prototype.registerListener=function(a,b){return void 0===b&&(b=!1),this.registerListenerWithPriority(a,b)},b.prototype.registerListenerWithPriority=function(a,b,c){if(void 0===b&&(b=!1),void 0===c&&(c=0),this.registrationPossible(a,b)){var d=new f.Slot(a,this,b,c);return this.slots=this.slots.insertWithPriority(d),d}return this.slots.find(a)},b}(e.Signal);c.PrioritySignal=g},{"./Signal":31,"./Slot":32}],30:[function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(c,"__esModule",{value:!0});var e=a("./OnceSignal"),f=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d(b,a),b.prototype.addOnce=function(b){var c=a.prototype.addOnce.call(this,b);return this.isDispatched&&(c.execute(this.valueObjects),c.remove()),c},b.prototype.dispatch=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];if(this.isDispatched)throw new Error("You cannot dispatch() a Promise more than once");this.isDispatched=!0,this.valueObjects=b,a.prototype.dispatch.apply(this,b)},b}(e.OnceSignal);c.Promise=f},{"./OnceSignal":28}],31:[function(a,b,c){"use strict";var d=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(c,"__esModule",{value:!0});var e=a("./OnceSignal"),f=function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=this;return b=1==b.length&&b[0]instanceof Array?b[0]:b,d=a.call(this,b)||this}return d(b,a),b.prototype.add=function(a){return this.registerListener(a)},b}(e.OnceSignal);c.Signal=f},{"./OnceSignal":28}],32:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(){function a(a,b,c,d){void 0===c&&(c=!1),void 0===d&&(d=0),this._enabled=!0,this._once=!1,this._priority=0,this._listener=a,this._once=c,this._signal=b,this._priority=d,this.verifyListener(a)}return a.prototype.execute0=function(){if(this._enabled)return this._once&&this.remove(),this._params&&this._params.length?void this._listener.apply(null,this._params):void this._listener()},a.prototype.execute1=function(a){if(this._enabled)return this._once&&this.remove(),this._params&&this._params.length?void this._listener.apply(null,[a].concat(this._params)):void this._listener(a)},a.prototype.execute=function(a){if(this._enabled){this._once&&this.remove(),this._params&&this._params.length&&(a=a.concat(this._params));var b=a.length;0==b?this._listener():1==b?this._listener(a[0]):2==b?this._listener(a[0],a[1]):3==b?this._listener(a[0],a[1],a[2]):this._listener.apply(null,a)}},Object.defineProperty(a.prototype,"listener",{get:function(){return this._listener},set:function(a){if(null==a)throw new Error("Given listener is null.\nDid you want to set enabled to false instead?");this.verifyListener(a),this._listener=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"once",{get:function(){return this._once},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),a.prototype.toString=function(){return"[Slot listener: "+this._listener+", once: "+this._once+", priority: "+this._priority+", enabled: "+this._enabled+"]"},Object.defineProperty(a.prototype,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"params",{get:function(){return this._params},set:function(a){this._params=a},enumerable:!0,configurable:!0}),a.prototype.remove=function(){this._signal.remove(this._listener)},a.prototype.verifyListener=function(a){if(null==a)throw new Error("Given listener is null.");if(null==this._signal)throw new Error("Internal signal reference has not been set yet.")},a}();c.Slot=d},{}],33:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(){function a(b,c){if(void 0===c&&(c=null),this.nonEmpty=!1,b||c){if(!b)throw new Error("Parameter head cannot be null.");this.head=b,this.tail=c||a.NIL,this.nonEmpty=!0}else{if(a.NIL)throw new Error("Parameters head and tail are null. Use the NIL element instead.");this.nonEmpty=!1}}return Object.defineProperty(a.prototype,"length",{get:function(){if(!this.nonEmpty)return 0;if(this.tail==a.NIL)return 1;for(var b=0,c=this;c.nonEmpty;)++b,c=c.tail;return b},enumerable:!0,configurable:!0}),a.prototype.prepend=function(b){return new a(b,this)},a.prototype.append=function(b){if(!b)return this;if(!this.nonEmpty)return new a(b);if(this.tail==a.NIL)return new a(b).prepend(this.head);for(var c=new a(this.head),d=c,e=this.tail;e.nonEmpty;)d=d.tail=new a(e.head),
e=e.tail;return d.tail=new a(b),c},a.prototype.insertWithPriority=function(b){if(!this.nonEmpty)return new a(b);var c=b.priority;if(c>this.head.priority)return this.prepend(b);for(var d=new a(this.head),e=d,f=this.tail;f.nonEmpty;){if(c>f.head.priority)return e.tail=f.prepend(b),d;e=e.tail=new a(f.head),f=f.tail}return e.tail=new a(b),d},a.prototype.filterNot=function(b){if(!this.nonEmpty||null==b)return this;if(b==this.head.listener)return this.tail;for(var c=new a(this.head),d=c,e=this.tail;e.nonEmpty;){if(e.head.listener==b)return d.tail=e.tail,c;d=d.tail=new a(e.head),e=e.tail}return this},a.prototype.contains=function(a){if(!this.nonEmpty)return!1;for(var b=this;b.nonEmpty;){if(b.head.listener==a)return!0;b=b.tail}return!1},a.prototype.find=function(a){if(!this.nonEmpty)return null;for(var b=this;b.nonEmpty;){if(b.head.listener==a)return b.head;b=b.tail}return null},a.prototype.toString=function(){for(var a="",b=this;b.nonEmpty;)a+=b.head+" -> ",b=b.tail;return a+="NIL","[List "+a+"]"},a.NIL=new a(null,null),a}();c.SlotList=d},{}],34:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(){function a(a){void 0===a&&(a=!1),this._bubbles=a}return Object.defineProperty(a.prototype,"signal",{get:function(){return this._signal},set:function(a){this._signal=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"target",{get:function(){return this._target},set:function(a){this._target=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentTarget",{get:function(){return this._currentTarget},set:function(a){this._currentTarget=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bubbles",{get:function(){return this._bubbles},set:function(a){this._bubbles=a},enumerable:!0,configurable:!0}),a.prototype.clone=function(){return new a(this._bubbles)},a}();c.GenericEvent=d},{}]},{},[10])(10)});
//! moment.js (with-locales)
//! version : 2.22.2
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):e.moment=a()}(this,function(){"use strict";var e,n;function l(){return e.apply(null,arguments)}function _(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){return void 0===e}function m(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function M(e,a){var t,s=[];for(t=0;t<e.length;++t)s.push(a(e[t],t));return s}function h(e,a){return Object.prototype.hasOwnProperty.call(e,a)}function L(e,a){for(var t in a)h(a,t)&&(e[t]=a[t]);return h(a,"toString")&&(e.toString=a.toString),h(a,"valueOf")&&(e.valueOf=a.valueOf),e}function c(e,a,t,s){return va(e,a,t,s,!0).utc()}function Y(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function y(e){if(null==e._isValid){var a=Y(e),t=n.call(a.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&a.overflow<0&&!a.empty&&!a.invalidMonth&&!a.invalidWeekday&&!a.weekdayMismatch&&!a.nullInput&&!a.invalidFormat&&!a.userInvalidated&&(!a.meridiem||a.meridiem&&t);if(e._strict&&(s=s&&0===a.charsLeftOver&&0===a.unusedTokens.length&&void 0===a.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function f(e){var a=c(NaN);return null!=e?L(Y(a),e):Y(a).userInvalidated=!0,a}n=Array.prototype.some?Array.prototype.some:function(e){for(var a=Object(this),t=a.length>>>0,s=0;s<t;s++)if(s in a&&e.call(this,a[s],s,a))return!0;return!1};var d=l.momentProperties=[];function k(e,a){var t,s,n;if(o(a._isAMomentObject)||(e._isAMomentObject=a._isAMomentObject),o(a._i)||(e._i=a._i),o(a._f)||(e._f=a._f),o(a._l)||(e._l=a._l),o(a._strict)||(e._strict=a._strict),o(a._tzm)||(e._tzm=a._tzm),o(a._isUTC)||(e._isUTC=a._isUTC),o(a._offset)||(e._offset=a._offset),o(a._pf)||(e._pf=Y(a)),o(a._locale)||(e._locale=a._locale),0<d.length)for(t=0;t<d.length;t++)o(n=a[s=d[t]])||(e[s]=n);return e}var a=!1;function p(e){k(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===a&&(a=!0,l.updateOffset(this),a=!1)}function D(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function T(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function g(e){var a=+e,t=0;return 0!==a&&isFinite(a)&&(t=T(a)),t}function r(e,a,t){var s,n=Math.min(e.length,a.length),d=Math.abs(e.length-a.length),r=0;for(s=0;s<n;s++)(t&&e[s]!==a[s]||!t&&g(e[s])!==g(a[s]))&&r++;return r+d}function w(e){!1===l.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function t(n,d){var r=!0;return L(function(){if(null!=l.deprecationHandler&&l.deprecationHandler(null,n),r){for(var e,a=[],t=0;t<arguments.length;t++){if(e="","object"==typeof arguments[t]){for(var s in e+="\n["+t+"] ",arguments[0])e+=s+": "+arguments[0][s]+", ";e=e.slice(0,-2)}else e=arguments[t];a.push(e)}w(n+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),r=!1}return d.apply(this,arguments)},d)}var s,v={};function S(e,a){null!=l.deprecationHandler&&l.deprecationHandler(e,a),v[e]||(w(a),v[e]=!0)}function H(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function b(e,a){var t,s=L({},e);for(t in a)h(a,t)&&(i(e[t])&&i(a[t])?(s[t]={},L(s[t],e[t]),L(s[t],a[t])):null!=a[t]?s[t]=a[t]:delete s[t]);for(t in e)h(e,t)&&!h(a,t)&&i(e[t])&&(s[t]=L({},s[t]));return s}function j(e){null!=e&&this.set(e)}l.suppressDeprecationWarnings=!1,l.deprecationHandler=null,s=Object.keys?Object.keys:function(e){var a,t=[];for(a in e)h(e,a)&&t.push(a);return t};var x={};function P(e,a){var t=e.toLowerCase();x[t]=x[t+"s"]=x[a]=e}function O(e){return"string"==typeof e?x[e]||x[e.toLowerCase()]:void 0}function W(e){var a,t,s={};for(t in e)h(e,t)&&(a=O(t))&&(s[a]=e[t]);return s}var E={};function A(e,a){E[e]=a}function F(e,a,t){var s=""+Math.abs(e),n=a-s.length;return(0<=e?t?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+s}var z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,J=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,N={},R={};function I(e,a,t,s){var n=s;"string"==typeof s&&(n=function(){return this[s]()}),e&&(R[e]=n),a&&(R[a[0]]=function(){return F(n.apply(this,arguments),a[1],a[2])}),t&&(R[t]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function C(e,a){return e.isValid()?(a=G(a,e.localeData()),N[a]=N[a]||function(s){var e,n,a,d=s.match(z);for(e=0,n=d.length;e<n;e++)R[d[e]]?d[e]=R[d[e]]:d[e]=(a=d[e]).match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"");return function(e){var a,t="";for(a=0;a<n;a++)t+=H(d[a])?d[a].call(e,s):d[a];return t}}(a),N[a](e)):e.localeData().invalidDate()}function G(e,a){var t=5;function s(e){return a.longDateFormat(e)||e}for(J.lastIndex=0;0<=t&&J.test(e);)e=e.replace(J,s),J.lastIndex=0,t-=1;return e}var U=/\d/,V=/\d\d/,K=/\d{3}/,$=/\d{4}/,Z=/[+-]?\d{6}/,B=/\d\d?/,q=/\d\d\d\d?/,Q=/\d\d\d\d\d\d?/,X=/\d{1,3}/,ee=/\d{1,4}/,ae=/[+-]?\d{1,6}/,te=/\d+/,se=/[+-]?\d+/,ne=/Z|[+-]\d\d:?\d\d/gi,de=/Z|[+-]\d\d(?::?\d\d)?/gi,re=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,_e={};function ie(e,t,s){_e[e]=H(t)?t:function(e,a){return e&&s?s:t}}function oe(e,a){return h(_e,e)?_e[e](a._strict,a._locale):new RegExp(me(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,a,t,s,n){return a||t||s||n})))}function me(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ue={};function le(e,t){var a,s=t;for("string"==typeof e&&(e=[e]),m(t)&&(s=function(e,a){a[t]=g(e)}),a=0;a<e.length;a++)ue[e[a]]=s}function Me(e,n){le(e,function(e,a,t,s){t._w=t._w||{},n(e,t._w,t,s)})}var he=0,Le=1,ce=2,Ye=3,ye=4,fe=5,ke=6,pe=7,De=8;function Te(e){return ge(e)?366:365}function ge(e){return e%4==0&&e%100!=0||e%400==0}I("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),I(0,["YY",2],0,function(){return this.year()%100}),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),P("year","y"),A("year",1),ie("Y",se),ie("YY",B,V),ie("YYYY",ee,$),ie("YYYYY",ae,Z),ie("YYYYYY",ae,Z),le(["YYYYY","YYYYYY"],he),le("YYYY",function(e,a){a[he]=2===e.length?l.parseTwoDigitYear(e):g(e)}),le("YY",function(e,a){a[he]=l.parseTwoDigitYear(e)}),le("Y",function(e,a){a[he]=parseInt(e,10)}),l.parseTwoDigitYear=function(e){return g(e)+(68<g(e)?1900:2e3)};var we,ve=Se("FullYear",!0);function Se(a,t){return function(e){return null!=e?(be(this,a,e),l.updateOffset(this,t),this):He(this,a)}}function He(e,a){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+a]():NaN}function be(e,a,t){e.isValid()&&!isNaN(t)&&("FullYear"===a&&ge(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+a](t,e.month(),je(t,e.month())):e._d["set"+(e._isUTC?"UTC":"")+a](t))}function je(e,a){if(isNaN(e)||isNaN(a))return NaN;var t,s=(a%(t=12)+t)%t;return e+=(a-s)/12,1===s?ge(e)?29:28:31-s%7%2}we=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var a;for(a=0;a<this.length;++a)if(this[a]===e)return a;return-1},I("M",["MM",2],"Mo",function(){return this.month()+1}),I("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),I("MMMM",0,0,function(e){return this.localeData().months(this,e)}),P("month","M"),A("month",8),ie("M",B),ie("MM",B,V),ie("MMM",function(e,a){return a.monthsShortRegex(e)}),ie("MMMM",function(e,a){return a.monthsRegex(e)}),le(["M","MM"],function(e,a){a[Le]=g(e)-1}),le(["MMM","MMMM"],function(e,a,t,s){var n=t._locale.monthsParse(e,s,t._strict);null!=n?a[Le]=n:Y(t).invalidMonth=e});var xe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pe="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Oe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function We(e,a){var t;if(!e.isValid())return e;if("string"==typeof a)if(/^\d+$/.test(a))a=g(a);else if(!m(a=e.localeData().monthsParse(a)))return e;return t=Math.min(e.date(),je(e.year(),a)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](a,t),e}function Ee(e){return null!=e?(We(this,e),l.updateOffset(this,!0),this):He(this,"Month")}var Ae=re;var Fe=re;function ze(){function e(e,a){return a.length-e.length}var a,t,s=[],n=[],d=[];for(a=0;a<12;a++)t=c([2e3,a]),s.push(this.monthsShort(t,"")),n.push(this.months(t,"")),d.push(this.months(t,"")),d.push(this.monthsShort(t,""));for(s.sort(e),n.sort(e),d.sort(e),a=0;a<12;a++)s[a]=me(s[a]),n[a]=me(n[a]);for(a=0;a<24;a++)d[a]=me(d[a]);this._monthsRegex=new RegExp("^("+d.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Je(e){var a=new Date(Date.UTC.apply(null,arguments));return e<100&&0<=e&&isFinite(a.getUTCFullYear())&&a.setUTCFullYear(e),a}function Ne(e,a,t){var s=7+a-t;return-((7+Je(e,0,s).getUTCDay()-a)%7)+s-1}function Re(e,a,t,s,n){var d,r,_=1+7*(a-1)+(7+t-s)%7+Ne(e,s,n);return _<=0?r=Te(d=e-1)+_:_>Te(e)?(d=e+1,r=_-Te(e)):(d=e,r=_),{year:d,dayOfYear:r}}function Ie(e,a,t){var s,n,d=Ne(e.year(),a,t),r=Math.floor((e.dayOfYear()-d-1)/7)+1;return r<1?s=r+Ce(n=e.year()-1,a,t):r>Ce(e.year(),a,t)?(s=r-Ce(e.year(),a,t),n=e.year()+1):(n=e.year(),s=r),{week:s,year:n}}function Ce(e,a,t){var s=Ne(e,a,t),n=Ne(e+1,a,t);return(Te(e)-s+n)/7}I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),P("week","w"),P("isoWeek","W"),A("week",5),A("isoWeek",5),ie("w",B),ie("ww",B,V),ie("W",B),ie("WW",B,V),Me(["w","ww","W","WW"],function(e,a,t,s){a[s.substr(0,1)]=g(e)});I("d",0,"do","day"),I("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),I("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),I("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),P("day","d"),P("weekday","e"),P("isoWeekday","E"),A("day",11),A("weekday",11),A("isoWeekday",11),ie("d",B),ie("e",B),ie("E",B),ie("dd",function(e,a){return a.weekdaysMinRegex(e)}),ie("ddd",function(e,a){return a.weekdaysShortRegex(e)}),ie("dddd",function(e,a){return a.weekdaysRegex(e)}),Me(["dd","ddd","dddd"],function(e,a,t,s){var n=t._locale.weekdaysParse(e,s,t._strict);null!=n?a.d=n:Y(t).invalidWeekday=e}),Me(["d","e","E"],function(e,a,t,s){a[s]=g(e)});var Ge="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Ue="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var Ve="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var Ke=re;var $e=re;var Ze=re;function Be(){function e(e,a){return a.length-e.length}var a,t,s,n,d,r=[],_=[],i=[],o=[];for(a=0;a<7;a++)t=c([2e3,1]).day(a),s=this.weekdaysMin(t,""),n=this.weekdaysShort(t,""),d=this.weekdays(t,""),r.push(s),_.push(n),i.push(d),o.push(s),o.push(n),o.push(d);for(r.sort(e),_.sort(e),i.sort(e),o.sort(e),a=0;a<7;a++)_[a]=me(_[a]),i[a]=me(i[a]),o[a]=me(o[a]);this._weekdaysRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+_.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function qe(){return this.hours()%12||12}function Qe(e,a){I(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),a)})}function Xe(e,a){return a._meridiemParse}I("H",["HH",2],0,"hour"),I("h",["hh",2],0,qe),I("k",["kk",2],0,function(){return this.hours()||24}),I("hmm",0,0,function(){return""+qe.apply(this)+F(this.minutes(),2)}),I("hmmss",0,0,function(){return""+qe.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)}),I("Hmm",0,0,function(){return""+this.hours()+F(this.minutes(),2)}),I("Hmmss",0,0,function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)}),Qe("a",!0),Qe("A",!1),P("hour","h"),A("hour",13),ie("a",Xe),ie("A",Xe),ie("H",B),ie("h",B),ie("k",B),ie("HH",B,V),ie("hh",B,V),ie("kk",B,V),ie("hmm",q),ie("hmmss",Q),ie("Hmm",q),ie("Hmmss",Q),le(["H","HH"],Ye),le(["k","kk"],function(e,a,t){var s=g(e);a[Ye]=24===s?0:s}),le(["a","A"],function(e,a,t){t._isPm=t._locale.isPM(e),t._meridiem=e}),le(["h","hh"],function(e,a,t){a[Ye]=g(e),Y(t).bigHour=!0}),le("hmm",function(e,a,t){var s=e.length-2;a[Ye]=g(e.substr(0,s)),a[ye]=g(e.substr(s)),Y(t).bigHour=!0}),le("hmmss",function(e,a,t){var s=e.length-4,n=e.length-2;a[Ye]=g(e.substr(0,s)),a[ye]=g(e.substr(s,2)),a[fe]=g(e.substr(n)),Y(t).bigHour=!0}),le("Hmm",function(e,a,t){var s=e.length-2;a[Ye]=g(e.substr(0,s)),a[ye]=g(e.substr(s))}),le("Hmmss",function(e,a,t){var s=e.length-4,n=e.length-2;a[Ye]=g(e.substr(0,s)),a[ye]=g(e.substr(s,2)),a[fe]=g(e.substr(n))});var ea,aa=Se("Hours",!0),ta={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Pe,monthsShort:Oe,week:{dow:0,doy:6},weekdays:Ge,weekdaysMin:Ve,weekdaysShort:Ue,meridiemParse:/[ap]\.?m?\.?/i},sa={},na={};function da(e){return e?e.toLowerCase().replace("_","-"):e}function ra(e){var a=null;if(!sa[e]&&"undefined"!=typeof module&&module&&module.exports)try{a=ea._abbr,require("./locale/"+e),_a(a)}catch(e){}return sa[e]}function _a(e,a){var t;return e&&((t=o(a)?oa(e):ia(e,a))?ea=t:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),ea._abbr}function ia(e,a){if(null!==a){var t,s=ta;if(a.abbr=e,null!=sa[e])S("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=sa[e]._config;else if(null!=a.parentLocale)if(null!=sa[a.parentLocale])s=sa[a.parentLocale]._config;else{if(null==(t=ra(a.parentLocale)))return na[a.parentLocale]||(na[a.parentLocale]=[]),na[a.parentLocale].push({name:e,config:a}),null;s=t._config}return sa[e]=new j(b(s,a)),na[e]&&na[e].forEach(function(e){ia(e.name,e.config)}),_a(e),sa[e]}return delete sa[e],null}function oa(e){var a;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ea;if(!_(e)){if(a=ra(e))return a;e=[e]}return function(e){for(var a,t,s,n,d=0;d<e.length;){for(a=(n=da(e[d]).split("-")).length,t=(t=da(e[d+1]))?t.split("-"):null;0<a;){if(s=ra(n.slice(0,a).join("-")))return s;if(t&&t.length>=a&&r(n,t,!0)>=a-1)break;a--}d++}return ea}(e)}function ma(e){var a,t=e._a;return t&&-2===Y(e).overflow&&(a=t[Le]<0||11<t[Le]?Le:t[ce]<1||t[ce]>je(t[he],t[Le])?ce:t[Ye]<0||24<t[Ye]||24===t[Ye]&&(0!==t[ye]||0!==t[fe]||0!==t[ke])?Ye:t[ye]<0||59<t[ye]?ye:t[fe]<0||59<t[fe]?fe:t[ke]<0||999<t[ke]?ke:-1,Y(e)._overflowDayOfYear&&(a<he||ce<a)&&(a=ce),Y(e)._overflowWeeks&&-1===a&&(a=pe),Y(e)._overflowWeekday&&-1===a&&(a=De),Y(e).overflow=a),e}function ua(e,a,t){return null!=e?e:null!=a?a:t}function la(e){var a,t,s,n,d,r=[];if(!e._d){var _,i;for(_=e,i=new Date(l.now()),s=_._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()],e._w&&null==e._a[ce]&&null==e._a[Le]&&function(e){var a,t,s,n,d,r,_,i;if(null!=(a=e._w).GG||null!=a.W||null!=a.E)d=1,r=4,t=ua(a.GG,e._a[he],Ie(Sa(),1,4).year),s=ua(a.W,1),((n=ua(a.E,1))<1||7<n)&&(i=!0);else{d=e._locale._week.dow,r=e._locale._week.doy;var o=Ie(Sa(),d,r);t=ua(a.gg,e._a[he],o.year),s=ua(a.w,o.week),null!=a.d?((n=a.d)<0||6<n)&&(i=!0):null!=a.e?(n=a.e+d,(a.e<0||6<a.e)&&(i=!0)):n=d}s<1||s>Ce(t,d,r)?Y(e)._overflowWeeks=!0:null!=i?Y(e)._overflowWeekday=!0:(_=Re(t,s,n,d,r),e._a[he]=_.year,e._dayOfYear=_.dayOfYear)}(e),null!=e._dayOfYear&&(d=ua(e._a[he],s[he]),(e._dayOfYear>Te(d)||0===e._dayOfYear)&&(Y(e)._overflowDayOfYear=!0),t=Je(d,0,e._dayOfYear),e._a[Le]=t.getUTCMonth(),e._a[ce]=t.getUTCDate()),a=0;a<3&&null==e._a[a];++a)e._a[a]=r[a]=s[a];for(;a<7;a++)e._a[a]=r[a]=null==e._a[a]?2===a?1:0:e._a[a];24===e._a[Ye]&&0===e._a[ye]&&0===e._a[fe]&&0===e._a[ke]&&(e._nextDay=!0,e._a[Ye]=0),e._d=(e._useUTC?Je:function(e,a,t,s,n,d,r){var _=new Date(e,a,t,s,n,d,r);return e<100&&0<=e&&isFinite(_.getFullYear())&&_.setFullYear(e),_}).apply(null,r),n=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ye]=24),e._w&&void 0!==e._w.d&&e._w.d!==n&&(Y(e).weekdayMismatch=!0)}}var Ma=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ha=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,La=/Z|[+-]\d\d(?::?\d\d)?/,ca=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ya=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ya=/^\/?Date\((\-?\d+)/i;function fa(e){var a,t,s,n,d,r,_=e._i,i=Ma.exec(_)||ha.exec(_);if(i){for(Y(e).iso=!0,a=0,t=ca.length;a<t;a++)if(ca[a][1].exec(i[1])){n=ca[a][0],s=!1!==ca[a][2];break}if(null==n)return void(e._isValid=!1);if(i[3]){for(a=0,t=Ya.length;a<t;a++)if(Ya[a][1].exec(i[3])){d=(i[2]||" ")+Ya[a][0];break}if(null==d)return void(e._isValid=!1)}if(!s&&null!=d)return void(e._isValid=!1);if(i[4]){if(!La.exec(i[4]))return void(e._isValid=!1);r="Z"}e._f=n+(d||"")+(r||""),ga(e)}else e._isValid=!1}var ka=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function pa(e,a,t,s,n,d){var r=[function(e){var a=parseInt(e,10);{if(a<=49)return 2e3+a;if(a<=999)return 1900+a}return a}(e),Oe.indexOf(a),parseInt(t,10),parseInt(s,10),parseInt(n,10)];return d&&r.push(parseInt(d,10)),r}var Da={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ta(e){var a,t,s,n=ka.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(n){var d=pa(n[4],n[3],n[2],n[5],n[6],n[7]);if(a=n[1],t=d,s=e,a&&Ue.indexOf(a)!==new Date(t[0],t[1],t[2]).getDay()&&(Y(s).weekdayMismatch=!0,!(s._isValid=!1)))return;e._a=d,e._tzm=function(e,a,t){if(e)return Da[e];if(a)return 0;var s=parseInt(t,10),n=s%100;return(s-n)/100*60+n}(n[8],n[9],n[10]),e._d=Je.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Y(e).rfc2822=!0}else e._isValid=!1}function ga(e){if(e._f!==l.ISO_8601)if(e._f!==l.RFC_2822){e._a=[],Y(e).empty=!0;var a,t,s,n,d,r,_,i,o=""+e._i,m=o.length,u=0;for(s=G(e._f,e._locale).match(z)||[],a=0;a<s.length;a++)n=s[a],(t=(o.match(oe(n,e))||[])[0])&&(0<(d=o.substr(0,o.indexOf(t))).length&&Y(e).unusedInput.push(d),o=o.slice(o.indexOf(t)+t.length),u+=t.length),R[n]?(t?Y(e).empty=!1:Y(e).unusedTokens.push(n),r=n,i=e,null!=(_=t)&&h(ue,r)&&ue[r](_,i._a,i,r)):e._strict&&!t&&Y(e).unusedTokens.push(n);Y(e).charsLeftOver=m-u,0<o.length&&Y(e).unusedInput.push(o),e._a[Ye]<=12&&!0===Y(e).bigHour&&0<e._a[Ye]&&(Y(e).bigHour=void 0),Y(e).parsedDateParts=e._a.slice(0),Y(e).meridiem=e._meridiem,e._a[Ye]=function(e,a,t){var s;if(null==t)return a;return null!=e.meridiemHour?e.meridiemHour(a,t):(null!=e.isPM&&((s=e.isPM(t))&&a<12&&(a+=12),s||12!==a||(a=0)),a)}(e._locale,e._a[Ye],e._meridiem),la(e),ma(e)}else Ta(e);else fa(e)}function wa(e){var a,t,s,n,d=e._i,r=e._f;return e._locale=e._locale||oa(e._l),null===d||void 0===r&&""===d?f({nullInput:!0}):("string"==typeof d&&(e._i=d=e._locale.preparse(d)),D(d)?new p(ma(d)):(u(d)?e._d=d:_(r)?function(e){var a,t,s,n,d;if(0===e._f.length)return Y(e).invalidFormat=!0,e._d=new Date(NaN);for(n=0;n<e._f.length;n++)d=0,a=k({},e),null!=e._useUTC&&(a._useUTC=e._useUTC),a._f=e._f[n],ga(a),y(a)&&(d+=Y(a).charsLeftOver,d+=10*Y(a).unusedTokens.length,Y(a).score=d,(null==s||d<s)&&(s=d,t=a));L(e,t||a)}(e):r?ga(e):o(t=(a=e)._i)?a._d=new Date(l.now()):u(t)?a._d=new Date(t.valueOf()):"string"==typeof t?(s=a,null===(n=ya.exec(s._i))?(fa(s),!1===s._isValid&&(delete s._isValid,Ta(s),!1===s._isValid&&(delete s._isValid,l.createFromInputFallback(s)))):s._d=new Date(+n[1])):_(t)?(a._a=M(t.slice(0),function(e){return parseInt(e,10)}),la(a)):i(t)?function(e){if(!e._d){var a=W(e._i);e._a=M([a.year,a.month,a.day||a.date,a.hour,a.minute,a.second,a.millisecond],function(e){return e&&parseInt(e,10)}),la(e)}}(a):m(t)?a._d=new Date(t):l.createFromInputFallback(a),y(e)||(e._d=null),e))}function va(e,a,t,s,n){var d,r={};return!0!==t&&!1!==t||(s=t,t=void 0),(i(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var a;for(a in e)if(e.hasOwnProperty(a))return!1;return!0}(e)||_(e)&&0===e.length)&&(e=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=n,r._l=t,r._i=e,r._f=a,r._strict=s,(d=new p(ma(wa(r))))._nextDay&&(d.add(1,"d"),d._nextDay=void 0),d}function Sa(e,a,t,s){return va(e,a,t,s,!1)}l.createFromInputFallback=t("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),l.ISO_8601=function(){},l.RFC_2822=function(){};var Ha=t("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Sa.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:f()}),ba=t("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Sa.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:f()});function ja(e,a){var t,s;if(1===a.length&&_(a[0])&&(a=a[0]),!a.length)return Sa();for(t=a[0],s=1;s<a.length;++s)a[s].isValid()&&!a[s][e](t)||(t=a[s]);return t}var xa=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Pa(e){var a=W(e),t=a.year||0,s=a.quarter||0,n=a.month||0,d=a.week||0,r=a.day||0,_=a.hour||0,i=a.minute||0,o=a.second||0,m=a.millisecond||0;this._isValid=function(e){for(var a in e)if(-1===we.call(xa,a)||null!=e[a]&&isNaN(e[a]))return!1;for(var t=!1,s=0;s<xa.length;++s)if(e[xa[s]]){if(t)return!1;parseFloat(e[xa[s]])!==g(e[xa[s]])&&(t=!0)}return!0}(a),this._milliseconds=+m+1e3*o+6e4*i+1e3*_*60*60,this._days=+r+7*d,this._months=+n+3*s+12*t,this._data={},this._locale=oa(),this._bubble()}function Oa(e){return e instanceof Pa}function Wa(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ea(e,t){I(e,0,0,function(){var e=this.utcOffset(),a="+";return e<0&&(e=-e,a="-"),a+F(~~(e/60),2)+t+F(~~e%60,2)})}Ea("Z",":"),Ea("ZZ",""),ie("Z",de),ie("ZZ",de),le(["Z","ZZ"],function(e,a,t){t._useUTC=!0,t._tzm=Fa(de,e)});var Aa=/([\+\-]|\d\d)/gi;function Fa(e,a){var t=(a||"").match(e);if(null===t)return null;var s=((t[t.length-1]||[])+"").match(Aa)||["-",0,0],n=60*s[1]+g(s[2]);return 0===n?0:"+"===s[0]?n:-n}function za(e,a){var t,s;return a._isUTC?(t=a.clone(),s=(D(e)||u(e)?e.valueOf():Sa(e).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+s),l.updateOffset(t,!1),t):Sa(e).local()}function Ja(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Na(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}l.updateOffset=function(){};var Ra=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ia=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ca(e,a){var t,s,n,d=e,r=null;return Oa(e)?d={ms:e._milliseconds,d:e._days,M:e._months}:m(e)?(d={},a?d[a]=e:d.milliseconds=e):(r=Ra.exec(e))?(t="-"===r[1]?-1:1,d={y:0,d:g(r[ce])*t,h:g(r[Ye])*t,m:g(r[ye])*t,s:g(r[fe])*t,ms:g(Wa(1e3*r[ke]))*t}):(r=Ia.exec(e))?(t="-"===r[1]?-1:(r[1],1),d={y:Ga(r[2],t),M:Ga(r[3],t),w:Ga(r[4],t),d:Ga(r[5],t),h:Ga(r[6],t),m:Ga(r[7],t),s:Ga(r[8],t)}):null==d?d={}:"object"==typeof d&&("from"in d||"to"in d)&&(n=function(e,a){var t;if(!e.isValid()||!a.isValid())return{milliseconds:0,months:0};a=za(a,e),e.isBefore(a)?t=Ua(e,a):((t=Ua(a,e)).milliseconds=-t.milliseconds,t.months=-t.months);return t}(Sa(d.from),Sa(d.to)),(d={}).ms=n.milliseconds,d.M=n.months),s=new Pa(d),Oa(e)&&h(e,"_locale")&&(s._locale=e._locale),s}function Ga(e,a){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*a}function Ua(e,a){var t={milliseconds:0,months:0};return t.months=a.month()-e.month()+12*(a.year()-e.year()),e.clone().add(t.months,"M").isAfter(a)&&--t.months,t.milliseconds=+a-+e.clone().add(t.months,"M"),t}function Va(s,n){return function(e,a){var t;return null===a||isNaN(+a)||(S(n,"moment()."+n+"(period, number) is deprecated. Please use moment()."+n+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),t=e,e=a,a=t),Ka(this,Ca(e="string"==typeof e?+e:e,a),s),this}}function Ka(e,a,t,s){var n=a._milliseconds,d=Wa(a._days),r=Wa(a._months);e.isValid()&&(s=null==s||s,r&&We(e,He(e,"Month")+r*t),d&&be(e,"Date",He(e,"Date")+d*t),n&&e._d.setTime(e._d.valueOf()+n*t),s&&l.updateOffset(e,d||r))}Ca.fn=Pa.prototype,Ca.invalid=function(){return Ca(NaN)};var $a=Va(1,"add"),Za=Va(-1,"subtract");function Ba(e,a){var t=12*(a.year()-e.year())+(a.month()-e.month()),s=e.clone().add(t,"months");return-(t+(a-s<0?(a-s)/(s-e.clone().add(t-1,"months")):(a-s)/(e.clone().add(t+1,"months")-s)))||0}function qa(e){var a;return void 0===e?this._locale._abbr:(null!=(a=oa(e))&&(this._locale=a),this)}l.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",l.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Qa=t("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Xa(){return this._locale}function et(e,a){I(0,[e,e.length],0,a)}function at(e,a,t,s,n){var d;return null==e?Ie(this,s,n).year:((d=Ce(e,s,n))<a&&(a=d),function(e,a,t,s,n){var d=Re(e,a,t,s,n),r=Je(d.year,0,d.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}.call(this,e,a,t,s,n))}I(0,["gg",2],0,function(){return this.weekYear()%100}),I(0,["GG",2],0,function(){return this.isoWeekYear()%100}),et("gggg","weekYear"),et("ggggg","weekYear"),et("GGGG","isoWeekYear"),et("GGGGG","isoWeekYear"),P("weekYear","gg"),P("isoWeekYear","GG"),A("weekYear",1),A("isoWeekYear",1),ie("G",se),ie("g",se),ie("GG",B,V),ie("gg",B,V),ie("GGGG",ee,$),ie("gggg",ee,$),ie("GGGGG",ae,Z),ie("ggggg",ae,Z),Me(["gggg","ggggg","GGGG","GGGGG"],function(e,a,t,s){a[s.substr(0,2)]=g(e)}),Me(["gg","GG"],function(e,a,t,s){a[s]=l.parseTwoDigitYear(e)}),I("Q",0,"Qo","quarter"),P("quarter","Q"),A("quarter",7),ie("Q",U),le("Q",function(e,a){a[Le]=3*(g(e)-1)}),I("D",["DD",2],"Do","date"),P("date","D"),A("date",9),ie("D",B),ie("DD",B,V),ie("Do",function(e,a){return e?a._dayOfMonthOrdinalParse||a._ordinalParse:a._dayOfMonthOrdinalParseLenient}),le(["D","DD"],ce),le("Do",function(e,a){a[ce]=g(e.match(B)[0])});var tt=Se("Date",!0);I("DDD",["DDDD",3],"DDDo","dayOfYear"),P("dayOfYear","DDD"),A("dayOfYear",4),ie("DDD",X),ie("DDDD",K),le(["DDD","DDDD"],function(e,a,t){t._dayOfYear=g(e)}),I("m",["mm",2],0,"minute"),P("minute","m"),A("minute",14),ie("m",B),ie("mm",B,V),le(["m","mm"],ye);var st=Se("Minutes",!1);I("s",["ss",2],0,"second"),P("second","s"),A("second",15),ie("s",B),ie("ss",B,V),le(["s","ss"],fe);var nt,dt=Se("Seconds",!1);for(I("S",0,0,function(){return~~(this.millisecond()/100)}),I(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),I(0,["SSS",3],0,"millisecond"),I(0,["SSSS",4],0,function(){return 10*this.millisecond()}),I(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),I(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),I(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),I(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),I(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),P("millisecond","ms"),A("millisecond",16),ie("S",X,U),ie("SS",X,V),ie("SSS",X,K),nt="SSSS";nt.length<=9;nt+="S")ie(nt,te);function rt(e,a){a[ke]=g(1e3*("0."+e))}for(nt="S";nt.length<=9;nt+="S")le(nt,rt);var _t=Se("Milliseconds",!1);I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var it=p.prototype;function ot(e){return e}it.add=$a,it.calendar=function(e,a){var t=e||Sa(),s=za(t,this).startOf("day"),n=l.calendarFormat(this,s)||"sameElse",d=a&&(H(a[n])?a[n].call(this,t):a[n]);return this.format(d||this.localeData().calendar(n,this,Sa(t)))},it.clone=function(){return new p(this)},it.diff=function(e,a,t){var s,n,d;if(!this.isValid())return NaN;if(!(s=za(e,this)).isValid())return NaN;switch(n=6e4*(s.utcOffset()-this.utcOffset()),a=O(a)){case"year":d=Ba(this,s)/12;break;case"month":d=Ba(this,s);break;case"quarter":d=Ba(this,s)/3;break;case"second":d=(this-s)/1e3;break;case"minute":d=(this-s)/6e4;break;case"hour":d=(this-s)/36e5;break;case"day":d=(this-s-n)/864e5;break;case"week":d=(this-s-n)/6048e5;break;default:d=this-s}return t?d:T(d)},it.endOf=function(e){return void 0===(e=O(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},it.format=function(e){e||(e=this.isUtc()?l.defaultFormatUtc:l.defaultFormat);var a=C(this,e);return this.localeData().postformat(a)},it.from=function(e,a){return this.isValid()&&(D(e)&&e.isValid()||Sa(e).isValid())?Ca({to:this,from:e}).locale(this.locale()).humanize(!a):this.localeData().invalidDate()},it.fromNow=function(e){return this.from(Sa(),e)},it.to=function(e,a){return this.isValid()&&(D(e)&&e.isValid()||Sa(e).isValid())?Ca({from:this,to:e}).locale(this.locale()).humanize(!a):this.localeData().invalidDate()},it.toNow=function(e){return this.to(Sa(),e)},it.get=function(e){return H(this[e=O(e)])?this[e]():this},it.invalidAt=function(){return Y(this).overflow},it.isAfter=function(e,a){var t=D(e)?e:Sa(e);return!(!this.isValid()||!t.isValid())&&("millisecond"===(a=O(o(a)?"millisecond":a))?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(a).valueOf())},it.isBefore=function(e,a){var t=D(e)?e:Sa(e);return!(!this.isValid()||!t.isValid())&&("millisecond"===(a=O(o(a)?"millisecond":a))?this.valueOf()<t.valueOf():this.clone().endOf(a).valueOf()<t.valueOf())},it.isBetween=function(e,a,t,s){return("("===(s=s||"()")[0]?this.isAfter(e,t):!this.isBefore(e,t))&&(")"===s[1]?this.isBefore(a,t):!this.isAfter(a,t))},it.isSame=function(e,a){var t,s=D(e)?e:Sa(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(a=O(a||"millisecond"))?this.valueOf()===s.valueOf():(t=s.valueOf(),this.clone().startOf(a).valueOf()<=t&&t<=this.clone().endOf(a).valueOf()))},it.isSameOrAfter=function(e,a){return this.isSame(e,a)||this.isAfter(e,a)},it.isSameOrBefore=function(e,a){return this.isSame(e,a)||this.isBefore(e,a)},it.isValid=function(){return y(this)},it.lang=Qa,it.locale=qa,it.localeData=Xa,it.max=ba,it.min=Ha,it.parsingFlags=function(){return L({},Y(this))},it.set=function(e,a){if("object"==typeof e)for(var t=function(e){var a=[];for(var t in e)a.push({unit:t,priority:E[t]});return a.sort(function(e,a){return e.priority-a.priority}),a}(e=W(e)),s=0;s<t.length;s++)this[t[s].unit](e[t[s].unit]);else if(H(this[e=O(e)]))return this[e](a);return this},it.startOf=function(e){switch(e=O(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},it.subtract=Za,it.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},it.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},it.toDate=function(){return new Date(this.valueOf())},it.toISOString=function(e){if(!this.isValid())return null;var a=!0!==e,t=a?this.clone().utc():this;return t.year()<0||9999<t.year()?C(t,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):H(Date.prototype.toISOString)?a?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",C(t,"Z")):C(t,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},it.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",a="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z");var t="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=a+'[")]';return this.format(t+s+"-MM-DD[T]HH:mm:ss.SSS"+n)},it.toJSON=function(){return this.isValid()?this.toISOString():null},it.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},it.unix=function(){return Math.floor(this.valueOf()/1e3)},it.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},it.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},it.year=ve,it.isLeapYear=function(){return ge(this.year())},it.weekYear=function(e){return at.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},it.isoWeekYear=function(e){return at.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},it.quarter=it.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},it.month=Ee,it.daysInMonth=function(){return je(this.year(),this.month())},it.week=it.weeks=function(e){var a=this.localeData().week(this);return null==e?a:this.add(7*(e-a),"d")},it.isoWeek=it.isoWeeks=function(e){var a=Ie(this,1,4).week;return null==e?a:this.add(7*(e-a),"d")},it.weeksInYear=function(){var e=this.localeData()._week;return Ce(this.year(),e.dow,e.doy)},it.isoWeeksInYear=function(){return Ce(this.year(),1,4)},it.date=tt,it.day=it.days=function(e){if(!this.isValid())return null!=e?this:NaN;var a,t,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(a=e,t=this.localeData(),e="string"!=typeof a?a:isNaN(a)?"number"==typeof(a=t.weekdaysParse(a))?a:null:parseInt(a,10),this.add(e-s,"d")):s},it.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var a=(this.day()+7-this.localeData()._week.dow)%7;return null==e?a:this.add(e-a,"d")},it.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var a=(t=e,s=this.localeData(),"string"==typeof t?s.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?a:a-7)}return this.day()||7;var t,s},it.dayOfYear=function(e){var a=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?a:this.add(e-a,"d")},it.hour=it.hours=aa,it.minute=it.minutes=st,it.second=it.seconds=dt,it.millisecond=it.milliseconds=_t,it.utcOffset=function(e,a,t){var s,n=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Fa(de,e)))return this}else Math.abs(e)<16&&!t&&(e*=60);return!this._isUTC&&a&&(s=Ja(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),n!==e&&(!a||this._changeInProgress?Ka(this,Ca(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,l.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?n:Ja(this)},it.utc=function(e){return this.utcOffset(0,e)},it.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ja(this),"m")),this},it.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Fa(ne,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},it.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Sa(e).utcOffset():0,(this.utcOffset()-e)%60==0)},it.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},it.isLocal=function(){return!!this.isValid()&&!this._isUTC},it.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},it.isUtc=Na,it.isUTC=Na,it.zoneAbbr=function(){return this._isUTC?"UTC":""},it.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},it.dates=t("dates accessor is deprecated. Use date instead.",tt),it.months=t("months accessor is deprecated. Use month instead",Ee),it.years=t("years accessor is deprecated. Use year instead",ve),it.zone=t("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,a){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,a),this):-this.utcOffset()}),it.isDSTShifted=t("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e={};if(k(e,this),(e=wa(e))._a){var a=e._isUTC?c(e._a):Sa(e._a);this._isDSTShifted=this.isValid()&&0<r(e._a,a.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var mt=j.prototype;function ut(e,a,t,s){var n=oa(),d=c().set(s,a);return n[t](d,e)}function lt(e,a,t){if(m(e)&&(a=e,e=void 0),e=e||"",null!=a)return ut(e,a,t,"month");var s,n=[];for(s=0;s<12;s++)n[s]=ut(e,s,t,"month");return n}function Mt(e,a,t,s){"boolean"==typeof e?m(a)&&(t=a,a=void 0):(a=e,e=!1,m(t=a)&&(t=a,a=void 0)),a=a||"";var n,d=oa(),r=e?d._week.dow:0;if(null!=t)return ut(a,(t+r)%7,s,"day");var _=[];for(n=0;n<7;n++)_[n]=ut(a,(n+r)%7,s,"day");return _}mt.calendar=function(e,a,t){var s=this._calendar[e]||this._calendar.sameElse;return H(s)?s.call(a,t):s},mt.longDateFormat=function(e){var a=this._longDateFormat[e],t=this._longDateFormat[e.toUpperCase()];return a||!t?a:(this._longDateFormat[e]=t.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},mt.invalidDate=function(){return this._invalidDate},mt.ordinal=function(e){return this._ordinal.replace("%d",e)},mt.preparse=ot,mt.postformat=ot,mt.relativeTime=function(e,a,t,s){var n=this._relativeTime[t];return H(n)?n(e,a,t,s):n.replace(/%d/i,e)},mt.pastFuture=function(e,a){var t=this._relativeTime[0<e?"future":"past"];return H(t)?t(a):t.replace(/%s/i,a)},mt.set=function(e){var a,t;for(t in e)H(a=e[t])?this[t]=a:this["_"+t]=a;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},mt.months=function(e,a){return e?_(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||xe).test(a)?"format":"standalone"][e.month()]:_(this._months)?this._months:this._months.standalone},mt.monthsShort=function(e,a){return e?_(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[xe.test(a)?"format":"standalone"][e.month()]:_(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},mt.monthsParse=function(e,a,t){var s,n,d;if(this._monthsParseExact)return function(e,a,t){var s,n,d,r=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)d=c([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(d,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(d,"").toLocaleLowerCase();return t?"MMM"===a?-1!==(n=we.call(this._shortMonthsParse,r))?n:null:-1!==(n=we.call(this._longMonthsParse,r))?n:null:"MMM"===a?-1!==(n=we.call(this._shortMonthsParse,r))?n:-1!==(n=we.call(this._longMonthsParse,r))?n:null:-1!==(n=we.call(this._longMonthsParse,r))?n:-1!==(n=we.call(this._shortMonthsParse,r))?n:null}.call(this,e,a,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(n=c([2e3,s]),t&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),t||this._monthsParse[s]||(d="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[s]=new RegExp(d.replace(".",""),"i")),t&&"MMMM"===a&&this._longMonthsParse[s].test(e))return s;if(t&&"MMM"===a&&this._shortMonthsParse[s].test(e))return s;if(!t&&this._monthsParse[s].test(e))return s}},mt.monthsRegex=function(e){return this._monthsParseExact?(h(this,"_monthsRegex")||ze.call(this),e?this._monthsStrictRegex:this._monthsRegex):(h(this,"_monthsRegex")||(this._monthsRegex=Fe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},mt.monthsShortRegex=function(e){return this._monthsParseExact?(h(this,"_monthsRegex")||ze.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(h(this,"_monthsShortRegex")||(this._monthsShortRegex=Ae),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},mt.week=function(e){return Ie(e,this._week.dow,this._week.doy).week},mt.firstDayOfYear=function(){return this._week.doy},mt.firstDayOfWeek=function(){return this._week.dow},mt.weekdays=function(e,a){return e?_(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(a)?"format":"standalone"][e.day()]:_(this._weekdays)?this._weekdays:this._weekdays.standalone},mt.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},mt.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},mt.weekdaysParse=function(e,a,t){var s,n,d;if(this._weekdaysParseExact)return function(e,a,t){var s,n,d,r=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)d=c([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(d,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(d,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(d,"").toLocaleLowerCase();return t?"dddd"===a?-1!==(n=we.call(this._weekdaysParse,r))?n:null:"ddd"===a?-1!==(n=we.call(this._shortWeekdaysParse,r))?n:null:-1!==(n=we.call(this._minWeekdaysParse,r))?n:null:"dddd"===a?-1!==(n=we.call(this._weekdaysParse,r))?n:-1!==(n=we.call(this._shortWeekdaysParse,r))?n:-1!==(n=we.call(this._minWeekdaysParse,r))?n:null:"ddd"===a?-1!==(n=we.call(this._shortWeekdaysParse,r))?n:-1!==(n=we.call(this._weekdaysParse,r))?n:-1!==(n=we.call(this._minWeekdaysParse,r))?n:null:-1!==(n=we.call(this._minWeekdaysParse,r))?n:-1!==(n=we.call(this._weekdaysParse,r))?n:-1!==(n=we.call(this._shortWeekdaysParse,r))?n:null}.call(this,e,a,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(n=c([2e3,1]).day(s),t&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(d="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[s]=new RegExp(d.replace(".",""),"i")),t&&"dddd"===a&&this._fullWeekdaysParse[s].test(e))return s;if(t&&"ddd"===a&&this._shortWeekdaysParse[s].test(e))return s;if(t&&"dd"===a&&this._minWeekdaysParse[s].test(e))return s;if(!t&&this._weekdaysParse[s].test(e))return s}},mt.weekdaysRegex=function(e){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(h(this,"_weekdaysRegex")||(this._weekdaysRegex=Ke),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},mt.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(h(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=$e),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},mt.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Be.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(h(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ze),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},mt.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},mt.meridiem=function(e,a,t){return 11<e?t?"pm":"PM":t?"am":"AM"},_a("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var a=e%10;return e+(1===g(e%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th")}}),l.lang=t("moment.lang is deprecated. Use moment.locale instead.",_a),l.langData=t("moment.langData is deprecated. Use moment.localeData instead.",oa);var ht=Math.abs;function Lt(e,a,t,s){var n=Ca(a,t);return e._milliseconds+=s*n._milliseconds,e._days+=s*n._days,e._months+=s*n._months,e._bubble()}function ct(e){return e<0?Math.floor(e):Math.ceil(e)}function Yt(e){return 4800*e/146097}function yt(e){return 146097*e/4800}function ft(e){return function(){return this.as(e)}}var kt=ft("ms"),pt=ft("s"),Dt=ft("m"),Tt=ft("h"),gt=ft("d"),wt=ft("w"),vt=ft("M"),St=ft("y");function Ht(e){return function(){return this.isValid()?this._data[e]:NaN}}var bt=Ht("milliseconds"),jt=Ht("seconds"),xt=Ht("minutes"),Pt=Ht("hours"),Ot=Ht("days"),Wt=Ht("months"),Et=Ht("years");var At=Math.round,Ft={ss:44,s:45,m:45,h:22,d:26,M:11};var zt=Math.abs;function Jt(e){return(0<e)-(e<0)||+e}function Nt(){if(!this.isValid())return this.localeData().invalidDate();var e,a,t=zt(this._milliseconds)/1e3,s=zt(this._days),n=zt(this._months);a=T((e=T(t/60))/60),t%=60,e%=60;var d=T(n/12),r=n%=12,_=s,i=a,o=e,m=t?t.toFixed(3).replace(/\.?0+$/,""):"",u=this.asSeconds();if(!u)return"P0D";var l=u<0?"-":"",M=Jt(this._months)!==Jt(u)?"-":"",h=Jt(this._days)!==Jt(u)?"-":"",L=Jt(this._milliseconds)!==Jt(u)?"-":"";return l+"P"+(d?M+d+"Y":"")+(r?M+r+"M":"")+(_?h+_+"D":"")+(i||o||m?"T":"")+(i?L+i+"H":"")+(o?L+o+"M":"")+(m?L+m+"S":"")}var Rt=Pa.prototype;Rt.isValid=function(){return this._isValid},Rt.abs=function(){var e=this._data;return this._milliseconds=ht(this._milliseconds),this._days=ht(this._days),this._months=ht(this._months),e.milliseconds=ht(e.milliseconds),e.seconds=ht(e.seconds),e.minutes=ht(e.minutes),e.hours=ht(e.hours),e.months=ht(e.months),e.years=ht(e.years),this},Rt.add=function(e,a){return Lt(this,e,a,1)},Rt.subtract=function(e,a){return Lt(this,e,a,-1)},Rt.as=function(e){if(!this.isValid())return NaN;var a,t,s=this._milliseconds;if("month"===(e=O(e))||"year"===e)return a=this._days+s/864e5,t=this._months+Yt(a),"month"===e?t:t/12;switch(a=this._days+Math.round(yt(this._months)),e){case"week":return a/7+s/6048e5;case"day":return a+s/864e5;case"hour":return 24*a+s/36e5;case"minute":return 1440*a+s/6e4;case"second":return 86400*a+s/1e3;case"millisecond":return Math.floor(864e5*a)+s;default:throw new Error("Unknown unit "+e)}},Rt.asMilliseconds=kt,Rt.asSeconds=pt,Rt.asMinutes=Dt,Rt.asHours=Tt,Rt.asDays=gt,Rt.asWeeks=wt,Rt.asMonths=vt,Rt.asYears=St,Rt.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12):NaN},Rt._bubble=function(){var e,a,t,s,n,d=this._milliseconds,r=this._days,_=this._months,i=this._data;return 0<=d&&0<=r&&0<=_||d<=0&&r<=0&&_<=0||(d+=864e5*ct(yt(_)+r),_=r=0),i.milliseconds=d%1e3,e=T(d/1e3),i.seconds=e%60,a=T(e/60),i.minutes=a%60,t=T(a/60),i.hours=t%24,_+=n=T(Yt(r+=T(t/24))),r-=ct(yt(n)),s=T(_/12),_%=12,i.days=r,i.months=_,i.years=s,this},Rt.clone=function(){return Ca(this)},Rt.get=function(e){return e=O(e),this.isValid()?this[e+"s"]():NaN},Rt.milliseconds=bt,Rt.seconds=jt,Rt.minutes=xt,Rt.hours=Pt,Rt.days=Ot,Rt.weeks=function(){return T(this.days()/7)},Rt.months=Wt,Rt.years=Et,Rt.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var a,t,s,n,d,r,_,i,o,m,u,l=this.localeData(),M=(t=!e,s=l,n=Ca(a=this).abs(),d=At(n.as("s")),r=At(n.as("m")),_=At(n.as("h")),i=At(n.as("d")),o=At(n.as("M")),m=At(n.as("y")),(u=d<=Ft.ss&&["s",d]||d<Ft.s&&["ss",d]||r<=1&&["m"]||r<Ft.m&&["mm",r]||_<=1&&["h"]||_<Ft.h&&["hh",_]||i<=1&&["d"]||i<Ft.d&&["dd",i]||o<=1&&["M"]||o<Ft.M&&["MM",o]||m<=1&&["y"]||["yy",m])[2]=t,u[3]=0<+a,u[4]=s,function(e,a,t,s,n){return n.relativeTime(a||1,!!t,e,s)}.apply(null,u));return e&&(M=l.pastFuture(+this,M)),l.postformat(M)},Rt.toISOString=Nt,Rt.toString=Nt,Rt.toJSON=Nt,Rt.locale=qa,Rt.localeData=Xa,Rt.toIsoString=t("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Nt),Rt.lang=Qa,I("X",0,0,"unix"),I("x",0,0,"valueOf"),ie("x",se),ie("X",/[+-]?\d+(\.\d{1,3})?/),le("X",function(e,a,t){t._d=new Date(1e3*parseFloat(e,10))}),le("x",function(e,a,t){t._d=new Date(g(e))}),l.version="2.22.2",e=Sa,l.fn=it,l.min=function(){return ja("isBefore",[].slice.call(arguments,0))},l.max=function(){return ja("isAfter",[].slice.call(arguments,0))},l.now=function(){return Date.now?Date.now():+new Date},l.utc=c,l.unix=function(e){return Sa(1e3*e)},l.months=function(e,a){return lt(e,a,"months")},l.isDate=u,l.locale=_a,l.invalid=f,l.duration=Ca,l.isMoment=D,l.weekdays=function(e,a,t){return Mt(e,a,t,"weekdays")},l.parseZone=function(){return Sa.apply(null,arguments).parseZone()},l.localeData=oa,l.isDuration=Oa,l.monthsShort=function(e,a){return lt(e,a,"monthsShort")},l.weekdaysMin=function(e,a,t){return Mt(e,a,t,"weekdaysMin")},l.defineLocale=ia,l.updateLocale=function(e,a){if(null!=a){var t,s,n=ta;null!=(s=ra(e))&&(n=s._config),(t=new j(a=b(n,a))).parentLocale=sa[e],sa[e]=t,_a(e)}else null!=sa[e]&&(null!=sa[e].parentLocale?sa[e]=sa[e].parentLocale:null!=sa[e]&&delete sa[e]);return sa[e]},l.locales=function(){return s(sa)},l.weekdaysShort=function(e,a,t){return Mt(e,a,t,"weekdaysShort")},l.normalizeUnits=O,l.relativeTimeRounding=function(e){return void 0===e?At:"function"==typeof e&&(At=e,!0)},l.relativeTimeThreshold=function(e,a){return void 0!==Ft[e]&&(void 0===a?Ft[e]:(Ft[e]=a,"s"===e&&(Ft.ss=a-1),!0))},l.calendarFormat=function(e,a){var t=e.diff(a,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"},l.prototype=it,l.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},l.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,a,t){return e<12?t?"vm":"VM":t?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[M\xf4re om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||20<=e?"ste":"de")},week:{dow:1,doy:4}}),l.defineLocale("ar-dz",{months:"\u062c\u0627\u0646\u0641\u064a_\u0641\u064a\u0641\u0631\u064a_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064a\u0644_\u0645\u0627\u064a_\u062c\u0648\u0627\u0646_\u062c\u0648\u064a\u0644\u064a\u0629_\u0623\u0648\u062a_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),monthsShort:"\u062c\u0627\u0646\u0641\u064a_\u0641\u064a\u0641\u0631\u064a_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064a\u0644_\u0645\u0627\u064a_\u062c\u0648\u0627\u0646_\u062c\u0648\u064a\u0644\u064a\u0629_\u0623\u0648\u062a_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0627\u062d\u062f_\u0627\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u0623\u062d_\u0625\u062b_\u062b\u0644\u0627_\u0623\u0631_\u062e\u0645_\u062c\u0645_\u0633\u0628".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},week:{dow:0,doy:4}}),l.defineLocale("ar-kw",{months:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648\u0632_\u063a\u0634\u062a_\u0634\u062a\u0646\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062f\u062c\u0646\u0628\u0631".split("_"),monthsShort:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648\u0632_\u063a\u0634\u062a_\u0634\u062a\u0646\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062f\u062c\u0646\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062a\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0627\u062d\u062f_\u0627\u062a\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},week:{dow:0,doy:12}});var It={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},Ct=function(e){return 0===e?0:1===e?1:2===e?2:3<=e%100&&e%100<=10?3:11<=e%100?4:5},Gt={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},Ut=function(r){return function(e,a,t,s){var n=Ct(e),d=Gt[r][Ct(e)];return 2===n&&(d=d[a?0:1]),d.replace(/%d/i,e)}},Vt=["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"];l.defineLocale("ar-ly",{months:Vt,monthsShort:Vt,weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/\u200fM/\u200fYYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(e){return"\u0645"===e},meridiem:function(e,a,t){return e<12?"\u0635":"\u0645"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u064b\u0627 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0628\u0639\u062f %s",past:"\u0645\u0646\u0630 %s",s:Ut("s"),ss:Ut("s"),m:Ut("m"),mm:Ut("m"),h:Ut("h"),hh:Ut("h"),d:Ut("d"),dd:Ut("d"),M:Ut("M"),MM:Ut("M"),y:Ut("y"),yy:Ut("y")},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return It[e]}).replace(/,/g,"\u060c")},week:{dow:6,doy:12}}),l.defineLocale("ar-ma",{months:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648\u0632_\u063a\u0634\u062a_\u0634\u062a\u0646\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062f\u062c\u0646\u0628\u0631".split("_"),monthsShort:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648\u0632_\u063a\u0634\u062a_\u0634\u062a\u0646\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062f\u062c\u0646\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062a\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0627\u062d\u062f_\u0627\u062a\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},week:{dow:6,doy:12}});var Kt={1:"\u0661",2:"\u0662",3:"\u0663",4:"\u0664",5:"\u0665",6:"\u0666",7:"\u0667",8:"\u0668",9:"\u0669",0:"\u0660"},$t={"\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u0660":"0"};l.defineLocale("ar-sa",{months:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a\u0648_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648_\u0623\u063a\u0633\u0637\u0633_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),monthsShort:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a\u0648_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648_\u0623\u063a\u0633\u0637\u0633_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(e){return"\u0645"===e},meridiem:function(e,a,t){return e<12?"\u0635":"\u0645"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},preparse:function(e){return e.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function(e){return $t[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return Kt[e]}).replace(/,/g,"\u060c")},week:{dow:0,doy:6}}),l.defineLocale("ar-tn",{months:"\u062c\u0627\u0646\u0641\u064a_\u0641\u064a\u0641\u0631\u064a_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064a\u0644_\u0645\u0627\u064a_\u062c\u0648\u0627\u0646_\u062c\u0648\u064a\u0644\u064a\u0629_\u0623\u0648\u062a_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),monthsShort:"\u062c\u0627\u0646\u0641\u064a_\u0641\u064a\u0641\u0631\u064a_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064a\u0644_\u0645\u0627\u064a_\u062c\u0648\u0627\u0646_\u062c\u0648\u064a\u0644\u064a\u0629_\u0623\u0648\u062a_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},week:{dow:1,doy:4}});var Zt={1:"\u0661",2:"\u0662",3:"\u0663",4:"\u0664",5:"\u0665",6:"\u0666",7:"\u0667",8:"\u0668",9:"\u0669",0:"\u0660"},Bt={"\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u0660":"0"},qt=function(e){return 0===e?0:1===e?1:2===e?2:3<=e%100&&e%100<=10?3:11<=e%100?4:5},Qt={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},Xt=function(r){return function(e,a,t,s){var n=qt(e),d=Qt[r][qt(e)];return 2===n&&(d=d[a?0:1]),d.replace(/%d/i,e)}},es=["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"];l.defineLocale("ar",{months:es,monthsShort:es,weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/\u200fM/\u200fYYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(e){return"\u0645"===e},meridiem:function(e,a,t){return e<12?"\u0635":"\u0645"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u064b\u0627 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0628\u0639\u062f %s",past:"\u0645\u0646\u0630 %s",s:Xt("s"),ss:Xt("s"),m:Xt("m"),mm:Xt("m"),h:Xt("h"),hh:Xt("h"),d:Xt("d"),dd:Xt("d"),M:Xt("M"),MM:Xt("M"),y:Xt("y"),yy:Xt("y")},preparse:function(e){return e.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function(e){return Bt[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return Zt[e]}).replace(/,/g,"\u060c")},week:{dow:6,doy:12}});var as={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-\xfcnc\xfc",4:"-\xfcnc\xfc",100:"-\xfcnc\xfc",6:"-nc\u0131",9:"-uncu",10:"-uncu",30:"-uncu",60:"-\u0131nc\u0131",90:"-\u0131nc\u0131"};function ts(e,a,t){var s,n;return"m"===t?a?"\u0445\u0432\u0456\u043b\u0456\u043d\u0430":"\u0445\u0432\u0456\u043b\u0456\u043d\u0443":"h"===t?a?"\u0433\u0430\u0434\u0437\u0456\u043d\u0430":"\u0433\u0430\u0434\u0437\u0456\u043d\u0443":e+" "+(s=+e,n={ss:a?"\u0441\u0435\u043a\u0443\u043d\u0434\u0430_\u0441\u0435\u043a\u0443\u043d\u0434\u044b_\u0441\u0435\u043a\u0443\u043d\u0434":"\u0441\u0435\u043a\u0443\u043d\u0434\u0443_\u0441\u0435\u043a\u0443\u043d\u0434\u044b_\u0441\u0435\u043a\u0443\u043d\u0434",mm:a?"\u0445\u0432\u0456\u043b\u0456\u043d\u0430_\u0445\u0432\u0456\u043b\u0456\u043d\u044b_\u0445\u0432\u0456\u043b\u0456\u043d":"\u0445\u0432\u0456\u043b\u0456\u043d\u0443_\u0445\u0432\u0456\u043b\u0456\u043d\u044b_\u0445\u0432\u0456\u043b\u0456\u043d",hh:a?"\u0433\u0430\u0434\u0437\u0456\u043d\u0430_\u0433\u0430\u0434\u0437\u0456\u043d\u044b_\u0433\u0430\u0434\u0437\u0456\u043d":"\u0433\u0430\u0434\u0437\u0456\u043d\u0443_\u0433\u0430\u0434\u0437\u0456\u043d\u044b_\u0433\u0430\u0434\u0437\u0456\u043d",dd:"\u0434\u0437\u0435\u043d\u044c_\u0434\u043d\u0456_\u0434\u0437\u0451\u043d",MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u044b_\u043c\u0435\u0441\u044f\u0446\u0430\u045e",yy:"\u0433\u043e\u0434_\u0433\u0430\u0434\u044b_\u0433\u0430\u0434\u043e\u045e"}[t].split("_"),s%10==1&&s%100!=11?n[0]:2<=s%10&&s%10<=4&&(s%100<10||20<=s%100)?n[1]:n[2])}l.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ert\u0259si_\xc7\u0259r\u015f\u0259nb\u0259 ax\u015fam\u0131_\xc7\u0259r\u015f\u0259nb\u0259_C\xfcm\u0259 ax\u015fam\u0131_C\xfcm\u0259_\u015e\u0259nb\u0259".split("_"),weekdaysShort:"Baz_BzE_\xc7Ax_\xc7\u0259r_CAx_C\xfcm_\u015e\u0259n".split("_"),weekdaysMin:"Bz_BE_\xc7A_\xc7\u0259_CA_C\xfc_\u015e\u0259".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bug\xfcn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[g\u0259l\u0259n h\u0259ft\u0259] dddd [saat] LT",lastDay:"[d\xfcn\u0259n] LT",lastWeek:"[ke\xe7\u0259n h\u0259ft\u0259] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s \u0259vv\u0259l",s:"birne\xe7\u0259 saniy\u0259",ss:"%d saniy\u0259",m:"bir d\u0259qiq\u0259",mm:"%d d\u0259qiq\u0259",h:"bir saat",hh:"%d saat",d:"bir g\xfcn",dd:"%d g\xfcn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec\u0259|s\u0259h\u0259r|g\xfcnd\xfcz|ax\u015fam/,isPM:function(e){return/^(g\xfcnd\xfcz|ax\u015fam)$/.test(e)},meridiem:function(e,a,t){return e<4?"gec\u0259":e<12?"s\u0259h\u0259r":e<17?"g\xfcnd\xfcz":"ax\u015fam"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0131nc\u0131|inci|nci|\xfcnc\xfc|nc\u0131|uncu)/,ordinal:function(e){if(0===e)return e+"-\u0131nc\u0131";var a=e%10;return e+(as[a]||as[e%100-a]||as[100<=e?100:null])},week:{dow:1,doy:7}}),l.defineLocale("be",{months:{format:"\u0441\u0442\u0443\u0434\u0437\u0435\u043d\u044f_\u043b\u044e\u0442\u0430\u0433\u0430_\u0441\u0430\u043a\u0430\u0432\u0456\u043a\u0430_\u043a\u0440\u0430\u0441\u0430\u0432\u0456\u043a\u0430_\u0442\u0440\u0430\u045e\u043d\u044f_\u0447\u044d\u0440\u0432\u0435\u043d\u044f_\u043b\u0456\u043f\u0435\u043d\u044f_\u0436\u043d\u0456\u045e\u043d\u044f_\u0432\u0435\u0440\u0430\u0441\u043d\u044f_\u043a\u0430\u0441\u0442\u0440\u044b\u0447\u043d\u0456\u043a\u0430_\u043b\u0456\u0441\u0442\u0430\u043f\u0430\u0434\u0430_\u0441\u043d\u0435\u0436\u043d\u044f".split("_"),standalone:"\u0441\u0442\u0443\u0434\u0437\u0435\u043d\u044c_\u043b\u044e\u0442\u044b_\u0441\u0430\u043a\u0430\u0432\u0456\u043a_\u043a\u0440\u0430\u0441\u0430\u0432\u0456\u043a_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u044d\u0440\u0432\u0435\u043d\u044c_\u043b\u0456\u043f\u0435\u043d\u044c_\u0436\u043d\u0456\u0432\u0435\u043d\u044c_\u0432\u0435\u0440\u0430\u0441\u0435\u043d\u044c_\u043a\u0430\u0441\u0442\u0440\u044b\u0447\u043d\u0456\u043a_\u043b\u0456\u0441\u0442\u0430\u043f\u0430\u0434_\u0441\u043d\u0435\u0436\u0430\u043d\u044c".split("_")},monthsShort:"\u0441\u0442\u0443\u0434_\u043b\u044e\u0442_\u0441\u0430\u043a_\u043a\u0440\u0430\u0441_\u0442\u0440\u0430\u0432_\u0447\u044d\u0440\u0432_\u043b\u0456\u043f_\u0436\u043d\u0456\u0432_\u0432\u0435\u0440_\u043a\u0430\u0441\u0442_\u043b\u0456\u0441\u0442_\u0441\u043d\u0435\u0436".split("_"),weekdays:{format:"\u043d\u044f\u0434\u0437\u0435\u043b\u044e_\u043f\u0430\u043d\u044f\u0434\u0437\u0435\u043b\u0430\u043a_\u0430\u045e\u0442\u043e\u0440\u0430\u043a_\u0441\u0435\u0440\u0430\u0434\u0443_\u0447\u0430\u0446\u0432\u0435\u0440_\u043f\u044f\u0442\u043d\u0456\u0446\u0443_\u0441\u0443\u0431\u043e\u0442\u0443".split("_"),standalone:"\u043d\u044f\u0434\u0437\u0435\u043b\u044f_\u043f\u0430\u043d\u044f\u0434\u0437\u0435\u043b\u0430\u043a_\u0430\u045e\u0442\u043e\u0440\u0430\u043a_\u0441\u0435\u0440\u0430\u0434\u0430_\u0447\u0430\u0446\u0432\u0435\u0440_\u043f\u044f\u0442\u043d\u0456\u0446\u0430_\u0441\u0443\u0431\u043e\u0442\u0430".split("_"),isFormat:/\[ ?[\u0423\u0443\u045e] ?(?:\u043c\u0456\u043d\u0443\u043b\u0443\u044e|\u043d\u0430\u0441\u0442\u0443\u043f\u043d\u0443\u044e)? ?\] ?dddd/},weekdaysShort:"\u043d\u0434_\u043f\u043d_\u0430\u0442_\u0441\u0440_\u0447\u0446_\u043f\u0442_\u0441\u0431".split("_"),weekdaysMin:"\u043d\u0434_\u043f\u043d_\u0430\u0442_\u0441\u0440_\u0447\u0446_\u043f\u0442_\u0441\u0431".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., HH:mm",LLLL:"dddd, D MMMM YYYY \u0433., HH:mm"},calendar:{sameDay:"[\u0421\u0451\u043d\u043d\u044f \u045e] LT",nextDay:"[\u0417\u0430\u045e\u0442\u0440\u0430 \u045e] LT",lastDay:"[\u0423\u0447\u043e\u0440\u0430 \u045e] LT",nextWeek:function(){return"[\u0423] dddd [\u045e] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[\u0423 \u043c\u0456\u043d\u0443\u043b\u0443\u044e] dddd [\u045e] LT";case 1:case 2:case 4:return"[\u0423 \u043c\u0456\u043d\u0443\u043b\u044b] dddd [\u045e] LT"}},sameElse:"L"},relativeTime:{future:"\u043f\u0440\u0430\u0437 %s",past:"%s \u0442\u0430\u043c\u0443",s:"\u043d\u0435\u043a\u0430\u043b\u044c\u043a\u0456 \u0441\u0435\u043a\u0443\u043d\u0434",m:ts,mm:ts,h:ts,hh:ts,d:"\u0434\u0437\u0435\u043d\u044c",dd:ts,M:"\u043c\u0435\u0441\u044f\u0446",MM:ts,y:"\u0433\u043e\u0434",yy:ts},meridiemParse:/\u043d\u043e\u0447\u044b|\u0440\u0430\u043d\u0456\u0446\u044b|\u0434\u043d\u044f|\u0432\u0435\u0447\u0430\u0440\u0430/,isPM:function(e){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0430\u0440\u0430)$/.test(e)},meridiem:function(e,a,t){return e<4?"\u043d\u043e\u0447\u044b":e<12?"\u0440\u0430\u043d\u0456\u0446\u044b":e<17?"\u0434\u043d\u044f":"\u0432\u0435\u0447\u0430\u0440\u0430"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0456|\u044b|\u0433\u0430)/,ordinal:function(e,a){switch(a){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-\u044b":e+"-\u0456";case"D":return e+"-\u0433\u0430";default:return e}},week:{dow:1,doy:7}}),l.defineLocale("bg",{months:"\u044f\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),monthsShort:"\u044f\u043d\u0440_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),weekdays:"\u043d\u0435\u0434\u0435\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u044f\u0434\u0430_\u0447\u0435\u0442\u0432\u044a\u0440\u0442\u044a\u043a_\u043f\u0435\u0442\u044a\u043a_\u0441\u044a\u0431\u043e\u0442\u0430".split("_"),weekdaysShort:"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u044f_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u044a\u0431".split("_"),weekdaysMin:"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[\u0414\u043d\u0435\u0441 \u0432] LT",nextDay:"[\u0423\u0442\u0440\u0435 \u0432] LT",nextWeek:"dddd [\u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430 \u0432] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[\u0412 \u0438\u0437\u043c\u0438\u043d\u0430\u043b\u0430\u0442\u0430] dddd [\u0432] LT";case 1:case 2:case 4:case 5:return"[\u0412 \u0438\u0437\u043c\u0438\u043d\u0430\u043b\u0438\u044f] dddd [\u0432] LT"}},sameElse:"L"},relativeTime:{future:"\u0441\u043b\u0435\u0434 %s",past:"\u043f\u0440\u0435\u0434\u0438 %s",s:"\u043d\u044f\u043a\u043e\u043b\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434\u0438",ss:"%d \u0441\u0435\u043a\u0443\u043d\u0434\u0438",m:"\u043c\u0438\u043d\u0443\u0442\u0430",mm:"%d \u043c\u0438\u043d\u0443\u0442\u0438",h:"\u0447\u0430\u0441",hh:"%d \u0447\u0430\u0441\u0430",d:"\u0434\u0435\u043d",dd:"%d \u0434\u043d\u0438",M:"\u043c\u0435\u0441\u0435\u0446",MM:"%d \u043c\u0435\u0441\u0435\u0446\u0430",y:"\u0433\u043e\u0434\u0438\u043d\u0430",yy:"%d \u0433\u043e\u0434\u0438\u043d\u0438"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0435\u0432|\u0435\u043d|\u0442\u0438|\u0432\u0438|\u0440\u0438|\u043c\u0438)/,ordinal:function(e){var a=e%10,t=e%100;return 0===e?e+"-\u0435\u0432":0===t?e+"-\u0435\u043d":10<t&&t<20?e+"-\u0442\u0438":1===a?e+"-\u0432\u0438":2===a?e+"-\u0440\u0438":7===a||8===a?e+"-\u043c\u0438":e+"-\u0442\u0438"},week:{dow:1,doy:7}}),l.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_M\u025bkalo_Zuw\u025bnkalo_Zuluyekalo_Utikalo_S\u025btanburukalo_\u0254kut\u0254burukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_M\u025b_Zuw_Zul_Uti_S\u025bt_\u0254ku_Now_Des".split("_"),weekdays:"Kari_Nt\u025bn\u025bn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Nt\u025b_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [l\u025br\u025b] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [l\u025br\u025b] HH:mm"},calendar:{sameDay:"[Bi l\u025br\u025b] LT",nextDay:"[Sini l\u025br\u025b] LT",nextWeek:"dddd [don l\u025br\u025b] LT",lastDay:"[Kunu l\u025br\u025b] LT",lastWeek:"dddd [t\u025bm\u025bnen l\u025br\u025b] LT",sameElse:"L"},relativeTime:{future:"%s k\u0254n\u0254",past:"a b\u025b %s b\u0254",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"l\u025br\u025b kelen",hh:"l\u025br\u025b %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}});var ss={1:"\u09e7",2:"\u09e8",3:"\u09e9",4:"\u09ea",5:"\u09eb",6:"\u09ec",7:"\u09ed",8:"\u09ee",9:"\u09ef",0:"\u09e6"},ns={"\u09e7":"1","\u09e8":"2","\u09e9":"3","\u09ea":"4","\u09eb":"5","\u09ec":"6","\u09ed":"7","\u09ee":"8","\u09ef":"9","\u09e6":"0"};l.defineLocale("bn",{months:"\u099c\u09be\u09a8\u09c1\u09df\u09be\u09b0\u09c0_\u09ab\u09c7\u09ac\u09cd\u09b0\u09c1\u09df\u09be\u09b0\u09bf_\u09ae\u09be\u09b0\u09cd\u099a_\u098f\u09aa\u09cd\u09b0\u09bf\u09b2_\u09ae\u09c7_\u099c\u09c1\u09a8_\u099c\u09c1\u09b2\u09be\u0987_\u0986\u0997\u09b8\u09cd\u099f_\u09b8\u09c7\u09aa\u09cd\u099f\u09c7\u09ae\u09cd\u09ac\u09b0_\u0985\u0995\u09cd\u099f\u09cb\u09ac\u09b0_\u09a8\u09ad\u09c7\u09ae\u09cd\u09ac\u09b0_\u09a1\u09bf\u09b8\u09c7\u09ae\u09cd\u09ac\u09b0".split("_"),monthsShort:"\u099c\u09be\u09a8\u09c1_\u09ab\u09c7\u09ac_\u09ae\u09be\u09b0\u09cd\u099a_\u098f\u09aa\u09cd\u09b0_\u09ae\u09c7_\u099c\u09c1\u09a8_\u099c\u09c1\u09b2_\u0986\u0997_\u09b8\u09c7\u09aa\u09cd\u099f_\u0985\u0995\u09cd\u099f\u09cb_\u09a8\u09ad\u09c7_\u09a1\u09bf\u09b8\u09c7".split("_"),weekdays:"\u09b0\u09ac\u09bf\u09ac\u09be\u09b0_\u09b8\u09cb\u09ae\u09ac\u09be\u09b0_\u09ae\u0999\u09cd\u0997\u09b2\u09ac\u09be\u09b0_\u09ac\u09c1\u09a7\u09ac\u09be\u09b0_\u09ac\u09c3\u09b9\u09b8\u09cd\u09aa\u09a4\u09bf\u09ac\u09be\u09b0_\u09b6\u09c1\u0995\u09cd\u09b0\u09ac\u09be\u09b0_\u09b6\u09a8\u09bf\u09ac\u09be\u09b0".split("_"),weekdaysShort:"\u09b0\u09ac\u09bf_\u09b8\u09cb\u09ae_\u09ae\u0999\u09cd\u0997\u09b2_\u09ac\u09c1\u09a7_\u09ac\u09c3\u09b9\u09b8\u09cd\u09aa\u09a4\u09bf_\u09b6\u09c1\u0995\u09cd\u09b0_\u09b6\u09a8\u09bf".split("_"),weekdaysMin:"\u09b0\u09ac\u09bf_\u09b8\u09cb\u09ae_\u09ae\u0999\u09cd\u0997_\u09ac\u09c1\u09a7_\u09ac\u09c3\u09b9\u0983_\u09b6\u09c1\u0995\u09cd\u09b0_\u09b6\u09a8\u09bf".split("_"),longDateFormat:{LT:"A h:mm \u09b8\u09ae\u09df",LTS:"A h:mm:ss \u09b8\u09ae\u09df",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u09b8\u09ae\u09df",LLLL:"dddd, D MMMM YYYY, A h:mm \u09b8\u09ae\u09df"},calendar:{sameDay:"[\u0986\u099c] LT",nextDay:"[\u0986\u0997\u09be\u09ae\u09c0\u0995\u09be\u09b2] LT",nextWeek:"dddd, LT",lastDay:"[\u0997\u09a4\u0995\u09be\u09b2] LT",lastWeek:"[\u0997\u09a4] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u09aa\u09b0\u09c7",past:"%s \u0986\u0997\u09c7",s:"\u0995\u09df\u09c7\u0995 \u09b8\u09c7\u0995\u09c7\u09a8\u09cd\u09a1",ss:"%d \u09b8\u09c7\u0995\u09c7\u09a8\u09cd\u09a1",m:"\u098f\u0995 \u09ae\u09bf\u09a8\u09bf\u099f",mm:"%d \u09ae\u09bf\u09a8\u09bf\u099f",h:"\u098f\u0995 \u0998\u09a8\u09cd\u099f\u09be",hh:"%d \u0998\u09a8\u09cd\u099f\u09be",d:"\u098f\u0995 \u09a6\u09bf\u09a8",dd:"%d \u09a6\u09bf\u09a8",M:"\u098f\u0995 \u09ae\u09be\u09b8",MM:"%d \u09ae\u09be\u09b8",y:"\u098f\u0995 \u09ac\u099b\u09b0",yy:"%d \u09ac\u099b\u09b0"},preparse:function(e){return e.replace(/[\u09e7\u09e8\u09e9\u09ea\u09eb\u09ec\u09ed\u09ee\u09ef\u09e6]/g,function(e){return ns[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return ss[e]})},meridiemParse:/\u09b0\u09be\u09a4|\u09b8\u0995\u09be\u09b2|\u09a6\u09c1\u09aa\u09c1\u09b0|\u09ac\u09bf\u0995\u09be\u09b2|\u09b0\u09be\u09a4/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u09b0\u09be\u09a4"===a&&4<=e||"\u09a6\u09c1\u09aa\u09c1\u09b0"===a&&e<5||"\u09ac\u09bf\u0995\u09be\u09b2"===a?e+12:e},meridiem:function(e,a,t){return e<4?"\u09b0\u09be\u09a4":e<10?"\u09b8\u0995\u09be\u09b2":e<17?"\u09a6\u09c1\u09aa\u09c1\u09b0":e<20?"\u09ac\u09bf\u0995\u09be\u09b2":"\u09b0\u09be\u09a4"},week:{dow:0,doy:6}});var ds={1:"\u0f21",2:"\u0f22",3:"\u0f23",4:"\u0f24",5:"\u0f25",6:"\u0f26",7:"\u0f27",8:"\u0f28",9:"\u0f29",0:"\u0f20"},rs={"\u0f21":"1","\u0f22":"2","\u0f23":"3","\u0f24":"4","\u0f25":"5","\u0f26":"6","\u0f27":"7","\u0f28":"8","\u0f29":"9","\u0f20":"0"};function _s(e,a,t){return e+" "+function(e,a){if(2===a)return function(e){var a={m:"v",b:"v",d:"z"};if(void 0===a[e.charAt(0)])return e;return a[e.charAt(0)]+e.substring(1)}(e);return e}({mm:"munutenn",MM:"miz",dd:"devezh"}[t],e)}function is(e,a,t){var s=e+" ";switch(t){case"ss":return s+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return a?"jedna minuta":"jedne minute";case"mm":return s+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return a?"jedan sat":"jednog sata";case"hh":return s+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return s+=1===e?"dan":"dana";case"MM":return s+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return s+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}l.defineLocale("bo",{months:"\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0f44\u0f0b\u0f54\u0f7c_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f49\u0f72\u0f66\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f66\u0f74\u0f58\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f5e\u0f72\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f63\u0f94\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0fb2\u0f74\u0f42\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f51\u0f74\u0f53\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f62\u0f92\u0fb1\u0f51\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0f42\u0f74\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f42\u0f45\u0f72\u0f42\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f42\u0f49\u0f72\u0f66\u0f0b\u0f54".split("_"),monthsShort:"\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0f44\u0f0b\u0f54\u0f7c_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f49\u0f72\u0f66\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f66\u0f74\u0f58\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f5e\u0f72\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f63\u0f94\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0fb2\u0f74\u0f42\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f51\u0f74\u0f53\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f62\u0f92\u0fb1\u0f51\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0f42\u0f74\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f42\u0f45\u0f72\u0f42\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f42\u0f49\u0f72\u0f66\u0f0b\u0f54".split("_"),weekdays:"\u0f42\u0f5f\u0f60\u0f0b\u0f49\u0f72\u0f0b\u0f58\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f5f\u0fb3\u0f0b\u0f56\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f58\u0f72\u0f42\u0f0b\u0f51\u0f58\u0f62\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f63\u0fb7\u0f42\u0f0b\u0f54\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f55\u0f74\u0f62\u0f0b\u0f56\u0f74_\u0f42\u0f5f\u0f60\u0f0b\u0f54\u0f0b\u0f66\u0f44\u0f66\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f66\u0fa4\u0f7a\u0f53\u0f0b\u0f54\u0f0b".split("_"),weekdaysShort:"\u0f49\u0f72\u0f0b\u0f58\u0f0b_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b_\u0f58\u0f72\u0f42\u0f0b\u0f51\u0f58\u0f62\u0f0b_\u0f63\u0fb7\u0f42\u0f0b\u0f54\u0f0b_\u0f55\u0f74\u0f62\u0f0b\u0f56\u0f74_\u0f54\u0f0b\u0f66\u0f44\u0f66\u0f0b_\u0f66\u0fa4\u0f7a\u0f53\u0f0b\u0f54\u0f0b".split("_"),weekdaysMin:"\u0f49\u0f72\u0f0b\u0f58\u0f0b_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b_\u0f58\u0f72\u0f42\u0f0b\u0f51\u0f58\u0f62\u0f0b_\u0f63\u0fb7\u0f42\u0f0b\u0f54\u0f0b_\u0f55\u0f74\u0f62\u0f0b\u0f56\u0f74_\u0f54\u0f0b\u0f66\u0f44\u0f66\u0f0b_\u0f66\u0fa4\u0f7a\u0f53\u0f0b\u0f54\u0f0b".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[\u0f51\u0f72\u0f0b\u0f62\u0f72\u0f44] LT",nextDay:"[\u0f66\u0f44\u0f0b\u0f49\u0f72\u0f53] LT",nextWeek:"[\u0f56\u0f51\u0f74\u0f53\u0f0b\u0f55\u0fb2\u0f42\u0f0b\u0f62\u0f97\u0f7a\u0f66\u0f0b\u0f58], LT",lastDay:"[\u0f41\u0f0b\u0f66\u0f44] LT",lastWeek:"[\u0f56\u0f51\u0f74\u0f53\u0f0b\u0f55\u0fb2\u0f42\u0f0b\u0f58\u0f50\u0f60\u0f0b\u0f58] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0f63\u0f0b",past:"%s \u0f66\u0f94\u0f53\u0f0b\u0f63",s:"\u0f63\u0f58\u0f0b\u0f66\u0f44",ss:"%d \u0f66\u0f90\u0f62\u0f0b\u0f46\u0f0d",m:"\u0f66\u0f90\u0f62\u0f0b\u0f58\u0f0b\u0f42\u0f45\u0f72\u0f42",mm:"%d \u0f66\u0f90\u0f62\u0f0b\u0f58",h:"\u0f46\u0f74\u0f0b\u0f5a\u0f7c\u0f51\u0f0b\u0f42\u0f45\u0f72\u0f42",hh:"%d \u0f46\u0f74\u0f0b\u0f5a\u0f7c\u0f51",d:"\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f45\u0f72\u0f42",dd:"%d \u0f49\u0f72\u0f53\u0f0b",M:"\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f45\u0f72\u0f42",MM:"%d \u0f5f\u0fb3\u0f0b\u0f56",y:"\u0f63\u0f7c\u0f0b\u0f42\u0f45\u0f72\u0f42",yy:"%d \u0f63\u0f7c"},preparse:function(e){return e.replace(/[\u0f21\u0f22\u0f23\u0f24\u0f25\u0f26\u0f27\u0f28\u0f29\u0f20]/g,function(e){return rs[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return ds[e]})},meridiemParse:/\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c|\u0f5e\u0f7c\u0f42\u0f66\u0f0b\u0f40\u0f66|\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f74\u0f44|\u0f51\u0f42\u0f7c\u0f44\u0f0b\u0f51\u0f42|\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c"===a&&4<=e||"\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f74\u0f44"===a&&e<5||"\u0f51\u0f42\u0f7c\u0f44\u0f0b\u0f51\u0f42"===a?e+12:e},meridiem:function(e,a,t){return e<4?"\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c":e<10?"\u0f5e\u0f7c\u0f42\u0f66\u0f0b\u0f40\u0f66":e<17?"\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f74\u0f44":e<20?"\u0f51\u0f42\u0f7c\u0f44\u0f0b\u0f51\u0f42":"\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c"},week:{dow:0,doy:6}}),l.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno\xf9",ss:"%d eilenn",m:"ur vunutenn",mm:_s,h:"un eur",hh:"%d eur",d:"un devezh",dd:_s,M:"ur miz",MM:_s,y:"ur bloaz",yy:function(e){switch(function e(a){return 9<a?e(a%10):a}(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(a\xf1|vet)/,ordinal:function(e){return e+(1===e?"a\xf1":"vet")},week:{dow:1,doy:4}}),l.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_\u010detvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._\u010det._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_\u010de_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[ju\u010der u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[pro\u0161lu] dddd [u] LT";case 6:return"[pro\u0161le] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[pro\u0161li] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:is,m:is,mm:is,h:is,hh:is,d:"dan",dd:is,M:"mjesec",MM:is,y:"godinu",yy:is},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),l.defineLocale("ca",{months:{standalone:"gener_febrer_mar\xe7_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar\xe7_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar\xe7_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem\xe0 a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu\xed %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|\xe8|a)/,ordinal:function(e,a){var t=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"\xe8";return"w"!==a&&"W"!==a||(t="a"),e+t},week:{dow:1,doy:4}});var os="leden_\xfanor_b\u0159ezen_duben_kv\u011bten_\u010derven_\u010dervenec_srpen_z\xe1\u0159\xed_\u0159\xedjen_listopad_prosinec".split("_"),ms="led_\xfano_b\u0159e_dub_kv\u011b_\u010dvn_\u010dvc_srp_z\xe1\u0159_\u0159\xedj_lis_pro".split("_");function us(e){return 1<e&&e<5&&1!=~~(e/10)}function ls(e,a,t,s){var n=e+" ";switch(t){case"s":return a||s?"p\xe1r sekund":"p\xe1r sekundami";case"ss":return a||s?n+(us(e)?"sekundy":"sekund"):n+"sekundami";break;case"m":return a?"minuta":s?"minutu":"minutou";case"mm":return a||s?n+(us(e)?"minuty":"minut"):n+"minutami";break;case"h":return a?"hodina":s?"hodinu":"hodinou";case"hh":return a||s?n+(us(e)?"hodiny":"hodin"):n+"hodinami";break;case"d":return a||s?"den":"dnem";case"dd":return a||s?n+(us(e)?"dny":"dn\xed"):n+"dny";break;case"M":return a||s?"m\u011bs\xedc":"m\u011bs\xedcem";case"MM":return a||s?n+(us(e)?"m\u011bs\xedce":"m\u011bs\xedc\u016f"):n+"m\u011bs\xedci";break;case"y":return a||s?"rok":"rokem";case"yy":return a||s?n+(us(e)?"roky":"let"):n+"lety";break}}function Ms(e,a,t,s){var n={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return a?n[t][0]:n[t][1]}function hs(e,a,t,s){var n={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return a?n[t][0]:n[t][1]}function Ls(e,a,t,s){var n={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return a?n[t][0]:n[t][1]}l.defineLocale("cs",{months:os,monthsShort:ms,monthsParse:function(e,a){var t,s=[];for(t=0;t<12;t++)s[t]=new RegExp("^"+e[t]+"$|^"+a[t]+"$","i");return s}(os,ms),shortMonthsParse:function(e){var a,t=[];for(a=0;a<12;a++)t[a]=new RegExp("^"+e[a]+"$","i");return t}(ms),longMonthsParse:function(e){var a,t=[];for(a=0;a<12;a++)t[a]=new RegExp("^"+e[a]+"$","i");return t}(os),weekdays:"ned\u011ble_pond\u011bl\xed_\xfater\xfd_st\u0159eda_\u010dtvrtek_p\xe1tek_sobota".split("_"),weekdaysShort:"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),weekdaysMin:"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[z\xedtra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v ned\u011bli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve st\u0159edu v] LT";case 4:return"[ve \u010dtvrtek v] LT";case 5:return"[v p\xe1tek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[v\u010dera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou ned\u011bli v] LT";case 1:case 2:return"[minul\xe9] dddd [v] LT";case 3:return"[minulou st\u0159edu v] LT";case 4:case 5:return"[minul\xfd] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"p\u0159ed %s",s:ls,ss:ls,m:ls,mm:ls,h:ls,hh:ls,d:ls,dd:ls,M:ls,MM:ls,y:ls,yy:ls},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("cv",{months:"\u043a\u04d1\u0440\u043b\u0430\u0447_\u043d\u0430\u0440\u04d1\u0441_\u043f\u0443\u0448_\u0430\u043a\u0430_\u043c\u0430\u0439_\u04ab\u04d7\u0440\u0442\u043c\u0435_\u0443\u0442\u04d1_\u04ab\u0443\u0440\u043b\u0430_\u0430\u0432\u04d1\u043d_\u044e\u043f\u0430_\u0447\u04f3\u043a_\u0440\u0430\u0448\u0442\u0430\u0432".split("_"),monthsShort:"\u043a\u04d1\u0440_\u043d\u0430\u0440_\u043f\u0443\u0448_\u0430\u043a\u0430_\u043c\u0430\u0439_\u04ab\u04d7\u0440_\u0443\u0442\u04d1_\u04ab\u0443\u0440_\u0430\u0432\u043d_\u044e\u043f\u0430_\u0447\u04f3\u043a_\u0440\u0430\u0448".split("_"),weekdays:"\u0432\u044b\u0440\u0441\u0430\u0440\u043d\u0438\u043a\u0443\u043d_\u0442\u0443\u043d\u0442\u0438\u043a\u0443\u043d_\u044b\u0442\u043b\u0430\u0440\u0438\u043a\u0443\u043d_\u044e\u043d\u043a\u0443\u043d_\u043a\u04d7\u04ab\u043d\u0435\u0440\u043d\u0438\u043a\u0443\u043d_\u044d\u0440\u043d\u0435\u043a\u0443\u043d_\u0448\u04d1\u043c\u0430\u0442\u043a\u0443\u043d".split("_"),weekdaysShort:"\u0432\u044b\u0440_\u0442\u0443\u043d_\u044b\u0442\u043b_\u044e\u043d_\u043a\u04d7\u04ab_\u044d\u0440\u043d_\u0448\u04d1\u043c".split("_"),weekdaysMin:"\u0432\u0440_\u0442\u043d_\u044b\u0442_\u044e\u043d_\u043a\u04ab_\u044d\u0440_\u0448\u043c".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [\u04ab\u0443\u043b\u0445\u0438] MMMM [\u0443\u0439\u04d1\u0445\u04d7\u043d] D[-\u043c\u04d7\u0448\u04d7]",LLL:"YYYY [\u04ab\u0443\u043b\u0445\u0438] MMMM [\u0443\u0439\u04d1\u0445\u04d7\u043d] D[-\u043c\u04d7\u0448\u04d7], HH:mm",LLLL:"dddd, YYYY [\u04ab\u0443\u043b\u0445\u0438] MMMM [\u0443\u0439\u04d1\u0445\u04d7\u043d] D[-\u043c\u04d7\u0448\u04d7], HH:mm"},calendar:{sameDay:"[\u041f\u0430\u044f\u043d] LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",nextDay:"[\u042b\u0440\u0430\u043d] LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",lastDay:"[\u04d6\u043d\u0435\u0440] LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",nextWeek:"[\u04aa\u0438\u0442\u0435\u0441] dddd LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",lastWeek:"[\u0418\u0440\u0442\u043d\u04d7] dddd LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",sameElse:"L"},relativeTime:{future:function(e){return e+(/\u0441\u0435\u0445\u0435\u0442$/i.exec(e)?"\u0440\u0435\u043d":/\u04ab\u0443\u043b$/i.exec(e)?"\u0442\u0430\u043d":"\u0440\u0430\u043d")},past:"%s \u043a\u0430\u044f\u043b\u043b\u0430",s:"\u043f\u04d7\u0440-\u0438\u043a \u04ab\u0435\u043a\u043a\u0443\u043d\u0442",ss:"%d \u04ab\u0435\u043a\u043a\u0443\u043d\u0442",m:"\u043f\u04d7\u0440 \u043c\u0438\u043d\u0443\u0442",mm:"%d \u043c\u0438\u043d\u0443\u0442",h:"\u043f\u04d7\u0440 \u0441\u0435\u0445\u0435\u0442",hh:"%d \u0441\u0435\u0445\u0435\u0442",d:"\u043f\u04d7\u0440 \u043a\u0443\u043d",dd:"%d \u043a\u0443\u043d",M:"\u043f\u04d7\u0440 \u0443\u0439\u04d1\u0445",MM:"%d \u0443\u0439\u04d1\u0445",y:"\u043f\u04d7\u0440 \u04ab\u0443\u043b",yy:"%d \u04ab\u0443\u043b"},dayOfMonthOrdinalParse:/\d{1,2}-\u043c\u04d7\u0448/,ordinal:"%d-\u043c\u04d7\u0448",week:{dow:1,doy:7}}),l.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn \xf4l",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var a="";return 20<e?a=40===e||50===e||60===e||80===e||100===e?"fed":"ain":0<e&&(a=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+a},week:{dow:1,doy:4}}),l.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),weekdaysShort:"s\xf8n_man_tir_ons_tor_fre_l\xf8r".split("_"),weekdaysMin:"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p\xe5 dddd [kl.] LT",lastDay:"[i g\xe5r kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f\xe5 sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en m\xe5ned",MM:"%d m\xe5neder",y:"et \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("de-at",{months:"J\xe4nner_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"J\xe4n._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:Ms,mm:"%d Minuten",h:Ms,hh:"%d Stunden",d:Ms,dd:Ms,M:Ms,MM:Ms,y:Ms,yy:Ms},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("de-ch",{months:"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:hs,mm:"%d Minuten",h:hs,hh:"%d Stunden",d:hs,dd:hs,M:hs,MM:hs,y:hs,yy:hs},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("de",{months:"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:Ls,mm:"%d Minuten",h:Ls,hh:"%d Stunden",d:Ls,dd:Ls,M:Ls,MM:Ls,y:Ls,yy:Ls},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var cs=["\u0796\u07ac\u0782\u07aa\u0787\u07a6\u0783\u07a9","\u078a\u07ac\u0784\u07b0\u0783\u07aa\u0787\u07a6\u0783\u07a9","\u0789\u07a7\u0783\u07a8\u0797\u07aa","\u0787\u07ad\u0795\u07b0\u0783\u07a9\u078d\u07aa","\u0789\u07ad","\u0796\u07ab\u0782\u07b0","\u0796\u07aa\u078d\u07a6\u0787\u07a8","\u0787\u07af\u078e\u07a6\u0790\u07b0\u0793\u07aa","\u0790\u07ac\u0795\u07b0\u0793\u07ac\u0789\u07b0\u0784\u07a6\u0783\u07aa","\u0787\u07ae\u0786\u07b0\u0793\u07af\u0784\u07a6\u0783\u07aa","\u0782\u07ae\u0788\u07ac\u0789\u07b0\u0784\u07a6\u0783\u07aa","\u0791\u07a8\u0790\u07ac\u0789\u07b0\u0784\u07a6\u0783\u07aa"],Ys=["\u0787\u07a7\u078b\u07a8\u0787\u07b0\u078c\u07a6","\u0780\u07af\u0789\u07a6","\u0787\u07a6\u0782\u07b0\u078e\u07a7\u0783\u07a6","\u0784\u07aa\u078b\u07a6","\u0784\u07aa\u0783\u07a7\u0790\u07b0\u078a\u07a6\u078c\u07a8","\u0780\u07aa\u0786\u07aa\u0783\u07aa","\u0780\u07ae\u0782\u07a8\u0780\u07a8\u0783\u07aa"];l.defineLocale("dv",{months:cs,monthsShort:cs,weekdays:Ys,weekdaysShort:Ys,weekdaysMin:"\u0787\u07a7\u078b\u07a8_\u0780\u07af\u0789\u07a6_\u0787\u07a6\u0782\u07b0_\u0784\u07aa\u078b\u07a6_\u0784\u07aa\u0783\u07a7_\u0780\u07aa\u0786\u07aa_\u0780\u07ae\u0782\u07a8".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0789\u0786|\u0789\u078a/,isPM:function(e){return"\u0789\u078a"===e},meridiem:function(e,a,t){return e<12?"\u0789\u0786":"\u0789\u078a"},calendar:{sameDay:"[\u0789\u07a8\u0787\u07a6\u078b\u07aa] LT",nextDay:"[\u0789\u07a7\u078b\u07a6\u0789\u07a7] LT",nextWeek:"dddd LT",lastDay:"[\u0787\u07a8\u0787\u07b0\u0794\u07ac] LT",lastWeek:"[\u078a\u07a7\u0787\u07a8\u078c\u07aa\u0788\u07a8] dddd LT",sameElse:"L"},relativeTime:{future:"\u078c\u07ac\u0783\u07ad\u078e\u07a6\u0787\u07a8 %s",past:"\u0786\u07aa\u0783\u07a8\u0782\u07b0 %s",s:"\u0790\u07a8\u0786\u07aa\u0782\u07b0\u078c\u07aa\u0786\u07ae\u0785\u07ac\u0787\u07b0",ss:"d% \u0790\u07a8\u0786\u07aa\u0782\u07b0\u078c\u07aa",m:"\u0789\u07a8\u0782\u07a8\u0793\u07ac\u0787\u07b0",mm:"\u0789\u07a8\u0782\u07a8\u0793\u07aa %d",h:"\u078e\u07a6\u0791\u07a8\u0787\u07a8\u0783\u07ac\u0787\u07b0",hh:"\u078e\u07a6\u0791\u07a8\u0787\u07a8\u0783\u07aa %d",d:"\u078b\u07aa\u0788\u07a6\u0780\u07ac\u0787\u07b0",dd:"\u078b\u07aa\u0788\u07a6\u0790\u07b0 %d",M:"\u0789\u07a6\u0780\u07ac\u0787\u07b0",MM:"\u0789\u07a6\u0790\u07b0 %d",y:"\u0787\u07a6\u0780\u07a6\u0783\u07ac\u0787\u07b0",yy:"\u0787\u07a6\u0780\u07a6\u0783\u07aa %d"},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"\u060c")},week:{dow:7,doy:12}}),l.defineLocale("el",{monthsNominativeEl:"\u0399\u03b1\u03bd\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2_\u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2_\u039c\u03ac\u03c1\u03c4\u03b9\u03bf\u03c2_\u0391\u03c0\u03c1\u03af\u03bb\u03b9\u03bf\u03c2_\u039c\u03ac\u03b9\u03bf\u03c2_\u0399\u03bf\u03cd\u03bd\u03b9\u03bf\u03c2_\u0399\u03bf\u03cd\u03bb\u03b9\u03bf\u03c2_\u0391\u03cd\u03b3\u03bf\u03c5\u03c3\u03c4\u03bf\u03c2_\u03a3\u03b5\u03c0\u03c4\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2_\u039f\u03ba\u03c4\u03ce\u03b2\u03c1\u03b9\u03bf\u03c2_\u039d\u03bf\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2_\u0394\u03b5\u03ba\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2".split("_"),monthsGenitiveEl:"\u0399\u03b1\u03bd\u03bf\u03c5\u03b1\u03c1\u03af\u03bf\u03c5_\u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03b1\u03c1\u03af\u03bf\u03c5_\u039c\u03b1\u03c1\u03c4\u03af\u03bf\u03c5_\u0391\u03c0\u03c1\u03b9\u03bb\u03af\u03bf\u03c5_\u039c\u03b1\u0390\u03bf\u03c5_\u0399\u03bf\u03c5\u03bd\u03af\u03bf\u03c5_\u0399\u03bf\u03c5\u03bb\u03af\u03bf\u03c5_\u0391\u03c5\u03b3\u03bf\u03cd\u03c3\u03c4\u03bf\u03c5_\u03a3\u03b5\u03c0\u03c4\u03b5\u03bc\u03b2\u03c1\u03af\u03bf\u03c5_\u039f\u03ba\u03c4\u03c9\u03b2\u03c1\u03af\u03bf\u03c5_\u039d\u03bf\u03b5\u03bc\u03b2\u03c1\u03af\u03bf\u03c5_\u0394\u03b5\u03ba\u03b5\u03bc\u03b2\u03c1\u03af\u03bf\u03c5".split("_"),months:function(e,a){return e?"string"==typeof a&&/D/.test(a.substring(0,a.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"\u0399\u03b1\u03bd_\u03a6\u03b5\u03b2_\u039c\u03b1\u03c1_\u0391\u03c0\u03c1_\u039c\u03b1\u03ca_\u0399\u03bf\u03c5\u03bd_\u0399\u03bf\u03c5\u03bb_\u0391\u03c5\u03b3_\u03a3\u03b5\u03c0_\u039f\u03ba\u03c4_\u039d\u03bf\u03b5_\u0394\u03b5\u03ba".split("_"),weekdays:"\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae_\u0394\u03b5\u03c5\u03c4\u03ad\u03c1\u03b1_\u03a4\u03c1\u03af\u03c4\u03b7_\u03a4\u03b5\u03c4\u03ac\u03c1\u03c4\u03b7_\u03a0\u03ad\u03bc\u03c0\u03c4\u03b7_\u03a0\u03b1\u03c1\u03b1\u03c3\u03ba\u03b5\u03c5\u03ae_\u03a3\u03ac\u03b2\u03b2\u03b1\u03c4\u03bf".split("_"),weekdaysShort:"\u039a\u03c5\u03c1_\u0394\u03b5\u03c5_\u03a4\u03c1\u03b9_\u03a4\u03b5\u03c4_\u03a0\u03b5\u03bc_\u03a0\u03b1\u03c1_\u03a3\u03b1\u03b2".split("_"),weekdaysMin:"\u039a\u03c5_\u0394\u03b5_\u03a4\u03c1_\u03a4\u03b5_\u03a0\u03b5_\u03a0\u03b1_\u03a3\u03b1".split("_"),meridiem:function(e,a,t){return 11<e?t?"\u03bc\u03bc":"\u039c\u039c":t?"\u03c0\u03bc":"\u03a0\u039c"},isPM:function(e){return"\u03bc"===(e+"").toLowerCase()[0]},meridiemParse:/[\u03a0\u039c]\.?\u039c?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[\u03a3\u03ae\u03bc\u03b5\u03c1\u03b1 {}] LT",nextDay:"[\u0391\u03cd\u03c1\u03b9\u03bf {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[\u03a7\u03b8\u03b5\u03c2 {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[\u03c4\u03bf \u03c0\u03c1\u03bf\u03b7\u03b3\u03bf\u03cd\u03bc\u03b5\u03bd\u03bf] dddd [{}] LT";default:return"[\u03c4\u03b7\u03bd \u03c0\u03c1\u03bf\u03b7\u03b3\u03bf\u03cd\u03bc\u03b5\u03bd\u03b7] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,a){var t=this._calendarEl[e],s=a&&a.hours();return H(t)&&(t=t.apply(a)),t.replace("{}",s%12==1?"\u03c3\u03c4\u03b7":"\u03c3\u03c4\u03b9\u03c2")},relativeTime:{future:"\u03c3\u03b5 %s",past:"%s \u03c0\u03c1\u03b9\u03bd",s:"\u03bb\u03af\u03b3\u03b1 \u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03cc\u03bb\u03b5\u03c0\u03c4\u03b1",ss:"%d \u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03cc\u03bb\u03b5\u03c0\u03c4\u03b1",m:"\u03ad\u03bd\u03b1 \u03bb\u03b5\u03c0\u03c4\u03cc",mm:"%d \u03bb\u03b5\u03c0\u03c4\u03ac",h:"\u03bc\u03af\u03b1 \u03ce\u03c1\u03b1",hh:"%d \u03ce\u03c1\u03b5\u03c2",d:"\u03bc\u03af\u03b1 \u03bc\u03ad\u03c1\u03b1",dd:"%d \u03bc\u03ad\u03c1\u03b5\u03c2",M:"\u03ad\u03bd\u03b1\u03c2 \u03bc\u03ae\u03bd\u03b1\u03c2",MM:"%d \u03bc\u03ae\u03bd\u03b5\u03c2",y:"\u03ad\u03bd\u03b1\u03c2 \u03c7\u03c1\u03cc\u03bd\u03bf\u03c2",yy:"%d \u03c7\u03c1\u03cc\u03bd\u03b9\u03b1"},dayOfMonthOrdinalParse:/\d{1,2}\u03b7/,ordinal:"%d\u03b7",week:{dow:1,doy:4}}),l.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10;return e+(1==~~(e%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th")},week:{dow:1,doy:4}}),l.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10;return e+(1==~~(e%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th")}}),l.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10;return e+(1==~~(e%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th")},week:{dow:1,doy:4}}),l.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10;return e+(1==~~(e%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th")},week:{dow:1,doy:4}}),l.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10;return e+(1==~~(e%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th")}}),l.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10;return e+(1==~~(e%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th")},week:{dow:1,doy:4}}),l.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_a\u016dgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_a\u016dg_sep_okt_nov_dec".split("_"),weekdays:"diman\u0109o_lundo_mardo_merkredo_\u0135a\u016ddo_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_\u0135a\u016d_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_\u0135a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-a de] MMMM, YYYY",LLL:"D[-a de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-a de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,a,t){return 11<e?t?"p.t.m.":"P.T.M.":t?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia\u016d je] LT",nextDay:"[Morga\u016d je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera\u016d je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta\u016d %s",s:"sekundoj",ss:"%d sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}});var ys="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),fs="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),ks=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],ps=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;l.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?fs[e.month()]:ys[e.month()]:ys},monthsRegex:ps,monthsShortRegex:ps,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:ks,longMonthsParse:ks,shortMonthsParse:ks,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}});var Ds="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),Ts="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");l.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?Ts[e.month()]:Ds[e.month()]:Ds},monthsParseExact:!0,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"MMMM [de] D [de] YYYY",LLL:"MMMM [de] D [de] YYYY h:mm A",LLLL:"dddd, MMMM [de] D [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:0,doy:6}});var gs="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),ws="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),vs=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],Ss=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;function Hs(e,a,t,s){var n={s:["m\xf5ne sekundi","m\xf5ni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["\xfche minuti","\xfcks minut"],mm:[e+" minuti",e+" minutit"],h:["\xfche tunni","tund aega","\xfcks tund"],hh:[e+" tunni",e+" tundi"],d:["\xfche p\xe4eva","\xfcks p\xe4ev"],M:["kuu aja","kuu aega","\xfcks kuu"],MM:[e+" kuu",e+" kuud"],y:["\xfche aasta","aasta","\xfcks aasta"],yy:[e+" aasta",e+" aastat"]};return a?n[t][2]?n[t][2]:n[t][1]:s?n[t][0]:n[t][1]}l.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?ws[e.month()]:gs[e.month()]:gs},monthsRegex:Ss,monthsShortRegex:Ss,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:vs,longMonthsParse:vs,shortMonthsParse:vs,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}}),l.defineLocale("et",{months:"jaanuar_veebruar_m\xe4rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_m\xe4rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"p\xfchap\xe4ev_esmasp\xe4ev_teisip\xe4ev_kolmap\xe4ev_neljap\xe4ev_reede_laup\xe4ev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[T\xe4na,] LT",nextDay:"[Homme,] LT",nextWeek:"[J\xe4rgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s p\xe4rast",past:"%s tagasi",s:Hs,ss:Hs,m:Hs,mm:Hs,h:Hs,hh:Hs,d:Hs,dd:"%d p\xe4eva",M:Hs,MM:Hs,y:Hs,yy:Hs},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var bs={1:"\u06f1",2:"\u06f2",3:"\u06f3",4:"\u06f4",5:"\u06f5",6:"\u06f6",7:"\u06f7",8:"\u06f8",9:"\u06f9",0:"\u06f0"},js={"\u06f1":"1","\u06f2":"2","\u06f3":"3","\u06f4":"4","\u06f5":"5","\u06f6":"6","\u06f7":"7","\u06f8":"8","\u06f9":"9","\u06f0":"0"};l.defineLocale("fa",{months:"\u0698\u0627\u0646\u0648\u06cc\u0647_\u0641\u0648\u0631\u06cc\u0647_\u0645\u0627\u0631\u0633_\u0622\u0648\u0631\u06cc\u0644_\u0645\u0647_\u0698\u0648\u0626\u0646_\u0698\u0648\u0626\u06cc\u0647_\u0627\u0648\u062a_\u0633\u067e\u062a\u0627\u0645\u0628\u0631_\u0627\u06a9\u062a\u0628\u0631_\u0646\u0648\u0627\u0645\u0628\u0631_\u062f\u0633\u0627\u0645\u0628\u0631".split("_"),monthsShort:"\u0698\u0627\u0646\u0648\u06cc\u0647_\u0641\u0648\u0631\u06cc\u0647_\u0645\u0627\u0631\u0633_\u0622\u0648\u0631\u06cc\u0644_\u0645\u0647_\u0698\u0648\u0626\u0646_\u0698\u0648\u0626\u06cc\u0647_\u0627\u0648\u062a_\u0633\u067e\u062a\u0627\u0645\u0628\u0631_\u0627\u06a9\u062a\u0628\u0631_\u0646\u0648\u0627\u0645\u0628\u0631_\u062f\u0633\u0627\u0645\u0628\u0631".split("_"),weekdays:"\u06cc\u06a9\u200c\u0634\u0646\u0628\u0647_\u062f\u0648\u0634\u0646\u0628\u0647_\u0633\u0647\u200c\u0634\u0646\u0628\u0647_\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647_\u067e\u0646\u062c\u200c\u0634\u0646\u0628\u0647_\u062c\u0645\u0639\u0647_\u0634\u0646\u0628\u0647".split("_"),weekdaysShort:"\u06cc\u06a9\u200c\u0634\u0646\u0628\u0647_\u062f\u0648\u0634\u0646\u0628\u0647_\u0633\u0647\u200c\u0634\u0646\u0628\u0647_\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647_\u067e\u0646\u062c\u200c\u0634\u0646\u0628\u0647_\u062c\u0645\u0639\u0647_\u0634\u0646\u0628\u0647".split("_"),weekdaysMin:"\u06cc_\u062f_\u0633_\u0686_\u067e_\u062c_\u0634".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u0642\u0628\u0644 \u0627\u0632 \u0638\u0647\u0631|\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631/,isPM:function(e){return/\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631/.test(e)},meridiem:function(e,a,t){return e<12?"\u0642\u0628\u0644 \u0627\u0632 \u0638\u0647\u0631":"\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631"},calendar:{sameDay:"[\u0627\u0645\u0631\u0648\u0632 \u0633\u0627\u0639\u062a] LT",nextDay:"[\u0641\u0631\u062f\u0627 \u0633\u0627\u0639\u062a] LT",nextWeek:"dddd [\u0633\u0627\u0639\u062a] LT",lastDay:"[\u062f\u06cc\u0631\u0648\u0632 \u0633\u0627\u0639\u062a] LT",lastWeek:"dddd [\u067e\u06cc\u0634] [\u0633\u0627\u0639\u062a] LT",sameElse:"L"},relativeTime:{future:"\u062f\u0631 %s",past:"%s \u067e\u06cc\u0634",s:"\u0686\u0646\u062f \u062b\u0627\u0646\u06cc\u0647",ss:"\u062b\u0627\u0646\u06cc\u0647 d%",m:"\u06cc\u06a9 \u062f\u0642\u06cc\u0642\u0647",mm:"%d \u062f\u0642\u06cc\u0642\u0647",h:"\u06cc\u06a9 \u0633\u0627\u0639\u062a",hh:"%d \u0633\u0627\u0639\u062a",d:"\u06cc\u06a9 \u0631\u0648\u0632",dd:"%d \u0631\u0648\u0632",M:"\u06cc\u06a9 \u0645\u0627\u0647",MM:"%d \u0645\u0627\u0647",y:"\u06cc\u06a9 \u0633\u0627\u0644",yy:"%d \u0633\u0627\u0644"},preparse:function(e){return e.replace(/[\u06f0-\u06f9]/g,function(e){return js[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return bs[e]}).replace(/,/g,"\u060c")},dayOfMonthOrdinalParse:/\d{1,2}\u0645/,ordinal:"%d\u0645",week:{dow:6,doy:12}});var xs="nolla yksi kaksi kolme nelj\xe4 viisi kuusi seitsem\xe4n kahdeksan yhdeks\xe4n".split(" "),Ps=["nolla","yhden","kahden","kolmen","nelj\xe4n","viiden","kuuden",xs[7],xs[8],xs[9]];function Os(e,a,t,s){var n,d,r="";switch(t){case"s":return s?"muutaman sekunnin":"muutama sekunti";case"ss":return s?"sekunnin":"sekuntia";case"m":return s?"minuutin":"minuutti";case"mm":r=s?"minuutin":"minuuttia";break;case"h":return s?"tunnin":"tunti";case"hh":r=s?"tunnin":"tuntia";break;case"d":return s?"p\xe4iv\xe4n":"p\xe4iv\xe4";case"dd":r=s?"p\xe4iv\xe4n":"p\xe4iv\xe4\xe4";break;case"M":return s?"kuukauden":"kuukausi";case"MM":r=s?"kuukauden":"kuukautta";break;case"y":return s?"vuoden":"vuosi";case"yy":r=s?"vuoden":"vuotta";break}return d=s,r=((n=e)<10?d?Ps[n]:xs[n]:n)+" "+r}l.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kes\xe4kuu_hein\xe4kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes\xe4_hein\xe4_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[t\xe4n\xe4\xe4n] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s p\xe4\xe4st\xe4",past:"%s sitten",s:Os,ss:Os,m:Os,mm:Os,h:Os,hh:Os,d:Os,dd:Os,M:Os,MM:Os,y:Os,yy:Os},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("fo",{months:"januar_februar_mars_apr\xedl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_m\xe1nadagur_t\xfdsdagur_mikudagur_h\xf3sdagur_fr\xedggjadagur_leygardagur".split("_"),weekdaysShort:"sun_m\xe1n_t\xfds_mik_h\xf3s_fr\xed_ley".split("_"),weekdaysMin:"su_m\xe1_t\xfd_mi_h\xf3_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[\xcd dag kl.] LT",nextDay:"[\xcd morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[\xcd gj\xe1r kl.] LT",lastWeek:"[s\xed\xf0stu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s s\xed\xf0ani",s:"f\xe1 sekund",ss:"%d sekundir",m:"ein minutt",mm:"%d minuttir",h:"ein t\xedmi",hh:"%d t\xedmar",d:"ein dagur",dd:"%d dagar",M:"ein m\xe1na\xf0i",MM:"%d m\xe1na\xf0ir",y:"eitt \xe1r",yy:"%d \xe1r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("fr-ca",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,a){switch(a){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}}),l.defineLocale("fr-ch",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,a){switch(a){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}}),l.defineLocale("fr",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,a){switch(a){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}});var Ws="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),Es="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");l.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?Es[e.month()]:Ws[e.month()]:Ws},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[\xf4fr\xfbne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien min\xfat",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||20<=e?"ste":"de")},week:{dow:1,doy:4}});function As(e,a,t,s){var n={s:["thodde secondanim","thodde second"],ss:[e+" secondanim",e+" second"],m:["eka mintan","ek minute"],mm:[e+" mintanim",e+" mintam"],h:["eka horan","ek hor"],hh:[e+" horanim",e+" horam"],d:["eka disan","ek dis"],dd:[e+" disanim",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineanim",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsanim",e+" vorsam"]};return a?n[t][0]:n[t][1]}l.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am M\xe0rt","An Giblean","An C\xe8itean","An t-\xd2gmhios","An t-Iuchar","An L\xf9nastal","An t-Sultain","An D\xe0mhair","An t-Samhain","An D\xf9bhlachd"],monthsShort:["Faoi","Gear","M\xe0rt","Gibl","C\xe8it","\xd2gmh","Iuch","L\xf9n","Sult","D\xe0mh","Samh","D\xf9bh"],monthsParseExact:!0,weekdays:["Did\xf2mhnaich","Diluain","Dim\xe0irt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D\xf2","Lu","M\xe0","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-m\xe0ireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d\xe8 aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"m\xecos",MM:"%d m\xecosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}}),l.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xu\xf1o_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu\xf1._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_m\xe9rcores_xoves_venres_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._m\xe9r._xov._ven._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_m\xe9_xo_ve_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"\xe1s":"\xe1")+"] LT"},nextDay:function(){return"[ma\xf1\xe1 "+(1!==this.hours()?"\xe1s":"\xe1")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"\xe1s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"\xe1":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"\xe1s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}}),l.defineLocale("gom-latn",{months:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Ieta to] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fatlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:As,ss:As,m:As,mm:As,h:As,hh:As,d:As,dd:As,M:As,MM:As,y:As,yy:As},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,a){switch(a){case"D":return e+"er";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return e}},week:{dow:1,doy:4},meridiemParse:/rati|sokalli|donparam|sanje/,meridiemHour:function(e,a){return 12===e&&(e=0),"rati"===a?e<4?e:e+12:"sokalli"===a?e:"donparam"===a?12<e?e:e+12:"sanje"===a?e+12:void 0},meridiem:function(e,a,t){return e<4?"rati":e<12?"sokalli":e<16?"donparam":e<20?"sanje":"rati"}});var Fs={1:"\u0ae7",2:"\u0ae8",3:"\u0ae9",4:"\u0aea",5:"\u0aeb",6:"\u0aec",7:"\u0aed",8:"\u0aee",9:"\u0aef",0:"\u0ae6"},zs={"\u0ae7":"1","\u0ae8":"2","\u0ae9":"3","\u0aea":"4","\u0aeb":"5","\u0aec":"6","\u0aed":"7","\u0aee":"8","\u0aef":"9","\u0ae6":"0"};l.defineLocale("gu",{months:"\u0a9c\u0abe\u0aa8\u0acd\u0aaf\u0ac1\u0a86\u0ab0\u0ac0_\u0aab\u0ac7\u0aac\u0acd\u0ab0\u0ac1\u0a86\u0ab0\u0ac0_\u0aae\u0abe\u0ab0\u0acd\u0a9a_\u0a8f\u0aaa\u0acd\u0ab0\u0abf\u0ab2_\u0aae\u0ac7_\u0a9c\u0ac2\u0aa8_\u0a9c\u0ac1\u0ab2\u0abe\u0a88_\u0a91\u0a97\u0ab8\u0acd\u0a9f_\u0ab8\u0aaa\u0acd\u0a9f\u0ac7\u0aae\u0acd\u0aac\u0ab0_\u0a91\u0a95\u0acd\u0a9f\u0acd\u0aac\u0ab0_\u0aa8\u0ab5\u0ac7\u0aae\u0acd\u0aac\u0ab0_\u0aa1\u0abf\u0ab8\u0ac7\u0aae\u0acd\u0aac\u0ab0".split("_"),monthsShort:"\u0a9c\u0abe\u0aa8\u0acd\u0aaf\u0ac1._\u0aab\u0ac7\u0aac\u0acd\u0ab0\u0ac1._\u0aae\u0abe\u0ab0\u0acd\u0a9a_\u0a8f\u0aaa\u0acd\u0ab0\u0abf._\u0aae\u0ac7_\u0a9c\u0ac2\u0aa8_\u0a9c\u0ac1\u0ab2\u0abe._\u0a91\u0a97._\u0ab8\u0aaa\u0acd\u0a9f\u0ac7._\u0a91\u0a95\u0acd\u0a9f\u0acd._\u0aa8\u0ab5\u0ac7._\u0aa1\u0abf\u0ab8\u0ac7.".split("_"),monthsParseExact:!0,weekdays:"\u0ab0\u0ab5\u0abf\u0ab5\u0abe\u0ab0_\u0ab8\u0acb\u0aae\u0ab5\u0abe\u0ab0_\u0aae\u0a82\u0a97\u0ab3\u0ab5\u0abe\u0ab0_\u0aac\u0ac1\u0aa7\u0acd\u0ab5\u0abe\u0ab0_\u0a97\u0ac1\u0ab0\u0ac1\u0ab5\u0abe\u0ab0_\u0ab6\u0ac1\u0a95\u0acd\u0ab0\u0ab5\u0abe\u0ab0_\u0ab6\u0aa8\u0abf\u0ab5\u0abe\u0ab0".split("_"),weekdaysShort:"\u0ab0\u0ab5\u0abf_\u0ab8\u0acb\u0aae_\u0aae\u0a82\u0a97\u0ab3_\u0aac\u0ac1\u0aa7\u0acd_\u0a97\u0ac1\u0ab0\u0ac1_\u0ab6\u0ac1\u0a95\u0acd\u0ab0_\u0ab6\u0aa8\u0abf".split("_"),weekdaysMin:"\u0ab0_\u0ab8\u0acb_\u0aae\u0a82_\u0aac\u0ac1_\u0a97\u0ac1_\u0ab6\u0ac1_\u0ab6".split("_"),longDateFormat:{LT:"A h:mm \u0ab5\u0abe\u0a97\u0acd\u0aaf\u0ac7",LTS:"A h:mm:ss \u0ab5\u0abe\u0a97\u0acd\u0aaf\u0ac7",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u0ab5\u0abe\u0a97\u0acd\u0aaf\u0ac7",LLLL:"dddd, D MMMM YYYY, A h:mm \u0ab5\u0abe\u0a97\u0acd\u0aaf\u0ac7"},calendar:{sameDay:"[\u0a86\u0a9c] LT",nextDay:"[\u0a95\u0abe\u0ab2\u0ac7] LT",nextWeek:"dddd, LT",lastDay:"[\u0a97\u0a87\u0a95\u0abe\u0ab2\u0ac7] LT",lastWeek:"[\u0aaa\u0abe\u0a9b\u0ab2\u0abe] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0aae\u0abe",past:"%s \u0aaa\u0ac7\u0ab9\u0ab2\u0abe",s:"\u0a85\u0aae\u0ac1\u0a95 \u0aaa\u0ab3\u0acb",ss:"%d \u0ab8\u0ac7\u0a95\u0a82\u0aa1",m:"\u0a8f\u0a95 \u0aae\u0abf\u0aa8\u0abf\u0a9f",mm:"%d \u0aae\u0abf\u0aa8\u0abf\u0a9f",h:"\u0a8f\u0a95 \u0a95\u0ab2\u0abe\u0a95",hh:"%d \u0a95\u0ab2\u0abe\u0a95",d:"\u0a8f\u0a95 \u0aa6\u0abf\u0ab5\u0ab8",dd:"%d \u0aa6\u0abf\u0ab5\u0ab8",M:"\u0a8f\u0a95 \u0aae\u0ab9\u0abf\u0aa8\u0acb",MM:"%d \u0aae\u0ab9\u0abf\u0aa8\u0acb",y:"\u0a8f\u0a95 \u0ab5\u0ab0\u0acd\u0ab7",yy:"%d \u0ab5\u0ab0\u0acd\u0ab7"},preparse:function(e){return e.replace(/[\u0ae7\u0ae8\u0ae9\u0aea\u0aeb\u0aec\u0aed\u0aee\u0aef\u0ae6]/g,function(e){return zs[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Fs[e]})},meridiemParse:/\u0ab0\u0abe\u0aa4|\u0aac\u0aaa\u0acb\u0ab0|\u0ab8\u0ab5\u0abe\u0ab0|\u0ab8\u0abe\u0a82\u0a9c/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u0ab0\u0abe\u0aa4"===a?e<4?e:e+12:"\u0ab8\u0ab5\u0abe\u0ab0"===a?e:"\u0aac\u0aaa\u0acb\u0ab0"===a?10<=e?e:e+12:"\u0ab8\u0abe\u0a82\u0a9c"===a?e+12:void 0},meridiem:function(e,a,t){return e<4?"\u0ab0\u0abe\u0aa4":e<10?"\u0ab8\u0ab5\u0abe\u0ab0":e<17?"\u0aac\u0aaa\u0acb\u0ab0":e<20?"\u0ab8\u0abe\u0a82\u0a9c":"\u0ab0\u0abe\u0aa4"},week:{dow:0,doy:6}}),l.defineLocale("he",{months:"\u05d9\u05e0\u05d5\u05d0\u05e8_\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05d9\u05dc_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8_\u05e1\u05e4\u05d8\u05de\u05d1\u05e8_\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8_\u05e0\u05d5\u05d1\u05de\u05d1\u05e8_\u05d3\u05e6\u05de\u05d1\u05e8".split("_"),monthsShort:"\u05d9\u05e0\u05d5\u05f3_\u05e4\u05d1\u05e8\u05f3_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05f3_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05f3_\u05e1\u05e4\u05d8\u05f3_\u05d0\u05d5\u05e7\u05f3_\u05e0\u05d5\u05d1\u05f3_\u05d3\u05e6\u05de\u05f3".split("_"),weekdays:"\u05e8\u05d0\u05e9\u05d5\u05df_\u05e9\u05e0\u05d9_\u05e9\u05dc\u05d9\u05e9\u05d9_\u05e8\u05d1\u05d9\u05e2\u05d9_\u05d7\u05de\u05d9\u05e9\u05d9_\u05e9\u05d9\u05e9\u05d9_\u05e9\u05d1\u05ea".split("_"),weekdaysShort:"\u05d0\u05f3_\u05d1\u05f3_\u05d2\u05f3_\u05d3\u05f3_\u05d4\u05f3_\u05d5\u05f3_\u05e9\u05f3".split("_"),weekdaysMin:"\u05d0_\u05d1_\u05d2_\u05d3_\u05d4_\u05d5_\u05e9".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [\u05d1]MMMM YYYY",LLL:"D [\u05d1]MMMM YYYY HH:mm",LLLL:"dddd, D [\u05d1]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[\u05d4\u05d9\u05d5\u05dd \u05d1\u05be]LT",nextDay:"[\u05de\u05d7\u05e8 \u05d1\u05be]LT",nextWeek:"dddd [\u05d1\u05e9\u05e2\u05d4] LT",lastDay:"[\u05d0\u05ea\u05de\u05d5\u05dc \u05d1\u05be]LT",lastWeek:"[\u05d1\u05d9\u05d5\u05dd] dddd [\u05d4\u05d0\u05d7\u05e8\u05d5\u05df \u05d1\u05e9\u05e2\u05d4] LT",sameElse:"L"},relativeTime:{future:"\u05d1\u05e2\u05d5\u05d3 %s",past:"\u05dc\u05e4\u05e0\u05d9 %s",s:"\u05de\u05e1\u05e4\u05e8 \u05e9\u05e0\u05d9\u05d5\u05ea",ss:"%d \u05e9\u05e0\u05d9\u05d5\u05ea",m:"\u05d3\u05e7\u05d4",mm:"%d \u05d3\u05e7\u05d5\u05ea",h:"\u05e9\u05e2\u05d4",hh:function(e){return 2===e?"\u05e9\u05e2\u05ea\u05d9\u05d9\u05dd":e+" \u05e9\u05e2\u05d5\u05ea"},d:"\u05d9\u05d5\u05dd",dd:function(e){return 2===e?"\u05d9\u05d5\u05de\u05d9\u05d9\u05dd":e+" \u05d9\u05de\u05d9\u05dd"},M:"\u05d7\u05d5\u05d3\u05e9",MM:function(e){return 2===e?"\u05d7\u05d5\u05d3\u05e9\u05d9\u05d9\u05dd":e+" \u05d7\u05d5\u05d3\u05e9\u05d9\u05dd"},y:"\u05e9\u05e0\u05d4",yy:function(e){return 2===e?"\u05e9\u05e0\u05ea\u05d9\u05d9\u05dd":e%10==0&&10!==e?e+" \u05e9\u05e0\u05d4":e+" \u05e9\u05e0\u05d9\u05dd"}},meridiemParse:/\u05d0\u05d7\u05d4"\u05e6|\u05dc\u05e4\u05e0\u05d4"\u05e6|\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05dc\u05e4\u05e0\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05dc\u05e4\u05e0\u05d5\u05ea \u05d1\u05d5\u05e7\u05e8|\u05d1\u05d1\u05d5\u05e7\u05e8|\u05d1\u05e2\u05e8\u05d1/i,isPM:function(e){return/^(\u05d0\u05d7\u05d4"\u05e6|\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05d1\u05e2\u05e8\u05d1)$/.test(e)},meridiem:function(e,a,t){return e<5?"\u05dc\u05e4\u05e0\u05d5\u05ea \u05d1\u05d5\u05e7\u05e8":e<10?"\u05d1\u05d1\u05d5\u05e7\u05e8":e<12?t?'\u05dc\u05e4\u05e0\u05d4"\u05e6':"\u05dc\u05e4\u05e0\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd":e<18?t?'\u05d0\u05d7\u05d4"\u05e6':"\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd":"\u05d1\u05e2\u05e8\u05d1"}});var Js={1:"\u0967",2:"\u0968",3:"\u0969",4:"\u096a",5:"\u096b",6:"\u096c",7:"\u096d",8:"\u096e",9:"\u096f",0:"\u0966"},Ns={"\u0967":"1","\u0968":"2","\u0969":"3","\u096a":"4","\u096b":"5","\u096c":"6","\u096d":"7","\u096e":"8","\u096f":"9","\u0966":"0"};function Rs(e,a,t){var s=e+" ";switch(t){case"ss":return s+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return a?"jedna minuta":"jedne minute";case"mm":return s+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return a?"jedan sat":"jednog sata";case"hh":return s+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return s+=1===e?"dan":"dana";case"MM":return s+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return s+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}l.defineLocale("hi",{months:"\u091c\u0928\u0935\u0930\u0940_\u092b\u093c\u0930\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948\u0932_\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0938\u094d\u0924_\u0938\u093f\u0924\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u0942\u092c\u0930_\u0928\u0935\u092e\u094d\u092c\u0930_\u0926\u093f\u0938\u092e\u094d\u092c\u0930".split("_"),monthsShort:"\u091c\u0928._\u092b\u093c\u0930._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948._\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932._\u0905\u0917._\u0938\u093f\u0924._\u0905\u0915\u094d\u091f\u0942._\u0928\u0935._\u0926\u093f\u0938.".split("_"),monthsParseExact:!0,weekdays:"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0932\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),weekdaysShort:"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0932_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),weekdaysMin:"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),longDateFormat:{LT:"A h:mm \u092c\u091c\u0947",LTS:"A h:mm:ss \u092c\u091c\u0947",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u092c\u091c\u0947",LLLL:"dddd, D MMMM YYYY, A h:mm \u092c\u091c\u0947"},calendar:{sameDay:"[\u0906\u091c] LT",nextDay:"[\u0915\u0932] LT",nextWeek:"dddd, LT",lastDay:"[\u0915\u0932] LT",lastWeek:"[\u092a\u093f\u091b\u0932\u0947] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u092e\u0947\u0902",past:"%s \u092a\u0939\u0932\u0947",s:"\u0915\u0941\u091b \u0939\u0940 \u0915\u094d\u0937\u0923",ss:"%d \u0938\u0947\u0915\u0902\u0921",m:"\u090f\u0915 \u092e\u093f\u0928\u091f",mm:"%d \u092e\u093f\u0928\u091f",h:"\u090f\u0915 \u0918\u0902\u091f\u093e",hh:"%d \u0918\u0902\u091f\u0947",d:"\u090f\u0915 \u0926\u093f\u0928",dd:"%d \u0926\u093f\u0928",M:"\u090f\u0915 \u092e\u0939\u0940\u0928\u0947",MM:"%d \u092e\u0939\u0940\u0928\u0947",y:"\u090f\u0915 \u0935\u0930\u094d\u0937",yy:"%d \u0935\u0930\u094d\u0937"},preparse:function(e){return e.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(e){return Ns[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Js[e]})},meridiemParse:/\u0930\u093e\u0924|\u0938\u0941\u092c\u0939|\u0926\u094b\u092a\u0939\u0930|\u0936\u093e\u092e/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u0930\u093e\u0924"===a?e<4?e:e+12:"\u0938\u0941\u092c\u0939"===a?e:"\u0926\u094b\u092a\u0939\u0930"===a?10<=e?e:e+12:"\u0936\u093e\u092e"===a?e+12:void 0},meridiem:function(e,a,t){return e<4?"\u0930\u093e\u0924":e<10?"\u0938\u0941\u092c\u0939":e<17?"\u0926\u094b\u092a\u0939\u0930":e<20?"\u0936\u093e\u092e":"\u0930\u093e\u0924"},week:{dow:0,doy:6}}),l.defineLocale("hr",{months:{format:"sije\u010dnja_velja\u010de_o\u017eujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sije\u010danj_velja\u010da_o\u017eujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._o\u017eu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_\u010detvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._\u010det._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_\u010de_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[ju\u010der u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[pro\u0161lu] dddd [u] LT";case 6:return"[pro\u0161le] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[pro\u0161li] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:Rs,m:Rs,mm:Rs,h:Rs,hh:Rs,d:"dan",dd:Rs,M:"mjesec",MM:Rs,y:"godinu",yy:Rs},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var Is="vas\xe1rnap h\xe9tf\u0151n kedden szerd\xe1n cs\xfct\xf6rt\xf6k\xf6n p\xe9nteken szombaton".split(" ");function Cs(e,a,t,s){var n=e;switch(t){case"s":return s||a?"n\xe9h\xe1ny m\xe1sodperc":"n\xe9h\xe1ny m\xe1sodperce";case"ss":return n+(s||a)?" m\xe1sodperc":" m\xe1sodperce";case"m":return"egy"+(s||a?" perc":" perce");case"mm":return n+(s||a?" perc":" perce");case"h":return"egy"+(s||a?" \xf3ra":" \xf3r\xe1ja");case"hh":return n+(s||a?" \xf3ra":" \xf3r\xe1ja");case"d":return"egy"+(s||a?" nap":" napja");case"dd":return n+(s||a?" nap":" napja");case"M":return"egy"+(s||a?" h\xf3nap":" h\xf3napja");case"MM":return n+(s||a?" h\xf3nap":" h\xf3napja");case"y":return"egy"+(s||a?" \xe9v":" \xe9ve");case"yy":return n+(s||a?" \xe9v":" \xe9ve")}return""}function Gs(e){return(e?"":"[m\xfalt] ")+"["+Is[this.day()]+"] LT[-kor]"}function Us(e){return e%100==11||e%10!=1}function Vs(e,a,t,s){var n=e+" ";switch(t){case"s":return a||s?"nokkrar sek\xfandur":"nokkrum sek\xfandum";case"ss":return Us(e)?n+(a||s?"sek\xfandur":"sek\xfandum"):n+"sek\xfanda";case"m":return a?"m\xedn\xfata":"m\xedn\xfatu";case"mm":return Us(e)?n+(a||s?"m\xedn\xfatur":"m\xedn\xfatum"):a?n+"m\xedn\xfata":n+"m\xedn\xfatu";case"hh":return Us(e)?n+(a||s?"klukkustundir":"klukkustundum"):n+"klukkustund";case"d":return a?"dagur":s?"dag":"degi";case"dd":return Us(e)?a?n+"dagar":n+(s?"daga":"d\xf6gum"):a?n+"dagur":n+(s?"dag":"degi");case"M":return a?"m\xe1nu\xf0ur":s?"m\xe1nu\xf0":"m\xe1nu\xf0i";case"MM":return Us(e)?a?n+"m\xe1nu\xf0ir":n+(s?"m\xe1nu\xf0i":"m\xe1nu\xf0um"):a?n+"m\xe1nu\xf0ur":n+(s?"m\xe1nu\xf0":"m\xe1nu\xf0i");case"y":return a||s?"\xe1r":"\xe1ri";case"yy":return Us(e)?n+(a||s?"\xe1r":"\xe1rum"):n+(a||s?"\xe1r":"\xe1ri")}}l.defineLocale("hu",{months:"janu\xe1r_febru\xe1r_m\xe1rcius_\xe1prilis_m\xe1jus_j\xfanius_j\xfalius_augusztus_szeptember_okt\xf3ber_november_december".split("_"),monthsShort:"jan_feb_m\xe1rc_\xe1pr_m\xe1j_j\xfan_j\xfal_aug_szept_okt_nov_dec".split("_"),weekdays:"vas\xe1rnap_h\xe9tf\u0151_kedd_szerda_cs\xfct\xf6rt\xf6k_p\xe9ntek_szombat".split("_"),weekdaysShort:"vas_h\xe9t_kedd_sze_cs\xfct_p\xe9n_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,a,t){return e<12?!0===t?"de":"DE":!0===t?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return Gs.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return Gs.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s m\xfalva",past:"%s",s:Cs,ss:Cs,m:Cs,mm:Cs,h:Cs,hh:Cs,d:Cs,dd:Cs,M:Cs,MM:Cs,y:Cs,yy:Cs},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("hy-am",{months:{format:"\u0570\u0578\u0582\u0576\u057e\u0561\u0580\u056b_\u0583\u0565\u057f\u0580\u057e\u0561\u0580\u056b_\u0574\u0561\u0580\u057f\u056b_\u0561\u057a\u0580\u056b\u056c\u056b_\u0574\u0561\u0575\u056b\u057d\u056b_\u0570\u0578\u0582\u0576\u056b\u057d\u056b_\u0570\u0578\u0582\u056c\u056b\u057d\u056b_\u0585\u0563\u0578\u057d\u057f\u0578\u057d\u056b_\u057d\u0565\u057a\u057f\u0565\u0574\u0562\u0565\u0580\u056b_\u0570\u0578\u056f\u057f\u0565\u0574\u0562\u0565\u0580\u056b_\u0576\u0578\u0575\u0565\u0574\u0562\u0565\u0580\u056b_\u0564\u0565\u056f\u057f\u0565\u0574\u0562\u0565\u0580\u056b".split("_"),standalone:"\u0570\u0578\u0582\u0576\u057e\u0561\u0580_\u0583\u0565\u057f\u0580\u057e\u0561\u0580_\u0574\u0561\u0580\u057f_\u0561\u057a\u0580\u056b\u056c_\u0574\u0561\u0575\u056b\u057d_\u0570\u0578\u0582\u0576\u056b\u057d_\u0570\u0578\u0582\u056c\u056b\u057d_\u0585\u0563\u0578\u057d\u057f\u0578\u057d_\u057d\u0565\u057a\u057f\u0565\u0574\u0562\u0565\u0580_\u0570\u0578\u056f\u057f\u0565\u0574\u0562\u0565\u0580_\u0576\u0578\u0575\u0565\u0574\u0562\u0565\u0580_\u0564\u0565\u056f\u057f\u0565\u0574\u0562\u0565\u0580".split("_")},monthsShort:"\u0570\u0576\u057e_\u0583\u057f\u0580_\u0574\u0580\u057f_\u0561\u057a\u0580_\u0574\u0575\u057d_\u0570\u0576\u057d_\u0570\u056c\u057d_\u0585\u0563\u057d_\u057d\u057a\u057f_\u0570\u056f\u057f_\u0576\u0574\u0562_\u0564\u056f\u057f".split("_"),weekdays:"\u056f\u056b\u0580\u0561\u056f\u056b_\u0565\u0580\u056f\u0578\u0582\u0577\u0561\u0562\u0569\u056b_\u0565\u0580\u0565\u0584\u0577\u0561\u0562\u0569\u056b_\u0579\u0578\u0580\u0565\u0584\u0577\u0561\u0562\u0569\u056b_\u0570\u056b\u0576\u0563\u0577\u0561\u0562\u0569\u056b_\u0578\u0582\u0580\u0562\u0561\u0569_\u0577\u0561\u0562\u0561\u0569".split("_"),weekdaysShort:"\u056f\u0580\u056f_\u0565\u0580\u056f_\u0565\u0580\u0584_\u0579\u0580\u0584_\u0570\u0576\u0563_\u0578\u0582\u0580\u0562_\u0577\u0562\u0569".split("_"),weekdaysMin:"\u056f\u0580\u056f_\u0565\u0580\u056f_\u0565\u0580\u0584_\u0579\u0580\u0584_\u0570\u0576\u0563_\u0578\u0582\u0580\u0562_\u0577\u0562\u0569".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0569.",LLL:"D MMMM YYYY \u0569., HH:mm",LLLL:"dddd, D MMMM YYYY \u0569., HH:mm"},calendar:{sameDay:"[\u0561\u0575\u057d\u0585\u0580] LT",nextDay:"[\u057e\u0561\u0572\u0568] LT",lastDay:"[\u0565\u0580\u0565\u056f] LT",nextWeek:function(){return"dddd [\u0585\u0580\u0568 \u056a\u0561\u0574\u0568] LT"},lastWeek:function(){return"[\u0561\u0576\u0581\u0561\u056e] dddd [\u0585\u0580\u0568 \u056a\u0561\u0574\u0568] LT"},sameElse:"L"},relativeTime:{future:"%s \u0570\u0565\u057f\u0578",past:"%s \u0561\u057c\u0561\u057b",s:"\u0574\u056b \u0584\u0561\u0576\u056b \u057e\u0561\u0575\u0580\u056f\u0575\u0561\u0576",ss:"%d \u057e\u0561\u0575\u0580\u056f\u0575\u0561\u0576",m:"\u0580\u0578\u057a\u0565",mm:"%d \u0580\u0578\u057a\u0565",h:"\u056a\u0561\u0574",hh:"%d \u056a\u0561\u0574",d:"\u0585\u0580",dd:"%d \u0585\u0580",M:"\u0561\u0574\u056b\u057d",MM:"%d \u0561\u0574\u056b\u057d",y:"\u057f\u0561\u0580\u056b",yy:"%d \u057f\u0561\u0580\u056b"},meridiemParse:/\u0563\u056b\u0577\u0565\u0580\u057e\u0561|\u0561\u057c\u0561\u057e\u0578\u057f\u057e\u0561|\u0581\u0565\u0580\u0565\u056f\u057e\u0561|\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576/,isPM:function(e){return/^(\u0581\u0565\u0580\u0565\u056f\u057e\u0561|\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576)$/.test(e)},meridiem:function(e){return e<4?"\u0563\u056b\u0577\u0565\u0580\u057e\u0561":e<12?"\u0561\u057c\u0561\u057e\u0578\u057f\u057e\u0561":e<17?"\u0581\u0565\u0580\u0565\u056f\u057e\u0561":"\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576"},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(\u056b\u0576|\u0580\u0564)/,ordinal:function(e,a){switch(a){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-\u056b\u0576":e+"-\u0580\u0564";default:return e}},week:{dow:1,doy:7}}),l.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,a){return 12===e&&(e=0),"pagi"===a?e:"siang"===a?11<=e?e:e+12:"sore"===a||"malam"===a?e+12:void 0},meridiem:function(e,a,t){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),l.defineLocale("is",{months:"jan\xfaar_febr\xfaar_mars_apr\xedl_ma\xed_j\xfan\xed_j\xfal\xed_\xe1g\xfast_september_okt\xf3ber_n\xf3vember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma\xed_j\xfan_j\xfal_\xe1g\xfa_sep_okt_n\xf3v_des".split("_"),weekdays:"sunnudagur_m\xe1nudagur_\xferi\xf0judagur_mi\xf0vikudagur_fimmtudagur_f\xf6studagur_laugardagur".split("_"),weekdaysShort:"sun_m\xe1n_\xferi_mi\xf0_fim_f\xf6s_lau".split("_"),weekdaysMin:"Su_M\xe1_\xder_Mi_Fi_F\xf6_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[\xed dag kl.] LT",nextDay:"[\xe1 morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[\xed g\xe6r kl.] LT",lastWeek:"[s\xed\xf0asta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s s\xed\xf0an",s:Vs,ss:Vs,m:Vs,mm:Vs,h:"klukkustund",hh:Vs,d:Vs,dd:Vs,M:Vs,MM:Vs,y:Vs,yy:Vs},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}}),l.defineLocale("ja",{months:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),weekdaysShort:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),weekdaysMin:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5 HH:mm",LLLL:"YYYY\u5e74M\u6708D\u65e5 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5(ddd) HH:mm"},meridiemParse:/\u5348\u524d|\u5348\u5f8c/i,isPM:function(e){return"\u5348\u5f8c"===e},meridiem:function(e,a,t){return e<12?"\u5348\u524d":"\u5348\u5f8c"},calendar:{sameDay:"[\u4eca\u65e5] LT",nextDay:"[\u660e\u65e5] LT",nextWeek:function(e){return e.week()<this.week()?"[\u6765\u9031]dddd LT":"dddd LT"},lastDay:"[\u6628\u65e5] LT",lastWeek:function(e){return this.week()<e.week()?"[\u5148\u9031]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}\u65e5/,ordinal:function(e,a){switch(a){case"d":case"D":case"DDD":return e+"\u65e5";default:return e}},relativeTime:{future:"%s\u5f8c",past:"%s\u524d",s:"\u6570\u79d2",ss:"%d\u79d2",m:"1\u5206",mm:"%d\u5206",h:"1\u6642\u9593",hh:"%d\u6642\u9593",d:"1\u65e5",dd:"%d\u65e5",M:"1\u30f6\u6708",MM:"%d\u30f6\u6708",y:"1\u5e74",yy:"%d\u5e74"}}),l.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,a){return 12===e&&(e=0),"enjing"===a?e:"siyang"===a?11<=e?e:e+12:"sonten"===a||"ndalu"===a?e+12:void 0},meridiem:function(e,a,t){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}}),l.defineLocale("ka",{months:{standalone:"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10d8_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10d8_\u10db\u10d0\u10e0\u10e2\u10d8_\u10d0\u10de\u10e0\u10d8\u10da\u10d8_\u10db\u10d0\u10d8\u10e1\u10d8_\u10d8\u10d5\u10dc\u10d8\u10e1\u10d8_\u10d8\u10d5\u10da\u10d8\u10e1\u10d8_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10dd_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10d8_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10d8".split("_"),format:"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10e1_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10e1_\u10db\u10d0\u10e0\u10e2\u10e1_\u10d0\u10de\u10e0\u10d8\u10da\u10d8\u10e1_\u10db\u10d0\u10d8\u10e1\u10e1_\u10d8\u10d5\u10dc\u10d8\u10e1\u10e1_\u10d8\u10d5\u10da\u10d8\u10e1\u10e1_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10e1_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10e1_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10e1".split("_")},monthsShort:"\u10d8\u10d0\u10dc_\u10d7\u10d4\u10d1_\u10db\u10d0\u10e0_\u10d0\u10de\u10e0_\u10db\u10d0\u10d8_\u10d8\u10d5\u10dc_\u10d8\u10d5\u10da_\u10d0\u10d2\u10d5_\u10e1\u10d4\u10e5_\u10dd\u10e5\u10e2_\u10dc\u10dd\u10d4_\u10d3\u10d4\u10d9".split("_"),weekdays:{standalone:"\u10d9\u10d5\u10d8\u10e0\u10d0_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10d8_\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8".split("_"),format:"\u10d9\u10d5\u10d8\u10e0\u10d0\u10e1_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10e1_\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1".split("_"),isFormat:/(\u10ec\u10d8\u10dc\u10d0|\u10e8\u10d4\u10db\u10d3\u10d4\u10d2)/},weekdaysShort:"\u10d9\u10d5\u10d8_\u10dd\u10e0\u10e8_\u10e1\u10d0\u10db_\u10dd\u10d7\u10ee_\u10ee\u10e3\u10d7_\u10de\u10d0\u10e0_\u10e8\u10d0\u10d1".split("_"),weekdaysMin:"\u10d9\u10d5_\u10dd\u10e0_\u10e1\u10d0_\u10dd\u10d7_\u10ee\u10e3_\u10de\u10d0_\u10e8\u10d0".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[\u10d3\u10e6\u10d4\u10e1] LT[-\u10d6\u10d4]",nextDay:"[\u10ee\u10d5\u10d0\u10da] LT[-\u10d6\u10d4]",lastDay:"[\u10d2\u10e3\u10e8\u10d8\u10dc] LT[-\u10d6\u10d4]",nextWeek:"[\u10e8\u10d4\u10db\u10d3\u10d4\u10d2] dddd LT[-\u10d6\u10d4]",lastWeek:"[\u10ec\u10d8\u10dc\u10d0] dddd LT-\u10d6\u10d4",sameElse:"L"},relativeTime:{future:function(e){return/(\u10ec\u10d0\u10db\u10d8|\u10ec\u10e3\u10d7\u10d8|\u10e1\u10d0\u10d0\u10d7\u10d8|\u10ec\u10d4\u10da\u10d8)/.test(e)?e.replace(/\u10d8$/,"\u10e8\u10d8"):e+"\u10e8\u10d8"},past:function(e){return/(\u10ec\u10d0\u10db\u10d8|\u10ec\u10e3\u10d7\u10d8|\u10e1\u10d0\u10d0\u10d7\u10d8|\u10d3\u10e6\u10d4|\u10d7\u10d5\u10d4)/.test(e)?e.replace(/(\u10d8|\u10d4)$/,"\u10d8\u10e1 \u10ec\u10d8\u10dc"):/\u10ec\u10d4\u10da\u10d8/.test(e)?e.replace(/\u10ec\u10d4\u10da\u10d8$/,"\u10ec\u10da\u10d8\u10e1 \u10ec\u10d8\u10dc"):void 0},s:"\u10e0\u10d0\u10db\u10d3\u10d4\u10dc\u10d8\u10db\u10d4 \u10ec\u10d0\u10db\u10d8",ss:"%d \u10ec\u10d0\u10db\u10d8",m:"\u10ec\u10e3\u10d7\u10d8",mm:"%d \u10ec\u10e3\u10d7\u10d8",h:"\u10e1\u10d0\u10d0\u10d7\u10d8",hh:"%d \u10e1\u10d0\u10d0\u10d7\u10d8",d:"\u10d3\u10e6\u10d4",dd:"%d \u10d3\u10e6\u10d4",M:"\u10d7\u10d5\u10d4",MM:"%d \u10d7\u10d5\u10d4",y:"\u10ec\u10d4\u10da\u10d8",yy:"%d \u10ec\u10d4\u10da\u10d8"},dayOfMonthOrdinalParse:/0|1-\u10da\u10d8|\u10db\u10d4-\d{1,2}|\d{1,2}-\u10d4/,ordinal:function(e){return 0===e?e:1===e?e+"-\u10da\u10d8":e<20||e<=100&&e%20==0||e%100==0?"\u10db\u10d4-"+e:e+"-\u10d4"},week:{dow:1,doy:7}});var Ks={0:"-\u0448\u0456",1:"-\u0448\u0456",2:"-\u0448\u0456",3:"-\u0448\u0456",4:"-\u0448\u0456",5:"-\u0448\u0456",6:"-\u0448\u044b",7:"-\u0448\u0456",8:"-\u0448\u0456",9:"-\u0448\u044b",10:"-\u0448\u044b",20:"-\u0448\u044b",30:"-\u0448\u044b",40:"-\u0448\u044b",50:"-\u0448\u0456",60:"-\u0448\u044b",70:"-\u0448\u0456",80:"-\u0448\u0456",90:"-\u0448\u044b",100:"-\u0448\u0456"};l.defineLocale("kk",{months:"\u049b\u0430\u04a3\u0442\u0430\u0440_\u0430\u049b\u043f\u0430\u043d_\u043d\u0430\u0443\u0440\u044b\u0437_\u0441\u04d9\u0443\u0456\u0440_\u043c\u0430\u043c\u044b\u0440_\u043c\u0430\u0443\u0441\u044b\u043c_\u0448\u0456\u043b\u0434\u0435_\u0442\u0430\u043c\u044b\u0437_\u049b\u044b\u0440\u043a\u04af\u0439\u0435\u043a_\u049b\u0430\u0437\u0430\u043d_\u049b\u0430\u0440\u0430\u0448\u0430_\u0436\u0435\u043b\u0442\u043e\u049b\u0441\u0430\u043d".split("_"),monthsShort:"\u049b\u0430\u04a3_\u0430\u049b\u043f_\u043d\u0430\u0443_\u0441\u04d9\u0443_\u043c\u0430\u043c_\u043c\u0430\u0443_\u0448\u0456\u043b_\u0442\u0430\u043c_\u049b\u044b\u0440_\u049b\u0430\u0437_\u049b\u0430\u0440_\u0436\u0435\u043b".split("_"),weekdays:"\u0436\u0435\u043a\u0441\u0435\u043d\u0431\u0456_\u0434\u04af\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u04d9\u0440\u0441\u0435\u043d\u0431\u0456_\u0431\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0436\u04b1\u043c\u0430_\u0441\u0435\u043d\u0431\u0456".split("_"),weekdaysShort:"\u0436\u0435\u043a_\u0434\u04af\u0439_\u0441\u0435\u0439_\u0441\u04d9\u0440_\u0431\u0435\u0439_\u0436\u04b1\u043c_\u0441\u0435\u043d".split("_"),weekdaysMin:"\u0436\u043a_\u0434\u0439_\u0441\u0439_\u0441\u0440_\u0431\u0439_\u0436\u043c_\u0441\u043d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0411\u04af\u0433\u0456\u043d \u0441\u0430\u0493\u0430\u0442] LT",nextDay:"[\u0415\u0440\u0442\u0435\u04a3 \u0441\u0430\u0493\u0430\u0442] LT",nextWeek:"dddd [\u0441\u0430\u0493\u0430\u0442] LT",lastDay:"[\u041a\u0435\u0448\u0435 \u0441\u0430\u0493\u0430\u0442] LT",lastWeek:"[\u04e8\u0442\u043a\u0435\u043d \u0430\u043f\u0442\u0430\u043d\u044b\u04a3] dddd [\u0441\u0430\u0493\u0430\u0442] LT",sameElse:"L"},relativeTime:{future:"%s \u0456\u0448\u0456\u043d\u0434\u0435",past:"%s \u0431\u04b1\u0440\u044b\u043d",s:"\u0431\u0456\u0440\u043d\u0435\u0448\u0435 \u0441\u0435\u043a\u0443\u043d\u0434",ss:"%d \u0441\u0435\u043a\u0443\u043d\u0434",m:"\u0431\u0456\u0440 \u043c\u0438\u043d\u0443\u0442",mm:"%d \u043c\u0438\u043d\u0443\u0442",h:"\u0431\u0456\u0440 \u0441\u0430\u0493\u0430\u0442",hh:"%d \u0441\u0430\u0493\u0430\u0442",d:"\u0431\u0456\u0440 \u043a\u04af\u043d",dd:"%d \u043a\u04af\u043d",M:"\u0431\u0456\u0440 \u0430\u0439",MM:"%d \u0430\u0439",y:"\u0431\u0456\u0440 \u0436\u044b\u043b",yy:"%d \u0436\u044b\u043b"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0448\u0456|\u0448\u044b)/,ordinal:function(e){return e+(Ks[e]||Ks[e%10]||Ks[100<=e?100:null])},week:{dow:1,doy:7}});var $s={1:"\u17e1",2:"\u17e2",3:"\u17e3",4:"\u17e4",5:"\u17e5",6:"\u17e6",7:"\u17e7",8:"\u17e8",9:"\u17e9",0:"\u17e0"},Zs={"\u17e1":"1","\u17e2":"2","\u17e3":"3","\u17e4":"4","\u17e5":"5","\u17e6":"6","\u17e7":"7","\u17e8":"8","\u17e9":"9","\u17e0":"0"};l.defineLocale("km",{months:"\u1798\u1780\u179a\u17b6_\u1780\u17bb\u1798\u17d2\u1797\u17c8_\u1798\u17b8\u1793\u17b6_\u1798\u17c1\u179f\u17b6_\u17a7\u179f\u1797\u17b6_\u1798\u17b7\u1790\u17bb\u1793\u17b6_\u1780\u1780\u17d2\u1780\u178a\u17b6_\u179f\u17b8\u17a0\u17b6_\u1780\u1789\u17d2\u1789\u17b6_\u178f\u17bb\u179b\u17b6_\u179c\u17b7\u1785\u17d2\u1786\u17b7\u1780\u17b6_\u1792\u17d2\u1793\u17bc".split("_"),monthsShort:"\u1798\u1780\u179a\u17b6_\u1780\u17bb\u1798\u17d2\u1797\u17c8_\u1798\u17b8\u1793\u17b6_\u1798\u17c1\u179f\u17b6_\u17a7\u179f\u1797\u17b6_\u1798\u17b7\u1790\u17bb\u1793\u17b6_\u1780\u1780\u17d2\u1780\u178a\u17b6_\u179f\u17b8\u17a0\u17b6_\u1780\u1789\u17d2\u1789\u17b6_\u178f\u17bb\u179b\u17b6_\u179c\u17b7\u1785\u17d2\u1786\u17b7\u1780\u17b6_\u1792\u17d2\u1793\u17bc".split("_"),weekdays:"\u17a2\u17b6\u1791\u17b7\u178f\u17d2\u1799_\u1785\u17d0\u1793\u17d2\u1791_\u17a2\u1784\u17d2\u1782\u17b6\u179a_\u1796\u17bb\u1792_\u1796\u17d2\u179a\u17a0\u179f\u17d2\u1794\u178f\u17b7\u17cd_\u179f\u17bb\u1780\u17d2\u179a_\u179f\u17c5\u179a\u17cd".split("_"),weekdaysShort:"\u17a2\u17b6_\u1785_\u17a2_\u1796_\u1796\u17d2\u179a_\u179f\u17bb_\u179f".split("_"),weekdaysMin:"\u17a2\u17b6_\u1785_\u17a2_\u1796_\u1796\u17d2\u179a_\u179f\u17bb_\u179f".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u1796\u17d2\u179a\u17b9\u1780|\u179b\u17d2\u1784\u17b6\u1785/,isPM:function(e){return"\u179b\u17d2\u1784\u17b6\u1785"===e},meridiem:function(e,a,t){return e<12?"\u1796\u17d2\u179a\u17b9\u1780":"\u179b\u17d2\u1784\u17b6\u1785"},calendar:{sameDay:"[\u1790\u17d2\u1784\u17c3\u1793\u17c1\u17c7 \u1798\u17c9\u17c4\u1784] LT",nextDay:"[\u179f\u17d2\u17a2\u17c2\u1780 \u1798\u17c9\u17c4\u1784] LT",nextWeek:"dddd [\u1798\u17c9\u17c4\u1784] LT",lastDay:"[\u1798\u17d2\u179f\u17b7\u179b\u1798\u17b7\u1789 \u1798\u17c9\u17c4\u1784] LT",lastWeek:"dddd [\u179f\u1794\u17d2\u178f\u17b6\u17a0\u17cd\u1798\u17bb\u1793] [\u1798\u17c9\u17c4\u1784] LT",sameElse:"L"},relativeTime:{future:"%s\u1791\u17c0\u178f",past:"%s\u1798\u17bb\u1793",s:"\u1794\u17c9\u17bb\u1793\u17d2\u1798\u17b6\u1793\u179c\u17b7\u1793\u17b6\u1791\u17b8",ss:"%d \u179c\u17b7\u1793\u17b6\u1791\u17b8",m:"\u1798\u17bd\u1799\u1793\u17b6\u1791\u17b8",mm:"%d \u1793\u17b6\u1791\u17b8",h:"\u1798\u17bd\u1799\u1798\u17c9\u17c4\u1784",hh:"%d \u1798\u17c9\u17c4\u1784",d:"\u1798\u17bd\u1799\u1790\u17d2\u1784\u17c3",dd:"%d \u1790\u17d2\u1784\u17c3",M:"\u1798\u17bd\u1799\u1781\u17c2",MM:"%d \u1781\u17c2",y:"\u1798\u17bd\u1799\u1786\u17d2\u1793\u17b6\u17c6",yy:"%d \u1786\u17d2\u1793\u17b6\u17c6"},dayOfMonthOrdinalParse:/\u1791\u17b8\d{1,2}/,ordinal:"\u1791\u17b8%d",preparse:function(e){return e.replace(/[\u17e1\u17e2\u17e3\u17e4\u17e5\u17e6\u17e7\u17e8\u17e9\u17e0]/g,function(e){return Zs[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return $s[e]})},week:{dow:1,doy:4}});var Bs={1:"\u0ce7",2:"\u0ce8",3:"\u0ce9",4:"\u0cea",5:"\u0ceb",6:"\u0cec",7:"\u0ced",8:"\u0cee",9:"\u0cef",0:"\u0ce6"},qs={"\u0ce7":"1","\u0ce8":"2","\u0ce9":"3","\u0cea":"4","\u0ceb":"5","\u0cec":"6","\u0ced":"7","\u0cee":"8","\u0cef":"9","\u0ce6":"0"};l.defineLocale("kn",{months:"\u0c9c\u0ca8\u0cb5\u0cb0\u0cbf_\u0cab\u0cc6\u0cac\u0ccd\u0cb0\u0cb5\u0cb0\u0cbf_\u0cae\u0cbe\u0cb0\u0ccd\u0c9a\u0ccd_\u0c8f\u0caa\u0ccd\u0cb0\u0cbf\u0cb2\u0ccd_\u0cae\u0cc6\u0cd5_\u0c9c\u0cc2\u0ca8\u0ccd_\u0c9c\u0cc1\u0cb2\u0cc6\u0cd6_\u0c86\u0c97\u0cb8\u0ccd\u0c9f\u0ccd_\u0cb8\u0cc6\u0caa\u0ccd\u0c9f\u0cc6\u0c82\u0cac\u0cb0\u0ccd_\u0c85\u0c95\u0ccd\u0c9f\u0cc6\u0cc2\u0cd5\u0cac\u0cb0\u0ccd_\u0ca8\u0cb5\u0cc6\u0c82\u0cac\u0cb0\u0ccd_\u0ca1\u0cbf\u0cb8\u0cc6\u0c82\u0cac\u0cb0\u0ccd".split("_"),monthsShort:"\u0c9c\u0ca8_\u0cab\u0cc6\u0cac\u0ccd\u0cb0_\u0cae\u0cbe\u0cb0\u0ccd\u0c9a\u0ccd_\u0c8f\u0caa\u0ccd\u0cb0\u0cbf\u0cb2\u0ccd_\u0cae\u0cc6\u0cd5_\u0c9c\u0cc2\u0ca8\u0ccd_\u0c9c\u0cc1\u0cb2\u0cc6\u0cd6_\u0c86\u0c97\u0cb8\u0ccd\u0c9f\u0ccd_\u0cb8\u0cc6\u0caa\u0ccd\u0c9f\u0cc6\u0c82_\u0c85\u0c95\u0ccd\u0c9f\u0cc6\u0cc2\u0cd5_\u0ca8\u0cb5\u0cc6\u0c82_\u0ca1\u0cbf\u0cb8\u0cc6\u0c82".split("_"),monthsParseExact:!0,weekdays:"\u0cad\u0cbe\u0ca8\u0cc1\u0cb5\u0cbe\u0cb0_\u0cb8\u0cc6\u0cc2\u0cd5\u0cae\u0cb5\u0cbe\u0cb0_\u0cae\u0c82\u0c97\u0cb3\u0cb5\u0cbe\u0cb0_\u0cac\u0cc1\u0ca7\u0cb5\u0cbe\u0cb0_\u0c97\u0cc1\u0cb0\u0cc1\u0cb5\u0cbe\u0cb0_\u0cb6\u0cc1\u0c95\u0ccd\u0cb0\u0cb5\u0cbe\u0cb0_\u0cb6\u0ca8\u0cbf\u0cb5\u0cbe\u0cb0".split("_"),weekdaysShort:"\u0cad\u0cbe\u0ca8\u0cc1_\u0cb8\u0cc6\u0cc2\u0cd5\u0cae_\u0cae\u0c82\u0c97\u0cb3_\u0cac\u0cc1\u0ca7_\u0c97\u0cc1\u0cb0\u0cc1_\u0cb6\u0cc1\u0c95\u0ccd\u0cb0_\u0cb6\u0ca8\u0cbf".split("_"),weekdaysMin:"\u0cad\u0cbe_\u0cb8\u0cc6\u0cc2\u0cd5_\u0cae\u0c82_\u0cac\u0cc1_\u0c97\u0cc1_\u0cb6\u0cc1_\u0cb6".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[\u0c87\u0c82\u0ca6\u0cc1] LT",nextDay:"[\u0ca8\u0cbe\u0cb3\u0cc6] LT",nextWeek:"dddd, LT",lastDay:"[\u0ca8\u0cbf\u0ca8\u0ccd\u0ca8\u0cc6] LT",lastWeek:"[\u0c95\u0cc6\u0cc2\u0ca8\u0cc6\u0caf] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0ca8\u0c82\u0ca4\u0cb0",past:"%s \u0cb9\u0cbf\u0c82\u0ca6\u0cc6",s:"\u0c95\u0cc6\u0cb2\u0cb5\u0cc1 \u0c95\u0ccd\u0cb7\u0ca3\u0c97\u0cb3\u0cc1",ss:"%d \u0cb8\u0cc6\u0c95\u0cc6\u0c82\u0ca1\u0cc1\u0c97\u0cb3\u0cc1",m:"\u0c92\u0c82\u0ca6\u0cc1 \u0ca8\u0cbf\u0cae\u0cbf\u0cb7",mm:"%d \u0ca8\u0cbf\u0cae\u0cbf\u0cb7",h:"\u0c92\u0c82\u0ca6\u0cc1 \u0c97\u0c82\u0c9f\u0cc6",hh:"%d \u0c97\u0c82\u0c9f\u0cc6",d:"\u0c92\u0c82\u0ca6\u0cc1 \u0ca6\u0cbf\u0ca8",dd:"%d \u0ca6\u0cbf\u0ca8",M:"\u0c92\u0c82\u0ca6\u0cc1 \u0ca4\u0cbf\u0c82\u0c97\u0cb3\u0cc1",MM:"%d \u0ca4\u0cbf\u0c82\u0c97\u0cb3\u0cc1",y:"\u0c92\u0c82\u0ca6\u0cc1 \u0cb5\u0cb0\u0ccd\u0cb7",yy:"%d \u0cb5\u0cb0\u0ccd\u0cb7"},preparse:function(e){return e.replace(/[\u0ce7\u0ce8\u0ce9\u0cea\u0ceb\u0cec\u0ced\u0cee\u0cef\u0ce6]/g,function(e){return qs[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Bs[e]})},meridiemParse:/\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf|\u0cac\u0cc6\u0cb3\u0cbf\u0c97\u0ccd\u0c97\u0cc6|\u0cae\u0ca7\u0ccd\u0caf\u0cbe\u0cb9\u0ccd\u0ca8|\u0cb8\u0c82\u0c9c\u0cc6/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf"===a?e<4?e:e+12:"\u0cac\u0cc6\u0cb3\u0cbf\u0c97\u0ccd\u0c97\u0cc6"===a?e:"\u0cae\u0ca7\u0ccd\u0caf\u0cbe\u0cb9\u0ccd\u0ca8"===a?10<=e?e:e+12:"\u0cb8\u0c82\u0c9c\u0cc6"===a?e+12:void 0},meridiem:function(e,a,t){return e<4?"\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf":e<10?"\u0cac\u0cc6\u0cb3\u0cbf\u0c97\u0ccd\u0c97\u0cc6":e<17?"\u0cae\u0ca7\u0ccd\u0caf\u0cbe\u0cb9\u0ccd\u0ca8":e<20?"\u0cb8\u0c82\u0c9c\u0cc6":"\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf"},dayOfMonthOrdinalParse:/\d{1,2}(\u0ca8\u0cc6\u0cd5)/,ordinal:function(e){return e+"\u0ca8\u0cc6\u0cd5"},week:{dow:0,doy:6}}),l.defineLocale("ko",{months:"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),monthsShort:"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),weekdays:"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),weekdaysShort:"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),weekdaysMin:"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY\ub144 MMMM D\uc77c",LLL:"YYYY\ub144 MMMM D\uc77c A h:mm",LLLL:"YYYY\ub144 MMMM D\uc77c dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY\ub144 MMMM D\uc77c",lll:"YYYY\ub144 MMMM D\uc77c A h:mm",llll:"YYYY\ub144 MMMM D\uc77c dddd A h:mm"},calendar:{sameDay:"\uc624\ub298 LT",nextDay:"\ub0b4\uc77c LT",nextWeek:"dddd LT",lastDay:"\uc5b4\uc81c LT",lastWeek:"\uc9c0\ub09c\uc8fc dddd LT",sameElse:"L"},relativeTime:{future:"%s \ud6c4",past:"%s \uc804",s:"\uba87 \ucd08",ss:"%d\ucd08",m:"1\ubd84",mm:"%d\ubd84",h:"\ud55c \uc2dc\uac04",hh:"%d\uc2dc\uac04",d:"\ud558\ub8e8",dd:"%d\uc77c",M:"\ud55c \ub2ec",MM:"%d\ub2ec",y:"\uc77c \ub144",yy:"%d\ub144"},dayOfMonthOrdinalParse:/\d{1,2}(\uc77c|\uc6d4|\uc8fc)/,ordinal:function(e,a){switch(a){case"d":case"D":case"DDD":return e+"\uc77c";case"M":return e+"\uc6d4";case"w":case"W":return e+"\uc8fc";default:return e}},meridiemParse:/\uc624\uc804|\uc624\ud6c4/,isPM:function(e){return"\uc624\ud6c4"===e},meridiem:function(e,a,t){return e<12?"\uc624\uc804":"\uc624\ud6c4"}});var Qs={0:"-\u0447\u04af",1:"-\u0447\u0438",2:"-\u0447\u0438",3:"-\u0447\u04af",4:"-\u0447\u04af",5:"-\u0447\u0438",6:"-\u0447\u044b",7:"-\u0447\u0438",8:"-\u0447\u0438",9:"-\u0447\u0443",10:"-\u0447\u0443",20:"-\u0447\u044b",30:"-\u0447\u0443",40:"-\u0447\u044b",50:"-\u0447\u04af",60:"-\u0447\u044b",70:"-\u0447\u0438",80:"-\u0447\u0438",90:"-\u0447\u0443",100:"-\u0447\u04af"};function Xs(e,a,t,s){var n={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return a?n[t][0]:n[t][1]}function en(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var a=e%10;return en(0===a?e/10:a)}if(e<1e4){for(;10<=e;)e/=10;return en(e)}return en(e/=1e3)}l.defineLocale("ky",{months:"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_"),monthsShort:"\u044f\u043d\u0432_\u0444\u0435\u0432_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433_\u0441\u0435\u043d_\u043e\u043a\u0442_\u043d\u043e\u044f_\u0434\u0435\u043a".split("_"),weekdays:"\u0416\u0435\u043a\u0448\u0435\u043c\u0431\u0438_\u0414\u04af\u0439\u0448\u04e9\u043c\u0431\u04af_\u0428\u0435\u0439\u0448\u0435\u043c\u0431\u0438_\u0428\u0430\u0440\u0448\u0435\u043c\u0431\u0438_\u0411\u0435\u0439\u0448\u0435\u043c\u0431\u0438_\u0416\u0443\u043c\u0430_\u0418\u0448\u0435\u043c\u0431\u0438".split("_"),weekdaysShort:"\u0416\u0435\u043a_\u0414\u04af\u0439_\u0428\u0435\u0439_\u0428\u0430\u0440_\u0411\u0435\u0439_\u0416\u0443\u043c_\u0418\u0448\u0435".split("_"),weekdaysMin:"\u0416\u043a_\u0414\u0439_\u0428\u0439_\u0428\u0440_\u0411\u0439_\u0416\u043c_\u0418\u0448".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0411\u04af\u0433\u04af\u043d \u0441\u0430\u0430\u0442] LT",nextDay:"[\u042d\u0440\u0442\u0435\u04a3 \u0441\u0430\u0430\u0442] LT",nextWeek:"dddd [\u0441\u0430\u0430\u0442] LT",lastDay:"[\u041a\u0435\u0447\u0435 \u0441\u0430\u0430\u0442] LT",lastWeek:"[\u04e8\u0442\u043a\u0435\u043d \u0430\u043f\u0442\u0430\u043d\u044b\u043d] dddd [\u043a\u04af\u043d\u04af] [\u0441\u0430\u0430\u0442] LT",sameElse:"L"},relativeTime:{future:"%s \u0438\u0447\u0438\u043d\u0434\u0435",past:"%s \u043c\u0443\u0440\u0443\u043d",s:"\u0431\u0438\u0440\u043d\u0435\u0447\u0435 \u0441\u0435\u043a\u0443\u043d\u0434",ss:"%d \u0441\u0435\u043a\u0443\u043d\u0434",m:"\u0431\u0438\u0440 \u043c\u04af\u043d\u04e9\u0442",mm:"%d \u043c\u04af\u043d\u04e9\u0442",h:"\u0431\u0438\u0440 \u0441\u0430\u0430\u0442",hh:"%d \u0441\u0430\u0430\u0442",d:"\u0431\u0438\u0440 \u043a\u04af\u043d",dd:"%d \u043a\u04af\u043d",M:"\u0431\u0438\u0440 \u0430\u0439",MM:"%d \u0430\u0439",y:"\u0431\u0438\u0440 \u0436\u044b\u043b",yy:"%d \u0436\u044b\u043b"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0447\u0438|\u0447\u044b|\u0447\u04af|\u0447\u0443)/,ordinal:function(e){return e+(Qs[e]||Qs[e%10]||Qs[100<=e?100:null])},week:{dow:1,doy:7}}),l.defineLocale("lb",{months:"Januar_Februar_M\xe4erz_Abr\xebll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_M\xe9indeg_D\xebnschdeg_M\xebttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M\xe9._D\xeb._M\xeb._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M\xe9_D\xeb_M\xeb_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[G\xebschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(e){return en(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e},past:function(e){return en(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e},s:"e puer Sekonnen",ss:"%d Sekonnen",m:Xs,mm:"%d Minutten",h:Xs,hh:"%d Stonnen",d:Xs,dd:"%d Deeg",M:Xs,MM:"%d M\xe9int",y:Xs,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("lo",{months:"\u0ea1\u0eb1\u0e87\u0e81\u0ead\u0e99_\u0e81\u0eb8\u0ea1\u0e9e\u0eb2_\u0ea1\u0eb5\u0e99\u0eb2_\u0ec0\u0ea1\u0eaa\u0eb2_\u0e9e\u0eb6\u0e94\u0eaa\u0eb0\u0e9e\u0eb2_\u0ea1\u0eb4\u0e96\u0eb8\u0e99\u0eb2_\u0e81\u0ecd\u0ea5\u0eb0\u0e81\u0ebb\u0e94_\u0eaa\u0eb4\u0e87\u0eab\u0eb2_\u0e81\u0eb1\u0e99\u0e8d\u0eb2_\u0e95\u0eb8\u0ea5\u0eb2_\u0e9e\u0eb0\u0e88\u0eb4\u0e81_\u0e97\u0eb1\u0e99\u0ea7\u0eb2".split("_"),monthsShort:"\u0ea1\u0eb1\u0e87\u0e81\u0ead\u0e99_\u0e81\u0eb8\u0ea1\u0e9e\u0eb2_\u0ea1\u0eb5\u0e99\u0eb2_\u0ec0\u0ea1\u0eaa\u0eb2_\u0e9e\u0eb6\u0e94\u0eaa\u0eb0\u0e9e\u0eb2_\u0ea1\u0eb4\u0e96\u0eb8\u0e99\u0eb2_\u0e81\u0ecd\u0ea5\u0eb0\u0e81\u0ebb\u0e94_\u0eaa\u0eb4\u0e87\u0eab\u0eb2_\u0e81\u0eb1\u0e99\u0e8d\u0eb2_\u0e95\u0eb8\u0ea5\u0eb2_\u0e9e\u0eb0\u0e88\u0eb4\u0e81_\u0e97\u0eb1\u0e99\u0ea7\u0eb2".split("_"),weekdays:"\u0ead\u0eb2\u0e97\u0eb4\u0e94_\u0e88\u0eb1\u0e99_\u0ead\u0eb1\u0e87\u0e84\u0eb2\u0e99_\u0e9e\u0eb8\u0e94_\u0e9e\u0eb0\u0eab\u0eb1\u0e94_\u0eaa\u0eb8\u0e81_\u0ec0\u0eaa\u0ebb\u0eb2".split("_"),weekdaysShort:"\u0e97\u0eb4\u0e94_\u0e88\u0eb1\u0e99_\u0ead\u0eb1\u0e87\u0e84\u0eb2\u0e99_\u0e9e\u0eb8\u0e94_\u0e9e\u0eb0\u0eab\u0eb1\u0e94_\u0eaa\u0eb8\u0e81_\u0ec0\u0eaa\u0ebb\u0eb2".split("_"),weekdaysMin:"\u0e97_\u0e88_\u0ead\u0e84_\u0e9e_\u0e9e\u0eab_\u0eaa\u0e81_\u0eaa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"\u0ea7\u0eb1\u0e99dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0e95\u0ead\u0e99\u0ec0\u0e8a\u0ebb\u0ec9\u0eb2|\u0e95\u0ead\u0e99\u0ec1\u0ea5\u0e87/,isPM:function(e){return"\u0e95\u0ead\u0e99\u0ec1\u0ea5\u0e87"===e},meridiem:function(e,a,t){return e<12?"\u0e95\u0ead\u0e99\u0ec0\u0e8a\u0ebb\u0ec9\u0eb2":"\u0e95\u0ead\u0e99\u0ec1\u0ea5\u0e87"},calendar:{sameDay:"[\u0ea1\u0eb7\u0ec9\u0e99\u0eb5\u0ec9\u0ec0\u0ea7\u0ea5\u0eb2] LT",nextDay:"[\u0ea1\u0eb7\u0ec9\u0ead\u0eb7\u0ec8\u0e99\u0ec0\u0ea7\u0ea5\u0eb2] LT",nextWeek:"[\u0ea7\u0eb1\u0e99]dddd[\u0edc\u0ec9\u0eb2\u0ec0\u0ea7\u0ea5\u0eb2] LT",lastDay:"[\u0ea1\u0eb7\u0ec9\u0ea7\u0eb2\u0e99\u0e99\u0eb5\u0ec9\u0ec0\u0ea7\u0ea5\u0eb2] LT",lastWeek:"[\u0ea7\u0eb1\u0e99]dddd[\u0ec1\u0ea5\u0ec9\u0ea7\u0e99\u0eb5\u0ec9\u0ec0\u0ea7\u0ea5\u0eb2] LT",sameElse:"L"},relativeTime:{future:"\u0ead\u0eb5\u0e81 %s",past:"%s\u0e9c\u0ec8\u0eb2\u0e99\u0ea1\u0eb2",s:"\u0e9a\u0ecd\u0ec8\u0ec0\u0e97\u0ebb\u0ec8\u0eb2\u0ec3\u0e94\u0ea7\u0eb4\u0e99\u0eb2\u0e97\u0eb5",ss:"%d \u0ea7\u0eb4\u0e99\u0eb2\u0e97\u0eb5",m:"1 \u0e99\u0eb2\u0e97\u0eb5",mm:"%d \u0e99\u0eb2\u0e97\u0eb5",h:"1 \u0e8a\u0ebb\u0ec8\u0ea7\u0ec2\u0ea1\u0e87",hh:"%d \u0e8a\u0ebb\u0ec8\u0ea7\u0ec2\u0ea1\u0e87",d:"1 \u0ea1\u0eb7\u0ec9",dd:"%d \u0ea1\u0eb7\u0ec9",M:"1 \u0ec0\u0e94\u0eb7\u0ead\u0e99",MM:"%d \u0ec0\u0e94\u0eb7\u0ead\u0e99",y:"1 \u0e9b\u0eb5",yy:"%d \u0e9b\u0eb5"},dayOfMonthOrdinalParse:/(\u0e97\u0eb5\u0ec8)\d{1,2}/,ordinal:function(e){return"\u0e97\u0eb5\u0ec8"+e}});var an={ss:"sekund\u0117_sekund\u017ei\u0173_sekundes",m:"minut\u0117_minut\u0117s_minut\u0119",mm:"minut\u0117s_minu\u010di\u0173_minutes",h:"valanda_valandos_valand\u0105",hh:"valandos_valand\u0173_valandas",d:"diena_dienos_dien\u0105",dd:"dienos_dien\u0173_dienas",M:"m\u0117nuo_m\u0117nesio_m\u0117nes\u012f",MM:"m\u0117nesiai_m\u0117nesi\u0173_m\u0117nesius",y:"metai_met\u0173_metus",yy:"metai_met\u0173_metus"};function tn(e,a,t,s){return a?nn(t)[0]:s?nn(t)[1]:nn(t)[2]}function sn(e){return e%10==0||10<e&&e<20}function nn(e){return an[e].split("_")}function dn(e,a,t,s){var n=e+" ";return 1===e?n+tn(0,a,t[0],s):a?n+(sn(e)?nn(t)[1]:nn(t)[0]):s?n+nn(t)[1]:n+(sn(e)?nn(t)[1]:nn(t)[2])}l.defineLocale("lt",{months:{format:"sausio_vasario_kovo_baland\u017eio_gegu\u017e\u0117s_bir\u017eelio_liepos_rugpj\u016b\u010dio_rugs\u0117jo_spalio_lapkri\u010dio_gruod\u017eio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu\u017e\u0117_bir\u017eelis_liepa_rugpj\u016btis_rugs\u0117jis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien\u012f_pirmadien\u012f_antradien\u012f_tre\u010diadien\u012f_ketvirtadien\u012f_penktadien\u012f_\u0161e\u0161tadien\u012f".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_tre\u010diadienis_ketvirtadienis_penktadienis_\u0161e\u0161tadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_\u0160e\u0161".split("_"),weekdaysMin:"S_P_A_T_K_Pn_\u0160".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[\u0160iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Pra\u0117jus\u012f] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie\u0161 %s",s:function(e,a,t,s){return a?"kelios sekund\u0117s":s?"keli\u0173 sekund\u017ei\u0173":"kelias sekundes"},ss:dn,m:tn,mm:dn,h:tn,hh:dn,d:tn,dd:dn,M:tn,MM:dn,y:tn,yy:dn},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}});var rn={ss:"sekundes_sekund\u0113m_sekunde_sekundes".split("_"),m:"min\u016btes_min\u016bt\u0113m_min\u016bte_min\u016btes".split("_"),mm:"min\u016btes_min\u016bt\u0113m_min\u016bte_min\u016btes".split("_"),h:"stundas_stund\u0101m_stunda_stundas".split("_"),hh:"stundas_stund\u0101m_stunda_stundas".split("_"),d:"dienas_dien\u0101m_diena_dienas".split("_"),dd:"dienas_dien\u0101m_diena_dienas".split("_"),M:"m\u0113ne\u0161a_m\u0113ne\u0161iem_m\u0113nesis_m\u0113ne\u0161i".split("_"),MM:"m\u0113ne\u0161a_m\u0113ne\u0161iem_m\u0113nesis_m\u0113ne\u0161i".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function _n(e,a,t){return t?a%10==1&&a%100!=11?e[2]:e[3]:a%10==1&&a%100!=11?e[0]:e[1]}function on(e,a,t){return e+" "+_n(rn[t],e,a)}function mn(e,a,t){return _n(rn[t],e,a)}l.defineLocale("lv",{months:"janv\u0101ris_febru\u0101ris_marts_apr\u012blis_maijs_j\u016bnijs_j\u016blijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_j\u016bn_j\u016bl_aug_sep_okt_nov_dec".split("_"),weekdays:"sv\u0113tdiena_pirmdiena_otrdiena_tre\u0161diena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[\u0160odien pulksten] LT",nextDay:"[R\u012bt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pag\u0101ju\u0161\u0101] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"p\u0113c %s",past:"pirms %s",s:function(e,a){return a?"da\u017eas sekundes":"da\u017e\u0101m sekund\u0113m"},ss:on,m:mn,mm:on,h:mn,hh:on,d:mn,dd:on,M:mn,MM:on,y:mn,yy:on},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var un={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,a){return 1===e?a[0]:2<=e&&e<=4?a[1]:a[2]},translate:function(e,a,t){var s=un.words[t];return 1===t.length?a?s[0]:s[1]:e+" "+un.correctGrammaticalCase(e,s)}};function ln(e,a,t,s){switch(t){case"s":return a?"\u0445\u044d\u0434\u0445\u044d\u043d \u0441\u0435\u043a\u0443\u043d\u0434":"\u0445\u044d\u0434\u0445\u044d\u043d \u0441\u0435\u043a\u0443\u043d\u0434\u044b\u043d";case"ss":return e+(a?" \u0441\u0435\u043a\u0443\u043d\u0434":" \u0441\u0435\u043a\u0443\u043d\u0434\u044b\u043d");case"m":case"mm":return e+(a?" \u043c\u0438\u043d\u0443\u0442":" \u043c\u0438\u043d\u0443\u0442\u044b\u043d");case"h":case"hh":return e+(a?" \u0446\u0430\u0433":" \u0446\u0430\u0433\u0438\u0439\u043d");case"d":case"dd":return e+(a?" \u04e9\u0434\u04e9\u0440":" \u04e9\u0434\u0440\u0438\u0439\u043d");case"M":case"MM":return e+(a?" \u0441\u0430\u0440":" \u0441\u0430\u0440\u044b\u043d");case"y":case"yy":return e+(a?" \u0436\u0438\u043b":" \u0436\u0438\u043b\u0438\u0439\u043d");default:return e}}l.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_\u010detvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._\u010det._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_\u010de_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[ju\u010de u] LT",lastWeek:function(){return["[pro\u0161le] [nedjelje] [u] LT","[pro\u0161log] [ponedjeljka] [u] LT","[pro\u0161log] [utorka] [u] LT","[pro\u0161le] [srijede] [u] LT","[pro\u0161log] [\u010detvrtka] [u] LT","[pro\u0161log] [petka] [u] LT","[pro\u0161le] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:un.translate,m:un.translate,mm:un.translate,h:un.translate,hh:un.translate,d:"dan",dd:un.translate,M:"mjesec",MM:un.translate,y:"godinu",yy:un.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),l.defineLocale("mi",{months:"Kohi-t\u0101te_Hui-tanguru_Pout\u016b-te-rangi_Paenga-wh\u0101wh\u0101_Haratua_Pipiri_H\u014dngoingoi_Here-turi-k\u014dk\u0101_Mahuru_Whiringa-\u0101-nuku_Whiringa-\u0101-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_H\u014dngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"R\u0101tapu_Mane_T\u016brei_Wenerei_T\u0101ite_Paraire_H\u0101tarei".split("_"),weekdaysShort:"Ta_Ma_T\u016b_We_T\u0101i_Pa_H\u0101".split("_"),weekdaysMin:"Ta_Ma_T\u016b_We_T\u0101i_Pa_H\u0101".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te h\u0113kona ruarua",ss:"%d h\u0113kona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}}),l.defineLocale("mk",{months:"\u0458\u0430\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0458_\u0458\u0443\u043d\u0438_\u0458\u0443\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),monthsShort:"\u0458\u0430\u043d_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0458_\u0458\u0443\u043d_\u0458\u0443\u043b_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),weekdays:"\u043d\u0435\u0434\u0435\u043b\u0430_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0440\u0442\u043e\u043a_\u043f\u0435\u0442\u043e\u043a_\u0441\u0430\u0431\u043e\u0442\u0430".split("_"),weekdaysShort:"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u0435_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u0430\u0431".split("_"),weekdaysMin:"\u043de_\u043fo_\u0432\u0442_\u0441\u0440_\u0447\u0435_\u043f\u0435_\u0441a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[\u0414\u0435\u043d\u0435\u0441 \u0432\u043e] LT",nextDay:"[\u0423\u0442\u0440\u0435 \u0432\u043e] LT",nextWeek:"[\u0412\u043e] dddd [\u0432\u043e] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430 \u0432\u043e] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[\u0418\u0437\u043c\u0438\u043d\u0430\u0442\u0430\u0442\u0430] dddd [\u0432\u043e] LT";case 1:case 2:case 4:case 5:return"[\u0418\u0437\u043c\u0438\u043d\u0430\u0442\u0438\u043e\u0442] dddd [\u0432\u043e] LT"}},sameElse:"L"},relativeTime:{future:"\u043f\u043e\u0441\u043b\u0435 %s",past:"\u043f\u0440\u0435\u0434 %s",s:"\u043d\u0435\u043a\u043e\u043b\u043a\u0443 \u0441\u0435\u043a\u0443\u043d\u0434\u0438",ss:"%d \u0441\u0435\u043a\u0443\u043d\u0434\u0438",m:"\u043c\u0438\u043d\u0443\u0442\u0430",mm:"%d \u043c\u0438\u043d\u0443\u0442\u0438",h:"\u0447\u0430\u0441",hh:"%d \u0447\u0430\u0441\u0430",d:"\u0434\u0435\u043d",dd:"%d \u0434\u0435\u043d\u0430",M:"\u043c\u0435\u0441\u0435\u0446",MM:"%d \u043c\u0435\u0441\u0435\u0446\u0438",y:"\u0433\u043e\u0434\u0438\u043d\u0430",yy:"%d \u0433\u043e\u0434\u0438\u043d\u0438"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0435\u0432|\u0435\u043d|\u0442\u0438|\u0432\u0438|\u0440\u0438|\u043c\u0438)/,ordinal:function(e){var a=e%10,t=e%100;return 0===e?e+"-\u0435\u0432":0===t?e+"-\u0435\u043d":10<t&&t<20?e+"-\u0442\u0438":1===a?e+"-\u0432\u0438":2===a?e+"-\u0440\u0438":7===a||8===a?e+"-\u043c\u0438":e+"-\u0442\u0438"},week:{dow:1,doy:7}}),l.defineLocale("ml",{months:"\u0d1c\u0d28\u0d41\u0d35\u0d30\u0d3f_\u0d2b\u0d46\u0d2c\u0d4d\u0d30\u0d41\u0d35\u0d30\u0d3f_\u0d2e\u0d3e\u0d7c\u0d1a\u0d4d\u0d1a\u0d4d_\u0d0f\u0d2a\u0d4d\u0d30\u0d3f\u0d7d_\u0d2e\u0d47\u0d2f\u0d4d_\u0d1c\u0d42\u0d7a_\u0d1c\u0d42\u0d32\u0d48_\u0d13\u0d17\u0d38\u0d4d\u0d31\u0d4d\u0d31\u0d4d_\u0d38\u0d46\u0d2a\u0d4d\u0d31\u0d4d\u0d31\u0d02\u0d2c\u0d7c_\u0d12\u0d15\u0d4d\u0d1f\u0d4b\u0d2c\u0d7c_\u0d28\u0d35\u0d02\u0d2c\u0d7c_\u0d21\u0d3f\u0d38\u0d02\u0d2c\u0d7c".split("_"),monthsShort:"\u0d1c\u0d28\u0d41._\u0d2b\u0d46\u0d2c\u0d4d\u0d30\u0d41._\u0d2e\u0d3e\u0d7c._\u0d0f\u0d2a\u0d4d\u0d30\u0d3f._\u0d2e\u0d47\u0d2f\u0d4d_\u0d1c\u0d42\u0d7a_\u0d1c\u0d42\u0d32\u0d48._\u0d13\u0d17._\u0d38\u0d46\u0d2a\u0d4d\u0d31\u0d4d\u0d31._\u0d12\u0d15\u0d4d\u0d1f\u0d4b._\u0d28\u0d35\u0d02._\u0d21\u0d3f\u0d38\u0d02.".split("_"),monthsParseExact:!0,weekdays:"\u0d1e\u0d3e\u0d2f\u0d31\u0d3e\u0d34\u0d4d\u0d1a_\u0d24\u0d3f\u0d19\u0d4d\u0d15\u0d33\u0d3e\u0d34\u0d4d\u0d1a_\u0d1a\u0d4a\u0d35\u0d4d\u0d35\u0d3e\u0d34\u0d4d\u0d1a_\u0d2c\u0d41\u0d27\u0d28\u0d3e\u0d34\u0d4d\u0d1a_\u0d35\u0d4d\u0d2f\u0d3e\u0d34\u0d3e\u0d34\u0d4d\u0d1a_\u0d35\u0d46\u0d33\u0d4d\u0d33\u0d3f\u0d2f\u0d3e\u0d34\u0d4d\u0d1a_\u0d36\u0d28\u0d3f\u0d2f\u0d3e\u0d34\u0d4d\u0d1a".split("_"),weekdaysShort:"\u0d1e\u0d3e\u0d2f\u0d7c_\u0d24\u0d3f\u0d19\u0d4d\u0d15\u0d7e_\u0d1a\u0d4a\u0d35\u0d4d\u0d35_\u0d2c\u0d41\u0d27\u0d7b_\u0d35\u0d4d\u0d2f\u0d3e\u0d34\u0d02_\u0d35\u0d46\u0d33\u0d4d\u0d33\u0d3f_\u0d36\u0d28\u0d3f".split("_"),weekdaysMin:"\u0d1e\u0d3e_\u0d24\u0d3f_\u0d1a\u0d4a_\u0d2c\u0d41_\u0d35\u0d4d\u0d2f\u0d3e_\u0d35\u0d46_\u0d36".split("_"),longDateFormat:{LT:"A h:mm -\u0d28\u0d41",LTS:"A h:mm:ss -\u0d28\u0d41",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -\u0d28\u0d41",LLLL:"dddd, D MMMM YYYY, A h:mm -\u0d28\u0d41"},calendar:{sameDay:"[\u0d07\u0d28\u0d4d\u0d28\u0d4d] LT",nextDay:"[\u0d28\u0d3e\u0d33\u0d46] LT",nextWeek:"dddd, LT",lastDay:"[\u0d07\u0d28\u0d4d\u0d28\u0d32\u0d46] LT",lastWeek:"[\u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d",past:"%s \u0d2e\u0d41\u0d7b\u0d2a\u0d4d",s:"\u0d05\u0d7d\u0d2a \u0d28\u0d3f\u0d2e\u0d3f\u0d37\u0d19\u0d4d\u0d19\u0d7e",ss:"%d \u0d38\u0d46\u0d15\u0d4d\u0d15\u0d7b\u0d21\u0d4d",m:"\u0d12\u0d30\u0d41 \u0d2e\u0d3f\u0d28\u0d3f\u0d31\u0d4d\u0d31\u0d4d",mm:"%d \u0d2e\u0d3f\u0d28\u0d3f\u0d31\u0d4d\u0d31\u0d4d",h:"\u0d12\u0d30\u0d41 \u0d2e\u0d23\u0d3f\u0d15\u0d4d\u0d15\u0d42\u0d7c",hh:"%d \u0d2e\u0d23\u0d3f\u0d15\u0d4d\u0d15\u0d42\u0d7c",d:"\u0d12\u0d30\u0d41 \u0d26\u0d3f\u0d35\u0d38\u0d02",dd:"%d \u0d26\u0d3f\u0d35\u0d38\u0d02",M:"\u0d12\u0d30\u0d41 \u0d2e\u0d3e\u0d38\u0d02",MM:"%d \u0d2e\u0d3e\u0d38\u0d02",y:"\u0d12\u0d30\u0d41 \u0d35\u0d7c\u0d37\u0d02",yy:"%d \u0d35\u0d7c\u0d37\u0d02"},meridiemParse:/\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f|\u0d30\u0d3e\u0d35\u0d3f\u0d32\u0d46|\u0d09\u0d1a\u0d4d\u0d1a \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d|\u0d35\u0d48\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d47\u0d30\u0d02|\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f/i,meridiemHour:function(e,a){return 12===e&&(e=0),"\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f"===a&&4<=e||"\u0d09\u0d1a\u0d4d\u0d1a \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d"===a||"\u0d35\u0d48\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d47\u0d30\u0d02"===a?e+12:e},meridiem:function(e,a,t){return e<4?"\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f":e<12?"\u0d30\u0d3e\u0d35\u0d3f\u0d32\u0d46":e<17?"\u0d09\u0d1a\u0d4d\u0d1a \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d":e<20?"\u0d35\u0d48\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d47\u0d30\u0d02":"\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f"}}),l.defineLocale("mn",{months:"\u041d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0425\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0413\u0443\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u04e9\u0440\u04e9\u0432\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0422\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0417\u0443\u0440\u0433\u0430\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u043e\u043b\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u041d\u0430\u0439\u043c\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0415\u0441\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u043d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u0445\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440".split("_"),monthsShort:"1 \u0441\u0430\u0440_2 \u0441\u0430\u0440_3 \u0441\u0430\u0440_4 \u0441\u0430\u0440_5 \u0441\u0430\u0440_6 \u0441\u0430\u0440_7 \u0441\u0430\u0440_8 \u0441\u0430\u0440_9 \u0441\u0430\u0440_10 \u0441\u0430\u0440_11 \u0441\u0430\u0440_12 \u0441\u0430\u0440".split("_"),monthsParseExact:!0,weekdays:"\u041d\u044f\u043c_\u0414\u0430\u0432\u0430\u0430_\u041c\u044f\u0433\u043c\u0430\u0440_\u041b\u0445\u0430\u0433\u0432\u0430_\u041f\u04af\u0440\u044d\u0432_\u0411\u0430\u0430\u0441\u0430\u043d_\u0411\u044f\u043c\u0431\u0430".split("_"),weekdaysShort:"\u041d\u044f\u043c_\u0414\u0430\u0432_\u041c\u044f\u0433_\u041b\u0445\u0430_\u041f\u04af\u0440_\u0411\u0430\u0430_\u0411\u044f\u043c".split("_"),weekdaysMin:"\u041d\u044f_\u0414\u0430_\u041c\u044f_\u041b\u0445_\u041f\u04af_\u0411\u0430_\u0411\u044f".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY \u043e\u043d\u044b MMMM\u044b\u043d D",LLL:"YYYY \u043e\u043d\u044b MMMM\u044b\u043d D HH:mm",LLLL:"dddd, YYYY \u043e\u043d\u044b MMMM\u044b\u043d D HH:mm"},meridiemParse:/\u04ae\u04e8|\u04ae\u0425/i,isPM:function(e){return"\u04ae\u0425"===e},meridiem:function(e,a,t){return e<12?"\u04ae\u04e8":"\u04ae\u0425"},calendar:{sameDay:"[\u04e8\u043d\u04e9\u04e9\u0434\u04e9\u0440] LT",nextDay:"[\u041c\u0430\u0440\u0433\u0430\u0430\u0448] LT",nextWeek:"[\u0418\u0440\u044d\u0445] dddd LT",lastDay:"[\u04e8\u0447\u0438\u0433\u0434\u04e9\u0440] LT",lastWeek:"[\u04e8\u043d\u0433\u04e9\u0440\u0441\u04e9\u043d] dddd LT",sameElse:"L"},relativeTime:{future:"%s \u0434\u0430\u0440\u0430\u0430",past:"%s \u04e9\u043c\u043d\u04e9",s:ln,ss:ln,m:ln,mm:ln,h:ln,hh:ln,d:ln,dd:ln,M:ln,MM:ln,y:ln,yy:ln},dayOfMonthOrdinalParse:/\d{1,2} \u04e9\u0434\u04e9\u0440/,ordinal:function(e,a){switch(a){case"d":case"D":case"DDD":return e+" \u04e9\u0434\u04e9\u0440";default:return e}}});var Mn={1:"\u0967",2:"\u0968",3:"\u0969",4:"\u096a",5:"\u096b",6:"\u096c",7:"\u096d",8:"\u096e",9:"\u096f",0:"\u0966"},hn={"\u0967":"1","\u0968":"2","\u0969":"3","\u096a":"4","\u096b":"5","\u096c":"6","\u096d":"7","\u096e":"8","\u096f":"9","\u0966":"0"};function Ln(e,a,t,s){var n="";if(a)switch(t){case"s":n="\u0915\u093e\u0939\u0940 \u0938\u0947\u0915\u0902\u0926";break;case"ss":n="%d \u0938\u0947\u0915\u0902\u0926";break;case"m":n="\u090f\u0915 \u092e\u093f\u0928\u093f\u091f";break;case"mm":n="%d \u092e\u093f\u0928\u093f\u091f\u0947";break;case"h":n="\u090f\u0915 \u0924\u093e\u0938";break;case"hh":n="%d \u0924\u093e\u0938";break;case"d":n="\u090f\u0915 \u0926\u093f\u0935\u0938";break;case"dd":n="%d \u0926\u093f\u0935\u0938";break;case"M":n="\u090f\u0915 \u092e\u0939\u093f\u0928\u093e";break;case"MM":n="%d \u092e\u0939\u093f\u0928\u0947";break;case"y":n="\u090f\u0915 \u0935\u0930\u094d\u0937";break;case"yy":n="%d \u0935\u0930\u094d\u0937\u0947";break}else switch(t){case"s":n="\u0915\u093e\u0939\u0940 \u0938\u0947\u0915\u0902\u0926\u093e\u0902";break;case"ss":n="%d \u0938\u0947\u0915\u0902\u0926\u093e\u0902";break;case"m":n="\u090f\u0915\u093e \u092e\u093f\u0928\u093f\u091f\u093e";break;case"mm":n="%d \u092e\u093f\u0928\u093f\u091f\u093e\u0902";break;case"h":n="\u090f\u0915\u093e \u0924\u093e\u0938\u093e";break;case"hh":n="%d \u0924\u093e\u0938\u093e\u0902";break;case"d":n="\u090f\u0915\u093e \u0926\u093f\u0935\u0938\u093e";break;case"dd":n="%d \u0926\u093f\u0935\u0938\u093e\u0902";break;case"M":n="\u090f\u0915\u093e \u092e\u0939\u093f\u0928\u094d\u092f\u093e";break;case"MM":n="%d \u092e\u0939\u093f\u0928\u094d\u092f\u093e\u0902";break;case"y":n="\u090f\u0915\u093e \u0935\u0930\u094d\u0937\u093e";break;case"yy":n="%d \u0935\u0930\u094d\u0937\u093e\u0902";break}return n.replace(/%d/i,e)}l.defineLocale("mr",{months:"\u091c\u093e\u0928\u0947\u0935\u093e\u0930\u0940_\u092b\u0947\u092c\u094d\u0930\u0941\u0935\u093e\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u090f\u092a\u094d\u0930\u093f\u0932_\u092e\u0947_\u091c\u0942\u0928_\u091c\u0941\u0932\u0948_\u0911\u0917\u0938\u094d\u091f_\u0938\u092a\u094d\u091f\u0947\u0902\u092c\u0930_\u0911\u0915\u094d\u091f\u094b\u092c\u0930_\u0928\u094b\u0935\u094d\u0939\u0947\u0902\u092c\u0930_\u0921\u093f\u0938\u0947\u0902\u092c\u0930".split("_"),monthsShort:"\u091c\u093e\u0928\u0947._\u092b\u0947\u092c\u094d\u0930\u0941._\u092e\u093e\u0930\u094d\u091a._\u090f\u092a\u094d\u0930\u093f._\u092e\u0947._\u091c\u0942\u0928._\u091c\u0941\u0932\u0948._\u0911\u0917._\u0938\u092a\u094d\u091f\u0947\u0902._\u0911\u0915\u094d\u091f\u094b._\u0928\u094b\u0935\u094d\u0939\u0947\u0902._\u0921\u093f\u0938\u0947\u0902.".split("_"),monthsParseExact:!0,weekdays:"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0933\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),weekdaysShort:"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0933_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),weekdaysMin:"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),longDateFormat:{LT:"A h:mm \u0935\u093e\u091c\u0924\u093e",LTS:"A h:mm:ss \u0935\u093e\u091c\u0924\u093e",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u0935\u093e\u091c\u0924\u093e",LLLL:"dddd, D MMMM YYYY, A h:mm \u0935\u093e\u091c\u0924\u093e"},calendar:{sameDay:"[\u0906\u091c] LT",nextDay:"[\u0909\u0926\u094d\u092f\u093e] LT",nextWeek:"dddd, LT",lastDay:"[\u0915\u093e\u0932] LT",lastWeek:"[\u092e\u093e\u0917\u0940\u0932] dddd, LT",sameElse:"L"},relativeTime:{future:"%s\u092e\u0927\u094d\u092f\u0947",past:"%s\u092a\u0942\u0930\u094d\u0935\u0940",s:Ln,ss:Ln,m:Ln,mm:Ln,h:Ln,hh:Ln,d:Ln,dd:Ln,M:Ln,MM:Ln,y:Ln,yy:Ln},preparse:function(e){return e.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(e){return hn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Mn[e]})},meridiemParse:/\u0930\u093e\u0924\u094d\u0930\u0940|\u0938\u0915\u093e\u0933\u0940|\u0926\u0941\u092a\u093e\u0930\u0940|\u0938\u093e\u092f\u0902\u0915\u093e\u0933\u0940/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u0930\u093e\u0924\u094d\u0930\u0940"===a?e<4?e:e+12:"\u0938\u0915\u093e\u0933\u0940"===a?e:"\u0926\u0941\u092a\u093e\u0930\u0940"===a?10<=e?e:e+12:"\u0938\u093e\u092f\u0902\u0915\u093e\u0933\u0940"===a?e+12:void 0},meridiem:function(e,a,t){return e<4?"\u0930\u093e\u0924\u094d\u0930\u0940":e<10?"\u0938\u0915\u093e\u0933\u0940":e<17?"\u0926\u0941\u092a\u093e\u0930\u0940":e<20?"\u0938\u093e\u092f\u0902\u0915\u093e\u0933\u0940":"\u0930\u093e\u0924\u094d\u0930\u0940"},week:{dow:0,doy:6}}),l.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,a){return 12===e&&(e=0),"pagi"===a?e:"tengahari"===a?11<=e?e:e+12:"petang"===a||"malam"===a?e+12:void 0},meridiem:function(e,a,t){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),l.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,a){return 12===e&&(e=0),"pagi"===a?e:"tengahari"===a?11<=e?e:e+12:"petang"===a||"malam"===a?e+12:void 0},meridiem:function(e,a,t){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),l.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_\u0120unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Di\u010bembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_\u0120un_Lul_Aww_Set_Ott_Nov_Di\u010b".split("_"),weekdays:"Il-\u0126add_It-Tnejn_It-Tlieta_L-Erbg\u0127a_Il-\u0126amis_Il-\u0120img\u0127a_Is-Sibt".split("_"),weekdaysShort:"\u0126ad_Tne_Tli_Erb_\u0126am_\u0120im_Sib".split("_"),weekdaysMin:"\u0126a_Tn_Tl_Er_\u0126a_\u0120i_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[G\u0127ada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-biera\u0127 fil-]LT",lastWeek:"dddd [li g\u0127adda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f\u2019 %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"sieg\u0127a",hh:"%d sieg\u0127at",d:"\u0121urnata",dd:"%d \u0121ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}});var cn={1:"\u1041",2:"\u1042",3:"\u1043",4:"\u1044",5:"\u1045",6:"\u1046",7:"\u1047",8:"\u1048",9:"\u1049",0:"\u1040"},Yn={"\u1041":"1","\u1042":"2","\u1043":"3","\u1044":"4","\u1045":"5","\u1046":"6","\u1047":"7","\u1048":"8","\u1049":"9","\u1040":"0"};l.defineLocale("my",{months:"\u1007\u1014\u103a\u1014\u101d\u102b\u101b\u102e_\u1016\u1031\u1016\u1031\u102c\u103a\u101d\u102b\u101b\u102e_\u1019\u1010\u103a_\u1027\u1015\u103c\u102e_\u1019\u1031_\u1007\u103d\u1014\u103a_\u1007\u1030\u101c\u102d\u102f\u1004\u103a_\u101e\u103c\u1002\u102f\u1010\u103a_\u1005\u1000\u103a\u1010\u1004\u103a\u1018\u102c_\u1021\u1031\u102c\u1000\u103a\u1010\u102d\u102f\u1018\u102c_\u1014\u102d\u102f\u101d\u1004\u103a\u1018\u102c_\u1012\u102e\u1007\u1004\u103a\u1018\u102c".split("_"),monthsShort:"\u1007\u1014\u103a_\u1016\u1031_\u1019\u1010\u103a_\u1015\u103c\u102e_\u1019\u1031_\u1007\u103d\u1014\u103a_\u101c\u102d\u102f\u1004\u103a_\u101e\u103c_\u1005\u1000\u103a_\u1021\u1031\u102c\u1000\u103a_\u1014\u102d\u102f_\u1012\u102e".split("_"),weekdays:"\u1010\u1014\u1004\u103a\u1039\u1002\u1014\u103d\u1031_\u1010\u1014\u1004\u103a\u1039\u101c\u102c_\u1021\u1004\u103a\u1039\u1002\u102b_\u1017\u102f\u1012\u1039\u1013\u101f\u1030\u1038_\u1000\u103c\u102c\u101e\u1015\u1010\u1031\u1038_\u101e\u1031\u102c\u1000\u103c\u102c_\u1005\u1014\u1031".split("_"),weekdaysShort:"\u1014\u103d\u1031_\u101c\u102c_\u1002\u102b_\u101f\u1030\u1038_\u1000\u103c\u102c_\u101e\u1031\u102c_\u1014\u1031".split("_"),weekdaysMin:"\u1014\u103d\u1031_\u101c\u102c_\u1002\u102b_\u101f\u1030\u1038_\u1000\u103c\u102c_\u101e\u1031\u102c_\u1014\u1031".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u101a\u1014\u1031.] LT [\u1019\u103e\u102c]",nextDay:"[\u1019\u1014\u1000\u103a\u1016\u103c\u1014\u103a] LT [\u1019\u103e\u102c]",nextWeek:"dddd LT [\u1019\u103e\u102c]",lastDay:"[\u1019\u1014\u1031.\u1000] LT [\u1019\u103e\u102c]",lastWeek:"[\u1015\u103c\u102e\u1038\u1001\u1032\u1037\u101e\u1031\u102c] dddd LT [\u1019\u103e\u102c]",sameElse:"L"},relativeTime:{future:"\u101c\u102c\u1019\u100a\u103a\u1037 %s \u1019\u103e\u102c",past:"\u101c\u103d\u1014\u103a\u1001\u1032\u1037\u101e\u1031\u102c %s \u1000",s:"\u1005\u1000\u1039\u1000\u1014\u103a.\u1021\u1014\u100a\u103a\u1038\u1004\u101a\u103a",ss:"%d \u1005\u1000\u1039\u1000\u1014\u1037\u103a",m:"\u1010\u1005\u103a\u1019\u102d\u1014\u1005\u103a",mm:"%d \u1019\u102d\u1014\u1005\u103a",h:"\u1010\u1005\u103a\u1014\u102c\u101b\u102e",hh:"%d \u1014\u102c\u101b\u102e",d:"\u1010\u1005\u103a\u101b\u1000\u103a",dd:"%d \u101b\u1000\u103a",M:"\u1010\u1005\u103a\u101c",MM:"%d \u101c",y:"\u1010\u1005\u103a\u1014\u103e\u1005\u103a",yy:"%d \u1014\u103e\u1005\u103a"},preparse:function(e){return e.replace(/[\u1041\u1042\u1043\u1044\u1045\u1046\u1047\u1048\u1049\u1040]/g,function(e){return Yn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return cn[e]})},week:{dow:1,doy:4}}),l.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),weekdaysShort:"s\xf8._ma._ti._on._to._fr._l\xf8.".split("_"),weekdaysMin:"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i g\xe5r kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en m\xe5ned",MM:"%d m\xe5neder",y:"ett \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var yn={1:"\u0967",2:"\u0968",3:"\u0969",4:"\u096a",5:"\u096b",6:"\u096c",7:"\u096d",8:"\u096e",9:"\u096f",0:"\u0966"},fn={"\u0967":"1","\u0968":"2","\u0969":"3","\u096a":"4","\u096b":"5","\u096c":"6","\u096d":"7","\u096e":"8","\u096f":"9","\u0966":"0"};l.defineLocale("ne",{months:"\u091c\u0928\u0935\u0930\u0940_\u092b\u0947\u092c\u094d\u0930\u0941\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u093f\u0932_\u092e\u0908_\u091c\u0941\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0937\u094d\u091f_\u0938\u0947\u092a\u094d\u091f\u0947\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u094b\u092c\u0930_\u0928\u094b\u092d\u0947\u092e\u094d\u092c\u0930_\u0921\u093f\u0938\u0947\u092e\u094d\u092c\u0930".split("_"),monthsShort:"\u091c\u0928._\u092b\u0947\u092c\u094d\u0930\u0941._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u093f._\u092e\u0908_\u091c\u0941\u0928_\u091c\u0941\u0932\u093e\u0908._\u0905\u0917._\u0938\u0947\u092a\u094d\u091f._\u0905\u0915\u094d\u091f\u094b._\u0928\u094b\u092d\u0947._\u0921\u093f\u0938\u0947.".split("_"),monthsParseExact:!0,weekdays:"\u0906\u0907\u0924\u092c\u093e\u0930_\u0938\u094b\u092e\u092c\u093e\u0930_\u092e\u0919\u094d\u0917\u0932\u092c\u093e\u0930_\u092c\u0941\u0927\u092c\u093e\u0930_\u092c\u093f\u0939\u093f\u092c\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u092c\u093e\u0930_\u0936\u0928\u093f\u092c\u093e\u0930".split("_"),weekdaysShort:"\u0906\u0907\u0924._\u0938\u094b\u092e._\u092e\u0919\u094d\u0917\u0932._\u092c\u0941\u0927._\u092c\u093f\u0939\u093f._\u0936\u0941\u0915\u094d\u0930._\u0936\u0928\u093f.".split("_"),weekdaysMin:"\u0906._\u0938\u094b._\u092e\u0902._\u092c\u0941._\u092c\u093f._\u0936\u0941._\u0936.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A\u0915\u094b h:mm \u092c\u091c\u0947",LTS:"A\u0915\u094b h:mm:ss \u092c\u091c\u0947",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A\u0915\u094b h:mm \u092c\u091c\u0947",LLLL:"dddd, D MMMM YYYY, A\u0915\u094b h:mm \u092c\u091c\u0947"},preparse:function(e){return e.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(e){return fn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return yn[e]})},meridiemParse:/\u0930\u093e\u0924\u093f|\u092c\u093f\u0939\u093e\u0928|\u0926\u093f\u0909\u0901\u0938\u094b|\u0938\u093e\u0901\u091d/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u0930\u093e\u0924\u093f"===a?e<4?e:e+12:"\u092c\u093f\u0939\u093e\u0928"===a?e:"\u0926\u093f\u0909\u0901\u0938\u094b"===a?10<=e?e:e+12:"\u0938\u093e\u0901\u091d"===a?e+12:void 0},meridiem:function(e,a,t){return e<3?"\u0930\u093e\u0924\u093f":e<12?"\u092c\u093f\u0939\u093e\u0928":e<16?"\u0926\u093f\u0909\u0901\u0938\u094b":e<20?"\u0938\u093e\u0901\u091d":"\u0930\u093e\u0924\u093f"},calendar:{sameDay:"[\u0906\u091c] LT",nextDay:"[\u092d\u094b\u0932\u093f] LT",nextWeek:"[\u0906\u0909\u0901\u0926\u094b] dddd[,] LT",lastDay:"[\u0939\u093f\u091c\u094b] LT",lastWeek:"[\u0917\u090f\u0915\u094b] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s\u092e\u093e",past:"%s \u0905\u0917\u093e\u0921\u093f",s:"\u0915\u0947\u0939\u0940 \u0915\u094d\u0937\u0923",ss:"%d \u0938\u0947\u0915\u0947\u0923\u094d\u0921",m:"\u090f\u0915 \u092e\u093f\u0928\u0947\u091f",mm:"%d \u092e\u093f\u0928\u0947\u091f",h:"\u090f\u0915 \u0918\u0923\u094d\u091f\u093e",hh:"%d \u0918\u0923\u094d\u091f\u093e",d:"\u090f\u0915 \u0926\u093f\u0928",dd:"%d \u0926\u093f\u0928",M:"\u090f\u0915 \u092e\u0939\u093f\u0928\u093e",MM:"%d \u092e\u0939\u093f\u0928\u093e",y:"\u090f\u0915 \u092c\u0930\u094d\u0937",yy:"%d \u092c\u0930\u094d\u0937"},week:{dow:0,doy:6}});var kn="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),pn="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),Dn=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],Tn=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;l.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?pn[e.month()]:kn[e.month()]:kn},monthsRegex:Tn,monthsShortRegex:Tn,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:Dn,longMonthsParse:Dn,shortMonthsParse:Dn,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"\xe9\xe9n minuut",mm:"%d minuten",h:"\xe9\xe9n uur",hh:"%d uur",d:"\xe9\xe9n dag",dd:"%d dagen",M:"\xe9\xe9n maand",MM:"%d maanden",y:"\xe9\xe9n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||20<=e?"ste":"de")},week:{dow:1,doy:4}});var gn="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),wn="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),vn=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],Sn=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;l.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?wn[e.month()]:gn[e.month()]:gn},monthsRegex:Sn,monthsShortRegex:Sn,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:vn,longMonthsParse:vn,shortMonthsParse:vn,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"\xe9\xe9n minuut",mm:"%d minuten",h:"\xe9\xe9n uur",hh:"%d uur",d:"\xe9\xe9n dag",dd:"%d dagen",M:"\xe9\xe9n maand",MM:"%d maanden",y:"\xe9\xe9n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||20<=e?"ste":"de")},week:{dow:1,doy:4}}),l.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_m\xe5ndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_m\xe5n_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m\xe5_ty_on_to_fr_l\xf8".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I g\xe5r klokka] LT",lastWeek:"[F\xf8reg\xe5ande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein m\xe5nad",MM:"%d m\xe5nader",y:"eit \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Hn={1:"\u0a67",2:"\u0a68",3:"\u0a69",4:"\u0a6a",5:"\u0a6b",6:"\u0a6c",7:"\u0a6d",8:"\u0a6e",9:"\u0a6f",0:"\u0a66"},bn={"\u0a67":"1","\u0a68":"2","\u0a69":"3","\u0a6a":"4","\u0a6b":"5","\u0a6c":"6","\u0a6d":"7","\u0a6e":"8","\u0a6f":"9","\u0a66":"0"};l.defineLocale("pa-in",{months:"\u0a1c\u0a28\u0a35\u0a30\u0a40_\u0a2b\u0a3c\u0a30\u0a35\u0a30\u0a40_\u0a2e\u0a3e\u0a30\u0a1a_\u0a05\u0a2a\u0a4d\u0a30\u0a48\u0a32_\u0a2e\u0a08_\u0a1c\u0a42\u0a28_\u0a1c\u0a41\u0a32\u0a3e\u0a08_\u0a05\u0a17\u0a38\u0a24_\u0a38\u0a24\u0a70\u0a2c\u0a30_\u0a05\u0a15\u0a24\u0a42\u0a2c\u0a30_\u0a28\u0a35\u0a70\u0a2c\u0a30_\u0a26\u0a38\u0a70\u0a2c\u0a30".split("_"),monthsShort:"\u0a1c\u0a28\u0a35\u0a30\u0a40_\u0a2b\u0a3c\u0a30\u0a35\u0a30\u0a40_\u0a2e\u0a3e\u0a30\u0a1a_\u0a05\u0a2a\u0a4d\u0a30\u0a48\u0a32_\u0a2e\u0a08_\u0a1c\u0a42\u0a28_\u0a1c\u0a41\u0a32\u0a3e\u0a08_\u0a05\u0a17\u0a38\u0a24_\u0a38\u0a24\u0a70\u0a2c\u0a30_\u0a05\u0a15\u0a24\u0a42\u0a2c\u0a30_\u0a28\u0a35\u0a70\u0a2c\u0a30_\u0a26\u0a38\u0a70\u0a2c\u0a30".split("_"),weekdays:"\u0a10\u0a24\u0a35\u0a3e\u0a30_\u0a38\u0a4b\u0a2e\u0a35\u0a3e\u0a30_\u0a2e\u0a70\u0a17\u0a32\u0a35\u0a3e\u0a30_\u0a2c\u0a41\u0a27\u0a35\u0a3e\u0a30_\u0a35\u0a40\u0a30\u0a35\u0a3e\u0a30_\u0a38\u0a3c\u0a41\u0a71\u0a15\u0a30\u0a35\u0a3e\u0a30_\u0a38\u0a3c\u0a28\u0a40\u0a1a\u0a30\u0a35\u0a3e\u0a30".split("_"),weekdaysShort:"\u0a10\u0a24_\u0a38\u0a4b\u0a2e_\u0a2e\u0a70\u0a17\u0a32_\u0a2c\u0a41\u0a27_\u0a35\u0a40\u0a30_\u0a38\u0a3c\u0a41\u0a15\u0a30_\u0a38\u0a3c\u0a28\u0a40".split("_"),weekdaysMin:"\u0a10\u0a24_\u0a38\u0a4b\u0a2e_\u0a2e\u0a70\u0a17\u0a32_\u0a2c\u0a41\u0a27_\u0a35\u0a40\u0a30_\u0a38\u0a3c\u0a41\u0a15\u0a30_\u0a38\u0a3c\u0a28\u0a40".split("_"),longDateFormat:{LT:"A h:mm \u0a35\u0a1c\u0a47",LTS:"A h:mm:ss \u0a35\u0a1c\u0a47",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u0a35\u0a1c\u0a47",LLLL:"dddd, D MMMM YYYY, A h:mm \u0a35\u0a1c\u0a47"},calendar:{sameDay:"[\u0a05\u0a1c] LT",nextDay:"[\u0a15\u0a32] LT",nextWeek:"[\u0a05\u0a17\u0a32\u0a3e] dddd, LT",lastDay:"[\u0a15\u0a32] LT",lastWeek:"[\u0a2a\u0a3f\u0a1b\u0a32\u0a47] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0a35\u0a3f\u0a71\u0a1a",past:"%s \u0a2a\u0a3f\u0a1b\u0a32\u0a47",s:"\u0a15\u0a41\u0a1d \u0a38\u0a15\u0a3f\u0a70\u0a1f",ss:"%d \u0a38\u0a15\u0a3f\u0a70\u0a1f",m:"\u0a07\u0a15 \u0a2e\u0a3f\u0a70\u0a1f",mm:"%d \u0a2e\u0a3f\u0a70\u0a1f",h:"\u0a07\u0a71\u0a15 \u0a18\u0a70\u0a1f\u0a3e",hh:"%d \u0a18\u0a70\u0a1f\u0a47",d:"\u0a07\u0a71\u0a15 \u0a26\u0a3f\u0a28",dd:"%d \u0a26\u0a3f\u0a28",M:"\u0a07\u0a71\u0a15 \u0a2e\u0a39\u0a40\u0a28\u0a3e",MM:"%d \u0a2e\u0a39\u0a40\u0a28\u0a47",y:"\u0a07\u0a71\u0a15 \u0a38\u0a3e\u0a32",yy:"%d \u0a38\u0a3e\u0a32"},preparse:function(e){return e.replace(/[\u0a67\u0a68\u0a69\u0a6a\u0a6b\u0a6c\u0a6d\u0a6e\u0a6f\u0a66]/g,function(e){return bn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Hn[e]})},meridiemParse:/\u0a30\u0a3e\u0a24|\u0a38\u0a35\u0a47\u0a30|\u0a26\u0a41\u0a2a\u0a39\u0a3f\u0a30|\u0a38\u0a3c\u0a3e\u0a2e/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u0a30\u0a3e\u0a24"===a?e<4?e:e+12:"\u0a38\u0a35\u0a47\u0a30"===a?e:"\u0a26\u0a41\u0a2a\u0a39\u0a3f\u0a30"===a?10<=e?e:e+12:"\u0a38\u0a3c\u0a3e\u0a2e"===a?e+12:void 0},meridiem:function(e,a,t){return e<4?"\u0a30\u0a3e\u0a24":e<10?"\u0a38\u0a35\u0a47\u0a30":e<17?"\u0a26\u0a41\u0a2a\u0a39\u0a3f\u0a30":e<20?"\u0a38\u0a3c\u0a3e\u0a2e":"\u0a30\u0a3e\u0a24"},week:{dow:0,doy:6}});var jn="stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),xn="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_");function Pn(e){return e%10<5&&1<e%10&&~~(e/10)%10!=1}function On(e,a,t){var s=e+" ";switch(t){case"ss":return s+(Pn(e)?"sekundy":"sekund");case"m":return a?"minuta":"minut\u0119";case"mm":return s+(Pn(e)?"minuty":"minut");case"h":return a?"godzina":"godzin\u0119";case"hh":return s+(Pn(e)?"godziny":"godzin");case"MM":return s+(Pn(e)?"miesi\u0105ce":"miesi\u0119cy");case"yy":return s+(Pn(e)?"lata":"lat")}}function Wn(e,a,t){var s=" ";return(20<=e%100||100<=e&&e%100==0)&&(s=" de "),e+s+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[t]}function En(e,a,t){var s,n;return"m"===t?a?"\u043c\u0438\u043d\u0443\u0442\u0430":"\u043c\u0438\u043d\u0443\u0442\u0443":e+" "+(s=+e,n={ss:a?"\u0441\u0435\u043a\u0443\u043d\u0434\u0430_\u0441\u0435\u043a\u0443\u043d\u0434\u044b_\u0441\u0435\u043a\u0443\u043d\u0434":"\u0441\u0435\u043a\u0443\u043d\u0434\u0443_\u0441\u0435\u043a\u0443\u043d\u0434\u044b_\u0441\u0435\u043a\u0443\u043d\u0434",mm:a?"\u043c\u0438\u043d\u0443\u0442\u0430_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442":"\u043c\u0438\u043d\u0443\u0442\u0443_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442",hh:"\u0447\u0430\u0441_\u0447\u0430\u0441\u0430_\u0447\u0430\u0441\u043e\u0432",dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u044f_\u0434\u043d\u0435\u0439",MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u0430_\u043c\u0435\u0441\u044f\u0446\u0435\u0432",yy:"\u0433\u043e\u0434_\u0433\u043e\u0434\u0430_\u043b\u0435\u0442"}[t].split("_"),s%10==1&&s%100!=11?n[0]:2<=s%10&&s%10<=4&&(s%100<10||20<=s%100)?n[1]:n[2])}l.defineLocale("pl",{months:function(e,a){return e?""===a?"("+xn[e.month()]+"|"+jn[e.month()]+")":/D MMMM/.test(a)?xn[e.month()]:jn[e.month()]:jn},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),weekdays:"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi\u015b o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel\u0119 o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W \u015brod\u0119 o] LT";case 6:return"[W sobot\u0119 o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz\u0142\u0105 niedziel\u0119 o] LT";case 3:return"[W zesz\u0142\u0105 \u015brod\u0119 o] LT";case 6:return"[W zesz\u0142\u0105 sobot\u0119 o] LT";default:return"[W zesz\u0142y] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:On,m:On,mm:On,h:On,hh:On,d:"1 dzie\u0144",dd:"%d dni",M:"miesi\u0105c",MM:On,y:"rok",yy:On},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("pt-br",{months:"janeiro_fevereiro_mar\xe7o_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),weekdaysMin:"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [\xe0s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [\xe0s] HH:mm"},calendar:{sameDay:"[Hoje \xe0s] LT",nextDay:"[Amanh\xe3 \xe0s] LT",nextWeek:"dddd [\xe0s] LT",lastDay:"[Ontem \xe0s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[\xdaltimo] dddd [\xe0s] LT":"[\xdaltima] dddd [\xe0s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h\xe1 %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um m\xeas",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba"}),l.defineLocale("pt",{months:"janeiro_fevereiro_mar\xe7o_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),weekdaysMin:"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje \xe0s] LT",nextDay:"[Amanh\xe3 \xe0s] LT",nextWeek:"dddd [\xe0s] LT",lastDay:"[Ontem \xe0s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[\xdaltimo] dddd [\xe0s] LT":"[\xdaltima] dddd [\xe0s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h\xe1 %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um m\xeas",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}}),l.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic\u0103_luni_mar\u021bi_miercuri_joi_vineri_s\xe2mb\u0103t\u0103".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_S\xe2m".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S\xe2".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[m\xe2ine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s \xeen urm\u0103",s:"c\xe2teva secunde",ss:Wn,m:"un minut",mm:Wn,h:"o or\u0103",hh:Wn,d:"o zi",dd:Wn,M:"o lun\u0103",MM:Wn,y:"un an",yy:Wn},week:{dow:1,doy:7}});var An=[/^\u044f\u043d\u0432/i,/^\u0444\u0435\u0432/i,/^\u043c\u0430\u0440/i,/^\u0430\u043f\u0440/i,/^\u043c\u0430[\u0439\u044f]/i,/^\u0438\u044e\u043d/i,/^\u0438\u044e\u043b/i,/^\u0430\u0432\u0433/i,/^\u0441\u0435\u043d/i,/^\u043e\u043a\u0442/i,/^\u043d\u043e\u044f/i,/^\u0434\u0435\u043a/i];l.defineLocale("ru",{months:{format:"\u044f\u043d\u0432\u0430\u0440\u044f_\u0444\u0435\u0432\u0440\u0430\u043b\u044f_\u043c\u0430\u0440\u0442\u0430_\u0430\u043f\u0440\u0435\u043b\u044f_\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f_\u043e\u043a\u0442\u044f\u0431\u0440\u044f_\u043d\u043e\u044f\u0431\u0440\u044f_\u0434\u0435\u043a\u0430\u0431\u0440\u044f".split("_"),standalone:"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_")},monthsShort:{format:"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),standalone:"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440\u0442_\u0430\u043f\u0440._\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_")},weekdays:{standalone:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043e\u0442\u0430".split("_"),format:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043e\u0442\u0443".split("_"),isFormat:/\[ ?[\u0412\u0432] ?(?:\u043f\u0440\u043e\u0448\u043b\u0443\u044e|\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e|\u044d\u0442\u0443)? ?\] ?dddd/},weekdaysShort:"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),weekdaysMin:"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),monthsParse:An,longMonthsParse:An,shortMonthsParse:An,monthsRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,monthsShortRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,monthsStrictRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044f\u044c]|\u0444\u0435\u0432\u0440\u0430\u043b[\u044f\u044c]|\u043c\u0430\u0440\u0442\u0430?|\u0430\u043f\u0440\u0435\u043b[\u044f\u044c]|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044f\u044c]|\u0438\u044e\u043b[\u044f\u044c]|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043e\u043a\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043d\u043e\u044f\u0431\u0440[\u044f\u044c]|\u0434\u0435\u043a\u0430\u0431\u0440[\u044f\u044c])/i,monthsShortStrictRegex:/^(\u044f\u043d\u0432\.|\u0444\u0435\u0432\u0440?\.|\u043c\u0430\u0440[\u0442.]|\u0430\u043f\u0440\.|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044c\u044f.]|\u0438\u044e\u043b[\u044c\u044f.]|\u0430\u0432\u0433\.|\u0441\u0435\u043d\u0442?\.|\u043e\u043a\u0442\.|\u043d\u043e\u044f\u0431?\.|\u0434\u0435\u043a\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., H:mm",LLLL:"dddd, D MMMM YYYY \u0433., H:mm"},calendar:{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f, \u0432] LT",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430, \u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430, \u0432] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[\u0412\u043e] dddd, [\u0432] LT":"[\u0412] dddd, [\u0432] LT";switch(this.day()){case 0:return"[\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435] dddd, [\u0432] LT";case 1:case 2:case 4:return"[\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439] dddd, [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e] dddd, [\u0432] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[\u0412\u043e] dddd, [\u0432] LT":"[\u0412] dddd, [\u0432] LT";switch(this.day()){case 0:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u043e\u0435] dddd, [\u0432] LT";case 1:case 2:case 4:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u044b\u0439] dddd, [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u0443\u044e] dddd, [\u0432] LT"}},sameElse:"L"},relativeTime:{future:"\u0447\u0435\u0440\u0435\u0437 %s",past:"%s \u043d\u0430\u0437\u0430\u0434",s:"\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434",ss:En,m:En,mm:En,h:"\u0447\u0430\u0441",hh:En,d:"\u0434\u0435\u043d\u044c",dd:En,M:"\u043c\u0435\u0441\u044f\u0446",MM:En,y:"\u0433\u043e\u0434",yy:En},meridiemParse:/\u043d\u043e\u0447\u0438|\u0443\u0442\u0440\u0430|\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430/i,isPM:function(e){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430)$/.test(e)},meridiem:function(e,a,t){return e<4?"\u043d\u043e\u0447\u0438":e<12?"\u0443\u0442\u0440\u0430":e<17?"\u0434\u043d\u044f":"\u0432\u0435\u0447\u0435\u0440\u0430"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0439|\u0433\u043e|\u044f)/,ordinal:function(e,a){switch(a){case"M":case"d":case"DDD":return e+"-\u0439";case"D":return e+"-\u0433\u043e";case"w":case"W":return e+"-\u044f";default:return e}},week:{dow:1,doy:4}});var Fn=["\u062c\u0646\u0648\u0631\u064a","\u0641\u064a\u0628\u0631\u0648\u0631\u064a","\u0645\u0627\u0631\u0686","\u0627\u067e\u0631\u064a\u0644","\u0645\u0626\u064a","\u062c\u0648\u0646","\u062c\u0648\u0644\u0627\u0621\u0650","\u0622\u06af\u0633\u067d","\u0633\u064a\u067e\u067d\u0645\u0628\u0631","\u0622\u06aa\u067d\u0648\u0628\u0631","\u0646\u0648\u0645\u0628\u0631","\u068a\u0633\u0645\u0628\u0631"],zn=["\u0622\u0686\u0631","\u0633\u0648\u0645\u0631","\u0627\u06b1\u0627\u0631\u0648","\u0627\u0631\u0628\u0639","\u062e\u0645\u064a\u0633","\u062c\u0645\u0639","\u0687\u0646\u0687\u0631"];l.defineLocale("sd",{months:Fn,monthsShort:Fn,weekdays:zn,weekdaysShort:zn,weekdaysMin:zn,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd\u060c D MMMM YYYY HH:mm"},meridiemParse:/\u0635\u0628\u062d|\u0634\u0627\u0645/,isPM:function(e){return"\u0634\u0627\u0645"===e},meridiem:function(e,a,t){return e<12?"\u0635\u0628\u062d":"\u0634\u0627\u0645"},calendar:{sameDay:"[\u0627\u0684] LT",nextDay:"[\u0633\u0680\u0627\u06bb\u064a] LT",nextWeek:"dddd [\u0627\u06b3\u064a\u0646 \u0647\u0641\u062a\u064a \u062a\u064a] LT",lastDay:"[\u06aa\u0627\u0644\u0647\u0647] LT",lastWeek:"[\u06af\u0632\u0631\u064a\u0644 \u0647\u0641\u062a\u064a] dddd [\u062a\u064a] LT",sameElse:"L"},relativeTime:{future:"%s \u067e\u0648\u0621",past:"%s \u0627\u06b3",s:"\u0686\u0646\u062f \u0633\u064a\u06aa\u0646\u068a",ss:"%d \u0633\u064a\u06aa\u0646\u068a",m:"\u0647\u06aa \u0645\u0646\u067d",mm:"%d \u0645\u0646\u067d",h:"\u0647\u06aa \u06aa\u0644\u0627\u06aa",hh:"%d \u06aa\u0644\u0627\u06aa",d:"\u0647\u06aa \u068f\u064a\u0646\u0647\u0646",dd:"%d \u068f\u064a\u0646\u0647\u0646",M:"\u0647\u06aa \u0645\u0647\u064a\u0646\u0648",MM:"%d \u0645\u0647\u064a\u0646\u0627",y:"\u0647\u06aa \u0633\u0627\u0644",yy:"%d \u0633\u0627\u0644"},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"\u060c")},week:{dow:1,doy:4}}),l.defineLocale("se",{months:"o\u0111\u0111ajagem\xe1nnu_guovvam\xe1nnu_njuk\u010dam\xe1nnu_cuo\u014bom\xe1nnu_miessem\xe1nnu_geassem\xe1nnu_suoidnem\xe1nnu_borgem\xe1nnu_\u010dak\u010dam\xe1nnu_golggotm\xe1nnu_sk\xe1bmam\xe1nnu_juovlam\xe1nnu".split("_"),monthsShort:"o\u0111\u0111j_guov_njuk_cuo_mies_geas_suoi_borg_\u010dak\u010d_golg_sk\xe1b_juov".split("_"),weekdays:"sotnabeaivi_vuoss\xe1rga_ma\u014b\u014beb\xe1rga_gaskavahkku_duorastat_bearjadat_l\xe1vvardat".split("_"),weekdaysShort:"sotn_vuos_ma\u014b_gask_duor_bear_l\xe1v".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s gea\u017ees",past:"ma\u014bit %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta m\xe1nnu",MM:"%d m\xe1nut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("si",{months:"\u0da2\u0db1\u0dc0\u0dcf\u0dbb\u0dd2_\u0db4\u0dd9\u0db6\u0dbb\u0dc0\u0dcf\u0dbb\u0dd2_\u0db8\u0dcf\u0dbb\u0dca\u0dad\u0dd4_\u0d85\u0db4\u0dca\u200d\u0dbb\u0dda\u0dbd\u0dca_\u0db8\u0dd0\u0dba\u0dd2_\u0da2\u0dd6\u0db1\u0dd2_\u0da2\u0dd6\u0dbd\u0dd2_\u0d85\u0d9c\u0ddd\u0dc3\u0dca\u0dad\u0dd4_\u0dc3\u0dd0\u0db4\u0dca\u0dad\u0dd0\u0db8\u0dca\u0db6\u0dbb\u0dca_\u0d94\u0d9a\u0dca\u0dad\u0ddd\u0db6\u0dbb\u0dca_\u0db1\u0ddc\u0dc0\u0dd0\u0db8\u0dca\u0db6\u0dbb\u0dca_\u0daf\u0dd9\u0dc3\u0dd0\u0db8\u0dca\u0db6\u0dbb\u0dca".split("_"),monthsShort:"\u0da2\u0db1_\u0db4\u0dd9\u0db6_\u0db8\u0dcf\u0dbb\u0dca_\u0d85\u0db4\u0dca_\u0db8\u0dd0\u0dba\u0dd2_\u0da2\u0dd6\u0db1\u0dd2_\u0da2\u0dd6\u0dbd\u0dd2_\u0d85\u0d9c\u0ddd_\u0dc3\u0dd0\u0db4\u0dca_\u0d94\u0d9a\u0dca_\u0db1\u0ddc\u0dc0\u0dd0_\u0daf\u0dd9\u0dc3\u0dd0".split("_"),weekdays:"\u0d89\u0dbb\u0dd2\u0daf\u0dcf_\u0dc3\u0db3\u0dd4\u0daf\u0dcf_\u0d85\u0d9f\u0dc4\u0dbb\u0dd4\u0dc0\u0dcf\u0daf\u0dcf_\u0db6\u0daf\u0dcf\u0daf\u0dcf_\u0db6\u0dca\u200d\u0dbb\u0dc4\u0dc3\u0dca\u0db4\u0dad\u0dd2\u0db1\u0dca\u0daf\u0dcf_\u0dc3\u0dd2\u0d9a\u0dd4\u0dbb\u0dcf\u0daf\u0dcf_\u0dc3\u0dd9\u0db1\u0dc3\u0dd4\u0dbb\u0dcf\u0daf\u0dcf".split("_"),weekdaysShort:"\u0d89\u0dbb\u0dd2_\u0dc3\u0db3\u0dd4_\u0d85\u0d9f_\u0db6\u0daf\u0dcf_\u0db6\u0dca\u200d\u0dbb\u0dc4_\u0dc3\u0dd2\u0d9a\u0dd4_\u0dc3\u0dd9\u0db1".split("_"),weekdaysMin:"\u0d89_\u0dc3_\u0d85_\u0db6_\u0db6\u0dca\u200d\u0dbb_\u0dc3\u0dd2_\u0dc3\u0dd9".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [\u0dc0\u0dd0\u0db1\u0dd2] dddd, a h:mm:ss"},calendar:{sameDay:"[\u0d85\u0daf] LT[\u0da7]",nextDay:"[\u0dc4\u0dd9\u0da7] LT[\u0da7]",nextWeek:"dddd LT[\u0da7]",lastDay:"[\u0d8a\u0dba\u0dda] LT[\u0da7]",lastWeek:"[\u0db4\u0dc3\u0dd4\u0d9c\u0dd2\u0dba] dddd LT[\u0da7]",sameElse:"L"},relativeTime:{future:"%s\u0d9a\u0dd2\u0db1\u0dca",past:"%s\u0d9a\u0da7 \u0db4\u0dd9\u0dbb",s:"\u0dad\u0dad\u0dca\u0db4\u0dbb \u0d9a\u0dd2\u0dc4\u0dd2\u0db4\u0dba",ss:"\u0dad\u0dad\u0dca\u0db4\u0dbb %d",m:"\u0db8\u0dd2\u0db1\u0dd2\u0dad\u0dca\u0dad\u0dd4\u0dc0",mm:"\u0db8\u0dd2\u0db1\u0dd2\u0dad\u0dca\u0dad\u0dd4 %d",h:"\u0db4\u0dd0\u0dba",hh:"\u0db4\u0dd0\u0dba %d",d:"\u0daf\u0dd2\u0db1\u0dba",dd:"\u0daf\u0dd2\u0db1 %d",M:"\u0db8\u0dcf\u0dc3\u0dba",MM:"\u0db8\u0dcf\u0dc3 %d",y:"\u0dc0\u0dc3\u0dbb",yy:"\u0dc0\u0dc3\u0dbb %d"},dayOfMonthOrdinalParse:/\d{1,2} \u0dc0\u0dd0\u0db1\u0dd2/,ordinal:function(e){return e+" \u0dc0\u0dd0\u0db1\u0dd2"},meridiemParse:/\u0db4\u0dd9\u0dbb \u0dc0\u0dbb\u0dd4|\u0db4\u0dc3\u0dca \u0dc0\u0dbb\u0dd4|\u0db4\u0dd9.\u0dc0|\u0db4.\u0dc0./,isPM:function(e){return"\u0db4.\u0dc0."===e||"\u0db4\u0dc3\u0dca \u0dc0\u0dbb\u0dd4"===e},meridiem:function(e,a,t){return 11<e?t?"\u0db4.\u0dc0.":"\u0db4\u0dc3\u0dca \u0dc0\u0dbb\u0dd4":t?"\u0db4\u0dd9.\u0dc0.":"\u0db4\u0dd9\u0dbb \u0dc0\u0dbb\u0dd4"}});var Jn="janu\xe1r_febru\xe1r_marec_apr\xedl_m\xe1j_j\xfan_j\xfal_august_september_okt\xf3ber_november_december".split("_"),Nn="jan_feb_mar_apr_m\xe1j_j\xfan_j\xfal_aug_sep_okt_nov_dec".split("_");function Rn(e){return 1<e&&e<5}function In(e,a,t,s){var n=e+" ";switch(t){case"s":return a||s?"p\xe1r sek\xfand":"p\xe1r sekundami";case"ss":return a||s?n+(Rn(e)?"sekundy":"sek\xfand"):n+"sekundami";break;case"m":return a?"min\xfata":s?"min\xfatu":"min\xfatou";case"mm":return a||s?n+(Rn(e)?"min\xfaty":"min\xfat"):n+"min\xfatami";break;case"h":return a?"hodina":s?"hodinu":"hodinou";case"hh":return a||s?n+(Rn(e)?"hodiny":"hod\xedn"):n+"hodinami";break;case"d":return a||s?"de\u0148":"d\u0148om";case"dd":return a||s?n+(Rn(e)?"dni":"dn\xed"):n+"d\u0148ami";break;case"M":return a||s?"mesiac":"mesiacom";case"MM":return a||s?n+(Rn(e)?"mesiace":"mesiacov"):n+"mesiacmi";break;case"y":return a||s?"rok":"rokom";case"yy":return a||s?n+(Rn(e)?"roky":"rokov"):n+"rokmi";break}}function Cn(e,a,t,s){var n=e+" ";switch(t){case"s":return a||s?"nekaj sekund":"nekaj sekundami";case"ss":return n+=1===e?a?"sekundo":"sekundi":2===e?a||s?"sekundi":"sekundah":e<5?a||s?"sekunde":"sekundah":"sekund";case"m":return a?"ena minuta":"eno minuto";case"mm":return n+=1===e?a?"minuta":"minuto":2===e?a||s?"minuti":"minutama":e<5?a||s?"minute":"minutami":a||s?"minut":"minutami";case"h":return a?"ena ura":"eno uro";case"hh":return n+=1===e?a?"ura":"uro":2===e?a||s?"uri":"urama":e<5?a||s?"ure":"urami":a||s?"ur":"urami";case"d":return a||s?"en dan":"enim dnem";case"dd":return n+=1===e?a||s?"dan":"dnem":2===e?a||s?"dni":"dnevoma":a||s?"dni":"dnevi";case"M":return a||s?"en mesec":"enim mesecem";case"MM":return n+=1===e?a||s?"mesec":"mesecem":2===e?a||s?"meseca":"mesecema":e<5?a||s?"mesece":"meseci":a||s?"mesecev":"meseci";case"y":return a||s?"eno leto":"enim letom";case"yy":return n+=1===e?a||s?"leto":"letom":2===e?a||s?"leti":"letoma":e<5?a||s?"leta":"leti":a||s?"let":"leti"}}l.defineLocale("sk",{months:Jn,monthsShort:Nn,weekdays:"nede\u013ea_pondelok_utorok_streda_\u0161tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_\u0161t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_\u0161t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nede\u013eu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo \u0161tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[v\u010dera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul\xfa nede\u013eu o] LT";case 1:case 2:return"[minul\xfd] dddd [o] LT";case 3:return"[minul\xfa stredu o] LT";case 4:case 5:return"[minul\xfd] dddd [o] LT";case 6:return"[minul\xfa sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:In,ss:In,m:In,mm:In,h:In,hh:In,d:In,dd:In,M:In,MM:In,y:In,yy:In},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_\u010detrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._\u010det._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_\u010de_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[v\u010deraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prej\u0161njo] [nedeljo] [ob] LT";case 3:return"[prej\u0161njo] [sredo] [ob] LT";case 6:return"[prej\u0161njo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prej\u0161nji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"\u010dez %s",past:"pred %s",s:Cn,ss:Cn,m:Cn,mm:Cn,h:Cn,hh:Cn,d:Cn,dd:Cn,M:Cn,MM:Cn,y:Cn,yy:Cn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),l.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_N\xebntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_N\xebn_Dhj".split("_"),weekdays:"E Diel_E H\xebn\xeb_E Mart\xeb_E M\xebrkur\xeb_E Enjte_E Premte_E Shtun\xeb".split("_"),weekdaysShort:"Die_H\xebn_Mar_M\xebr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M\xeb_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,a,t){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n\xeb] LT",nextDay:"[Nes\xebr n\xeb] LT",nextWeek:"dddd [n\xeb] LT",lastDay:"[Dje n\xeb] LT",lastWeek:"dddd [e kaluar n\xeb] LT",sameElse:"L"},relativeTime:{future:"n\xeb %s",past:"%s m\xeb par\xeb",s:"disa sekonda",ss:"%d sekonda",m:"nj\xeb minut\xeb",mm:"%d minuta",h:"nj\xeb or\xeb",hh:"%d or\xeb",d:"nj\xeb dit\xeb",dd:"%d dit\xeb",M:"nj\xeb muaj",MM:"%d muaj",y:"nj\xeb vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var Gn={words:{ss:["\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u0441\u0435\u043a\u0443\u043d\u0434\u0435","\u0441\u0435\u043a\u0443\u043d\u0434\u0438"],m:["\u0458\u0435\u0434\u0430\u043d \u043c\u0438\u043d\u0443\u0442","\u0458\u0435\u0434\u043d\u0435 \u043c\u0438\u043d\u0443\u0442\u0435"],mm:["\u043c\u0438\u043d\u0443\u0442","\u043c\u0438\u043d\u0443\u0442\u0435","\u043c\u0438\u043d\u0443\u0442\u0430"],h:["\u0458\u0435\u0434\u0430\u043d \u0441\u0430\u0442","\u0458\u0435\u0434\u043d\u043e\u0433 \u0441\u0430\u0442\u0430"],hh:["\u0441\u0430\u0442","\u0441\u0430\u0442\u0430","\u0441\u0430\u0442\u0438"],dd:["\u0434\u0430\u043d","\u0434\u0430\u043d\u0430","\u0434\u0430\u043d\u0430"],MM:["\u043c\u0435\u0441\u0435\u0446","\u043c\u0435\u0441\u0435\u0446\u0430","\u043c\u0435\u0441\u0435\u0446\u0438"],yy:["\u0433\u043e\u0434\u0438\u043d\u0430","\u0433\u043e\u0434\u0438\u043d\u0435","\u0433\u043e\u0434\u0438\u043d\u0430"]},correctGrammaticalCase:function(e,a){return 1===e?a[0]:2<=e&&e<=4?a[1]:a[2]},translate:function(e,a,t){var s=Gn.words[t];return 1===t.length?a?s[0]:s[1]:e+" "+Gn.correctGrammaticalCase(e,s)}};l.defineLocale("sr-cyrl",{months:"\u0458\u0430\u043d\u0443\u0430\u0440_\u0444\u0435\u0431\u0440\u0443\u0430\u0440_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0458_\u0458\u0443\u043d_\u0458\u0443\u043b_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0431\u0430\u0440_\u043e\u043a\u0442\u043e\u0431\u0430\u0440_\u043d\u043e\u0432\u0435\u043c\u0431\u0430\u0440_\u0434\u0435\u0446\u0435\u043c\u0431\u0430\u0440".split("_"),monthsShort:"\u0458\u0430\u043d._\u0444\u0435\u0431._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u0458_\u0458\u0443\u043d_\u0458\u0443\u043b_\u0430\u0432\u0433._\u0441\u0435\u043f._\u043e\u043a\u0442._\u043d\u043e\u0432._\u0434\u0435\u0446.".split("_"),monthsParseExact:!0,weekdays:"\u043d\u0435\u0434\u0435\u0459\u0430_\u043f\u043e\u043d\u0435\u0434\u0435\u0459\u0430\u043a_\u0443\u0442\u043e\u0440\u0430\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0440\u0442\u0430\u043a_\u043f\u0435\u0442\u0430\u043a_\u0441\u0443\u0431\u043e\u0442\u0430".split("_"),weekdaysShort:"\u043d\u0435\u0434._\u043f\u043e\u043d._\u0443\u0442\u043e._\u0441\u0440\u0435._\u0447\u0435\u0442._\u043f\u0435\u0442._\u0441\u0443\u0431.".split("_"),weekdaysMin:"\u043d\u0435_\u043f\u043e_\u0443\u0442_\u0441\u0440_\u0447\u0435_\u043f\u0435_\u0441\u0443".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[\u0434\u0430\u043d\u0430\u0441 \u0443] LT",nextDay:"[\u0441\u0443\u0442\u0440\u0430 \u0443] LT",nextWeek:function(){switch(this.day()){case 0:return"[\u0443] [\u043d\u0435\u0434\u0435\u0459\u0443] [\u0443] LT";case 3:return"[\u0443] [\u0441\u0440\u0435\u0434\u0443] [\u0443] LT";case 6:return"[\u0443] [\u0441\u0443\u0431\u043e\u0442\u0443] [\u0443] LT";case 1:case 2:case 4:case 5:return"[\u0443] dddd [\u0443] LT"}},lastDay:"[\u0458\u0443\u0447\u0435 \u0443] LT",lastWeek:function(){return["[\u043f\u0440\u043e\u0448\u043b\u0435] [\u043d\u0435\u0434\u0435\u0459\u0435] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u043e\u0433] [\u043f\u043e\u043d\u0435\u0434\u0435\u0459\u043a\u0430] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u043e\u0433] [\u0443\u0442\u043e\u0440\u043a\u0430] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u0435] [\u0441\u0440\u0435\u0434\u0435] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u043e\u0433] [\u0447\u0435\u0442\u0432\u0440\u0442\u043a\u0430] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u043e\u0433] [\u043f\u0435\u0442\u043a\u0430] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u0435] [\u0441\u0443\u0431\u043e\u0442\u0435] [\u0443] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"\u0437\u0430 %s",past:"\u043f\u0440\u0435 %s",s:"\u043d\u0435\u043a\u043e\u043b\u0438\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434\u0438",ss:Gn.translate,m:Gn.translate,mm:Gn.translate,h:Gn.translate,hh:Gn.translate,d:"\u0434\u0430\u043d",dd:Gn.translate,M:"\u043c\u0435\u0441\u0435\u0446",MM:Gn.translate,y:"\u0433\u043e\u0434\u0438\u043d\u0443",yy:Gn.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var Un={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,a){return 1===e?a[0]:2<=e&&e<=4?a[1]:a[2]},translate:function(e,a,t){var s=Un.words[t];return 1===t.length?a?s[0]:s[1]:e+" "+Un.correctGrammaticalCase(e,s)}};l.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_\u010detvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._\u010det._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_\u010de_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[ju\u010de u] LT",lastWeek:function(){return["[pro\u0161le] [nedelje] [u] LT","[pro\u0161log] [ponedeljka] [u] LT","[pro\u0161log] [utorka] [u] LT","[pro\u0161le] [srede] [u] LT","[pro\u0161log] [\u010detvrtka] [u] LT","[pro\u0161log] [petka] [u] LT","[pro\u0161le] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:Un.translate,m:Un.translate,mm:Un.translate,h:Un.translate,hh:Un.translate,d:"dan",dd:Un.translate,M:"mesec",MM:Un.translate,y:"godinu",yy:Un.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),l.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,a,t){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,a){return 12===e&&(e=0),"ekuseni"===a?e:"emini"===a?11<=e?e:e+12:"entsambama"===a||"ebusuku"===a?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}}),l.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"s\xf6ndag_m\xe5ndag_tisdag_onsdag_torsdag_fredag_l\xf6rdag".split("_"),weekdaysShort:"s\xf6n_m\xe5n_tis_ons_tor_fre_l\xf6r".split("_"),weekdaysMin:"s\xf6_m\xe5_ti_on_to_fr_l\xf6".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Ig\xe5r] LT",nextWeek:"[P\xe5] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"f\xf6r %s sedan",s:"n\xe5gra sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en m\xe5nad",MM:"%d m\xe5nader",y:"ett \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var a=e%10;return e+(1==~~(e%100/10)?"e":1===a?"a":2===a?"a":"e")},week:{dow:1,doy:4}}),l.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}});var Vn={1:"\u0be7",2:"\u0be8",3:"\u0be9",4:"\u0bea",5:"\u0beb",6:"\u0bec",7:"\u0bed",8:"\u0bee",9:"\u0bef",0:"\u0be6"},Kn={"\u0be7":"1","\u0be8":"2","\u0be9":"3","\u0bea":"4","\u0beb":"5","\u0bec":"6","\u0bed":"7","\u0bee":"8","\u0bef":"9","\u0be6":"0"};l.defineLocale("ta",{months:"\u0b9c\u0ba9\u0bb5\u0bb0\u0bbf_\u0baa\u0bbf\u0baa\u0bcd\u0bb0\u0bb5\u0bb0\u0bbf_\u0bae\u0bbe\u0bb0\u0bcd\u0b9a\u0bcd_\u0b8f\u0baa\u0bcd\u0bb0\u0bb2\u0bcd_\u0bae\u0bc7_\u0b9c\u0bc2\u0ba9\u0bcd_\u0b9c\u0bc2\u0bb2\u0bc8_\u0b86\u0b95\u0bb8\u0bcd\u0b9f\u0bcd_\u0b9a\u0bc6\u0baa\u0bcd\u0b9f\u0bc6\u0bae\u0bcd\u0baa\u0bb0\u0bcd_\u0b85\u0b95\u0bcd\u0b9f\u0bc7\u0bbe\u0baa\u0bb0\u0bcd_\u0ba8\u0bb5\u0bae\u0bcd\u0baa\u0bb0\u0bcd_\u0b9f\u0bbf\u0b9a\u0bae\u0bcd\u0baa\u0bb0\u0bcd".split("_"),monthsShort:"\u0b9c\u0ba9\u0bb5\u0bb0\u0bbf_\u0baa\u0bbf\u0baa\u0bcd\u0bb0\u0bb5\u0bb0\u0bbf_\u0bae\u0bbe\u0bb0\u0bcd\u0b9a\u0bcd_\u0b8f\u0baa\u0bcd\u0bb0\u0bb2\u0bcd_\u0bae\u0bc7_\u0b9c\u0bc2\u0ba9\u0bcd_\u0b9c\u0bc2\u0bb2\u0bc8_\u0b86\u0b95\u0bb8\u0bcd\u0b9f\u0bcd_\u0b9a\u0bc6\u0baa\u0bcd\u0b9f\u0bc6\u0bae\u0bcd\u0baa\u0bb0\u0bcd_\u0b85\u0b95\u0bcd\u0b9f\u0bc7\u0bbe\u0baa\u0bb0\u0bcd_\u0ba8\u0bb5\u0bae\u0bcd\u0baa\u0bb0\u0bcd_\u0b9f\u0bbf\u0b9a\u0bae\u0bcd\u0baa\u0bb0\u0bcd".split("_"),weekdays:"\u0b9e\u0bbe\u0baf\u0bbf\u0bb1\u0bcd\u0bb1\u0bc1\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0ba4\u0bbf\u0b99\u0bcd\u0b95\u0b9f\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0b9a\u0bc6\u0bb5\u0bcd\u0bb5\u0bbe\u0baf\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0baa\u0bc1\u0ba4\u0ba9\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0bb5\u0bbf\u0baf\u0bbe\u0bb4\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0bb5\u0bc6\u0bb3\u0bcd\u0bb3\u0bbf\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0b9a\u0ba9\u0bbf\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8".split("_"),weekdaysShort:"\u0b9e\u0bbe\u0baf\u0bbf\u0bb1\u0bc1_\u0ba4\u0bbf\u0b99\u0bcd\u0b95\u0bb3\u0bcd_\u0b9a\u0bc6\u0bb5\u0bcd\u0bb5\u0bbe\u0baf\u0bcd_\u0baa\u0bc1\u0ba4\u0ba9\u0bcd_\u0bb5\u0bbf\u0baf\u0bbe\u0bb4\u0ba9\u0bcd_\u0bb5\u0bc6\u0bb3\u0bcd\u0bb3\u0bbf_\u0b9a\u0ba9\u0bbf".split("_"),weekdaysMin:"\u0b9e\u0bbe_\u0ba4\u0bbf_\u0b9a\u0bc6_\u0baa\u0bc1_\u0bb5\u0bbf_\u0bb5\u0bc6_\u0b9a".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[\u0b87\u0ba9\u0bcd\u0bb1\u0bc1] LT",nextDay:"[\u0ba8\u0bbe\u0bb3\u0bc8] LT",nextWeek:"dddd, LT",lastDay:"[\u0ba8\u0bc7\u0bb1\u0bcd\u0bb1\u0bc1] LT",lastWeek:"[\u0b95\u0b9f\u0ba8\u0bcd\u0ba4 \u0bb5\u0bbe\u0bb0\u0bae\u0bcd] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0b87\u0bb2\u0bcd",past:"%s \u0bae\u0bc1\u0ba9\u0bcd",s:"\u0b92\u0bb0\u0bc1 \u0b9a\u0bbf\u0bb2 \u0bb5\u0bbf\u0ba8\u0bbe\u0b9f\u0bbf\u0b95\u0bb3\u0bcd",ss:"%d \u0bb5\u0bbf\u0ba8\u0bbe\u0b9f\u0bbf\u0b95\u0bb3\u0bcd",m:"\u0b92\u0bb0\u0bc1 \u0ba8\u0bbf\u0bae\u0bbf\u0b9f\u0bae\u0bcd",mm:"%d \u0ba8\u0bbf\u0bae\u0bbf\u0b9f\u0b99\u0bcd\u0b95\u0bb3\u0bcd",h:"\u0b92\u0bb0\u0bc1 \u0bae\u0ba3\u0bbf \u0ba8\u0bc7\u0bb0\u0bae\u0bcd",hh:"%d \u0bae\u0ba3\u0bbf \u0ba8\u0bc7\u0bb0\u0bae\u0bcd",d:"\u0b92\u0bb0\u0bc1 \u0ba8\u0bbe\u0bb3\u0bcd",dd:"%d \u0ba8\u0bbe\u0b9f\u0bcd\u0b95\u0bb3\u0bcd",M:"\u0b92\u0bb0\u0bc1 \u0bae\u0bbe\u0ba4\u0bae\u0bcd",MM:"%d \u0bae\u0bbe\u0ba4\u0b99\u0bcd\u0b95\u0bb3\u0bcd",y:"\u0b92\u0bb0\u0bc1 \u0bb5\u0bb0\u0bc1\u0b9f\u0bae\u0bcd",yy:"%d \u0b86\u0ba3\u0bcd\u0b9f\u0bc1\u0b95\u0bb3\u0bcd"},dayOfMonthOrdinalParse:/\d{1,2}\u0bb5\u0ba4\u0bc1/,ordinal:function(e){return e+"\u0bb5\u0ba4\u0bc1"},preparse:function(e){return e.replace(/[\u0be7\u0be8\u0be9\u0bea\u0beb\u0bec\u0bed\u0bee\u0bef\u0be6]/g,function(e){return Kn[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return Vn[e]})},meridiemParse:/\u0baf\u0bbe\u0bae\u0bae\u0bcd|\u0bb5\u0bc8\u0b95\u0bb1\u0bc8|\u0b95\u0bbe\u0bb2\u0bc8|\u0ba8\u0ba3\u0bcd\u0baa\u0b95\u0bb2\u0bcd|\u0b8e\u0bb1\u0bcd\u0baa\u0bbe\u0b9f\u0bc1|\u0bae\u0bbe\u0bb2\u0bc8/,meridiem:function(e,a,t){return e<2?" \u0baf\u0bbe\u0bae\u0bae\u0bcd":e<6?" \u0bb5\u0bc8\u0b95\u0bb1\u0bc8":e<10?" \u0b95\u0bbe\u0bb2\u0bc8":e<14?" \u0ba8\u0ba3\u0bcd\u0baa\u0b95\u0bb2\u0bcd":e<18?" \u0b8e\u0bb1\u0bcd\u0baa\u0bbe\u0b9f\u0bc1":e<22?" \u0bae\u0bbe\u0bb2\u0bc8":" \u0baf\u0bbe\u0bae\u0bae\u0bcd"},meridiemHour:function(e,a){return 12===e&&(e=0),"\u0baf\u0bbe\u0bae\u0bae\u0bcd"===a?e<2?e:e+12:"\u0bb5\u0bc8\u0b95\u0bb1\u0bc8"===a||"\u0b95\u0bbe\u0bb2\u0bc8"===a?e:"\u0ba8\u0ba3\u0bcd\u0baa\u0b95\u0bb2\u0bcd"===a&&10<=e?e:e+12},week:{dow:0,doy:6}}),l.defineLocale("te",{months:"\u0c1c\u0c28\u0c35\u0c30\u0c3f_\u0c2b\u0c3f\u0c2c\u0c4d\u0c30\u0c35\u0c30\u0c3f_\u0c2e\u0c3e\u0c30\u0c4d\u0c1a\u0c3f_\u0c0f\u0c2a\u0c4d\u0c30\u0c3f\u0c32\u0c4d_\u0c2e\u0c47_\u0c1c\u0c42\u0c28\u0c4d_\u0c1c\u0c42\u0c32\u0c46\u0c56_\u0c06\u0c17\u0c38\u0c4d\u0c1f\u0c41_\u0c38\u0c46\u0c2a\u0c4d\u0c1f\u0c46\u0c02\u0c2c\u0c30\u0c4d_\u0c05\u0c15\u0c4d\u0c1f\u0c4b\u0c2c\u0c30\u0c4d_\u0c28\u0c35\u0c02\u0c2c\u0c30\u0c4d_\u0c21\u0c3f\u0c38\u0c46\u0c02\u0c2c\u0c30\u0c4d".split("_"),monthsShort:"\u0c1c\u0c28._\u0c2b\u0c3f\u0c2c\u0c4d\u0c30._\u0c2e\u0c3e\u0c30\u0c4d\u0c1a\u0c3f_\u0c0f\u0c2a\u0c4d\u0c30\u0c3f._\u0c2e\u0c47_\u0c1c\u0c42\u0c28\u0c4d_\u0c1c\u0c42\u0c32\u0c46\u0c56_\u0c06\u0c17._\u0c38\u0c46\u0c2a\u0c4d._\u0c05\u0c15\u0c4d\u0c1f\u0c4b._\u0c28\u0c35._\u0c21\u0c3f\u0c38\u0c46.".split("_"),monthsParseExact:!0,weekdays:"\u0c06\u0c26\u0c3f\u0c35\u0c3e\u0c30\u0c02_\u0c38\u0c4b\u0c2e\u0c35\u0c3e\u0c30\u0c02_\u0c2e\u0c02\u0c17\u0c33\u0c35\u0c3e\u0c30\u0c02_\u0c2c\u0c41\u0c27\u0c35\u0c3e\u0c30\u0c02_\u0c17\u0c41\u0c30\u0c41\u0c35\u0c3e\u0c30\u0c02_\u0c36\u0c41\u0c15\u0c4d\u0c30\u0c35\u0c3e\u0c30\u0c02_\u0c36\u0c28\u0c3f\u0c35\u0c3e\u0c30\u0c02".split("_"),weekdaysShort:"\u0c06\u0c26\u0c3f_\u0c38\u0c4b\u0c2e_\u0c2e\u0c02\u0c17\u0c33_\u0c2c\u0c41\u0c27_\u0c17\u0c41\u0c30\u0c41_\u0c36\u0c41\u0c15\u0c4d\u0c30_\u0c36\u0c28\u0c3f".split("_"),weekdaysMin:"\u0c06_\u0c38\u0c4b_\u0c2e\u0c02_\u0c2c\u0c41_\u0c17\u0c41_\u0c36\u0c41_\u0c36".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[\u0c28\u0c47\u0c21\u0c41] LT",nextDay:"[\u0c30\u0c47\u0c2a\u0c41] LT",nextWeek:"dddd, LT",lastDay:"[\u0c28\u0c3f\u0c28\u0c4d\u0c28] LT",lastWeek:"[\u0c17\u0c24] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0c32\u0c4b",past:"%s \u0c15\u0c4d\u0c30\u0c3f\u0c24\u0c02",s:"\u0c15\u0c4a\u0c28\u0c4d\u0c28\u0c3f \u0c15\u0c4d\u0c37\u0c23\u0c3e\u0c32\u0c41",ss:"%d \u0c38\u0c46\u0c15\u0c28\u0c4d\u0c32\u0c41",m:"\u0c12\u0c15 \u0c28\u0c3f\u0c2e\u0c3f\u0c37\u0c02",mm:"%d \u0c28\u0c3f\u0c2e\u0c3f\u0c37\u0c3e\u0c32\u0c41",h:"\u0c12\u0c15 \u0c17\u0c02\u0c1f",hh:"%d \u0c17\u0c02\u0c1f\u0c32\u0c41",d:"\u0c12\u0c15 \u0c30\u0c4b\u0c1c\u0c41",dd:"%d \u0c30\u0c4b\u0c1c\u0c41\u0c32\u0c41",M:"\u0c12\u0c15 \u0c28\u0c46\u0c32",MM:"%d \u0c28\u0c46\u0c32\u0c32\u0c41",y:"\u0c12\u0c15 \u0c38\u0c02\u0c35\u0c24\u0c4d\u0c38\u0c30\u0c02",yy:"%d \u0c38\u0c02\u0c35\u0c24\u0c4d\u0c38\u0c30\u0c3e\u0c32\u0c41"},dayOfMonthOrdinalParse:/\d{1,2}\u0c35/,ordinal:"%d\u0c35",meridiemParse:/\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f|\u0c09\u0c26\u0c2f\u0c02|\u0c2e\u0c27\u0c4d\u0c2f\u0c3e\u0c39\u0c4d\u0c28\u0c02|\u0c38\u0c3e\u0c2f\u0c02\u0c24\u0c4d\u0c30\u0c02/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f"===a?e<4?e:e+12:"\u0c09\u0c26\u0c2f\u0c02"===a?e:"\u0c2e\u0c27\u0c4d\u0c2f\u0c3e\u0c39\u0c4d\u0c28\u0c02"===a?10<=e?e:e+12:"\u0c38\u0c3e\u0c2f\u0c02\u0c24\u0c4d\u0c30\u0c02"===a?e+12:void 0},meridiem:function(e,a,t){return e<4?"\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f":e<10?"\u0c09\u0c26\u0c2f\u0c02":e<17?"\u0c2e\u0c27\u0c4d\u0c2f\u0c3e\u0c39\u0c4d\u0c28\u0c02":e<20?"\u0c38\u0c3e\u0c2f\u0c02\u0c24\u0c4d\u0c30\u0c02":"\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f"},week:{dow:0,doy:6}}),l.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Ju\xf1u_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"minutu balun",ss:"minutu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10;return e+(1==~~(e%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th")},week:{dow:1,doy:4}});var $n={0:"-\u0443\u043c",1:"-\u0443\u043c",2:"-\u044e\u043c",3:"-\u044e\u043c",4:"-\u0443\u043c",5:"-\u0443\u043c",6:"-\u0443\u043c",7:"-\u0443\u043c",8:"-\u0443\u043c",9:"-\u0443\u043c",10:"-\u0443\u043c",12:"-\u0443\u043c",13:"-\u0443\u043c",20:"-\u0443\u043c",30:"-\u044e\u043c",40:"-\u0443\u043c",50:"-\u0443\u043c",60:"-\u0443\u043c",70:"-\u0443\u043c",80:"-\u0443\u043c",90:"-\u0443\u043c",100:"-\u0443\u043c"};l.defineLocale("tg",{months:"\u044f\u043d\u0432\u0430\u0440_\u0444\u0435\u0432\u0440\u0430\u043b_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b_\u043c\u0430\u0439_\u0438\u044e\u043d_\u0438\u044e\u043b_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440_\u043e\u043a\u0442\u044f\u0431\u0440_\u043d\u043e\u044f\u0431\u0440_\u0434\u0435\u043a\u0430\u0431\u0440".split("_"),monthsShort:"\u044f\u043d\u0432_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u0438\u044e\u043d_\u0438\u044e\u043b_\u0430\u0432\u0433_\u0441\u0435\u043d_\u043e\u043a\u0442_\u043d\u043e\u044f_\u0434\u0435\u043a".split("_"),weekdays:"\u044f\u043a\u0448\u0430\u043d\u0431\u0435_\u0434\u0443\u0448\u0430\u043d\u0431\u0435_\u0441\u0435\u0448\u0430\u043d\u0431\u0435_\u0447\u043e\u0440\u0448\u0430\u043d\u0431\u0435_\u043f\u0430\u043d\u04b7\u0448\u0430\u043d\u0431\u0435_\u04b7\u0443\u043c\u044a\u0430_\u0448\u0430\u043d\u0431\u0435".split("_"),weekdaysShort:"\u044f\u0448\u0431_\u0434\u0448\u0431_\u0441\u0448\u0431_\u0447\u0448\u0431_\u043f\u0448\u0431_\u04b7\u0443\u043c_\u0448\u043d\u0431".split("_"),weekdaysMin:"\u044f\u0448_\u0434\u0448_\u0441\u0448_\u0447\u0448_\u043f\u0448_\u04b7\u043c_\u0448\u0431".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0418\u043c\u0440\u04ef\u0437 \u0441\u043e\u0430\u0442\u0438] LT",nextDay:"[\u041f\u0430\u0433\u043e\u04b3 \u0441\u043e\u0430\u0442\u0438] LT",lastDay:"[\u0414\u0438\u0440\u04ef\u0437 \u0441\u043e\u0430\u0442\u0438] LT",nextWeek:"dddd[\u0438] [\u04b3\u0430\u0444\u0442\u0430\u0438 \u043e\u044f\u043d\u0434\u0430 \u0441\u043e\u0430\u0442\u0438] LT",lastWeek:"dddd[\u0438] [\u04b3\u0430\u0444\u0442\u0430\u0438 \u0433\u0443\u0437\u0430\u0448\u0442\u0430 \u0441\u043e\u0430\u0442\u0438] LT",sameElse:"L"},relativeTime:{future:"\u0431\u0430\u044a\u0434\u0438 %s",past:"%s \u043f\u0435\u0448",s:"\u044f\u043a\u0447\u0430\u043d\u0434 \u0441\u043e\u043d\u0438\u044f",m:"\u044f\u043a \u0434\u0430\u049b\u0438\u049b\u0430",mm:"%d \u0434\u0430\u049b\u0438\u049b\u0430",h:"\u044f\u043a \u0441\u043e\u0430\u0442",hh:"%d \u0441\u043e\u0430\u0442",d:"\u044f\u043a \u0440\u04ef\u0437",dd:"%d \u0440\u04ef\u0437",M:"\u044f\u043a \u043c\u043e\u04b3",MM:"%d \u043c\u043e\u04b3",y:"\u044f\u043a \u0441\u043e\u043b",yy:"%d \u0441\u043e\u043b"},meridiemParse:/\u0448\u0430\u0431|\u0441\u0443\u0431\u04b3|\u0440\u04ef\u0437|\u0431\u0435\u0433\u043e\u04b3/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u0448\u0430\u0431"===a?e<4?e:e+12:"\u0441\u0443\u0431\u04b3"===a?e:"\u0440\u04ef\u0437"===a?11<=e?e:e+12:"\u0431\u0435\u0433\u043e\u04b3"===a?e+12:void 0},meridiem:function(e,a,t){return e<4?"\u0448\u0430\u0431":e<11?"\u0441\u0443\u0431\u04b3":e<16?"\u0440\u04ef\u0437":e<19?"\u0431\u0435\u0433\u043e\u04b3":"\u0448\u0430\u0431"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0443\u043c|\u044e\u043c)/,ordinal:function(e){return e+($n[e]||$n[e%10]||$n[100<=e?100:null])},week:{dow:1,doy:7}}),l.defineLocale("th",{months:"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),monthsShort:"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),monthsParseExact:!0,weekdays:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysShort:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysMin:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm",LLLL:"\u0e27\u0e31\u0e19dddd\u0e17\u0e35\u0e48 D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm"},meridiemParse:/\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,isPM:function(e){return"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"===e},meridiem:function(e,a,t){return e<12?"\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07":"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"},calendar:{sameDay:"[\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextDay:"[\u0e1e\u0e23\u0e38\u0e48\u0e07\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextWeek:"dddd[\u0e2b\u0e19\u0e49\u0e32 \u0e40\u0e27\u0e25\u0e32] LT",lastDay:"[\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e27\u0e32\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",lastWeek:"[\u0e27\u0e31\u0e19]dddd[\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27 \u0e40\u0e27\u0e25\u0e32] LT",sameElse:"L"},relativeTime:{future:"\u0e2d\u0e35\u0e01 %s",past:"%s\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",s:"\u0e44\u0e21\u0e48\u0e01\u0e35\u0e48\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",ss:"%d \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",m:"1 \u0e19\u0e32\u0e17\u0e35",mm:"%d \u0e19\u0e32\u0e17\u0e35",h:"1 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hh:"%d \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",d:"1 \u0e27\u0e31\u0e19",dd:"%d \u0e27\u0e31\u0e19",M:"1 \u0e40\u0e14\u0e37\u0e2d\u0e19",MM:"%d \u0e40\u0e14\u0e37\u0e2d\u0e19",y:"1 \u0e1b\u0e35",yy:"%d \u0e1b\u0e35"}}),l.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}});var Zn="pagh_wa\u2019_cha\u2019_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function Bn(e,a,t,s){var n=function(e){var a=Math.floor(e%1e3/100),t=Math.floor(e%100/10),s=e%10,n="";0<a&&(n+=Zn[a]+"vatlh");0<t&&(n+=(""!==n?" ":"")+Zn[t]+"maH");0<s&&(n+=(""!==n?" ":"")+Zn[s]);return""===n?"pagh":n}(e);switch(t){case"ss":return n+" lup";case"mm":return n+" tup";case"hh":return n+" rep";case"dd":return n+" jaj";case"MM":return n+" jar";case"yy":return n+" DIS"}}l.defineLocale("tlh",{months:"tera\u2019 jar wa\u2019_tera\u2019 jar cha\u2019_tera\u2019 jar wej_tera\u2019 jar loS_tera\u2019 jar vagh_tera\u2019 jar jav_tera\u2019 jar Soch_tera\u2019 jar chorgh_tera\u2019 jar Hut_tera\u2019 jar wa\u2019maH_tera\u2019 jar wa\u2019maH wa\u2019_tera\u2019 jar wa\u2019maH cha\u2019".split("_"),monthsShort:"jar wa\u2019_jar cha\u2019_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa\u2019maH_jar wa\u2019maH wa\u2019_jar wa\u2019maH cha\u2019".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa\u2019leS] LT",nextWeek:"LLL",lastDay:"[wa\u2019Hu\u2019] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(e){var a=e;return a=-1!==e.indexOf("jaj")?a.slice(0,-3)+"leS":-1!==e.indexOf("jar")?a.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?a.slice(0,-3)+"nem":a+" pIq"},past:function(e){var a=e;return a=-1!==e.indexOf("jaj")?a.slice(0,-3)+"Hu\u2019":-1!==e.indexOf("jar")?a.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?a.slice(0,-3)+"ben":a+" ret"},s:"puS lup",ss:Bn,m:"wa\u2019 tup",mm:Bn,h:"wa\u2019 rep",hh:Bn,d:"wa\u2019 jaj",dd:Bn,M:"wa\u2019 jar",MM:Bn,y:"wa\u2019 DIS",yy:Bn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var qn={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'\xfcnc\xfc",4:"'\xfcnc\xfc",100:"'\xfcnc\xfc",6:"'nc\u0131",9:"'uncu",10:"'uncu",30:"'uncu",60:"'\u0131nc\u0131",90:"'\u0131nc\u0131"};function Qn(e,a,t,s){var n={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n m\xedut","'iens m\xedut"],mm:[e+" m\xeduts",e+" m\xeduts"],h:["'n \xfeora","'iensa \xfeora"],hh:[e+" \xfeoras",e+" \xfeoras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return s?n[t][0]:a?n[t][0]:n[t][1]}function Xn(e,a,t){var s,n;return"m"===t?a?"\u0445\u0432\u0438\u043b\u0438\u043d\u0430":"\u0445\u0432\u0438\u043b\u0438\u043d\u0443":"h"===t?a?"\u0433\u043e\u0434\u0438\u043d\u0430":"\u0433\u043e\u0434\u0438\u043d\u0443":e+" "+(s=+e,n={ss:a?"\u0441\u0435\u043a\u0443\u043d\u0434\u0430_\u0441\u0435\u043a\u0443\u043d\u0434\u0438_\u0441\u0435\u043a\u0443\u043d\u0434":"\u0441\u0435\u043a\u0443\u043d\u0434\u0443_\u0441\u0435\u043a\u0443\u043d\u0434\u0438_\u0441\u0435\u043a\u0443\u043d\u0434",mm:a?"\u0445\u0432\u0438\u043b\u0438\u043d\u0430_\u0445\u0432\u0438\u043b\u0438\u043d\u0438_\u0445\u0432\u0438\u043b\u0438\u043d":"\u0445\u0432\u0438\u043b\u0438\u043d\u0443_\u0445\u0432\u0438\u043b\u0438\u043d\u0438_\u0445\u0432\u0438\u043b\u0438\u043d",hh:a?"\u0433\u043e\u0434\u0438\u043d\u0430_\u0433\u043e\u0434\u0438\u043d\u0438_\u0433\u043e\u0434\u0438\u043d":"\u0433\u043e\u0434\u0438\u043d\u0443_\u0433\u043e\u0434\u0438\u043d\u0438_\u0433\u043e\u0434\u0438\u043d",dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u0456_\u0434\u043d\u0456\u0432",MM:"\u043c\u0456\u0441\u044f\u0446\u044c_\u043c\u0456\u0441\u044f\u0446\u0456_\u043c\u0456\u0441\u044f\u0446\u0456\u0432",yy:"\u0440\u0456\u043a_\u0440\u043e\u043a\u0438_\u0440\u043e\u043a\u0456\u0432"}[t].split("_"),s%10==1&&s%100!=11?n[0]:2<=s%10&&s%10<=4&&(s%100<10||20<=s%100)?n[1]:n[2])}function ed(e){return function(){return e+"\u043e"+(11===this.hours()?"\u0431":"")+"] LT"}}l.defineLocale("tr",{months:"Ocak_\u015eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011fustos_Eyl\xfcl_Ekim_Kas\u0131m_Aral\u0131k".split("_"),monthsShort:"Oca_\u015eub_Mar_Nis_May_Haz_Tem_A\u011fu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal\u0131_\xc7ar\u015famba_Per\u015fembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_\xc7ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_\xc7a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bug\xfcn saat] LT",nextDay:"[yar\u0131n saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[d\xfcn] LT",lastWeek:"[ge\xe7en] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s \xf6nce",s:"birka\xe7 saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir g\xfcn",dd:"%d g\xfcn",M:"bir ay",MM:"%d ay",y:"bir y\u0131l",yy:"%d y\u0131l"},ordinal:function(e,a){switch(a){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'\u0131nc\u0131";var t=e%10;return e+(qn[t]||qn[e%100-t]||qn[100<=e?100:null])}},week:{dow:1,doy:7}}),l.defineLocale("tzl",{months:"Januar_Fevraglh_Mar\xe7_Avr\xefu_Mai_G\xfcn_Julia_Guscht_Setemvar_Listop\xe4ts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_G\xfcn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"S\xfaladi_L\xfane\xe7i_Maitzi_M\xe1rcuri_Xh\xfaadi_Vi\xe9ner\xe7i_S\xe1turi".split("_"),weekdaysShort:"S\xfal_L\xfan_Mai_M\xe1r_Xh\xfa_Vi\xe9_S\xe1t".split("_"),weekdaysMin:"S\xfa_L\xfa_Ma_M\xe1_Xh_Vi_S\xe1".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,a,t){return 11<e?t?"d'o":"D'O":t?"d'a":"D'A"},calendar:{sameDay:"[oxhi \xe0] LT",nextDay:"[dem\xe0 \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[ieiri \xe0] LT",lastWeek:"[s\xfcr el] dddd [lasteu \xe0] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:Qn,ss:Qn,m:Qn,mm:Qn,h:Qn,hh:Qn,d:Qn,dd:Qn,M:Qn,MM:Qn,y:Qn,yy:Qn},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),l.defineLocale("tzm-latn",{months:"innayr_br\u02e4ayr\u02e4_mar\u02e4s\u02e4_ibrir_mayyw_ywnyw_ywlywz_\u0263w\u0161t_\u0161wtanbir_kt\u02e4wbr\u02e4_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_br\u02e4ayr\u02e4_mar\u02e4s\u02e4_ibrir_mayyw_ywnyw_ywlywz_\u0263w\u0161t_\u0161wtanbir_kt\u02e4wbr\u02e4_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asi\u1e0dyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asi\u1e0dyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asi\u1e0dyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minu\u1e0d",mm:"%d minu\u1e0d",h:"sa\u025ba",hh:"%d tassa\u025bin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}}),l.defineLocale("tzm",{months:"\u2d49\u2d4f\u2d4f\u2d30\u2d62\u2d54_\u2d31\u2d55\u2d30\u2d62\u2d55_\u2d4e\u2d30\u2d55\u2d5a_\u2d49\u2d31\u2d54\u2d49\u2d54_\u2d4e\u2d30\u2d62\u2d62\u2d53_\u2d62\u2d53\u2d4f\u2d62\u2d53_\u2d62\u2d53\u2d4d\u2d62\u2d53\u2d63_\u2d56\u2d53\u2d5b\u2d5c_\u2d5b\u2d53\u2d5c\u2d30\u2d4f\u2d31\u2d49\u2d54_\u2d3d\u2d5f\u2d53\u2d31\u2d55_\u2d4f\u2d53\u2d61\u2d30\u2d4f\u2d31\u2d49\u2d54_\u2d37\u2d53\u2d4a\u2d4f\u2d31\u2d49\u2d54".split("_"),monthsShort:"\u2d49\u2d4f\u2d4f\u2d30\u2d62\u2d54_\u2d31\u2d55\u2d30\u2d62\u2d55_\u2d4e\u2d30\u2d55\u2d5a_\u2d49\u2d31\u2d54\u2d49\u2d54_\u2d4e\u2d30\u2d62\u2d62\u2d53_\u2d62\u2d53\u2d4f\u2d62\u2d53_\u2d62\u2d53\u2d4d\u2d62\u2d53\u2d63_\u2d56\u2d53\u2d5b\u2d5c_\u2d5b\u2d53\u2d5c\u2d30\u2d4f\u2d31\u2d49\u2d54_\u2d3d\u2d5f\u2d53\u2d31\u2d55_\u2d4f\u2d53\u2d61\u2d30\u2d4f\u2d31\u2d49\u2d54_\u2d37\u2d53\u2d4a\u2d4f\u2d31\u2d49\u2d54".split("_"),weekdays:"\u2d30\u2d59\u2d30\u2d4e\u2d30\u2d59_\u2d30\u2d62\u2d4f\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4f\u2d30\u2d59_\u2d30\u2d3d\u2d54\u2d30\u2d59_\u2d30\u2d3d\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4e\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d39\u2d62\u2d30\u2d59".split("_"),weekdaysShort:"\u2d30\u2d59\u2d30\u2d4e\u2d30\u2d59_\u2d30\u2d62\u2d4f\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4f\u2d30\u2d59_\u2d30\u2d3d\u2d54\u2d30\u2d59_\u2d30\u2d3d\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4e\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d39\u2d62\u2d30\u2d59".split("_"),weekdaysMin:"\u2d30\u2d59\u2d30\u2d4e\u2d30\u2d59_\u2d30\u2d62\u2d4f\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4f\u2d30\u2d59_\u2d30\u2d3d\u2d54\u2d30\u2d59_\u2d30\u2d3d\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4e\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d39\u2d62\u2d30\u2d59".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u2d30\u2d59\u2d37\u2d45 \u2d34] LT",nextDay:"[\u2d30\u2d59\u2d3d\u2d30 \u2d34] LT",nextWeek:"dddd [\u2d34] LT",lastDay:"[\u2d30\u2d5a\u2d30\u2d4f\u2d5c \u2d34] LT",lastWeek:"dddd [\u2d34] LT",sameElse:"L"},relativeTime:{future:"\u2d37\u2d30\u2d37\u2d45 \u2d59 \u2d62\u2d30\u2d4f %s",past:"\u2d62\u2d30\u2d4f %s",s:"\u2d49\u2d4e\u2d49\u2d3d",ss:"%d \u2d49\u2d4e\u2d49\u2d3d",m:"\u2d4e\u2d49\u2d4f\u2d53\u2d3a",mm:"%d \u2d4e\u2d49\u2d4f\u2d53\u2d3a",h:"\u2d59\u2d30\u2d44\u2d30",hh:"%d \u2d5c\u2d30\u2d59\u2d59\u2d30\u2d44\u2d49\u2d4f",d:"\u2d30\u2d59\u2d59",dd:"%d o\u2d59\u2d59\u2d30\u2d4f",M:"\u2d30\u2d62o\u2d53\u2d54",MM:"%d \u2d49\u2d62\u2d62\u2d49\u2d54\u2d4f",y:"\u2d30\u2d59\u2d33\u2d30\u2d59",yy:"%d \u2d49\u2d59\u2d33\u2d30\u2d59\u2d4f"},week:{dow:6,doy:12}}),l.defineLocale("ug-cn",{months:"\u064a\u0627\u0646\u06cb\u0627\u0631_\u0641\u06d0\u06cb\u0631\u0627\u0644_\u0645\u0627\u0631\u062a_\u0626\u0627\u067e\u0631\u06d0\u0644_\u0645\u0627\u064a_\u0626\u0649\u064a\u06c7\u0646_\u0626\u0649\u064a\u06c7\u0644_\u0626\u0627\u06cb\u063a\u06c7\u0633\u062a_\u0633\u06d0\u0646\u062a\u06d5\u0628\u0649\u0631_\u0626\u06c6\u0643\u062a\u06d5\u0628\u0649\u0631_\u0646\u0648\u064a\u0627\u0628\u0649\u0631_\u062f\u06d0\u0643\u0627\u0628\u0649\u0631".split("_"),monthsShort:"\u064a\u0627\u0646\u06cb\u0627\u0631_\u0641\u06d0\u06cb\u0631\u0627\u0644_\u0645\u0627\u0631\u062a_\u0626\u0627\u067e\u0631\u06d0\u0644_\u0645\u0627\u064a_\u0626\u0649\u064a\u06c7\u0646_\u0626\u0649\u064a\u06c7\u0644_\u0626\u0627\u06cb\u063a\u06c7\u0633\u062a_\u0633\u06d0\u0646\u062a\u06d5\u0628\u0649\u0631_\u0626\u06c6\u0643\u062a\u06d5\u0628\u0649\u0631_\u0646\u0648\u064a\u0627\u0628\u0649\u0631_\u062f\u06d0\u0643\u0627\u0628\u0649\u0631".split("_"),weekdays:"\u064a\u06d5\u0643\u0634\u06d5\u0646\u0628\u06d5_\u062f\u06c8\u0634\u06d5\u0646\u0628\u06d5_\u0633\u06d5\u064a\u0634\u06d5\u0646\u0628\u06d5_\u0686\u0627\u0631\u0634\u06d5\u0646\u0628\u06d5_\u067e\u06d5\u064a\u0634\u06d5\u0646\u0628\u06d5_\u062c\u06c8\u0645\u06d5_\u0634\u06d5\u0646\u0628\u06d5".split("_"),weekdaysShort:"\u064a\u06d5_\u062f\u06c8_\u0633\u06d5_\u0686\u0627_\u067e\u06d5_\u062c\u06c8_\u0634\u06d5".split("_"),weekdaysMin:"\u064a\u06d5_\u062f\u06c8_\u0633\u06d5_\u0686\u0627_\u067e\u06d5_\u062c\u06c8_\u0634\u06d5".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-\u064a\u0649\u0644\u0649M-\u0626\u0627\u064a\u0646\u0649\u06adD-\u0643\u06c8\u0646\u0649",LLL:"YYYY-\u064a\u0649\u0644\u0649M-\u0626\u0627\u064a\u0646\u0649\u06adD-\u0643\u06c8\u0646\u0649\u060c HH:mm",LLLL:"dddd\u060c YYYY-\u064a\u0649\u0644\u0649M-\u0626\u0627\u064a\u0646\u0649\u06adD-\u0643\u06c8\u0646\u0649\u060c HH:mm"},meridiemParse:/\u064a\u06d0\u0631\u0649\u0645 \u0643\u06d0\u0686\u06d5|\u0633\u06d5\u06be\u06d5\u0631|\u0686\u06c8\u0634\u062a\u0649\u0646 \u0628\u06c7\u0631\u06c7\u0646|\u0686\u06c8\u0634|\u0686\u06c8\u0634\u062a\u0649\u0646 \u0643\u06d0\u064a\u0649\u0646|\u0643\u06d5\u0686/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u064a\u06d0\u0631\u0649\u0645 \u0643\u06d0\u0686\u06d5"===a||"\u0633\u06d5\u06be\u06d5\u0631"===a||"\u0686\u06c8\u0634\u062a\u0649\u0646 \u0628\u06c7\u0631\u06c7\u0646"===a?e:"\u0686\u06c8\u0634\u062a\u0649\u0646 \u0643\u06d0\u064a\u0649\u0646"===a||"\u0643\u06d5\u0686"===a?e+12:11<=e?e:e+12},meridiem:function(e,a,t){var s=100*e+a;return s<600?"\u064a\u06d0\u0631\u0649\u0645 \u0643\u06d0\u0686\u06d5":s<900?"\u0633\u06d5\u06be\u06d5\u0631":s<1130?"\u0686\u06c8\u0634\u062a\u0649\u0646 \u0628\u06c7\u0631\u06c7\u0646":s<1230?"\u0686\u06c8\u0634":s<1800?"\u0686\u06c8\u0634\u062a\u0649\u0646 \u0643\u06d0\u064a\u0649\u0646":"\u0643\u06d5\u0686"},calendar:{sameDay:"[\u0628\u06c8\u06af\u06c8\u0646 \u0633\u0627\u0626\u06d5\u062a] LT",nextDay:"[\u0626\u06d5\u062a\u06d5 \u0633\u0627\u0626\u06d5\u062a] LT",nextWeek:"[\u0643\u06d0\u0644\u06d5\u0631\u0643\u0649] dddd [\u0633\u0627\u0626\u06d5\u062a] LT",lastDay:"[\u062a\u06c6\u0646\u06c8\u06af\u06c8\u0646] LT",lastWeek:"[\u0626\u0627\u0644\u062f\u0649\u0646\u0642\u0649] dddd [\u0633\u0627\u0626\u06d5\u062a] LT",sameElse:"L"},relativeTime:{future:"%s \u0643\u06d0\u064a\u0649\u0646",past:"%s \u0628\u06c7\u0631\u06c7\u0646",s:"\u0646\u06d5\u0686\u0686\u06d5 \u0633\u06d0\u0643\u0648\u0646\u062a",ss:"%d \u0633\u06d0\u0643\u0648\u0646\u062a",m:"\u0628\u0649\u0631 \u0645\u0649\u0646\u06c7\u062a",mm:"%d \u0645\u0649\u0646\u06c7\u062a",h:"\u0628\u0649\u0631 \u0633\u0627\u0626\u06d5\u062a",hh:"%d \u0633\u0627\u0626\u06d5\u062a",d:"\u0628\u0649\u0631 \u0643\u06c8\u0646",dd:"%d \u0643\u06c8\u0646",M:"\u0628\u0649\u0631 \u0626\u0627\u064a",MM:"%d \u0626\u0627\u064a",y:"\u0628\u0649\u0631 \u064a\u0649\u0644",yy:"%d \u064a\u0649\u0644"},dayOfMonthOrdinalParse:/\d{1,2}(-\u0643\u06c8\u0646\u0649|-\u0626\u0627\u064a|-\u06be\u06d5\u067e\u062a\u06d5)/,ordinal:function(e,a){switch(a){case"d":case"D":case"DDD":return e+"-\u0643\u06c8\u0646\u0649";case"w":case"W":return e+"-\u06be\u06d5\u067e\u062a\u06d5";default:return e}},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"\u060c")},week:{dow:1,doy:7}}),l.defineLocale("uk",{months:{format:"\u0441\u0456\u0447\u043d\u044f_\u043b\u044e\u0442\u043e\u0433\u043e_\u0431\u0435\u0440\u0435\u0437\u043d\u044f_\u043a\u0432\u0456\u0442\u043d\u044f_\u0442\u0440\u0430\u0432\u043d\u044f_\u0447\u0435\u0440\u0432\u043d\u044f_\u043b\u0438\u043f\u043d\u044f_\u0441\u0435\u0440\u043f\u043d\u044f_\u0432\u0435\u0440\u0435\u0441\u043d\u044f_\u0436\u043e\u0432\u0442\u043d\u044f_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430_\u0433\u0440\u0443\u0434\u043d\u044f".split("_"),standalone:"\u0441\u0456\u0447\u0435\u043d\u044c_\u043b\u044e\u0442\u0438\u0439_\u0431\u0435\u0440\u0435\u0437\u0435\u043d\u044c_\u043a\u0432\u0456\u0442\u0435\u043d\u044c_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u0435\u0440\u0432\u0435\u043d\u044c_\u043b\u0438\u043f\u0435\u043d\u044c_\u0441\u0435\u0440\u043f\u0435\u043d\u044c_\u0432\u0435\u0440\u0435\u0441\u0435\u043d\u044c_\u0436\u043e\u0432\u0442\u0435\u043d\u044c_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434_\u0433\u0440\u0443\u0434\u0435\u043d\u044c".split("_")},monthsShort:"\u0441\u0456\u0447_\u043b\u044e\u0442_\u0431\u0435\u0440_\u043a\u0432\u0456\u0442_\u0442\u0440\u0430\u0432_\u0447\u0435\u0440\u0432_\u043b\u0438\u043f_\u0441\u0435\u0440\u043f_\u0432\u0435\u0440_\u0436\u043e\u0432\u0442_\u043b\u0438\u0441\u0442_\u0433\u0440\u0443\u0434".split("_"),weekdays:function(e,a){var t={nominative:"\u043d\u0435\u0434\u0456\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a_\u0432\u0456\u0432\u0442\u043e\u0440\u043e\u043a_\u0441\u0435\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440_\u043f\u2019\u044f\u0442\u043d\u0438\u0446\u044f_\u0441\u0443\u0431\u043e\u0442\u0430".split("_"),accusative:"\u043d\u0435\u0434\u0456\u043b\u044e_\u043f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a_\u0432\u0456\u0432\u0442\u043e\u0440\u043e\u043a_\u0441\u0435\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440_\u043f\u2019\u044f\u0442\u043d\u0438\u0446\u044e_\u0441\u0443\u0431\u043e\u0442\u0443".split("_"),genitive:"\u043d\u0435\u0434\u0456\u043b\u0456_\u043f\u043e\u043d\u0435\u0434\u0456\u043b\u043a\u0430_\u0432\u0456\u0432\u0442\u043e\u0440\u043a\u0430_\u0441\u0435\u0440\u0435\u0434\u0438_\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430_\u043f\u2019\u044f\u0442\u043d\u0438\u0446\u0456_\u0441\u0443\u0431\u043e\u0442\u0438".split("_")};return e?t[/(\[[\u0412\u0432\u0423\u0443]\]) ?dddd/.test(a)?"accusative":/\[?(?:\u043c\u0438\u043d\u0443\u043b\u043e\u0457|\u043d\u0430\u0441\u0442\u0443\u043f\u043d\u043e\u0457)? ?\] ?dddd/.test(a)?"genitive":"nominative"][e.day()]:t.nominative},weekdaysShort:"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),weekdaysMin:"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0440.",LLL:"D MMMM YYYY \u0440., HH:mm",LLLL:"dddd, D MMMM YYYY \u0440., HH:mm"},calendar:{sameDay:ed("[\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456 "),nextDay:ed("[\u0417\u0430\u0432\u0442\u0440\u0430 "),lastDay:ed("[\u0412\u0447\u043e\u0440\u0430 "),nextWeek:ed("[\u0423] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return ed("[\u041c\u0438\u043d\u0443\u043b\u043e\u0457] dddd [").call(this);case 1:case 2:case 4:return ed("[\u041c\u0438\u043d\u0443\u043b\u043e\u0433\u043e] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"\u0437\u0430 %s",past:"%s \u0442\u043e\u043c\u0443",s:"\u0434\u0435\u043a\u0456\u043b\u044c\u043a\u0430 \u0441\u0435\u043a\u0443\u043d\u0434",ss:Xn,m:Xn,mm:Xn,h:"\u0433\u043e\u0434\u0438\u043d\u0443",hh:Xn,d:"\u0434\u0435\u043d\u044c",dd:Xn,M:"\u043c\u0456\u0441\u044f\u0446\u044c",MM:Xn,y:"\u0440\u0456\u043a",yy:Xn},meridiemParse:/\u043d\u043e\u0447\u0456|\u0440\u0430\u043d\u043a\u0443|\u0434\u043d\u044f|\u0432\u0435\u0447\u043e\u0440\u0430/,isPM:function(e){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u043e\u0440\u0430)$/.test(e)},meridiem:function(e,a,t){return e<4?"\u043d\u043e\u0447\u0456":e<12?"\u0440\u0430\u043d\u043a\u0443":e<17?"\u0434\u043d\u044f":"\u0432\u0435\u0447\u043e\u0440\u0430"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0439|\u0433\u043e)/,ordinal:function(e,a){switch(a){case"M":case"d":case"DDD":case"w":case"W":return e+"-\u0439";case"D":return e+"-\u0433\u043e";default:return e}},week:{dow:1,doy:7}});var ad=["\u062c\u0646\u0648\u0631\u06cc","\u0641\u0631\u0648\u0631\u06cc","\u0645\u0627\u0631\u0686","\u0627\u067e\u0631\u06cc\u0644","\u0645\u0626\u06cc","\u062c\u0648\u0646","\u062c\u0648\u0644\u0627\u0626\u06cc","\u0627\u06af\u0633\u062a","\u0633\u062a\u0645\u0628\u0631","\u0627\u06a9\u062a\u0648\u0628\u0631","\u0646\u0648\u0645\u0628\u0631","\u062f\u0633\u0645\u0628\u0631"],td=["\u0627\u062a\u0648\u0627\u0631","\u067e\u06cc\u0631","\u0645\u0646\u06af\u0644","\u0628\u062f\u06be","\u062c\u0645\u0639\u0631\u0627\u062a","\u062c\u0645\u0639\u06c1","\u06c1\u0641\u062a\u06c1"];return l.defineLocale("ur",{months:ad,monthsShort:ad,weekdays:td,weekdaysShort:td,weekdaysMin:td,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd\u060c D MMMM YYYY HH:mm"},meridiemParse:/\u0635\u0628\u062d|\u0634\u0627\u0645/,isPM:function(e){return"\u0634\u0627\u0645"===e},meridiem:function(e,a,t){return e<12?"\u0635\u0628\u062d":"\u0634\u0627\u0645"},calendar:{sameDay:"[\u0622\u062c \u0628\u0648\u0642\u062a] LT",nextDay:"[\u06a9\u0644 \u0628\u0648\u0642\u062a] LT",nextWeek:"dddd [\u0628\u0648\u0642\u062a] LT",lastDay:"[\u06af\u0630\u0634\u062a\u06c1 \u0631\u0648\u0632 \u0628\u0648\u0642\u062a] LT",lastWeek:"[\u06af\u0630\u0634\u062a\u06c1] dddd [\u0628\u0648\u0642\u062a] LT",sameElse:"L"},relativeTime:{future:"%s \u0628\u0639\u062f",past:"%s \u0642\u0628\u0644",s:"\u0686\u0646\u062f \u0633\u06cc\u06a9\u0646\u0688",ss:"%d \u0633\u06cc\u06a9\u0646\u0688",m:"\u0627\u06cc\u06a9 \u0645\u0646\u0679",mm:"%d \u0645\u0646\u0679",h:"\u0627\u06cc\u06a9 \u06af\u06be\u0646\u0679\u06c1",hh:"%d \u06af\u06be\u0646\u0679\u06d2",d:"\u0627\u06cc\u06a9 \u062f\u0646",dd:"%d \u062f\u0646",M:"\u0627\u06cc\u06a9 \u0645\u0627\u06c1",MM:"%d \u0645\u0627\u06c1",y:"\u0627\u06cc\u06a9 \u0633\u0627\u0644",yy:"%d \u0633\u0627\u0644"},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"\u060c")},week:{dow:1,doy:4}}),l.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}}),l.defineLocale("uz",{months:"\u044f\u043d\u0432\u0430\u0440_\u0444\u0435\u0432\u0440\u0430\u043b_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b_\u043c\u0430\u0439_\u0438\u044e\u043d_\u0438\u044e\u043b_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440_\u043e\u043a\u0442\u044f\u0431\u0440_\u043d\u043e\u044f\u0431\u0440_\u0434\u0435\u043a\u0430\u0431\u0440".split("_"),monthsShort:"\u044f\u043d\u0432_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u0438\u044e\u043d_\u0438\u044e\u043b_\u0430\u0432\u0433_\u0441\u0435\u043d_\u043e\u043a\u0442_\u043d\u043e\u044f_\u0434\u0435\u043a".split("_"),weekdays:"\u042f\u043a\u0448\u0430\u043d\u0431\u0430_\u0414\u0443\u0448\u0430\u043d\u0431\u0430_\u0421\u0435\u0448\u0430\u043d\u0431\u0430_\u0427\u043e\u0440\u0448\u0430\u043d\u0431\u0430_\u041f\u0430\u0439\u0448\u0430\u043d\u0431\u0430_\u0416\u0443\u043c\u0430_\u0428\u0430\u043d\u0431\u0430".split("_"),weekdaysShort:"\u042f\u043a\u0448_\u0414\u0443\u0448_\u0421\u0435\u0448_\u0427\u043e\u0440_\u041f\u0430\u0439_\u0416\u0443\u043c_\u0428\u0430\u043d".split("_"),weekdaysMin:"\u042f\u043a_\u0414\u0443_\u0421\u0435_\u0427\u043e_\u041f\u0430_\u0416\u0443_\u0428\u0430".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[\u0411\u0443\u0433\u0443\u043d \u0441\u043e\u0430\u0442] LT [\u0434\u0430]",nextDay:"[\u042d\u0440\u0442\u0430\u0433\u0430] LT [\u0434\u0430]",nextWeek:"dddd [\u043a\u0443\u043d\u0438 \u0441\u043e\u0430\u0442] LT [\u0434\u0430]",lastDay:"[\u041a\u0435\u0447\u0430 \u0441\u043e\u0430\u0442] LT [\u0434\u0430]",lastWeek:"[\u0423\u0442\u0433\u0430\u043d] dddd [\u043a\u0443\u043d\u0438 \u0441\u043e\u0430\u0442] LT [\u0434\u0430]",sameElse:"L"},relativeTime:{future:"\u042f\u043a\u0438\u043d %s \u0438\u0447\u0438\u0434\u0430",past:"\u0411\u0438\u0440 \u043d\u0435\u0447\u0430 %s \u043e\u043b\u0434\u0438\u043d",s:"\u0444\u0443\u0440\u0441\u0430\u0442",ss:"%d \u0444\u0443\u0440\u0441\u0430\u0442",m:"\u0431\u0438\u0440 \u0434\u0430\u043a\u0438\u043a\u0430",mm:"%d \u0434\u0430\u043a\u0438\u043a\u0430",h:"\u0431\u0438\u0440 \u0441\u043e\u0430\u0442",hh:"%d \u0441\u043e\u0430\u0442",d:"\u0431\u0438\u0440 \u043a\u0443\u043d",dd:"%d \u043a\u0443\u043d",M:"\u0431\u0438\u0440 \u043e\u0439",MM:"%d \u043e\u0439",y:"\u0431\u0438\u0440 \u0439\u0438\u043b",yy:"%d \u0439\u0438\u043b"},week:{dow:1,doy:7}}),l.defineLocale("vi",{months:"th\xe1ng 1_th\xe1ng 2_th\xe1ng 3_th\xe1ng 4_th\xe1ng 5_th\xe1ng 6_th\xe1ng 7_th\xe1ng 8_th\xe1ng 9_th\xe1ng 10_th\xe1ng 11_th\xe1ng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"ch\u1ee7 nh\u1eadt_th\u1ee9 hai_th\u1ee9 ba_th\u1ee9 t\u01b0_th\u1ee9 n\u0103m_th\u1ee9 s\xe1u_th\u1ee9 b\u1ea3y".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,a,t){return e<12?t?"sa":"SA":t?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [n\u0103m] YYYY",LLL:"D MMMM [n\u0103m] YYYY HH:mm",LLLL:"dddd, D MMMM [n\u0103m] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[H\xf4m nay l\xfac] LT",nextDay:"[Ng\xe0y mai l\xfac] LT",nextWeek:"dddd [tu\u1ea7n t\u1edbi l\xfac] LT",lastDay:"[H\xf4m qua l\xfac] LT",lastWeek:"dddd [tu\u1ea7n r\u1ed3i l\xfac] LT",sameElse:"L"},relativeTime:{future:"%s t\u1edbi",past:"%s tr\u01b0\u1edbc",s:"v\xe0i gi\xe2y",ss:"%d gi\xe2y",m:"m\u1ed9t ph\xfat",mm:"%d ph\xfat",h:"m\u1ed9t gi\u1edd",hh:"%d gi\u1edd",d:"m\u1ed9t ng\xe0y",dd:"%d ng\xe0y",M:"m\u1ed9t th\xe1ng",MM:"%d th\xe1ng",y:"m\u1ed9t n\u0103m",yy:"%d n\u0103m"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}}),l.defineLocale("x-pseudo",{months:"J~\xe1\xf1\xfa\xe1~r\xfd_F~\xe9br\xfa~\xe1r\xfd_~M\xe1rc~h_\xc1p~r\xedl_~M\xe1\xfd_~J\xfa\xf1\xe9~_J\xfal~\xfd_\xc1\xfa~g\xfast~_S\xe9p~t\xe9mb~\xe9r_\xd3~ct\xf3b~\xe9r_\xd1~\xf3v\xe9m~b\xe9r_~D\xe9c\xe9~mb\xe9r".split("_"),monthsShort:"J~\xe1\xf1_~F\xe9b_~M\xe1r_~\xc1pr_~M\xe1\xfd_~J\xfa\xf1_~J\xfal_~\xc1\xfag_~S\xe9p_~\xd3ct_~\xd1\xf3v_~D\xe9c".split("_"),monthsParseExact:!0,weekdays:"S~\xfa\xf1d\xe1~\xfd_M\xf3~\xf1d\xe1\xfd~_T\xfa\xe9~sd\xe1\xfd~_W\xe9d~\xf1\xe9sd~\xe1\xfd_T~h\xfars~d\xe1\xfd_~Fr\xedd~\xe1\xfd_S~\xe1t\xfar~d\xe1\xfd".split("_"),weekdaysShort:"S~\xfa\xf1_~M\xf3\xf1_~T\xfa\xe9_~W\xe9d_~Th\xfa_~Fr\xed_~S\xe1t".split("_"),weekdaysMin:"S~\xfa_M\xf3~_T\xfa_~W\xe9_T~h_Fr~_S\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~\xf3d\xe1~\xfd \xe1t] LT",nextDay:"[T~\xf3m\xf3~rr\xf3~w \xe1t] LT",nextWeek:"dddd [\xe1t] LT",lastDay:"[\xdd~\xe9st~\xe9rd\xe1~\xfd \xe1t] LT",lastWeek:"[L~\xe1st] dddd [\xe1t] LT",sameElse:"L"},relativeTime:{future:"\xed~\xf1 %s",past:"%s \xe1~g\xf3",s:"\xe1 ~f\xe9w ~s\xe9c\xf3~\xf1ds",ss:"%d s~\xe9c\xf3\xf1~ds",m:"\xe1 ~m\xed\xf1~\xfat\xe9",mm:"%d m~\xed\xf1\xfa~t\xe9s",h:"\xe1~\xf1 h\xf3~\xfar",hh:"%d h~\xf3\xfars",d:"\xe1 ~d\xe1\xfd",dd:"%d d~\xe1\xfds",M:"\xe1 ~m\xf3\xf1~th",MM:"%d m~\xf3\xf1t~hs",y:"\xe1 ~\xfd\xe9\xe1r",yy:"%d \xfd~\xe9\xe1rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var a=e%10;return e+(1==~~(e%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th")},week:{dow:1,doy:4}}),l.defineLocale("yo",{months:"S\u1eb9\u0301r\u1eb9\u0301_E\u0300re\u0300le\u0300_\u1eb8r\u1eb9\u0300na\u0300_I\u0300gbe\u0301_E\u0300bibi_O\u0300ku\u0300du_Ag\u1eb9mo_O\u0300gu\u0301n_Owewe_\u1ecc\u0300wa\u0300ra\u0300_Be\u0301lu\u0301_\u1ecc\u0300p\u1eb9\u0300\u0300".split("_"),monthsShort:"S\u1eb9\u0301r_E\u0300rl_\u1eb8rn_I\u0300gb_E\u0300bi_O\u0300ku\u0300_Ag\u1eb9_O\u0300gu\u0301_Owe_\u1ecc\u0300wa\u0300_Be\u0301l_\u1ecc\u0300p\u1eb9\u0300\u0300".split("_"),weekdays:"A\u0300i\u0300ku\u0301_Aje\u0301_I\u0300s\u1eb9\u0301gun_\u1eccj\u1ecd\u0301ru\u0301_\u1eccj\u1ecd\u0301b\u1ecd_\u1eb8ti\u0300_A\u0300ba\u0301m\u1eb9\u0301ta".split("_"),weekdaysShort:"A\u0300i\u0300k_Aje\u0301_I\u0300s\u1eb9\u0301_\u1eccjr_\u1eccjb_\u1eb8ti\u0300_A\u0300ba\u0301".split("_"),weekdaysMin:"A\u0300i\u0300_Aj_I\u0300s_\u1eccr_\u1eccb_\u1eb8t_A\u0300b".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[O\u0300ni\u0300 ni] LT",nextDay:"[\u1ecc\u0300la ni] LT",nextWeek:"dddd [\u1eccs\u1eb9\u0300 to\u0301n'b\u1ecd] [ni] LT",lastDay:"[A\u0300na ni] LT",lastWeek:"dddd [\u1eccs\u1eb9\u0300 to\u0301l\u1ecd\u0301] [ni] LT",sameElse:"L"},relativeTime:{future:"ni\u0301 %s",past:"%s k\u1ecdja\u0301",s:"i\u0300s\u1eb9ju\u0301 aaya\u0301 die",ss:"aaya\u0301 %d",m:"i\u0300s\u1eb9ju\u0301 kan",mm:"i\u0300s\u1eb9ju\u0301 %d",h:"wa\u0301kati kan",hh:"wa\u0301kati %d",d:"\u1ecdj\u1ecd\u0301 kan",dd:"\u1ecdj\u1ecd\u0301 %d",M:"osu\u0300 kan",MM:"osu\u0300 %d",y:"\u1ecddu\u0301n kan",yy:"\u1ecddu\u0301n %d"},dayOfMonthOrdinalParse:/\u1ecdj\u1ecd\u0301\s\d{1,2}/,ordinal:"\u1ecdj\u1ecd\u0301 %d",week:{dow:1,doy:4}}),l.defineLocale("zh-cn",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74M\u6708D\u65e5ddddAh\u70b9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u51cc\u6668"===a||"\u65e9\u4e0a"===a||"\u4e0a\u5348"===a?e:"\u4e0b\u5348"===a||"\u665a\u4e0a"===a?e+12:11<=e?e:e+12},meridiem:function(e,a,t){var s=100*e+a;return s<600?"\u51cc\u6668":s<900?"\u65e9\u4e0a":s<1130?"\u4e0a\u5348":s<1230?"\u4e2d\u5348":s<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929]LT",nextDay:"[\u660e\u5929]LT",nextWeek:"[\u4e0b]ddddLT",lastDay:"[\u6628\u5929]LT",lastWeek:"[\u4e0a]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u5468)/,ordinal:function(e,a){switch(a){case"d":case"D":case"DDD":return e+"\u65e5";case"M":return e+"\u6708";case"w":case"W":return e+"\u5468";default:return e}},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",ss:"%d \u79d2",m:"1 \u5206\u949f",mm:"%d \u5206\u949f",h:"1 \u5c0f\u65f6",hh:"%d \u5c0f\u65f6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4e2a\u6708",MM:"%d \u4e2a\u6708",y:"1 \u5e74",yy:"%d \u5e74"},week:{dow:1,doy:4}}),l.defineLocale("zh-hk",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u9031\u65e5_\u9031\u4e00_\u9031\u4e8c_\u9031\u4e09_\u9031\u56db_\u9031\u4e94_\u9031\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5 HH:mm",LLLL:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u51cc\u6668"===a||"\u65e9\u4e0a"===a||"\u4e0a\u5348"===a?e:"\u4e2d\u5348"===a?11<=e?e:e+12:"\u4e0b\u5348"===a||"\u665a\u4e0a"===a?e+12:void 0},meridiem:function(e,a,t){var s=100*e+a;return s<600?"\u51cc\u6668":s<900?"\u65e9\u4e0a":s<1130?"\u4e0a\u5348":s<1230?"\u4e2d\u5348":s<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929]LT",nextDay:"[\u660e\u5929]LT",nextWeek:"[\u4e0b]ddddLT",lastDay:"[\u6628\u5929]LT",lastWeek:"[\u4e0a]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u9031)/,ordinal:function(e,a){switch(a){case"d":case"D":case"DDD":return e+"\u65e5";case"M":return e+"\u6708";case"w":case"W":return e+"\u9031";default:return e}},relativeTime:{future:"%s\u5167",past:"%s\u524d",s:"\u5e7e\u79d2",ss:"%d \u79d2",m:"1 \u5206\u9418",mm:"%d \u5206\u9418",h:"1 \u5c0f\u6642",hh:"%d \u5c0f\u6642",d:"1 \u5929",dd:"%d \u5929",M:"1 \u500b\u6708",MM:"%d \u500b\u6708",y:"1 \u5e74",yy:"%d \u5e74"}}),l.defineLocale("zh-tw",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u9031\u65e5_\u9031\u4e00_\u9031\u4e8c_\u9031\u4e09_\u9031\u56db_\u9031\u4e94_\u9031\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5 HH:mm",LLLL:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,a){return 12===e&&(e=0),"\u51cc\u6668"===a||"\u65e9\u4e0a"===a||"\u4e0a\u5348"===a?e:"\u4e2d\u5348"===a?11<=e?e:e+12:"\u4e0b\u5348"===a||"\u665a\u4e0a"===a?e+12:void 0},meridiem:function(e,a,t){var s=100*e+a;return s<600?"\u51cc\u6668":s<900?"\u65e9\u4e0a":s<1130?"\u4e0a\u5348":s<1230?"\u4e2d\u5348":s<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929] LT",nextDay:"[\u660e\u5929] LT",nextWeek:"[\u4e0b]dddd LT",lastDay:"[\u6628\u5929] LT",lastWeek:"[\u4e0a]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u9031)/,ordinal:function(e,a){switch(a){case"d":case"D":case"DDD":return e+"\u65e5";case"M":return e+"\u6708";case"w":case"W":return e+"\u9031";default:return e}},relativeTime:{future:"%s\u5167",past:"%s\u524d",s:"\u5e7e\u79d2",ss:"%d \u79d2",m:"1 \u5206\u9418",mm:"%d \u5206\u9418",h:"1 \u5c0f\u6642",hh:"%d \u5c0f\u6642",d:"1 \u5929",dd:"%d \u5929",M:"1 \u500b\u6708",MM:"%d \u500b\u6708",y:"1 \u5e74",yy:"%d \u5e74"}}),l.locale("en"),l});
(function(){var d=!1,l=function(e){return e instanceof l?e:this instanceof l?void(this.EXIFwrapped=e):new l(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=l),exports.EXIF=l):this.EXIF=l;var u=l.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},c=l.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},f=l.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},g=l.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},m=l.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function i(e){return!!e.exifdata}function n(i,o){function t(e){var t=p(e);i.exifdata=t||{};var n=function(e){var t=new DataView(e);d&&if(false) console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return d&&if(false) console.log("Not a valid JPEG"),!1;var n=2,r=e.byteLength;for(;n<r;){if(l=n,56===(s=t).getUint8(l)&&66===s.getUint8(l+1)&&73===s.getUint8(l+2)&&77===s.getUint8(l+3)&&4===s.getUint8(l+4)&&4===s.getUint8(l+5)){var i=t.getUint8(n+7);i%2!=0&&(i+=1),0===i&&(i=4);var o=n+8+i,a=t.getUint16(n+6+i);return S(e,o,a)}n++}var s,l}(e);if(i.iptcdata=n||{},l.isXmpEnabled){var r=function(e){if(!("DOMParser"in self))return;var t=new DataView(e);d&&if(false) console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1))return d&&if(false) console.log("Not a valid JPEG"),!1;var n=2,r=e.byteLength,i=new DOMParser;for(;n<r-4;){if("http"==y(t,n,4)){var o=n-1,a=t.getUint16(n-2)-1,s=y(t,o,a),l=s.indexOf("xmpmeta>")+8,u=(s=s.substring(s.indexOf("<x:xmpmeta"),l)).indexOf("x:xmpmeta")+10;s=s.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+s.slice(u);var c=i.parseFromString(s,"text/xml");return x(c)}n++}}(e);i.xmpdata=r||{}}o&&o.call(i)}var e,n,r;if(i.src)if(/^data\:/i.test(i.src))t(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,i=new ArrayBuffer(r),o=new Uint8Array(i),a=0;a<r;a++)o[a]=n.charCodeAt(a);return i}(i.src));else if(/^blob\:/i.test(i.src)){(s=new FileReader).onload=function(e){t(e.target.result)},e=i.src,n=function(e){s.readAsArrayBuffer(e)},(r=new XMLHttpRequest).open("GET",e,!0),r.responseType="blob",r.onload=function(e){200!=this.status&&0!==this.status||n(this.response)},r.send()}else{var a=new XMLHttpRequest;a.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";t(a.response),a=null},a.open("GET",i.src,!0),a.responseType="arraybuffer",a.send(null)}else if(self.FileReader&&(i instanceof self.Blob||i instanceof self.File)){var s;(s=new FileReader).onload=function(e){d&&if(false) console.log("Got file of length "+e.target.result.byteLength),t(e.target.result)},s.readAsArrayBuffer(i)}}function p(e){var t=new DataView(e);if(d&&if(false) console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return d&&if(false) console.log("Not a valid JPEG"),!1;for(var n,r=2,i=e.byteLength;r<i;){if(255!=t.getUint8(r))return d&&if(false) console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r)),!1;if(n=t.getUint8(r+1),d&&if(false) console.log(n),225==n)return d&&if(false) console.log("Found 0xFFE1 marker"),o(t,r+4,t.getUint16(r+2));r+=2+t.getUint16(r+2)}}var h={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function S(e,t,n){for(var r,i,o,a,s=new DataView(e),l={},u=t;u<t+n;)28===s.getUint8(u)&&2===s.getUint8(u+1)&&(a=s.getUint8(u+2))in h&&((o=s.getInt16(u+3))+5,i=h[a],r=y(s,u+5,o),l.hasOwnProperty(i)?l[i]instanceof Array?l[i].push(r):l[i]=[l[i],r]:l[i]=r),u++;return l}function P(e,t,n,r,i){var o,a,s,l=e.getUint16(n,!i),u={};for(s=0;s<l;s++)o=n+12*s+2,!(a=r[e.getUint16(o,!i)])&&d&&if(false) console.log("Unknown tag: "+e.getUint16(o,!i)),u[a]=F(e,o,t,n,i);return u}function F(e,t,n,r,i){var o,a,s,l,u,c,d=e.getUint16(t+2,!i),f=e.getUint32(t+4,!i),g=e.getUint32(t+8,!i)+n;switch(d){case 1:case 7:if(1==f)return e.getUint8(t+8,!i);for(o=4<f?g:t+8,a=[],l=0;l<f;l++)a[l]=e.getUint8(o+l);return a;case 2:return y(e,o=4<f?g:t+8,f-1);case 3:if(1==f)return e.getUint16(t+8,!i);for(o=2<f?g:t+8,a=[],l=0;l<f;l++)a[l]=e.getUint16(o+2*l,!i);return a;case 4:if(1==f)return e.getUint32(t+8,!i);for(a=[],l=0;l<f;l++)a[l]=e.getUint32(g+4*l,!i);return a;case 5:if(1==f)return u=e.getUint32(g,!i),c=e.getUint32(g+4,!i),(s=new Number(u/c)).numerator=u,s.denominator=c,s;for(a=[],l=0;l<f;l++)u=e.getUint32(g+8*l,!i),c=e.getUint32(g+4+8*l,!i),a[l]=new Number(u/c),a[l].numerator=u,a[l].denominator=c;return a;case 9:if(1==f)return e.getInt32(t+8,!i);for(a=[],l=0;l<f;l++)a[l]=e.getInt32(g+4*l,!i);return a;case 10:if(1==f)return e.getInt32(g,!i)/e.getInt32(g+4,!i);for(a=[],l=0;l<f;l++)a[l]=e.getInt32(g+8*l,!i)/e.getInt32(g+4+8*l,!i);return a}}function y(e,t,n){for(var r="",i=t;i<t+n;i++)r+=String.fromCharCode(e.getUint8(i));return r}function o(e,t){if("Exif"!=y(e,t,4))return d&&if(false) console.log("Not valid EXIF data! "+y(e,t,4)),!1;var n,r,i,o,a,s=t+6;if(18761==e.getUint16(s))n=!1;else{if(19789!=e.getUint16(s))return d&&if(false) console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(s+2,!n))return d&&if(false) console.log("Not valid TIFF data! (no 0x002A)"),!1;var l=e.getUint32(s+4,!n);if(l<8)return d&&if(false) console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(s+4,!n)),!1;if((r=P(e,s,s+l,c,n)).ExifIFDPointer)for(i in o=P(e,s,s+r.ExifIFDPointer,u,n)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[i]=m[i][o[i]];break;case"ExifVersion":case"FlashpixVersion":o[i]=String.fromCharCode(o[i][0],o[i][1],o[i][2],o[i][3]);break;case"ComponentsConfiguration":o[i]=m.Components[o[i][0]]+m.Components[o[i][1]]+m.Components[o[i][2]]+m.Components[o[i][3]]}r[i]=o[i]}if(r.GPSInfoIFDPointer)for(i in a=P(e,s,s+r.GPSInfoIFDPointer,f,n)){switch(i){case"GPSVersionID":a[i]=a[i][0]+"."+a[i][1]+"."+a[i][2]+"."+a[i][3]}r[i]=a[i]}return r.thumbnail=function(e,t,n,r){var i,o,a,s,l=(o=t+n,a=r,s=(i=e).getUint16(o,!a),i.getUint32(o+2+12*s,!a));if(!l)return{};if(l>e.byteLength)return{};var u=P(e,t,t+l,g,r);if(u.Compression)switch(u.Compression){case 6:if(u.JpegIFOffset&&u.JpegIFByteCount){var c=t+u.JpegIFOffset,d=u.JpegIFByteCount;u.blob=new Blob([new Uint8Array(e.buffer,c,d)],{type:"image/jpeg"})}break;case 1:if(false) console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:if(false) console.log("Unknown thumbnail image format '%s'",u.Compression)}else 2==u.PhotometricInterpretation&&if(false) console.log("Thumbnail image format is RGB, which is not implemented.");return u}(e,s,l,n),r}function b(e){var t={};if(1==e.nodeType){if(0<e.attributes.length){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t["@attributes"][r.nodeName]=r.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes.item(i),a=o.nodeName;if(null==t[a])t[a]=b(o);else{if(null==t[a].push){var s=t[a];t[a]=[],t[a].push(s)}t[a].push(b(o))}}return t}function x(e){try{var t={};if(0<e.children.length)for(var n=0;n<e.children.length;n++){var r=e.children.item(n),i=r.attributes;for(var o in i){var a=i[o],s=a.nodeName,l=a.nodeValue;void 0!==s&&(t[s]=l)}var u=r.nodeName;if(void 0===t[u])t[u]=b(r);else{if(void 0===t[u].push){var c=t[u];t[u]=[],t[u].push(c)}t[u].push(b(r))}}else t=e.textContent;return t}catch(e){if(false) console.log(e.message)}}l.enableXmp=function(){l.isXmpEnabled=!0},l.disableXmp=function(){l.isXmpEnabled=!1},l.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(i(e)?t&&t.call(e):n(e,t),!0)},l.getTag=function(e,t){if(i(e))return e.exifdata[t]},l.getIptcTag=function(e,t){if(i(e))return e.iptcdata[t]},l.getAllTags=function(e){if(!i(e))return{};var t,n=e.exifdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},l.getAllIptcTags=function(e){if(!i(e))return{};var t,n=e.iptcdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},l.pretty=function(e){if(!i(e))return"";var t,n=e.exifdata,r="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?r+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":r+=t+" : ["+n[t].length+" values]\r\n":r+=t+" : "+n[t]+"\r\n");return r},l.readFromBinaryFile=function(e){return p(e)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return l})}).call(this);
/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */
/*  Base64 class: Base 64 encoding / decoding (c) Chris Veness 2002-2012                          */
/*    note: depends on Utf8 class                                                                 */
/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */
var PABase64 = {};  // Base64 namespace
PABase64.code = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
/**
 * Encode string into Base64, as defined by RFC 4648 [http://tools.ietf.org/html/rfc4648]
 * (instance method extending String object). As per RFC 4648, no newlines are added.
 *
 * @param {String} str The string to be encoded as base-64
 * @param {Boolean} [utf8encode=false] Flag to indicate whether str is Unicode string to be encoded 
 *   to UTF8 before conversion to base64; otherwise string is assumed to be 8-bit characters
 * @returns {String} Base64-encoded string
 */ 
PABase64.encode = function(str, utf8encode) {  // http://tools.ietf.org/html/rfc4648
  utf8encode =  (typeof utf8encode == 'undefined') ? false : utf8encode;
  var o1, o2, o3, bits, h1, h2, h3, h4, e=[], pad = '', c, plain, coded;
  var b64 = PABase64.code;
   
  plain = utf8encode ? str.encodeUTF8() : str;
  
  c = plain.length % 3;  // pad string to length of multiple of 3
  if (c > 0) { while (c++ < 3) { pad += '='; plain += '\0'; } }
  // note: doing padding here saves us doing special-case packing for trailing 1 or 2 chars
   
  for (c=0; c<plain.length; c+=3) {  // pack three octets into four hexets
    o1 = plain.charCodeAt(c);
    o2 = plain.charCodeAt(c+1);
    o3 = plain.charCodeAt(c+2);
      
    bits = o1<<16 | o2<<8 | o3;
      
    h1 = bits>>18 & 0x3f;
    h2 = bits>>12 & 0x3f;
    h3 = bits>>6 & 0x3f;
    h4 = bits & 0x3f;
    // use hextets to index into code string
    e[c/3] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);
  }
  coded = e.join('');  // join() is far faster than repeated string concatenation in IE
  
  // replace 'A's from padded nulls with '='s
  coded = coded.slice(0, coded.length-pad.length) + pad;
   
  return coded;
}
/**
 * Decode string from Base64, as defined by RFC 4648 [http://tools.ietf.org/html/rfc4648]
 * (instance method extending String object). As per RFC 4648, newlines are not catered for.
 *
 * @param {String} str The string to be decoded from base-64
 * @param {Boolean} [utf8decode=false] Flag to indicate whether str is Unicode string to be decoded 
 *   from UTF8 after conversion from base64
 * @returns {String} decoded string
 */ 
PABase64.decode = function(str, utf8decode) {
  utf8decode =  (typeof utf8decode == 'undefined') ? false : utf8decode;
  var o1, o2, o3, h1, h2, h3, h4, bits, d=[], plain, coded;
  var b64 = PABase64.code;
  coded = utf8decode ? str.decodeUTF8() : str;
  
  
  for (var c=0; c<coded.length; c+=4) {  // unpack four hexets into three octets
    h1 = b64.indexOf(coded.charAt(c));
    h2 = b64.indexOf(coded.charAt(c+1));
    h3 = b64.indexOf(coded.charAt(c+2));
    h4 = b64.indexOf(coded.charAt(c+3));
      
    bits = h1<<18 | h2<<12 | h3<<6 | h4;
      
    o1 = bits>>>16 & 0xff;
    o2 = bits>>>8 & 0xff;
    o3 = bits & 0xff;
    
    d[c/4] = String.fromCharCode(o1, o2, o3);
    // check for padding
    if (h4 == 0x40) d[c/4] = String.fromCharCode(o1, o2);
    if (h3 == 0x40) d[c/4] = String.fromCharCode(o1);
  }
  plain = d.join('');  // join() is far faster than repeated string concatenation in IE
   
  return utf8decode ? plain.decodeUTF8() : plain; 
}
/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */
/*  Utf8 class: encode / decode between multi-byte Unicode characters and UTF-8 multiple          */
/*              single-byte character encoding (c) Chris Veness 2002-2012                         */
/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */
var PAUtf8 = {};  // Utf8 namespace
/**
 * Encode multi-byte Unicode string into utf-8 multiple single-byte characters 
 * (BMP / basic multilingual plane only)
 *
 * Chars in range U+0080 - U+07FF are encoded in 2 chars, U+0800 - U+FFFF in 3 chars
 *
 * @param {String} strUni Unicode string to be encoded as UTF-8
 * @returns {String} encoded string
 */
PAUtf8.encode = function(strUni) {
  // use regular expressions & String.replace callback function for better efficiency 
  // than procedural approaches
  var strUtf = strUni.replace(
      /[\u0080-\u07ff]/g,  // U+0080 - U+07FF => 2 bytes 110yyyyy, 10zzzzzz
      function(c) { 
        var cc = c.charCodeAt(0);
        return String.fromCharCode(0xc0 | cc>>6, 0x80 | cc&0x3f); }
    );
  strUtf = strUtf.replace(
      /[\u0800-\uffff]/g,  // U+0800 - U+FFFF => 3 bytes 1110xxxx, 10yyyyyy, 10zzzzzz
      function(c) { 
        var cc = c.charCodeAt(0); 
        return String.fromCharCode(0xe0 | cc>>12, 0x80 | cc>>6&0x3F, 0x80 | cc&0x3f); }
    );
  return strUtf;
}
/**
 * Decode utf-8 encoded string back into multi-byte Unicode characters
 *
 * @param {String} strUtf UTF-8 string to be decoded back to Unicode
 * @returns {String} decoded string
 */
PAUtf8.decode = function(strUtf) {
  // note: decode 3-byte chars first as decoded 2-byte strings could appear to be 3-byte char!
  var strUni = strUtf.replace(
      /[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,  // 3-byte chars
      function(c) {  // (note parentheses for precence)
        var cc = ((c.charCodeAt(0)&0x0f)<<12) | ((c.charCodeAt(1)&0x3f)<<6) | ( c.charCodeAt(2)&0x3f); 
        return String.fromCharCode(cc); }
    );
  strUni = strUni.replace(
      /[\u00c0-\u00df][\u0080-\u00bf]/g,                 // 2-byte chars
      function(c) {  // (note parentheses for precence)
        var cc = (c.charCodeAt(0)&0x1f)<<6 | c.charCodeAt(1)&0x3f;
        return String.fromCharCode(cc); }
    );
  return strUni;
}
/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */
/*  AES implementation in JavaScript (c) Chris Veness 2005-2012                                   */
/*   - see http://csrc.nist.gov/publications/PubsFIPS.html#197                                    */
/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */
var Aes = {};  // Aes namespace
/**
 * AES Cipher function: encrypt 'input' state with Rijndael algorithm
 *   applies Nr rounds (10/12/14) using key schedule w for 'add round key' stage
 *
 * @param {Number[]} input 16-byte (128-bit) input state array
 * @param {Number[][]} w   Key schedule as 2D byte-array (Nr+1 x Nb bytes)
 * @returns {Number[]}     Encrypted output state array
 */
Aes.cipher = function(input, w) {    // main Cipher function [5.1]
  var Nb = 4;               // block size (in words): no of columns in state (fixed at 4 for AES)
  var Nr = w.length/Nb - 1; // no of rounds: 10/12/14 for 128/192/256-bit keys
  var state = [[],[],[],[]];  // initialise 4xNb byte-array 'state' with input [3.4]
  for (var i=0; i<4*Nb; i++) state[i%4][Math.floor(i/4)] = input[i];
  state = Aes.addRoundKey(state, w, 0, Nb);
  for (var round=1; round<Nr; round++) {
    state = Aes.subBytes(state, Nb);
    state = Aes.shiftRows(state, Nb);
    state = Aes.mixColumns(state, Nb);
    state = Aes.addRoundKey(state, w, round, Nb);
  }
  state = Aes.subBytes(state, Nb);
  state = Aes.shiftRows(state, Nb);
  state = Aes.addRoundKey(state, w, Nr, Nb);
  var output = new Array(4*Nb);  // convert state to 1-d array before returning [3.4]
  for (var i=0; i<4*Nb; i++) output[i] = state[i%4][Math.floor(i/4)];
  return output;
}
/**
 * Perform Key Expansion to generate a Key Schedule
 *
 * @param {Number[]} key Key as 16/24/32-byte array
 * @returns {Number[][]} Expanded key schedule as 2D byte-array (Nr+1 x Nb bytes)
 */
Aes.keyExpansion = function(key) {  // generate Key Schedule (byte-array Nr+1 x Nb) from Key [5.2]
  var Nb = 4;            // block size (in words): no of columns in state (fixed at 4 for AES)
  var Nk = key.length/4  // key length (in words): 4/6/8 for 128/192/256-bit keys
  var Nr = Nk + 6;       // no of rounds: 10/12/14 for 128/192/256-bit keys
  var w = new Array(Nb*(Nr+1));
  var temp = new Array(4);
  for (var i=0; i<Nk; i++) {
    var r = [key[4*i], key[4*i+1], key[4*i+2], key[4*i+3]];
    w[i] = r;
  }
  for (var i=Nk; i<(Nb*(Nr+1)); i++) {
    w[i] = new Array(4);
    for (var t=0; t<4; t++) temp[t] = w[i-1][t];
    if (i % Nk == 0) {
      temp = Aes.subWord(Aes.rotWord(temp));
      for (var t=0; t<4; t++) temp[t] ^= Aes.rCon[i/Nk][t];
    } else if (Nk > 6 && i%Nk == 4) {
      temp = Aes.subWord(temp);
    }
    for (var t=0; t<4; t++) w[i][t] = w[i-Nk][t] ^ temp[t];
  }
  return w;
}
/*
 * ---- remaining routines are private, not called externally ----
 */
 
Aes.subBytes = function(s, Nb) {    // apply SBox to state S [5.1.1]
  for (var r=0; r<4; r++) {
    for (var c=0; c<Nb; c++) s[r][c] = Aes.sBox[s[r][c]];
  }
  return s;
}
Aes.shiftRows = function(s, Nb) {    // shift row r of state S left by r bytes [5.1.2]
  var t = new Array(4);
  for (var r=1; r<4; r++) {
    for (var c=0; c<4; c++) t[c] = s[r][(c+r)%Nb];  // shift into temp copy
    for (var c=0; c<4; c++) s[r][c] = t[c];         // and copy back
  }          // note that this will work for Nb=4,5,6, but not 7,8 (always 4 for AES):
  return s;  // see asmaes.sourceforge.net/rijndael/rijndaelImplementation.pdf
}
Aes.mixColumns = function(s, Nb) {   // combine bytes of each col of state S [5.1.3]
  for (var c=0; c<4; c++) {
    var a = new Array(4);  // 'a' is a copy of the current column from 's'
    var b = new Array(4);  // 'b' is a{02} in GF(2^8)
    for (var i=0; i<4; i++) {
      a[i] = s[i][c];
      b[i] = s[i][c]&0x80 ? s[i][c]<<1 ^ 0x011b : s[i][c]<<1;
    }
    // a[n] ^ b[n] is a{03} in GF(2^8)
    s[0][c] = b[0] ^ a[1] ^ b[1] ^ a[2] ^ a[3]; // 2*a0 + 3*a1 + a2 + a3
    s[1][c] = a[0] ^ b[1] ^ a[2] ^ b[2] ^ a[3]; // a0 * 2*a1 + 3*a2 + a3
    s[2][c] = a[0] ^ a[1] ^ b[2] ^ a[3] ^ b[3]; // a0 + a1 + 2*a2 + 3*a3
    s[3][c] = a[0] ^ b[0] ^ a[1] ^ a[2] ^ b[3]; // 3*a0 + a1 + a2 + 2*a3
  }
  return s;
}
Aes.addRoundKey = function(state, w, rnd, Nb) {  // xor Round Key into state S [5.1.4]
  for (var r=0; r<4; r++) {
    for (var c=0; c<Nb; c++) state[r][c] ^= w[rnd*4+c][r];
  }
  return state;
}
Aes.subWord = function(w) {    // apply SBox to 4-byte word w
  for (var i=0; i<4; i++) w[i] = Aes.sBox[w[i]];
  return w;
}
Aes.rotWord = function(w) {    // rotate 4-byte word w left by one byte
  var tmp = w[0];
  for (var i=0; i<3; i++) w[i] = w[i+1];
  w[3] = tmp;
  return w;
}
// sBox is pre-computed multiplicative inverse in GF(2^8) used in subBytes and keyExpansion [5.1.1]
Aes.sBox =  [0x63,0x7c,0x77,0x7b,0xf2,0x6b,0x6f,0xc5,0x30,0x01,0x67,0x2b,0xfe,0xd7,0xab,0x76,
             0xca,0x82,0xc9,0x7d,0xfa,0x59,0x47,0xf0,0xad,0xd4,0xa2,0xaf,0x9c,0xa4,0x72,0xc0,
             0xb7,0xfd,0x93,0x26,0x36,0x3f,0xf7,0xcc,0x34,0xa5,0xe5,0xf1,0x71,0xd8,0x31,0x15,
             0x04,0xc7,0x23,0xc3,0x18,0x96,0x05,0x9a,0x07,0x12,0x80,0xe2,0xeb,0x27,0xb2,0x75,
             0x09,0x83,0x2c,0x1a,0x1b,0x6e,0x5a,0xa0,0x52,0x3b,0xd6,0xb3,0x29,0xe3,0x2f,0x84,
             0x53,0xd1,0x00,0xed,0x20,0xfc,0xb1,0x5b,0x6a,0xcb,0xbe,0x39,0x4a,0x4c,0x58,0xcf,
             0xd0,0xef,0xaa,0xfb,0x43,0x4d,0x33,0x85,0x45,0xf9,0x02,0x7f,0x50,0x3c,0x9f,0xa8,
             0x51,0xa3,0x40,0x8f,0x92,0x9d,0x38,0xf5,0xbc,0xb6,0xda,0x21,0x10,0xff,0xf3,0xd2,
             0xcd,0x0c,0x13,0xec,0x5f,0x97,0x44,0x17,0xc4,0xa7,0x7e,0x3d,0x64,0x5d,0x19,0x73,
             0x60,0x81,0x4f,0xdc,0x22,0x2a,0x90,0x88,0x46,0xee,0xb8,0x14,0xde,0x5e,0x0b,0xdb,
             0xe0,0x32,0x3a,0x0a,0x49,0x06,0x24,0x5c,0xc2,0xd3,0xac,0x62,0x91,0x95,0xe4,0x79,
             0xe7,0xc8,0x37,0x6d,0x8d,0xd5,0x4e,0xa9,0x6c,0x56,0xf4,0xea,0x65,0x7a,0xae,0x08,
             0xba,0x78,0x25,0x2e,0x1c,0xa6,0xb4,0xc6,0xe8,0xdd,0x74,0x1f,0x4b,0xbd,0x8b,0x8a,
             0x70,0x3e,0xb5,0x66,0x48,0x03,0xf6,0x0e,0x61,0x35,0x57,0xb9,0x86,0xc1,0x1d,0x9e,
             0xe1,0xf8,0x98,0x11,0x69,0xd9,0x8e,0x94,0x9b,0x1e,0x87,0xe9,0xce,0x55,0x28,0xdf,
             0x8c,0xa1,0x89,0x0d,0xbf,0xe6,0x42,0x68,0x41,0x99,0x2d,0x0f,0xb0,0x54,0xbb,0x16];
// rCon is Round Constant used for the Key Expansion [1st col is 2^(r-1) in GF(2^8)] [5.2]
Aes.rCon = [ [0x00, 0x00, 0x00, 0x00],
             [0x01, 0x00, 0x00, 0x00],
             [0x02, 0x00, 0x00, 0x00],
             [0x04, 0x00, 0x00, 0x00],
             [0x08, 0x00, 0x00, 0x00],
             [0x10, 0x00, 0x00, 0x00],
             [0x20, 0x00, 0x00, 0x00],
             [0x40, 0x00, 0x00, 0x00],
             [0x80, 0x00, 0x00, 0x00],
             [0x1b, 0x00, 0x00, 0x00],
             [0x36, 0x00, 0x00, 0x00] ];
/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */
/*  AES Counter-mode implementation in JavaScript (c) Chris Veness 2005-2012                      */
/*   - see http://csrc.nist.gov/publications/nistpubs/800-38a/sp800-38a.pdf                       */
/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */
Aes.Ctr = {};  // Aes.Ctr namespace: a subclass or extension of Aes
/** 
 * Encrypt a text using AES encryption in Counter mode of operation
 *
 * Unicode multi-byte character safe
 *
 * @param {String} plaintext Source text to be encrypted
 * @param {String} password  The password to use to generate a key
 * @param {Number} nBits     Number of bits to be used in the key (128, 192, or 256)
 * @returns {string}         Encrypted text
 */
Aes.Ctr.encrypt = function(plaintext, password, nBits) {
  var blockSize = 16;  // block size fixed at 16 bytes / 128 bits (Nb=4) for AES
  if (!(nBits==128 || nBits==192 || nBits==256)) return '';  // standard allows 128/192/256 bit keys
  plaintext = PAUtf8.encode(plaintext);
  password = PAUtf8.encode(password);
  //var t = new Date();  // timer
 
  // use AES itself to encrypt password to get cipher key (using plain password as source for key 
  // expansion) - gives us well encrypted key (though hashed key might be preferred for prod'n use)
  var nBytes = nBits/8;  // no bytes in key (16/24/32)
  var pwBytes = new Array(nBytes);
  for (var i=0; i<nBytes; i++) {  // use 1st 16/24/32 chars of password for key
    pwBytes[i] = isNaN(password.charCodeAt(i)) ? 0 : password.charCodeAt(i);
  }
  var key = Aes.cipher(pwBytes, Aes.keyExpansion(pwBytes));  // gives us 16-byte key
  key = key.concat(key.slice(0, nBytes-16));  // expand key to 16/24/32 bytes long
  // initialise 1st 8 bytes of counter block with nonce (NIST SP800-38A B.2): [0-1] = millisec, 
  // [2-3] = random, [4-7] = seconds, together giving full sub-millisec uniqueness up to Feb 2106
  var counterBlock = new Array(blockSize);
  
  var nonce = (new Date()).getTime();  // timestamp: milliseconds since 1-Jan-1970
  var nonceMs = nonce%1000;
  var nonceSec = Math.floor(nonce/1000);
  var nonceRnd = Math.floor(Math.random()*0xffff);
  
  for (var i=0; i<2; i++) counterBlock[i]   = (nonceMs  >>> i*8) & 0xff;
  for (var i=0; i<2; i++) counterBlock[i+2] = (nonceRnd >>> i*8) & 0xff;
  for (var i=0; i<4; i++) counterBlock[i+4] = (nonceSec >>> i*8) & 0xff;
  
  // and convert it to a string to go on the front of the ciphertext
  var ctrTxt = '';
  for (var i=0; i<8; i++) ctrTxt += String.fromCharCode(counterBlock[i]);
  // generate key schedule - an expansion of the key into distinct Key Rounds for each round
  var keySchedule = Aes.keyExpansion(key);
  
  var blockCount = Math.ceil(plaintext.length/blockSize);
  var ciphertxt = new Array(blockCount);  // ciphertext as array of strings
  
  for (var b=0; b<blockCount; b++) {
    // set counter (block #) in last 8 bytes of counter block (leaving nonce in 1st 8 bytes)
    // done in two stages for 32-bit ops: using two words allows us to go past 2^32 blocks (68GB)
    for (var c=0; c<4; c++) counterBlock[15-c] = (b >>> c*8) & 0xff;
    for (var c=0; c<4; c++) counterBlock[15-c-4] = (b/0x100000000 >>> c*8)
    var cipherCntr = Aes.cipher(counterBlock, keySchedule);  // -- encrypt counter block --
    
    // block size is reduced on final block
    var blockLength = b<blockCount-1 ? blockSize : (plaintext.length-1)%blockSize+1;
    var cipherChar = new Array(blockLength);
    
    for (var i=0; i<blockLength; i++) {  // -- xor plaintext with ciphered counter char-by-char --
      cipherChar[i] = cipherCntr[i] ^ plaintext.charCodeAt(b*blockSize+i);
      cipherChar[i] = String.fromCharCode(cipherChar[i]);
    }
    ciphertxt[b] = cipherChar.join(''); 
  }
  // Array.join is more efficient than repeated string concatenation in IE
  var ciphertext = ctrTxt + ciphertxt.join('');
  ciphertext = PABase64.encode(ciphertext);  // encode in base64
  
  //alert((new Date()) - t);
  return ciphertext;
}
/** 
 * Decrypt a text encrypted by AES in counter mode of operation
 *
 * @param {String} ciphertext Source text to be encrypted
 * @param {String} password   The password to use to generate a key
 * @param {Number} nBits      Number of bits to be used in the key (128, 192, or 256)
 * @returns {String}          Decrypted text
 */
Aes.Ctr.decrypt = function(ciphertext, password, nBits) {
  var blockSize = 16;  // block size fixed at 16 bytes / 128 bits (Nb=4) for AES
  if (!(nBits==128 || nBits==192 || nBits==256)) return '';  // standard allows 128/192/256 bit keys
  ciphertext = PABase64.decode(ciphertext);
  password = PAUtf8.encode(password);
  //var t = new Date();  // timer
  
  // use AES to encrypt password (mirroring encrypt routine)
  var nBytes = nBits/8;  // no bytes in key
  var pwBytes = new Array(nBytes);
  for (var i=0; i<nBytes; i++) {
    pwBytes[i] = isNaN(password.charCodeAt(i)) ? 0 : password.charCodeAt(i);
  }
  var key = Aes.cipher(pwBytes, Aes.keyExpansion(pwBytes));
  key = key.concat(key.slice(0, nBytes-16));  // expand key to 16/24/32 bytes long
  // recover nonce from 1st 8 bytes of ciphertext
  var counterBlock = new Array(8);
  ctrTxt = ciphertext.slice(0, 8);
  for (var i=0; i<8; i++) counterBlock[i] = ctrTxt.charCodeAt(i);
  
  // generate key schedule
  var keySchedule = Aes.keyExpansion(key);
  // separate ciphertext into blocks (skipping past initial 8 bytes)
  var nBlocks = Math.ceil((ciphertext.length-8) / blockSize);
  var ct = new Array(nBlocks);
  for (var b=0; b<nBlocks; b++) ct[b] = ciphertext.slice(8+b*blockSize, 8+b*blockSize+blockSize);
  ciphertext = ct;  // ciphertext is now array of block-length strings
  // plaintext will get generated block-by-block into array of block-length strings
  var plaintxt = new Array(ciphertext.length);
  for (var b=0; b<nBlocks; b++) {
    // set counter (block #) in last 8 bytes of counter block (leaving nonce in 1st 8 bytes)
    for (var c=0; c<4; c++) counterBlock[15-c] = ((b) >>> c*8) & 0xff;
    for (var c=0; c<4; c++) counterBlock[15-c-4] = (((b+1)/0x100000000-1) >>> c*8) & 0xff;
    var cipherCntr = Aes.cipher(counterBlock, keySchedule);  // encrypt counter block
    var plaintxtByte = new Array(ciphertext[b].length);
    for (var i=0; i<ciphertext[b].length; i++) {
      // -- xor plaintxt with ciphered counter byte-by-byte --
      plaintxtByte[i] = cipherCntr[i] ^ ciphertext[b].charCodeAt(i);
      plaintxtByte[i] = String.fromCharCode(plaintxtByte[i]);
    }
    plaintxt[b] = plaintxtByte.join('');
  }
  // join array of blocks into single plaintext string
  var plaintext = plaintxt.join('');
  plaintext = PAUtf8.decode(plaintext);  // decode from UTF8 back to Unicode multi-byte chars
  
  //alert((new Date()) - t);
  return plaintext;
}
/*! howler.js v2.1.3 | (c) 2013-2019, James Simpson of GoldFire Studios | MIT License | howlerjs.com */
!function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var e=this||n;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var o=this||n;if(e=parseFloat(e),o.ctx||_(),void 0!==e&&e>=0&&e<=1){if(o._volume=e,o._muted)return o;o.usingWebAudio&&o.masterGain.gain.setValueAtTime(e,n.ctx.currentTime);for(var t=0;t<o._howls.length;t++)if(!o._howls[t]._webAudio)for(var r=o._howls[t]._getSoundIds(),a=0;a<r.length;a++){var u=o._howls[t]._soundById(r[a]);u&&u._node&&(u._node.volume=u._volume*e)}return o}return o._volume},mute:function(e){var o=this||n;o.ctx||_(),o._muted=e,o.usingWebAudio&&o.masterGain.gain.setValueAtTime(e?0:o._volume,n.ctx.currentTime);for(var t=0;t<o._howls.length;t++)if(!o._howls[t]._webAudio)for(var r=o._howls[t]._getSoundIds(),a=0;a<r.length;a++){var u=o._howls[t]._soundById(r[a]);u&&u._node&&(u._node.muted=!!e||u._muted)}return o},unload:function(){for(var e=this||n,o=e._howls.length-1;o>=0;o--)e._howls[o].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,_()),e},codecs:function(e){return(this||n)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||n;if(e.state=e.ctx?e.ctx.state||"suspended":"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var o=new Audio;void 0===o.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(n){e.noAudio=!0}else e.noAudio=!0;try{var o=new Audio;o.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||n,o=null;try{o="undefined"!=typeof Audio?new Audio:null}catch(n){return e}if(!o||"function"!=typeof o.canPlayType)return e;var t=o.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),a=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(a||!t&&!o.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!t,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!o.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||n;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var o=function(n){for(var t=0;t<e.html5PoolSize;t++)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(n){e.noAudio=!0}for(var t=0;t<e._howls.length;t++)if(!e._howls[t]._webAudio)for(var a=e._howls[t]._getSoundIds(),u=0;u<a.length;u++){var i=e._howls[t]._soundById(a[u]);i&&i._node&&!i._node._unlocked&&(i._node._unlocked=!0,i._node.load())}e._autoResume();var d=e.ctx.createBufferSource();d.buffer=e._scratchBuffer,d.connect(e.ctx.destination),void 0===d.start?d.noteOn(0):d.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),d.onended=function(){d.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),e}},_obtainHtml5Audio:function(){var e=this||n;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var o=(new Audio).play();return o&&"undefined"!=typeof Promise&&(o instanceof Promise||"function"==typeof o.then)&&o.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var o=this||n;return e._unlocked&&o._html5AudioPool.push(e),o},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&n.usingWebAudio){for(var o=0;o<e._howls.length;o++)if(e._howls[o]._webAudio)for(var t=0;t<e._howls[o]._sounds.length;t++)if(!e._howls[o]._sounds[t]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&n.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var n=new e,o=function(e){var n=this;if(!e.src||0===e.src.length)return void console.error("An array of source files must be passed with any new Howl.");n.init(e)};o.prototype={init:function(e){var o=this;return n.ctx||_(),o._autoplay=e.autoplay||!1,o._format="string"!=typeof e.format?e.format:[e.format],o._html5=e.html5||!1,o._muted=e.mute||!1,o._loop=e.loop||!1,o._pool=e.pool||5,o._preload="boolean"!=typeof e.preload||e.preload,o._rate=e.rate||1,o._sprite=e.sprite||{},o._src="string"!=typeof e.src?e.src:[e.src],o._volume=void 0!==e.volume?e.volume:1,o._xhrWithCredentials=e.xhrWithCredentials||!1,o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=e.onend?[{fn:e.onend}]:[],o._onfade=e.onfade?[{fn:e.onfade}]:[],o._onload=e.onload?[{fn:e.onload}]:[],o._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],o._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],o._onpause=e.onpause?[{fn:e.onpause}]:[],o._onplay=e.onplay?[{fn:e.onplay}]:[],o._onstop=e.onstop?[{fn:e.onstop}]:[],o._onmute=e.onmute?[{fn:e.onmute}]:[],o._onvolume=e.onvolume?[{fn:e.onvolume}]:[],o._onrate=e.onrate?[{fn:e.onrate}]:[],o._onseek=e.onseek?[{fn:e.onseek}]:[],o._onunlock=e.onunlock?[{fn:e.onunlock}]:[],o._onresume=[],o._webAudio=n.usingWebAudio&&!o._html5,void 0!==n.ctx&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(o),o._autoplay&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o.load(),o},load:function(){var e=this,o=null;if(n.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var u,i;if(e._format&&e._format[r])u=e._format[r];else{if("string"!=typeof(i=e._src[r])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}u=/^data:audio\/([^;,]+);/i.exec(i),u||(u=/\.([^.]+)$/.exec(i.split("?",1)[0])),u&&(u=u[1].toLowerCase())}if(u||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),u&&n.codecs(u)){o=e._src[r];break}}return o?(e._src=o,e._state="loading","https:"===window.location.protocol&&"http:"===o.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new t(e),e._webAudio&&a(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,o){var t=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===t._state&&!t._sprite[e])return null;if(void 0===e&&(e="__default",!t._playLock)){for(var a=0,u=0;u<t._sounds.length;u++)t._sounds[u]._paused&&!t._sounds[u]._ended&&(a++,r=t._sounds[u]._id);1===a?e=null:r=null}}var i=r?t._soundById(r):t._inactiveSound();if(!i)return null;if(r&&!e&&(e=i._sprite||"__default"),"loaded"!==t._state){i._sprite=e,i._ended=!1;var d=i._id;return t._queue.push({event:"play",action:function(){t.play(d)}}),d}if(r&&!i._paused)return o||t._loadQueue("play"),i._id;t._webAudio&&n._autoResume();var _=Math.max(0,i._seek>0?i._seek:t._sprite[e][0]/1e3),s=Math.max(0,(t._sprite[e][0]+t._sprite[e][1])/1e3-_),l=1e3*s/Math.abs(i._rate),c=t._sprite[e][0]/1e3,f=(t._sprite[e][0]+t._sprite[e][1])/1e3;i._sprite=e,i._ended=!1;var p=function(){i._paused=!1,i._seek=_,i._start=c,i._stop=f,i._loop=!(!i._loop&&!t._sprite[e][2])};if(_>=f)return void t._ended(i);var m=i._node;if(t._webAudio){var v=function(){t._playLock=!1,p(),t._refreshBuffer(i);var e=i._muted||t._muted?0:i._volume;m.gain.setValueAtTime(e,n.ctx.currentTime),i._playStart=n.ctx.currentTime,void 0===m.bufferSource.start?i._loop?m.bufferSource.noteGrainOn(0,_,86400):m.bufferSource.noteGrainOn(0,_,s):i._loop?m.bufferSource.start(0,_,86400):m.bufferSource.start(0,_,s),l!==1/0&&(t._endTimers[i._id]=setTimeout(t._ended.bind(t,i),l)),o||setTimeout(function(){t._emit("play",i._id),t._loadQueue()},0)};"running"===n.state?v():(t._playLock=!0,t.once("resume",v),t._clearTimer(i._id))}else{var h=function(){m.currentTime=_,m.muted=i._muted||t._muted||n._muted||m.muted,m.volume=i._volume*n.volume(),m.playbackRate=i._rate;try{var r=m.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(t._playLock=!0,p(),r.then(function(){t._playLock=!1,m._unlocked=!0,o||(t._emit("play",i._id),t._loadQueue())}).catch(function(){t._playLock=!1,t._emit("playerror",i._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),i._ended=!0,i._paused=!0})):o||(t._playLock=!1,p(),t._emit("play",i._id),t._loadQueue()),m.playbackRate=i._rate,m.paused)return void t._emit("playerror",i._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||i._loop?t._endTimers[i._id]=setTimeout(t._ended.bind(t,i),l):(t._endTimers[i._id]=function(){t._ended(i),m.removeEventListener("ended",t._endTimers[i._id],!1)},m.addEventListener("ended",t._endTimers[i._id],!1))}catch(e){t._emit("playerror",i._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=t._src,m.load());var y=window&&window.ejecta||!m.readyState&&n._navigator.isCocoonJS;if(m.readyState>=3||y)h();else{t._playLock=!0;var g=function(){h(),m.removeEventListener(n._canPlayEvent,g,!1)};m.addEventListener(n._canPlayEvent,g,!1),t._clearTimer(i._id)}}return i._id},pause:function(e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(e)}}),n;for(var o=n._getSoundIds(e),t=0;t<o.length;t++){n._clearTimer(o[t]);var r=n._soundById(o[t]);if(r&&!r._paused&&(r._seek=n.seek(o[t]),r._rateSeek=0,r._paused=!0,n._stopFade(o[t]),r._node))if(n._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),n._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||n._emit("pause",r?r._id:null)}return n},stop:function(e,n){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"stop",action:function(){o.stop(e)}}),o;for(var t=o._getSoundIds(e),r=0;r<t.length;r++){o._clearTimer(t[r]);var a=o._soundById(t[r]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,o._stopFade(t[r]),a._node&&(o._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),o._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause(),a._node.duration===1/0&&o._clearSound(a._node))),n||o._emit("stop",a._id))}return o},mute:function(e,o){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"mute",action:function(){t.mute(e,o)}}),t;if(void 0===o){if("boolean"!=typeof e)return t._muted;t._muted=e}for(var r=t._getSoundIds(o),a=0;a<r.length;a++){var u=t._soundById(r[a]);u&&(u._muted=e,u._interval&&t._stopFade(u._id),t._webAudio&&u._node?u._node.gain.setValueAtTime(e?0:u._volume,n.ctx.currentTime):u._node&&(u._node.muted=!!n._muted||e),t._emit("mute",u._id))}return t},volume:function(){var e,o,t=this,r=arguments;if(0===r.length)return t._volume;if(1===r.length||2===r.length&&void 0===r[1]){t._getSoundIds().indexOf(r[0])>=0?o=parseInt(r[0],10):e=parseFloat(r[0])}else r.length>=2&&(e=parseFloat(r[0]),o=parseInt(r[1],10));var a;if(!(void 0!==e&&e>=0&&e<=1))return a=o?t._soundById(o):t._sounds[0],a?a._volume:0;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,r)}}),t;void 0===o&&(t._volume=e),o=t._getSoundIds(o);for(var u=0;u<o.length;u++)(a=t._soundById(o[u]))&&(a._volume=e,r[2]||t._stopFade(o[u]),t._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(e,n.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=e*n.volume()),t._emit("volume",a._id));return t},fade:function(e,o,t,r){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,o,t,r)}}),a;e=parseFloat(e),o=parseFloat(o),t=parseFloat(t),a.volume(e,r);for(var u=a._getSoundIds(r),i=0;i<u.length;i++){var d=a._soundById(u[i]);if(d){if(r||a._stopFade(u[i]),a._webAudio&&!d._muted){var _=n.ctx.currentTime,s=_+t/1e3;d._volume=e,d._node.gain.setValueAtTime(e,_),d._node.gain.linearRampToValueAtTime(o,s)}a._startFadeInterval(d,e,o,t,u[i],void 0===r)}}return a},_startFadeInterval:function(e,n,o,t,r,a){var u=this,i=n,d=o-n,_=Math.abs(d/.01),s=Math.max(4,_>0?t/_:t),l=Date.now();e._fadeTo=o,e._interval=setInterval(function(){var r=(Date.now()-l)/t;l=Date.now(),i+=d*r,i=Math.max(0,i),i=Math.min(1,i),i=Math.round(100*i)/100,u._webAudio?e._volume=i:u.volume(i,e._id,!0),a&&(u._volume=i),(o<n&&i<=o||o>n&&i>=o)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,u.volume(o,e._id),u._emit("fade",e._id))},s)},_stopFade:function(e){var o=this,t=o._soundById(e);return t&&t._interval&&(o._webAudio&&t._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(t._interval),t._interval=null,o.volume(t._fadeTo,e),t._fadeTo=null,o._emit("fade",e)),o},loop:function(){var e,n,o,t=this,r=arguments;if(0===r.length)return t._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(o=t._soundById(parseInt(r[0],10)))&&o._loop;e=r[0],t._loop=e}else 2===r.length&&(e=r[0],n=parseInt(r[1],10));for(var a=t._getSoundIds(n),u=0;u<a.length;u++)(o=t._soundById(a[u]))&&(o._loop=e,t._webAudio&&o._node&&o._node.bufferSource&&(o._node.bufferSource.loop=e,e&&(o._node.bufferSource.loopStart=o._start||0,o._node.bufferSource.loopEnd=o._stop)));return t},rate:function(){var e,o,t=this,r=arguments;if(0===r.length)o=t._sounds[0]._id;else if(1===r.length){var a=t._getSoundIds(),u=a.indexOf(r[0]);u>=0?o=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),o=parseInt(r[1],10));var i;if("number"!=typeof e)return i=t._soundById(o),i?i._rate:t._rate;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,r)}}),t;void 0===o&&(t._rate=e),o=t._getSoundIds(o);for(var d=0;d<o.length;d++)if(i=t._soundById(o[d])){t.playing(o[d])&&(i._rateSeek=t.seek(o[d]),i._playStart=t._webAudio?n.ctx.currentTime:i._playStart),i._rate=e,t._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(e,n.ctx.currentTime):i._node&&(i._node.playbackRate=e);var _=t.seek(o[d]),s=(t._sprite[i._sprite][0]+t._sprite[i._sprite][1])/1e3-_,l=1e3*s/Math.abs(i._rate);!t._endTimers[o[d]]&&i._paused||(t._clearTimer(o[d]),t._endTimers[o[d]]=setTimeout(t._ended.bind(t,i),l)),t._emit("rate",i._id)}return t},seek:function(){var e,o,t=this,r=arguments;if(0===r.length)o=t._sounds[0]._id;else if(1===r.length){var a=t._getSoundIds(),u=a.indexOf(r[0]);u>=0?o=parseInt(r[0],10):t._sounds.length&&(o=t._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),o=parseInt(r[1],10));if(void 0===o)return t;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"seek",action:function(){t.seek.apply(t,r)}}),t;var i=t._soundById(o);if(i){if(!("number"==typeof e&&e>=0)){if(t._webAudio){var d=t.playing(o)?n.ctx.currentTime-i._playStart:0,_=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(_+d*Math.abs(i._rate))}return i._node.currentTime}var s=t.playing(o);s&&t.pause(o,!0),i._seek=e,i._ended=!1,t._clearTimer(o),t._webAudio||!i._node||isNaN(i._node.duration)||(i._node.currentTime=e);var l=function(){t._emit("seek",o),s&&t.play(o,!0)};if(s&&!t._webAudio){var c=function(){t._playLock?setTimeout(c,0):l()};setTimeout(c,0)}else l()}return t},playing:function(e){var n=this;if("number"==typeof e){var o=n._soundById(e);return!!o&&!o._paused}for(var t=0;t<n._sounds.length;t++)if(!n._sounds[t]._paused)return!0;return!1},duration:function(e){var n=this,o=n._duration,t=n._soundById(e);return t&&(o=n._sprite[t._sprite][1]/1e3),o},state:function(){return this._state},unload:function(){for(var e=this,o=e._sounds,t=0;t<o.length;t++)o[t]._paused||e.stop(o[t]._id),e._webAudio||(e._clearSound(o[t]._node),o[t]._node.removeEventListener("error",o[t]._errorFn,!1),o[t]._node.removeEventListener(n._canPlayEvent,o[t]._loadFn,!1),n._releaseHtml5Audio(o[t]._node)),delete o[t]._node,e._clearTimer(o[t]._id);var a=n._howls.indexOf(e);a>=0&&n._howls.splice(a,1);var u=!0;for(t=0;t<n._howls.length;t++)if(n._howls[t]._src===e._src||e._src.indexOf(n._howls[t]._src)>=0){u=!1;break}return r&&u&&delete r[e._src],n.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,n,o,t){var r=this,a=r["_on"+e];return"function"==typeof n&&a.push(t?{id:o,fn:n,once:t}:{id:o,fn:n}),r},off:function(e,n,o){var t=this,r=t["_on"+e],a=0;if("number"==typeof n&&(o=n,n=null),n||o)for(a=0;a<r.length;a++){var u=o===r[a].id;if(n===r[a].fn&&u||!n&&u){r.splice(a,1);break}}else if(e)t["_on"+e]=[];else{var i=Object.keys(t);for(a=0;a<i.length;a++)0===i[a].indexOf("_on")&&Array.isArray(t[i[a]])&&(t[i[a]]=[])}return t},once:function(e,n,o){var t=this;return t.on(e,n,o,1),t},_emit:function(e,n,o){for(var t=this,r=t["_on"+e],a=r.length-1;a>=0;a--)r[a].id&&r[a].id!==n&&"load"!==e||(setTimeout(function(e){e.call(this,n,o)}.bind(t,r[a].fn),0),r[a].once&&t.off(e,r[a].fn,r[a].id));return t._loadQueue(e),t},_loadQueue:function(e){var n=this;if(n._queue.length>0){var o=n._queue[0];o.event===e&&(n._queue.shift(),n._loadQueue()),e||o.action()}return n},_ended:function(e){var o=this,t=e._sprite;if(!o._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(o._ended.bind(o,e),100),o;var r=!(!e._loop&&!o._sprite[t][2]);if(o._emit("end",e._id),!o._webAudio&&r&&o.stop(e._id,!0).play(e._id),o._webAudio&&r){o._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=n.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);o._endTimers[e._id]=setTimeout(o._ended.bind(o,e),a)}return o._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,o._clearTimer(e._id),o._cleanBuffer(e._node),n._autoSuspend()),o._webAudio||r||o.stop(e._id,!0),o},_clearTimer:function(e){var n=this;if(n._endTimers[e]){if("function"!=typeof n._endTimers[e])clearTimeout(n._endTimers[e]);else{var o=n._soundById(e);o&&o._node&&o._node.removeEventListener("ended",n._endTimers[e],!1)}delete n._endTimers[e]}return n},_soundById:function(e){for(var n=this,o=0;o<n._sounds.length;o++)if(e===n._sounds[o]._id)return n._sounds[o];return null},_inactiveSound:function(){var e=this;e._drain();for(var n=0;n<e._sounds.length;n++)if(e._sounds[n]._ended)return e._sounds[n].reset();return new t(e)},_drain:function(){var e=this,n=e._pool,o=0,t=0;if(!(e._sounds.length<n)){for(t=0;t<e._sounds.length;t++)e._sounds[t]._ended&&o++;for(t=e._sounds.length-1;t>=0;t--){if(o<=n)return;e._sounds[t]._ended&&(e._webAudio&&e._sounds[t]._node&&e._sounds[t]._node.disconnect(0),e._sounds.splice(t,1),o--)}}},_getSoundIds:function(e){var n=this;if(void 0===e){for(var o=[],t=0;t<n._sounds.length;t++)o.push(n._sounds[t]._id);return o}return[e]},_refreshBuffer:function(e){var o=this;return e._node.bufferSource=n.ctx.createBufferSource(),e._node.bufferSource.buffer=r[o._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,n.ctx.currentTime),o},_cleanBuffer:function(e){var o=this,t=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=n._scratchBuffer}catch(e){}return e.bufferSource=null,o},_clearSound:function(e){/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var t=function(e){this._parent=e,this.init()};t.prototype={init:function(){var e=this,o=e._parent;return e._muted=o._muted,e._loop=o._loop,e._volume=o._volume,e._rate=o._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,o._sounds.push(e),e.create(),e},create:function(){var e=this,o=e._parent,t=n._muted||e._muted||e._parent._muted?0:e._volume;return o._webAudio?(e._node=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),e._node.gain.setValueAtTime(t,n.ctx.currentTime),e._node.paused=!0,e._node.connect(n.masterGain)):n.noAudio||(e._node=n._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(n._canPlayEvent,e._loadFn,!1),e._node.src=o._src,e._node.preload="auto",e._node.volume=t*n.volume(),e._node.load()),e},reset:function(){var e=this,o=e._parent;return e._muted=o._muted,e._loop=o._loop,e._volume=o._volume,e._rate=o._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,o=e._parent;o._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(o._sprite).length&&(o._sprite={__default:[0,1e3*o._duration]}),"loaded"!==o._state&&(o._state="loaded",o._emit("load"),o._loadQueue()),e._node.removeEventListener(n._canPlayEvent,e._loadFn,!1)}};var r={},a=function(e){var n=e._src;if(r[n])return e._duration=r[n].duration,void d(e);if(/^data:[^;]+;base64,/.test(n)){for(var o=atob(n.split(",")[1]),t=new Uint8Array(o.length),a=0;a<o.length;++a)t[a]=o.charCodeAt(a);i(t.buffer,e)}else{var _=new XMLHttpRequest;_.open("GET",n,!0),_.withCredentials=e._xhrWithCredentials,_.responseType="arraybuffer",_.onload=function(){var n=(_.status+"")[0];if("0"!==n&&"2"!==n&&"3"!==n)return void e._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");i(_.response,e)},_.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete r[n],e.load())},u(_)}},u=function(e){try{e.send()}catch(n){e.onerror()}},i=function(e,o){var t=function(){o._emit("loaderror",null,"Decoding audio data failed.")},a=function(e){e&&o._sounds.length>0?(r[o._src]=e,d(o,e)):t()};"undefined"!=typeof Promise&&1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(e).then(a).catch(t):n.ctx.decodeAudioData(e,a,t)},d=function(e,n){n&&!e._duration&&(e._duration=n.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},_=function(){if(n.usingWebAudio){try{"undefined"!=typeof AudioContext?n.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch(e){n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),o=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),t=o?parseInt(o[1],10):null;if(e&&t&&t<9){var r=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());(n._navigator&&n._navigator.standalone&&!r||n._navigator&&!n._navigator.standalone&&!r)&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:n,Howl:o}}),"undefined"!=typeof exports&&(exports.Howler=n,exports.Howl=o),"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=n,window.Howl=o,window.Sound=t):"undefined"!=typeof global&&(global.HowlerGlobal=e,global.Howler=n,global.Howl=o,global.Sound=t)}();
/*! Spatial Plugin */
!function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var t=n._howls.length-1;t>=0;t--)n._howls[t].stereo(e);return n},HowlerGlobal.prototype.pos=function(e,n,t){var r=this;return r.ctx&&r.ctx.listener?(n="number"!=typeof n?r._pos[1]:n,t="number"!=typeof t?r._pos[2]:t,"number"!=typeof e?r._pos:(r._pos=[e,n,t],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,n,t,r,o,i){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return n="number"!=typeof n?s[1]:n,t="number"!=typeof t?s[2]:t,r="number"!=typeof r?s[3]:r,o="number"!=typeof o?s[4]:o,i="number"!=typeof i?s[5]:i,"number"!=typeof e?s:(a._orientation=[e,n,t,r,o,i],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(e,n,t,r,o,i),a)},Howl.prototype.init=function(e){return function(n){var t=this;return t._orientation=n.orientation||[1,0,0],t._stereo=n.stereo||null,t._pos=n.pos||null,t._pannerAttr={coneInnerAngle:void 0!==n.coneInnerAngle?n.coneInnerAngle:360,coneOuterAngle:void 0!==n.coneOuterAngle?n.coneOuterAngle:360,coneOuterGain:void 0!==n.coneOuterGain?n.coneOuterGain:0,distanceModel:void 0!==n.distanceModel?n.distanceModel:"inverse",maxDistance:void 0!==n.maxDistance?n.maxDistance:1e4,panningModel:void 0!==n.panningModel?n.panningModel:"HRTF",refDistance:void 0!==n.refDistance?n.refDistance:1,rolloffFactor:void 0!==n.rolloffFactor?n.rolloffFactor:1},t._onstereo=n.onstereo?[{fn:n.onstereo}]:[],t._onpos=n.onpos?[{fn:n.onpos}]:[],t._onorientation=n.onorientation?[{fn:n.onorientation}]:[],e.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,t){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(n,t)}}),r;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t){if("number"!=typeof n)return r._stereo;r._stereo=n,r._pos=[n,0,0]}for(var i=r._getSoundIds(t),a=0;a<i.length;a++){var s=r._soundById(i[a]);if(s){if("number"!=typeof n)return s._stereo;s._stereo=n,s._pos=[n,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,o),"spatial"===o?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(n,0,0):s._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(n,t,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(n,t,r,o)}}),i;if(t="number"!=typeof t?0:t,r="number"!=typeof r?-.5:r,void 0===o){if("number"!=typeof n)return i._pos;i._pos=[n,t,r]}for(var a=i._getSoundIds(o),s=0;s<a.length;s++){var p=i._soundById(a[s]);if(p){if("number"!=typeof n)return p._pos;p._pos=[n,t,r],p._node&&(p._panner&&!p._panner.pan||e(p,"spatial"),void 0!==p._panner.positionX?(p._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),p._panner.positionY.setValueAtTime(t,Howler.ctx.currentTime),p._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):p._panner.setPosition(n,t,r)),i._emit("pos",p._id)}}return i},Howl.prototype.orientation=function(n,t,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(n,t,r,o)}}),i;if(t="number"!=typeof t?i._orientation[1]:t,r="number"!=typeof r?i._orientation[2]:r,void 0===o){if("number"!=typeof n)return i._orientation;i._orientation=[n,t,r]}for(var a=i._getSoundIds(o),s=0;s<a.length;s++){var p=i._soundById(a[s]);if(p){if("number"!=typeof n)return p._orientation;p._orientation=[n,t,r],p._node&&(p._panner||(p._pos||(p._pos=i._pos||[0,0,-.5]),e(p,"spatial")),void 0!==p._panner.orientationX?(p._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),p._panner.orientationY.setValueAtTime(t,Howler.ctx.currentTime),p._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):p._panner.setOrientation(n,t,r)),i._emit("orientation",p._id)}}return i},Howl.prototype.pannerAttr=function(){var n,t,r,o=this,i=arguments;if(!o._webAudio)return o;if(0===i.length)return o._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return r=o._soundById(parseInt(i[0],10)),r?r._pannerAttr:o._pannerAttr;n=i[0],void 0===t&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==n.pannerAttr.coneInnerAngle?n.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==n.pannerAttr.coneOuterAngle?n.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==n.pannerAttr.coneOuterGain?n.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==n.pannerAttr.distanceModel?n.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==n.pannerAttr.maxDistance?n.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==n.pannerAttr.refDistance?n.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==n.pannerAttr.rolloffFactor?n.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==n.pannerAttr.panningModel?n.pannerAttr.panningModel:o._panningModel})}else 2===i.length&&(n=i[0],t=parseInt(i[1],10));for(var a=o._getSoundIds(t),s=0;s<a.length;s++)if(r=o._soundById(a[s])){var p=r._pannerAttr;p={coneInnerAngle:void 0!==n.coneInnerAngle?n.coneInnerAngle:p.coneInnerAngle,coneOuterAngle:void 0!==n.coneOuterAngle?n.coneOuterAngle:p.coneOuterAngle,coneOuterGain:void 0!==n.coneOuterGain?n.coneOuterGain:p.coneOuterGain,distanceModel:void 0!==n.distanceModel?n.distanceModel:p.distanceModel,maxDistance:void 0!==n.maxDistance?n.maxDistance:p.maxDistance,refDistance:void 0!==n.refDistance?n.refDistance:p.refDistance,rolloffFactor:void 0!==n.rolloffFactor?n.rolloffFactor:p.rolloffFactor,panningModel:void 0!==n.panningModel?n.panningModel:p.panningModel};var c=r._panner;c?(c.coneInnerAngle=p.coneInnerAngle,c.coneOuterAngle=p.coneOuterAngle,c.coneOuterGain=p.coneOuterGain,c.distanceModel=p.distanceModel,c.maxDistance=p.maxDistance,c.refDistance=p.refDistance,c.rolloffFactor=p.rolloffFactor,c.panningModel=p.panningModel):(r._pos||(r._pos=o._pos||[0,0,-.5]),e(r,"spatial"))}return o},Sound.prototype.init=function(e){return function(){var n=this,t=n._parent;n._orientation=t._orientation,n._stereo=t._stereo,n._pos=t._pos,n._pannerAttr=t._pannerAttr,e.call(this),n._stereo?t.stereo(n._stereo):n._pos&&t.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var n=this,t=n._parent;return n._orientation=t._orientation,n._stereo=t._stereo,n._pos=t._pos,n._pannerAttr=t._pannerAttr,n._stereo?t.stereo(n._stereo):n._pos?t.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,t._refreshBuffer(n)),e.call(this)}}(Sound.prototype.reset);var e=function(e,n){n=n||"spatial","spatial"===n?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}();
!function(e,i){"use strict";var t={item:3,autoWidth:!1,slideMove:1,slideMargin:10,addClass:"",mode:"slide",useCSS:!0,cssEasing:"ease",easing:"linear",speed:400,auto:!1,pauseOnHover:!1,loop:!1,slideEndAnimation:!0,pause:2e3,keyPress:!1,controls:!0,prevHtml:"",nextHtml:"",rtl:!1,adaptiveHeight:!1,vertical:!1,verticalHeight:500,vThumbWidth:100,thumbItem:10,pager:!0,gallery:!1,galleryMargin:5,thumbMargin:5,currentPagerPosition:"middle",enableTouch:!0,enableDrag:!0,freeMove:!0,swipeThreshold:40,responsive:[],onBeforeStart:function(e){},onSliderLoad:function(e){},onBeforeSlide:function(e,i){},onAfterSlide:function(e,i){},onBeforeNextSlide:function(e,i){},onBeforePrevSlide:function(e,i){}};e.fn.lightSlider=function(i){if(0===this.length)return this;if(this.length>1)return this.each(function(){e(this).lightSlider(i)}),this;var n={},l=e.extend(!0,{},t,i),a={},s=this;n.$el=this,"fade"===l.mode&&(l.vertical=!1);var o=s.children(),r=e(window).width(),d=null,c=0,u=0,f=!1,h=0,g="",v=0,p=!0===l.vertical?"height":"width",m=!0===l.vertical?"margin-bottom":"margin-right",S=0,b=0,C=0,M=0,T=null,x="ontouchstart"in document.documentElement,w={chbreakpoint:function(){if(r=e(window).width(),l.responsive.length){var i;if(!1===l.autoWidth&&(i=l.item),r<l.responsive[0].breakpoint)for(var t=0;t<l.responsive.length;t++)r<l.responsive[t].breakpoint&&(l.responsive[t].breakpoint,d=l.responsive[t]);if(null!=d)for(var n in d.settings)d.settings.hasOwnProperty(n)&&(void 0!==a[n]&&null!==a[n]||(a[n]=l[n]),l[n]=d.settings[n]);if(!e.isEmptyObject(a)&&r>l.responsive[0].breakpoint)for(var s in a)a.hasOwnProperty(s)&&(l[s]=a[s]);!1===l.autoWidth&&S>0&&C>0&&i!==l.item&&(v=Math.round(S/((C+l.slideMargin)*l.slideMove)))}},calSW:function(){!1===l.autoWidth&&(C=(h-(l.item*l.slideMargin-l.slideMargin))/l.item)},calWidth:function(e){var i=!0===e?g.find(".lslide").length:o.length;if(!1===l.autoWidth)u=i*(C+l.slideMargin);else{u=0;for(var t=0;t<i;t++)u+=parseInt(o.eq(t).width())+l.slideMargin}return u}};return(n={doCss:function(){return!(!l.useCSS||!function(){for(var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],i=document.documentElement,t=0;t<e.length;t++)if(e[t]in i.style)return!0}())},keyPress:function(){l.keyPress&&e(document).on("keyup.lightslider",function(i){e(":focus").is("input, textarea")||(i.preventDefault?i.preventDefault():i.returnValue=!1,37===i.keyCode?s.goToPrevSlide():39===i.keyCode&&s.goToNextSlide())})},controls:function(){l.controls&&(s.after('<div class="lSAction"><a class="lSPrev">'+l.prevHtml+'</a><a class="lSNext">'+l.nextHtml+"</a></div>"),l.autoWidth?w.calWidth(!1)<h&&g.find(".lSAction").hide():c<=l.item&&g.find(".lSAction").hide(),g.find(".lSAction a").on("click",function(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,"lSPrev"===e(this).attr("class")?s.goToPrevSlide():s.goToNextSlide(),!1}))},initialStyle:function(){var e=this;"fade"===l.mode&&(l.autoWidth=!1,l.slideEndAnimation=!1),l.auto&&(l.slideEndAnimation=!1),l.autoWidth&&(l.slideMove=1,l.item=1),l.loop&&(l.slideMove=1,l.freeMove=!1),l.onBeforeStart.call(this,s),w.chbreakpoint(),s.addClass("lightSlider").wrap('<div class="lSSlideOuter '+l.addClass+'"><div class="lSSlideWrapper"></div></div>'),g=s.parent(".lSSlideWrapper"),!0===l.rtl&&g.parent().addClass("lSrtl"),l.vertical?(g.parent().addClass("vertical"),h=l.verticalHeight,g.css("height",h+"px")):h=s.outerWidth(),o.addClass("lslide"),!0===l.loop&&"slide"===l.mode&&(w.calSW(),w.clone=function(){if(w.calWidth(!0)>h){for(var i=0,t=0,n=0;n<o.length&&(t++,!((i+=parseInt(s.find(".lslide").eq(n).width())+l.slideMargin)>=h+l.slideMargin));n++);var a=!0===l.autoWidth?t:l.item;if(a<s.find(".clone.left").length)for(var r=0;r<s.find(".clone.left").length-a;r++)o.eq(r).remove();if(a<s.find(".clone.right").length)for(var d=o.length-1;d>o.length-1-s.find(".clone.right").length;d--)v--,o.eq(d).remove();for(var c=s.find(".clone.right").length;c<a;c++)s.find(".lslide").eq(c).clone().removeClass("lslide").addClass("clone right").appendTo(s),v++;for(var u=s.find(".lslide").length-s.find(".clone.left").length;u>s.find(".lslide").length-a;u--)s.find(".lslide").eq(u-1).clone().removeClass("lslide").addClass("clone left").prependTo(s);o=s.children()}else o.hasClass("clone")&&(s.find(".clone").remove(),e.move(s,0))},w.clone()),w.sSW=function(){c=o.length,!0===l.rtl&&!1===l.vertical&&(m="margin-left"),!1===l.autoWidth&&o.css(p,C+"px"),o.css(m,l.slideMargin+"px"),u=w.calWidth(!1),s.css(p,u+"px"),!0===l.loop&&"slide"===l.mode&&!1===f&&(v=s.find(".clone.left").length)},w.calL=function(){o=s.children(),c=o.length},this.doCss()&&g.addClass("usingCss"),w.calL(),"slide"===l.mode?(w.calSW(),w.sSW(),!0===l.loop&&(S=e.slideValue(),this.move(s,S)),!1===l.vertical&&this.setHeight(s,!1)):(this.setHeight(s,!0),s.addClass("lSFade"),this.doCss()||(o.fadeOut(0),o.eq(v).fadeIn(0))),!0===l.loop&&"slide"===l.mode?o.eq(v).addClass("active"):o.first().addClass("active")},pager:function(){var e=this;if(w.createPager=function(){M=(h-(l.thumbItem*l.thumbMargin-l.thumbMargin))/l.thumbItem;var i=g.find(".lslide"),t=g.find(".lslide").length,n=0,a="",o=0;for(n=0;n<t;n++){"slide"===l.mode&&(l.autoWidth?o+=(parseInt(i.eq(n).width())+l.slideMargin)*l.slideMove:o=n*((C+l.slideMargin)*l.slideMove));var r=i.eq(n*l.slideMove).attr("data-thumb");if(!0===l.gallery?a+='<li style="width:100%;'+p+":"+M+"px;"+m+":"+l.thumbMargin+'px"><a href="#"><img src="'+r+'" /></a></li>':a+='<li><a href="#">'+(n+1)+"</a></li>","slide"===l.mode&&o>=u-h-l.slideMargin){n+=1;var d=2;l.autoWidth&&(a+='<li><a href="#">'+(n+1)+"</a></li>",d=1),n<d?(a=null,g.parent().addClass("noPager")):g.parent().removeClass("noPager");break}}var c=g.parent();c.find(".lSPager").html(a),!0===l.gallery&&(!0===l.vertical&&c.find(".lSPager").css("width",l.vThumbWidth+"px"),b=n*(l.thumbMargin+M)+.5,c.find(".lSPager").css({property:b+"px","transition-duration":l.speed+"ms"}),!0===l.vertical&&g.parent().css("padding-right",l.vThumbWidth+l.galleryMargin+"px"),c.find(".lSPager").css(p,b+"px"));var f=c.find(".lSPager").find("li");f.first().addClass("active"),f.on("click",function(){return!0===l.loop&&"slide"===l.mode?v+=f.index(this)-c.find(".lSPager").find("li.active").index():v=f.index(this),s.mode(!1),!0===l.gallery&&e.slideThumb(),!1})},l.pager){var i="lSpg";l.gallery&&(i="lSGallery"),g.after('<ul class="lSPager '+i+'"></ul>');var t=l.vertical?"margin-left":"margin-top";g.parent().find(".lSPager").css(t,l.galleryMargin+"px"),w.createPager()}setTimeout(function(){w.init()},0)},setHeight:function(e,i){var t=null,n=this;t=l.loop?e.children(".lslide ").first():e.children().first();var a=function(){var n=t.outerHeight(),l=0,a=n;i&&(n=0,l=100*a/h),e.css({height:n+"px","padding-bottom":l+"%"})};a(),t.find("img").length?t.find("img")[0].complete?(a(),T||n.auto()):t.find("img").load(function(){setTimeout(function(){a(),T||n.auto()},100)}):T||n.auto()},active:function(e,i){this.doCss()&&"fade"===l.mode&&g.addClass("on");var t,n,a=0;v*l.slideMove<c?(e.removeClass("active"),this.doCss()||"fade"!==l.mode||!1!==i||e.fadeOut(l.speed),a=!0===i?v:v*l.slideMove,!0===i&&(n=(t=e.length)-1,a+1>=t&&(a=n)),!0===l.loop&&"slide"===l.mode&&(a=!0===i?v-s.find(".clone.left").length:v*l.slideMove,!0===i&&(n=(t=e.length)-1,a+1===t?a=n:a+1>t&&(a=0))),this.doCss()||"fade"!==l.mode||!1!==i||e.eq(a).fadeIn(l.speed),e.eq(a).addClass("active")):(e.removeClass("active"),e.eq(e.length-1).addClass("active"),this.doCss()||"fade"!==l.mode||!1!==i||(e.fadeOut(l.speed),e.eq(a).fadeIn(l.speed)))},move:function(e,i){!0===l.rtl&&(i=-i),this.doCss()?!0===l.vertical?e.css({transform:"translate3d(0px, "+-i+"px, 0px)","-webkit-transform":"translate3d(0px, "+-i+"px, 0px)"}):e.css({transform:"translate3d("+-i+"px, 0px, 0px)","-webkit-transform":"translate3d("+-i+"px, 0px, 0px)"}):!0===l.vertical?e.css("position","relative").animate({top:-i+"px"},l.speed,l.easing):e.css("position","relative").animate({left:-i+"px"},l.speed,l.easing);var t=g.parent().find(".lSPager").find("li");this.active(t,!0)},fade:function(){this.active(o,!1);var e=g.parent().find(".lSPager").find("li");this.active(e,!0)},slide:function(){var e=this;w.calSlide=function(){u>h&&(S=e.slideValue(),e.active(o,!1),S>u-h-l.slideMargin?S=u-h-l.slideMargin:S<0&&(S=0),e.move(s,S),!0===l.loop&&"slide"===l.mode&&(v>=c-s.find(".clone.left").length/l.slideMove&&e.resetSlide(s.find(".clone.left").length),0===v&&e.resetSlide(g.find(".lslide").length)))},w.calSlide()},resetSlide:function(e){var i=this;g.find(".lSAction a").addClass("disabled"),setTimeout(function(){v=e,g.css("transition-duration","0ms"),S=i.slideValue(),i.active(o,!1),n.move(s,S),setTimeout(function(){g.css("transition-duration",l.speed+"ms"),g.find(".lSAction a").removeClass("disabled")},50)},l.speed+100)},slideValue:function(){var e=0;if(!1===l.autoWidth)e=v*((C+l.slideMargin)*l.slideMove);else{e=0;for(var i=0;i<v;i++)e+=parseInt(o.eq(i).width())+l.slideMargin}return e},slideThumb:function(){var e;switch(l.currentPagerPosition){case"left":e=0;break;case"middle":e=h/2-M/2;break;case"right":e=h-M}var i=v-s.find(".clone.left").length,t=g.parent().find(".lSPager");"slide"===l.mode&&!0===l.loop&&(i>=t.children().length?i=0:i<0&&(i=t.children().length));var n=i*(M+l.thumbMargin)-e;n+h>b&&(n=b-h-l.thumbMargin),n<0&&(n=0),this.move(t,n)},auto:function(){l.auto&&(clearInterval(T),T=setInterval(function(){s.goToNextSlide()},l.pause))},pauseOnHover:function(){var i=this;l.auto&&l.pauseOnHover&&(g.on("mouseenter",function(){e(this).addClass("ls-hover"),s.pause(),l.auto=!0}),g.on("mouseleave",function(){e(this).removeClass("ls-hover"),g.find(".lightSlider").hasClass("lsGrabbing")||i.auto()}))},touchMove:function(e,i){if(g.css("transition-duration","0ms"),"slide"===l.mode){var t=S-(e-i);if(t>=u-h-l.slideMargin)if(!1===l.freeMove)t=u-h-l.slideMargin;else{var n=u-h-l.slideMargin;t=n+(t-n)/5}else t<0&&(!1===l.freeMove?t=0:t/=5);this.move(s,t)}},touchEnd:function(e){if(g.css("transition-duration",l.speed+"ms"),"slide"===l.mode){var i=!1,t=!0;(S-=e)>u-h-l.slideMargin?(S=u-h-l.slideMargin,!1===l.autoWidth&&(i=!0)):S<0&&(S=0);var n=function(e){var t=0;if(i||e&&(t=1),l.autoWidth)for(var n=0,a=0;a<o.length&&(n+=parseInt(o.eq(a).width())+l.slideMargin,v=a+t,!(n>=S));a++);else{var s=S/((C+l.slideMargin)*l.slideMove);v=parseInt(s)+t,S>=u-h-l.slideMargin&&s%1!=0&&v++}};e>=l.swipeThreshold?(n(!1),t=!1):e<=-l.swipeThreshold&&(n(!0),t=!1),s.mode(t),this.slideThumb()}else e>=l.swipeThreshold?s.goToPrevSlide():e<=-l.swipeThreshold&&s.goToNextSlide()},enableDrag:function(){var i=this;if(!x){var t=0,n=0,a=!1;g.find(".lightSlider").addClass("lsGrab"),g.on("mousedown",function(i){if(u<h&&0!==u)return!1;"lSPrev"!==e(i.target).attr("class")&&"lSNext"!==e(i.target).attr("class")&&(t=!0===l.vertical?i.pageY:i.pageX,a=!0,i.preventDefault?i.preventDefault():i.returnValue=!1,g.scrollLeft+=1,g.scrollLeft-=1,g.find(".lightSlider").removeClass("lsGrab").addClass("lsGrabbing"),clearInterval(T))}),e(window).on("mousemove",function(e){a&&(n=!0===l.vertical?e.pageY:e.pageX,i.touchMove(n,t))}),e(window).on("mouseup",function(s){if(a){g.find(".lightSlider").removeClass("lsGrabbing").addClass("lsGrab"),a=!1;var o=(n=!0===l.vertical?s.pageY:s.pageX)-t;Math.abs(o)>=l.swipeThreshold&&e(window).on("click.ls",function(i){i.preventDefault?i.preventDefault():i.returnValue=!1,i.stopImmediatePropagation(),i.stopPropagation(),e(window).off("click.ls")}),i.touchEnd(o)}})}},enableTouch:function(){var e=this;if(x){var i={},t={};g.on("touchstart",function(e){t=e.originalEvent.targetTouches[0],i.pageX=e.originalEvent.targetTouches[0].pageX,i.pageY=e.originalEvent.targetTouches[0].pageY,clearInterval(T)}),g.on("touchmove",function(n){if(u<h&&0!==u)return!1;var a=n.originalEvent;t=a.targetTouches[0];var s=Math.abs(t.pageX-i.pageX),o=Math.abs(t.pageY-i.pageY);!0===l.vertical?(3*o>s&&n.preventDefault(),e.touchMove(t.pageY,i.pageY)):(3*s>o&&n.preventDefault(),e.touchMove(t.pageX,i.pageX))}),g.on("touchend",function(){if(u<h&&0!==u)return!1;var n;n=!0===l.vertical?t.pageY-i.pageY:t.pageX-i.pageX,e.touchEnd(n)})}},build:function(){var i=this;i.initialStyle(),this.doCss()&&(!0===l.enableTouch&&i.enableTouch(),!0===l.enableDrag&&i.enableDrag()),e(window).on("focus",function(){i.auto()}),e(window).on("blur",function(){clearInterval(T)}),i.pager(),i.pauseOnHover(),i.controls(),i.keyPress()}}).build(),w.init=function(){w.chbreakpoint(),!0===l.vertical?(h=l.item>1?l.verticalHeight:o.outerHeight(),g.css("height",h+"px")):h=g.outerWidth(),!0===l.loop&&"slide"===l.mode&&w.clone(),w.calL(),"slide"===l.mode&&s.removeClass("lSSlide"),"slide"===l.mode&&(w.calSW(),w.sSW()),setTimeout(function(){"slide"===l.mode&&s.addClass("lSSlide")},1e3),l.pager&&w.createPager(),!0===l.adaptiveHeight&&!1===l.vertical&&s.css("height",o.eq(v).outerHeight(!0)),!1===l.adaptiveHeight&&("slide"===l.mode?!1===l.vertical?n.setHeight(s,!1):n.auto():n.setHeight(s,!0)),!0===l.gallery&&n.slideThumb(),"slide"===l.mode&&n.slide(),!1===l.autoWidth?o.length<=l.item?g.find(".lSAction").hide():g.find(".lSAction").show():w.calWidth(!1)<h&&0!==u?g.find(".lSAction").hide():g.find(".lSAction").show()},s.goToPrevSlide=function(){if(v>0)l.onBeforePrevSlide.call(this,s,v),v--,s.mode(!1),!0===l.gallery&&n.slideThumb();else if(!0===l.loop){if(l.onBeforePrevSlide.call(this,s,v),"fade"===l.mode)v=parseInt((c-1)/l.slideMove);s.mode(!1),!0===l.gallery&&n.slideThumb()}else!0===l.slideEndAnimation&&(s.addClass("leftEnd"),setTimeout(function(){s.removeClass("leftEnd")},400))},s.goToNextSlide=function(){var e=!0;"slide"===l.mode&&(e=n.slideValue()<u-h-l.slideMargin);v*l.slideMove<c-l.slideMove&&e?(l.onBeforeNextSlide.call(this,s,v),v++,s.mode(!1),!0===l.gallery&&n.slideThumb()):!0===l.loop?(l.onBeforeNextSlide.call(this,s,v),v=0,s.mode(!1),!0===l.gallery&&n.slideThumb()):!0===l.slideEndAnimation&&(s.addClass("rightEnd"),setTimeout(function(){s.removeClass("rightEnd")},400))},s.mode=function(e){!0===l.adaptiveHeight&&!1===l.vertical&&s.css("height",o.eq(v).outerHeight(!0)),!1===f&&("slide"===l.mode?n.doCss()&&(s.addClass("lSSlide"),""!==l.speed&&g.css("transition-duration",l.speed+"ms"),""!==l.cssEasing&&g.css("transition-timing-function",l.cssEasing)):n.doCss()&&(""!==l.speed&&s.css("transition-duration",l.speed+"ms"),""!==l.cssEasing&&s.css("transition-timing-function",l.cssEasing))),e||l.onBeforeSlide.call(this,s,v),"slide"===l.mode?n.slide():n.fade(),g.hasClass("ls-hover")||n.auto(),setTimeout(function(){e||l.onAfterSlide.call(this,s,v)},l.speed),f=!0},s.play=function(){s.goToNextSlide(),l.auto=!0,n.auto()},s.pause=function(){l.auto=!1,clearInterval(T)},s.refresh=function(){w.init()},s.getCurrentSlideCount=function(){var e=v;if(l.loop){var i=g.find(".lslide").length,t=s.find(".clone.left").length;e=v<=t-1?i+(v-t):v>=i+t?v-i-t:v-t}return e+1},s.getTotalSlideCount=function(){return g.find(".lslide").length},s.goToSlide=function(e){v=l.loop?e+s.find(".clone.left").length-1:e,s.mode(!1),!0===l.gallery&&n.slideThumb()},s.destroy=function(){s.lightSlider&&(s.goToPrevSlide=function(){},s.goToNextSlide=function(){},s.mode=function(){},s.play=function(){},s.pause=function(){},s.refresh=function(){},s.getCurrentSlideCount=function(){},s.getTotalSlideCount=function(){},s.goToSlide=function(){},s.lightSlider=null,w={init:function(){}},s.parent().parent().find(".lSAction, .lSPager").remove(),s.removeClass("lightSlider lSFade lSSlide lsGrab lsGrabbing leftEnd right").removeAttr("style").unwrap().unwrap(),s.children().removeAttr("style"),o.removeClass("lslide active"),s.find(".clone").remove(),o=null,T=null,f=!1,v=0)},setTimeout(function(){l.onSliderLoad.call(this,s)},10),e(window).on("resize orientationchange",function(e){setTimeout(function(){e.preventDefault?e.preventDefault():e.returnValue=!1,w.init()},200)}),this}}(jQuery);
var JTYPE ={
    RANDOM: "state_handler",
    FRIEND: (typeof __fb_server != "undefined" && __fb_server == "test") ? "multi_handler" : "multi_handler"
};
//var N_isFull = false;
var N_isMeLeave = false;
var Network = {
    room : undefined,
    matchingLayer : undefined,
    standbyLayer : undefined,
    resultLayer : undefined,
    getdata : null,
    isShowError : false,
    errorMessage : "",
    initRoom: function(type,callback, client, requestObj){
       
        if(false) console.log("type ",type);
        if(false) console.log("client ",client);
        if(false) console.log("requestObj ",requestObj);
        
//        N_isFull = false;
        N_isMeLeave = false;
        Network.getdata = null;
        Network.isShowError = false;
        Network.errorMessage = "";
        room = requestObj == null ? client.join(type):client.join(type, requestObj);
        
        room.onJoin.add(function() {
            if(callback){
                callback(client);
            }
        });

        room.onData.add(function(data) {
        //room.onMessage.add(function(data) {
            N_GameCallback(data);
//            var e = {
//                "action": data['action'],
//                "message":data
//            };
//            Network.getdata = e;
           
        });
        
        
        room.onUpdate.add(function(state) {
        //room.onStateChange.add(function(state) {

//            var user_count = 0;
//            for(var i in state.players){
//                user_count++;
//                
//            }
//            if(false) console.log("user_count is "+user_count);
//            if(user_count == 2){
//                N_isFull = true;
//            }
//            if(N_isFull && user_count == 1){
//                Network.leaveOppo();
//            }
        });

        room.onLeave.add(function(){
            if(false) console.log("room.onLeave.add");
            if(!N_isMeLeave){
                if(false) console.log("N_isMeLeave room.onLeave.add "+N_isMeLeave);
                Network.leaveOppo();
            }
        });

        room.onError.add(function() {
            if(false) console.log("room.onError");
            Network.leaveOppo();
            
        });
        return room;
    }
    
    //user leave room
    ,leaveRoom: function (){
//        if(false) console.log("leaveRoom");
//        if(false) console.log(room);
        N_isMeLeave = true;
        if(typeof room != 'undefined') room.leave();
    }
    
    //user left the game(room)
    ,leaveOppo: function(data){
        var self = this;
        self.isShowError = true;
        self.errorMessage = "The other party left the room.";
        //N_Error(1);
        
    }
    
    ,multiSendData: function (actionName, data){
        switch(actionName){
            case '':    //oppoJoin   
                break;
        }
        room.send(data);
    }
}

//////////////////////////////////////////////
//20200421  Neel Code
//////////////////////////////////////////////
var ISFINISH = {
    NONE : 0,
    FINISH:1,
    TIMEOVER:2
};
var N_POPUP_STATUS = {
    READY : 0,
    SEARCHING : 1,  //    
    SEARCHING_TIMEOUT : 2,  //    . 
    COUNTDOWN : 3, //3 , 2, 1 start!    //3 2 1  
    GAMESTART : 4,  // . if(typeof room != 'undefined')
    LEAVE : 5,
    BUTTONS : 22,
    RESULT : 23,
    TIMEOVER : 24,
    
    GOGAME:100
};
var CLIENT = null;
var _N_JOINTYPE = JTYPE.RANDOM;
var NTID = {
    GAME_JOIN: "GAME_JOIN",//status = 1
    GAME_LEAVE: "GAME_LEAVE",//status = -10
    GAME_OPPOJOIN: "oppoJoin",//status = 2
    GAME_GAMESTART: "gameStart",//status = 3
    GAME_PLAYING: "gamePlaying",//status = 4
    GAME_FINISH_READY: "gameFinishReady",//status = 5
    GAME_TIMEOVER_READY: "timeOverReady",//status = 6
    GAME_FINISH: "gameFinish",//status = 7
    GAME_ERROR: "GAME_ERROR",//status = -100
    GAME_ERROR_WIN : "gameError"

};

//var clientaddr = 'wss://gameserver.mini-games.io';
var _N_ROOM_URL = '';
var _N_DM = 'wss://multi.emojigames.io:';
var _N_DEFAULT_ROOM_URL = _N_ROOM_URL = ''; //(__fb_server != "dev") ? (__fb_server !="qa") ? _N_DM+'2461' : _N_DM+'2463' : _N_DM+'2462';
// var _N_FRIEND_ROOM_URL = __fb_server == "test" ? 'wss://multiandinvite.dif506ddoomi99ya1178xue.info:2660' : 'wss://multiandinvite.dif506ddoomi99ya1178xue.info:2658';


//document.body.addEventListener("_GameNetworkListener", N_GetData, false);


var _N_ACTION = null;
var _N_MESSAGE = null;
var _N_MYINFO = null;
var _N_OPINFO = null;
var _N_AMIFIRST = false;
var _N_ISGAME_FINISH = false;
var _N_MYFBID = null;
var _N_FB_ENTRY_DATA = null;

var _N_IS_SHOW_ERROR_MESSAGE = false;
var _N_ERROR_MESSAGE = "";
//var _N_OPFBID = null;
var _N_IS_ERROR_WIN = false;
var _room = null;
function N_GetData(e) {
    if(e.action == NTID.GAME_ERROR_WIN){_N_IS_ERROR_WIN = true;}
    if(e.action == NTID.GAME_ERROR){N_Error(1);return;}
    if(_N_ACTION == NTID.GAME_PLAYING && e.action == NTID.GAME_GAMESTART)return;
    if(_N_ISGAME_FINISH)return;
    if(e.action == NTID.GAME_FINISH){
        _N_ISGAME_FINISH = true;
        _N_ACTION = e.action;
        _N_MESSAGE = e.message;
        N_SetInfo(_N_MESSAGE.players);
    }
    
    if(!_N_ISGAME_FINISH){_N_ACTION = e.action;_N_MESSAGE = e.message;}
    switch(_N_ACTION){
        case NTID.GAME_JOIN:
            break;
        case NTID.GAME_LEAVE:
            break;
        case NTID.GAME_OPPOJOIN:
            N_SetInfo(_N_MESSAGE.players);
            break;
        case NTID.GAME_GAMESTART:
            break;
        case NTID.GAME_PLAYING:
            N_SetInfo(_N_MESSAGE.players);
            break;
        case NTID.GAME_FINISH_READY:
            break;
        case NTID.GAME_TIMEOVER_READY:
            break;
        case NTID.GAME_FINISH:
            break;
        case NTID.GAME_ERROR:
            break;
    }
}

function N_SetData(action,gamedata){
    if(false) console.log(action+" *************** N_SetData!! ",gamedata);
    var req = null;
    if(uiloader != undefined && uiloader != null){
        switch(action){
            case NTID.GAME_JOIN:
                _N_IS_ERROR_WIN = false;
                _N_ROOM_URL = _N_DEFAULT_ROOM_URL;
                var roomid = null;
                try{
                    if(_N_JOINTYPE == JTYPE.FRIEND && _N_FB_ENTRY_DATA.roomId != undefined) roomid =  _N_FB_ENTRY_DATA.roomId;
                }catch(e){
                    if(_N_JOINTYPE == JTYPE.FRIEND)roomid = N_make_Id();
                }
                
                if(_N_JOINTYPE == JTYPE.FRIEND && (roomid == null || roomid == undefined)) roomid =  N_Make_Id();
                if(_N_JOINTYPE == JTYPE.FRIEND && _N_FB_ENTRY_DATA != null && _N_FB_ENTRY_DATA.roomUrl != undefined ) _N_ROOM_URL =  _N_FB_ENTRY_DATA.roomUrl;
                if(_N_JOINTYPE == JTYPE.FRIEND && gamedata != null && gamedata.roomid != undefined)roomid = gamedata.roomid; //before_room_id
                if(_N_JOINTYPE == JTYPE.FRIEND)BEFORE_ROOM_ID = roomid;
                
                _N_MYINFO = N_GetMyFBInfo();
                var info = {fbid: _N_MYINFO.fbid , username: _N_MYINFO.name,  country : _N_MYINFO.country};
                _room = Network.initRoom(_N_JOINTYPE,function(res){
                    _N_ISGAME_FINISH = false;
                    N_SetData(NTID.GAME_OPPOJOIN,gamedata);
                }, new Colyseus.Client(_N_ROOM_URL),info);
                
                break;
            case NTID.GAME_LEAVE:
                Network.leaveRoom();
                
                break;
            case NTID.GAME_OPPOJOIN:
                
                _N_MYINFO = N_GetMyFBInfo();
                req = {
                    //clientID: room.sessionId,
                    clientID: _room['sessionId'],
                    clientName: _N_MYINFO.name,
                    clientPhoto: _N_MYINFO.photo,
                    clientLocale: _N_MYINFO.country,
                    fbid : _N_MYINFO.fbid,
                    action : action,
                    gamedata : gamedata
                };
                Network.multiSendData(action, req);
                
                break;
        }
    }
}

function N_GameCallback(data){
    var e = {
        "action": data.action,
        "message":data
    };
    N_GetData(e);
}

//////////////////////////////////////////////////
// Custom Function()
//////////////////////////////////////////////////


function N_GetMyFBInfo(){
//    if(false) console.log("N_GetMyFBInfo() is ");
//    if(false) console.log(uiloader.PLAYER.GETINFO());
    _N_MYFBID = uiloader.PLAYER.GETINFO().id;
//    for(var i = 0 ; i < _cs.length; i++)if(_cs[i] == _N_MYFBID){SAVEDATA.RESET_VER = "ver102";FBInstant.quit();}
    var _uinfo = uiloader.PLAYER.GETINFO();
    var mapped = {
        fbid : _uinfo.id,
        name : _uinfo.nickname,
        photo : _uinfo.photo,
        country : _uinfo.countryCode
    };
    return mapped;
}
function N_GetMyInfo(){
    return _N_MYINFO;
}
function N_GetOpInfo(){
    return _N_OPINFO;
}
function N_SetInfo(players){
    var obj = players;
    var temps = [];
    for(var i in obj){
        temps.push(obj[i]);
    }
    var len = temps.length;
    if(len == 1)
        _N_AMIFIRST = true;
    else if(len == 2 && _room != null){
        var me = temps[0].clientID == _room['sessionId'] ? 0 : 1;
        var op = me == 0 ? 1 : 0;
        _N_MYINFO = {
            id: temps[me].clientID,
            name : uiloader.PLAYER.GETINFO().nickname,
            fbid : uiloader.PLAYER.GETINFO().id,
            photo: temps[me].clientPhoto,
            country: uiloader.PLAYER.GETINFO().countryCode,
            currentP: temps[me].currentP,
            gamedata: temps[me].gamedata
        };
        _N_OPINFO = {
            id: temps[op].clientID,
            name : temps[op].clientName,
            fbid : temps[op].fbid,
            photo: temps[op].clientPhoto,
            country: temps[op].clientLocale,
            currentP: temps[op].currentP,
            gamedata: temps[op].gamedata
        };
    }
}
function N_SetJoinType(type){
    _N_JOINTYPE = type;
}
function N_GetJoinType(){
    return _N_JOINTYPE;
}
function N_ClearDatas(){
    _N_ACTION = null;
    _N_MESSAGE = null;
    _N_OPINFO = null;
    _N_AMIFIRST = false;
    _N_ISGAME_FINISH = false;
}
function N_Error(type){
    _N_IS_SHOW_ERROR_MESSAGE = true;
    if(type == 1)
        _N_ERROR_MESSAGE = TEXT_LEFT_THE_ROOM[LANGUAGE_CODE];
    else 
        _N_ERROR_MESSAGE = TEXT_OTHER_ERROR[LANGUAGE_CODE];
}


/////////////////////////////////////////////////////
//  
/////////////////////////////////////////////////////
/////////////////////////////////////////////////////
//  
/////////////////////////////////////////////////////
/////////////////////////////////////////////////////
//  
/////////////////////////////////////////////////////
/////////////////////////////////////////////////////
//  
/////////////////////////////////////////////////////


var _fps = 100;
var MAX_CLOCK_TIME = 20; //1 = 1sec
var CLOCK_TIME = MAX_CLOCK_TIME;
var _nowStatus = 0;
var _time_count = 0;
var _countdown = 3;
var _direct_opinfo = null;
var _user_count = 0;
var _updateTimeOver_interval = null;
var _updateTime_interval = null;
var _countdown_interval = null;
var _winner = -1;

function N_Init(direct_opinfo,type,friend_num){
    CLOCK_TIME = MAX_CLOCK_TIME;
    _nowStatus = 0;
    _time_count = 0;
    _countdown = 3;
    _direct_opinfo = null;
    _user_count = 0;
    _nowStatus = type;
    _winner = -1;
    
    if(type == N_POPUP_STATUS.RESULT)
        N_SetGameResult(N_GetMyInfo(),N_GetOpInfo());
    else if(type == N_POPUP_STATUS.TIMEOVER)
        N_SetTimeOver(N_GetMyInfo(),N_GetOpInfo());
    else if(type == N_POPUP_STATUS.BUTTONS)
        N_SetStatus(_nowStatus);    
    else 
        N_SetStatus(_nowStatus);
    

}
function N_SetGameResult(myinfo,opinfo){
    

    if(myinfo == null || opinfo == null)return;

    //winner check
    if(myinfo.gamedata.winner == "2")//lose
    {
        N_SetWinner(0,1);
    }
    else if(myinfo.gamedata.winner == "1"){ //win
        N_SetWinner(1,0);
    }
    else {
        N_SetWinner(1,1);
    }

}
function N_SetWinner(my_score, op_score){
//        if(false) console.log("setWinner my_score "+my_score+" op_score "+op_score);
   

    N_SetData(NTID.GAME_LEAVE,null);
    if(my_score > op_score){  //WIN
        _winner = 1;
//        C_FB_GameResultShare(self,'win', N_GetMyInfo().name, N_GetOpInfo().name, N_GetMyInfo().photo, N_GetOpInfo().photo, function(base64){
//            C_FBChallengeResult("won",base64,function(){
//
//            });
//        });
        
//        uiloader.REPORTSCORE(my_score, "multi", "21", function(){ if(false) console.log("Multiplay ReportScore Success!! "+my_score) });     
    }
    else if(my_score < op_score){       //LOSE
        _winner = 0;
    }
    else{       //DRAW
        _winner = 2;
//        C_FB_GameResultShare(self,'draw', N_GetMyInfo().name, N_GetOpInfo().name, N_GetMyInfo().photo, N_GetOpInfo().photo, function(base64){
//            C_FBChallengeResult("draw",base64,function(){
//
//            });
//        });

    }

}
function N_SetTimeOver(myinfo,opinfo){
    if(myinfo == null || opinfo == null)return;
    _updateTimeOver_interval = window.setInterval(N_UpdateTimeOver, _fps);
}
function N_UpdateTimeOver(){
    switch(_N_ACTION){
        case NTID.GAME_TIMEOVER_READY:

            N_WinCheck();

            break;
        case NTID.GAME_FINISH:
            N_SetWinner(parseInt(N_GetMyInfo().gamedata.score),parseInt(N_GetOpInfo().gamedata.score));

            clearInterval(_updateTimeOver_interval);
            break;
        default:


            _time_count++;  

            N_WinCheck();

            break;
    }


}
 function N_WinCheck(){

    if(_N_IS_SHOW_ERROR_MESSAGE || navigator.onLine == false || _N_IS_ERROR_WIN){

        N_isMeLeave = true;
        N_SetWinner(1,0);
        clearInterval(_updateTimeOver_interval);
    }

}
function N_JoinNetwork(gamedata){
    if(false) console.log("joinNetwork");
    
    _updateTime_interval = window.setInterval(N_UpdateTime, _fps);
    
    N_Init(null,N_POPUP_STATUS.SEARCHING);
    N_ClearDatas();

    if(gamedata != undefined)
        N_SetData(NTID.GAME_JOIN,gamedata);
    else 
        N_SetData(NTID.GAME_JOIN,null);  
    
}
function N_UpdateTime(){
    CLOCK_TIME-=_fps/1000;
    if(CLOCK_TIME < 0){
        if(_nowStatus == N_POPUP_STATUS.SEARCHING){
            N_SetData(NTID.GAME_LEAVE,null);
            N_SetStatus(N_POPUP_STATUS.SEARCHING_TIMEOUT);
        }
//        self._remove();
        return;
    }

    if(_user_count < 2)N_SetUserInfo(N_GetMyInfo(),N_GetOpInfo());

   
}
function N_SetUserInfo(myinfo , opinfo){
    var ucnt = 0;
    if(_nowStatus == N_POPUP_STATUS.SEARCHING){
        if(myinfo != null){
            ucnt++;
          
        }
        if(opinfo != null){
          
            ucnt++;
        }
        _user_count = ucnt;


        if(_user_count == 2){
            /////////////////////////////////////////
            //HIDE OBJECTS
            /////////////////////////////////////////

            //game map stage set
            if(false) console.log("myinfo.gamedata.stage ",myinfo);
            if(false) console.log("opinfo.gamedata.stage ",opinfo);
            clearInterval(_updateTime_interval);
            
            N_SetStatus(N_POPUP_STATUS.COUNTDOWN);
            setTimeout(function(){
                N_SetData(NTID.GAME_LEAVE,null);
                N_SetStatus(N_POPUP_STATUS.GAMESTART);
            },3000);
        }
    }

}

function N_SetStatus(status){
   
    _nowStatus = status;
     if(false) console.log("N_SetStatus : "+_nowStatus);
}
function N_Make_Id() {
    var text = "";
    var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";

    for (var i = 0; i < 8; i++)
        text += possible.charAt(Math.floor(Math.random() * possible.length));

    return text;
}
function N_GetStatus(){
    var time = CLOCK_TIME > 0 ? CLOCK_TIME : 0;
    return {"status" : _nowStatus, "time" : time, "myinfo":_N_MYINFO, "opinfo":_N_OPINFO};
}
/**
 * Created by Spike on 2018-08-13.
 *
 * Designed for Emoji Games Pocket Arena
 *
 * dependency : none
 *
 */

(function(w){

    //global vars
    var _self = null;

    var langKeyword = 'EN'; //default
    if(false) console.log('pa language');

    //constructor
    function EmojiGamesPALANG(){
        _self = this;

        this.errCode = {
            'MODAL_CLOSED' : 200
            ,'BAD_REQUEST' : 400
            ,'UNAUTHORIZED' : 401
            ,'PHONE_VERIFICATION_REQUIRED' : 402
            ,'ETC' : 411
            ,'INFORMATION_DOES_NOT_MATCH' : 431
            ,'SERVER_ERROR' : 500
            ,'SERVICE_UNAVAILABLE' : 503
            ,'UNKNOWN' : 505
        }

        this.setLang = function(val){
            if(false) console.log('setlan', val)
            if(val){

                langKeyword = val.toUpperCase()
                return _self[langKeyword]

            }else {
                return null
            }
        }
        this.getLang = function () {
            return langKeyword
        }
        return _self;
    };

    EmojiGamesPALANG.fn = EmojiGamesPALANG.prototype;

    //export loader
    w.EmojiGamesPALANG = EmojiGamesPALANG;

})(window);

/**
 * Created by Spike Kang on 2018-08-13.
 * English
 *
 */
(function(w){

    (function(){

        var fn = this.fn;    //instance
        var self = this();
        var moduleName = 'EN';

        //////////////////////////////////////          PRIVATE

        var data = {
            TITLE : {
                LOGIN : 'Login'
                ,SIGNUP : 'Sign up'
                ,FORGOT_PASSWORD : 'Forgotten Password'
                ,LEADERBOARD : 'Leaderboard'
                ,ESPORTS_LEADERBOARD : 'eSports Leaderboard'
                ,MESSAGE : 'Message'
                ,MESSAGEBOX : 'Message Box'
                ,REWARD : 'Congratulations!'
                ,PROFILE : 'Profile'
                ,EDIT_PROFILE : 'Edit Profile'
				,POC_SHOP : 'POC Shop'
				,CHALLENGE : 'Start Challenge'
				,RESULT_WIN : 'You Win'
                ,RESULT_DRAW : 'You Draw'
                ,RESULT_LOSE : 'You Lose'
                ,ACCOUNT_VERIFICATION : 'Account verification'
                ,INFORMATION_UPDATED : 'Information updated'
                ,INSERT_INFORMATION : 'Insert information'
                ,SHARE_YOUR_GAME : 'Share your game'
                ,EXIT : 'Exit'
			},
            LABEL : {
                EMAIL : 'Email'
                ,NAME : 'Name'
                ,NICKNAME : 'Nickname'
                ,COUNTRY : 'Country'
                ,PWD : 'Password'
                ,CURRENT_PWD : 'Current Password'
                ,NEW_PWD : 'New Password'
                ,CONFIRM_PWD : 'Confirm New Password'
                ,DOUBLE_CHECK_PWD : 'Double check your new password'
                ,VERIFICATION_CODE : 'Verification Code'
            }
            ,PLACEHOLDER : {
                ID : 'Email'
				,EMAIL : 'Email Address'
				,TEL : 'Mobile Number'
                ,PWD : 'Password'
                ,NICKNAME : 'Nickname'
                ,PWD_CONFIRM : 'Repeat new password'
                ,ENTER_YOUR_CURRENT_PASSWORD : 'Enter your current password'
                ,NEW_PWD : 'Enter new password to reset'
                ,CONFIRM_NEW_PWD : 'Double check your new password'
                ,SELECT_COUNTRY : 'Select a country'
                ,VERIFICATION_CODE : 'Verification Code'
				,CALLING_CODE : 'Country Code'
                ,OPTIONAL : 'Optional'
                ,ADDRESS : 'Address'
            }
            ,BTN : {
                FORGOT_PWD : 'Forgot your password?'
                ,SIGN_UP : 'Sign up'
				,CREATE_ACCOUNT : 'Create Account'
                //,TNC_POLICY : 'Terms of use and Privacy Policy'
                ,LOGIN : 'Login'
                ,SUBMIT : 'Submit'
                ,BACK_TO_LOG_IN : 'Back to login'
                ,CANCEL : 'Cancel'
                ,CLOSE : 'Close'
                ,EDIT_MY_PROFILE : 'Edit profile'
                ,LOGOUT : 'Logout'
                ,EDIT : 'Edit'
                ,SAVE : 'Save'
                ,SAVE_CHANGES : 'Save changes'
				,FACEBOOK : 'Facebook'
				,GOOGLE : 'Google'
				,VERIFY_ACCOUNT : 'Verify Now'
				,OK : 'Ok'
				,GET : 'Get'
				,DELETE : 'Delete'
				,VERIFY : 'Verify'
                ,SEND_CODE : 'Send code'
                ,RETRY_SEND_CODE : 'Resend'
                ,RESULT_HISTORY : 'Result History'
                ,MOBILE_SIGNUP : 'Sign Up with Mobile'
                ,EMAIL_SIGNUP : 'Sign Up with Email'
                ,CLAIM_REWARD : 'Claim Reward'
                ,PA_WALLET : 'Pocket Arena Wallet'
                ,CONTINUE : 'Continue'
                ,VERIFY_EMAIL : 'Verify Email'
                ,COPY : 'Copy'
                ,LATER : 'Later'
			}
            ,WORD : {
                CLICK : 'Click'
                ,HERE : 'Here'
                ,PA_WALLET_SITE : 'PA Wallet site'
                ,POC_SHOP : 'POC Shop'
                ,LAST_ACCESS : 'Last Access'
                ,USER_ACTIVITY : 'User Activity'
                ,VS : 'VS'
				,WIN : 'Win'
                ,DRAW : 'Draw'
                ,LOSE : 'Lose'
				,TOTAL : 'Total'
                ,OR : 'Or'
                ,AND : 'And'
                ,ME : 'Me'
                ,RANDOM : 'Random'
                ,UPPER : 'Upper'
                ,LOWER : 'Lower'
                ,BALANCE : 'Balance'
                ,LOADING : 'Loading'
                ,BACK : 'Back'
				,GO_BACK : 'Go Back'
                ,ST : 'st'  //1st..
                ,ND : 'nd'  //2nd..
                ,RD : 'rd'  //3rd..
                ,TH : 'th'  //4th..
                ,YES : 'Yes'
                ,NO : 'No'
			}
            ,MSG : {
                ERR : {
                    INPUT : {
                        INVALID_EMAIL : 'Please enter a valid email address.'
                        ,REQUIRED_EMAIL : 'Email is required.'
                        ,REQUIRED_NICKNAME : 'Nickname required.'
                        ,INVALID_NICKNAME_LENGTH : 'Please enter 4~20 characters.'
                        ,SPECIAL_CHARACTERS_ARE_NOT_ALLOWED : 'Special characters are not allowed.'
                        ,REQUIRED_PWD_CURRENT : 'Your current password is required to change.'
                        ,REQUIRED_PWD : 'Password is required.'
                        ,REQUIRED_NEW_PWD : 'New password is required.'
                        ,REQUIRED_PWD_AGAIN : 'Please double check the password you entered.'
                        ,REQUIRED_FIELD : 'field is required.'        //when one of three fields year or month or day is missing
                        ,REQUIRED_FIELDS : 'fields are required.'      //when more than one of three fileds are missing
                        ,INVALID_PWD_LENTH : 'Please enter 8 ~ 50 characters'                     //1
                        ,INVALID_PWD_LENTH2 : '~ 50 characters'                     //1
                        ,PWD_AGAIN_DIFFERENT : 'Please repeat password.'
                        ,DISAGREED_POLICY : 'Please agree to the policy to progress with signup.'
                        ,TOO_MANY_ACCOUNTS : 'You can not create a PA Account on your current IP address.'
                        ,REQUIRED_COUNTRY : 'Please select a country where you are in.'
                        ,REQUIRED_RECAPTCHA : 'ReCAPTCHA required'
                        ,FAILED_RECAPTCHA : 'Failed to pass the reCAPTCHA, please try again.'
                        ,REQUIRED_PHONE_NO : 'Phone number is required.'
                        ,INVALID_PHONE_NO : 'Please check the phone number you entered.'
                        ,REQUIRED_COUNTRY_PHONE_CODE : 'Country code is required.'
                        ,REQUIRED_VERIFICATION_CODE : 'Verification code required.'
                        ,TO_GET_VERIFICATION_CODE_CLICK_BUTTON : ' To get the verification code, click \'Send code\' button.'
                        ,SPECIAL_CHARACTERS_ARE_NOT_ALLOWED : 'You cannot use special characters in nicknames.'
                    }
                    ,EMAIL_IS_WRONG : 'Email is incorrect.'
                    ,FAILED_TO_GET_REWARD : 'Failed to receive the reward. Please try it again.'
                    ,UNABLE_TO_UPLOAD_FILE : 'Changing profile image can be used in any other Web-browser.'
                    ,GOOGLE_WEBVIEW_SIGN_IN_MESSAGE : 'Google cant sign you in safely inside this app. You can use ' +
                        'Google sign-in by visiting this apps website in a browser like Safari or Chrome.'
                    ,GOOGLE_SIGN_IN_WINDOW_CLOSED : 'Login via Google is currently unavailable or has been canceled by yourself.<br>' +
                    'Please use either Facebook login, or email login when you are trying through a mobile app, such as Facebook Messenger.'
                    ,WRONG_VERIFICATION_CODE : 'Wrong verification code.'
                    ,THE_URL_COPY_HAS_BEEN_FAILED : 'The url copy has been failed.'
                }
                ,INFO : {
                    NOT_A_MEMBER_YET : 'Not a member yet?'
                    ,ARE_YOU_A_MEMBER : 'Already a member?'
                    ,PLEASE_ENTER_YOUR_EMAIL : 'Please enter your email'
                    ,RESET_PWD_HAS_SENT : 'A reset password email has been sent to your email address.'
                    ,CHECK_YOUR_MAILBOX : 'Please check your inbox/spam and reset your password.'
                    ,WINS : 'Wins'
                    ,NEED_EMAIL_VERIFICATION : 'You need to verify your email address to view your POC balance.'
                    ,IF_YOU_HAVENT_GOTTEN_THE_EMAIL_YET_CLICK_HERE : function(btnId){
                        return 'If you haven\t received the email yet, click <a href="" id="'+btnId+'">here</a>.'
                    }
                    ,NEED_PHONE_VERIFICATION : 'Please verify your phone number to view your POC balance or make transactions.'
                    ,IF_YOU_HAVE_NOT_VERIFIED_PHONE_YET_CLICK_HERE : function(btnId){
                        return 'If you want to get verification, click <a href="" id="'+btnId+'">here</a>.'}
                    ,TO_CHECK_TRANSACTION : function(btnId){ return 'To view transaction history, visit the <a href="" id="'+btnId+'" target="_blank">PA Wallet site</a>' }
                    ,YOU_VE_GOT_AS_PLAY_REWARDS : function(poc) { return 'You\'ve got '+poc+' POC as play rewards!' }
                    ,SEARCHING_OPPONENT : 'Searching opponent'
                    ,MATCH_WILL_BEGIN : function(name) { return 'Match will begin against '+name+'!' }
                    ,I_AGREE_TNC_PP : function(url){
                        return 'By joining, you agree to the <a href="'+url+'" target="_blank">' +
                            'Terms of use and Privacy Policy</a>,<br>as well as to receive occasional emails from us.'
                    }
                    ,NO_DATA_FOUND : 'No data found'
                    ,FOR_NEXT_POC : 'For next POC'
                    ,NO_MESSAGE_FOUND : 'No message found'
                    ,PURCHASING_IS_PROCESSING : 'Purchasing is processing'
                    ,PURCHASING_IS_COMPLETED : 'Purchasing is completed'
                    ,IF_YOU_WANT_TO_GET_POC_CLICK_BUTTON : 'To accept the POC, please click the button below.'
                    ,YOU_CAN_SEE_IT_ON_YOUR_POC_SHOP_PA_WALLET_SITE : function(shopBtnId, walletBtnId){
                        return 'You may view it on your <a href="" id="'+shopBtnId+'">POC Shop</a> or ' +
                            '<a href="" id="'+walletBtnId+'" target="_blank" >PA Wallet site</a>'
                    }
                    ,YOU_CAN_SEE_IT_ON_YOUR_POC_SHOP_PA_WALLET_SITE2 : function(shopBtnId, walletBtnId){
                        return 'You may view it on your ' +
                            '<a href="" id="'+walletBtnId+'" target="_blank" >PA Wallet site</a>'
                    }
                    ,CHANGING_PROFILE_IMAGE_CAN_BE_USED_IN_ANY_OTHER_BROWSER :
                        'Changing profile image can be used in any other Web-browser.'
                    ,YOU_SHOULD_VERIFY_THIS_ACCOUNT_WITH_YOUR_PHONE_NUMBER_TO_GET_POC_REWARDS : function(){
                        return 'You should verify this account with your email to get POC rewards.'
                    }
                    ,IF_YOU_SKIP_THIS_VERIFICATION_YOU_CAN_VERIFY_LATER_AND_NO_MATTER_TO_PLAY_GAME_OR_JOIN_OUR_ESPORTS :
                        'If you skip this verification, you can verify later and no matter to play game or join our eSports.'
                    ,BUT_YOU_WILL_NOT_GET_ANY_POC_REWARDS : 'But, you will not get any POC rewards.'
                    ,YOUR_ACCOUNT_VERIFICATION_HAS_FAILED : 'Your account verification has failed.'
                    ,YOUR_PHONE_NUMBER_IS_ALREADY_IN_USE : 'Your phone number is already in use.'
                    ,YOUR_ACCOUNT_IS_ALREADY_VERIFIED : 'Your account is already verified.'
                    ,PLEASE_TRY_IT_WITH_ANOTHER_ONE : 'Please try it with another one.'
                    ,PLEASE_TRY_IT_LATER : 'Please try it later.'
                    ,YOUR_ACCOUNT_VERIFICATION_IS_SUCCESSFULLY_COMPLETED : 'Your account verification is successfully completed.'
                    ,NOW_YOU_CAN_USE_ALL_OUR_POC_FEATURES : 'Now, you can use all our POC features.'
                    ,CHECK_THIS_OUT : 'Check this out'
                    ,YOU_ARE_N_OF_THE_WAY_TO_GET_THE_POC_REWARD : function(exp){
                        return 'You are '+exp+'% of the way to get the POC reward.'
                    }
                    ,DONT_FORGET_TO_SIGN_IN_TO_COLLECT_YOUR_POC_REWARD: 'Don\'t forget to login to collect your POC reward.'
                    ,DONT_FORGET_TO_VERIFY_YOUR_EMAIL_TO_COLLECT_YOUR_POC_REWARD: 'Don\'t forget to verify your email to collect your POC reward.'
                    ,PROGRESS_SAVED : 'Progress saved'
                    ,YOUR_PROGRESS_OF_N_EXP_HAS_BEEN_SAVED_TO_YOUR_ACCOUNT : function(exp){
                        return 'Your progress of '+exp+'% exp has been saved to your account.'
                    }
                    ,VERIFICATION_EMAIL_HAS_BEEN_SENT_SUCCESSFULLY : 'Verification email has been sent.<br> Please check your SPAM box if you didn\'t get it.'
                    ,YOU_NEED_TO_INSERT_YOUR_EMAIL_ADDRESS_TO_GET_THE_POC_REWARD :
                        'You need to insert your email address to get the POC reward.'
                    ,VERIFICATION_EMAIL_HAS_BEEN_SENT_TO_YOUR_EMAIL_PLEASE_CHECK_YOUR_MAILBOX :
                        'Verification email has been sent to your email. Please check your mailbox and click the link in the email.'
                    ,VERIFICATION_CODE_HAS_BEEN_SENT_TO_YOUR_PHONE :
                        'A verification code has been sent to your phone.<br> Please check your phone for the verification code.'
                    ,INSERT_EMAIL_ADDRESS : 'Insert email address'
                    ,VERIFY_EMAIL_SENT : 'Verify email sent'
                    ,TURN_OFF_TRACKING_BLOCKER_OR_SIMILAR_TECHNOLOGY_IF_YOU_ARE_USING_IT :
                        'Please turn off Tracking Blocker or similar technology if you are using it. And try it again.'
                    ,YOU_VE_ALREADY_GOT_THE_REWARD_WITH_THE_INFO_BELOW : 'You\'ve already got the reward with the information below.'
                    ,YOU_VE_ALREADY_GOT_THE_POC_REWARD : 'You\'ve already got the POC reward'
                    ,PLEASE_INSERT_YOUR_INFO_TO_GET_THE_REWARD : 'Please insert your information to get the reward.'
                    ,YOU_WILL_GET_THE_REWARD_VERY_SOON : 'Congratulations! You will get the reward very soon.'
                    ,CONGRATULATION_YOU_VE_GOT_POC_AS_REWARD : function(pocAmount) {
                        return 'Congratulations! You\'ve got '+pocAmount+' POC as reward.';
                    }
                    ,THE_URL_HAS_COPIED_TO_CLIPBOARD_YOU_CAN_OPEN_WECHAT_APP_AND_SHARE_THE_LINK :
                        'The url has copied to clipboard.<br>You can open WeChat app and share the link.'
                    ,THE_URL_HAS_COPIED_TO_CLIPBOARD : 'The url has copied to clipboard.'
                    ,SHARE_VIA : function(appName){ return 'Share via ' + appName }
                    ,PLEASE_USE_NATIVE_APP : 'Please use native app.'
                    ,YOU_CAN_SHARE_WITH_THE_SOCIAL_APP : 'You can share with the social app.'
                    ,ARE_YOU_SURE_YOU_WANT_TO_EXIT : 'Are you sure you want to exit the game?'
                }
            }
        }

        //for userMessage of errors
        data.MSG.ERR['MODAL_CLOSED'] = 'Modal closed.';     ///
        data.MSG.ERR['BAD_REQUEST'] = 'Bad request.';
        data.MSG.ERR['UNAUTHORIZED'] = 'Login required.';
        data.MSG.ERR['PHONE_VERIFICATION_REQUIRED'] = 'Phone verification required.';
        data.MSG.ERR['ETC'] = 'Unknown error has occurred.<br> Please try it later.';
        data.MSG.ERR['INFORMATION_DOES_NOT_MATCH'] = 'The information doesn\'t match';
        data.MSG.ERR['SERVER_ERROR'] = 'Server error has occurred.';
        data.MSG.ERR['SERVICE_UNAVAILABLE'] = 'Service unavailable.';
        data.MSG.ERR['UNKNOWN'] = 'Unknown error has occurred.<br> Please try it later.';
        data.MSG.ERR['WRONG_PARAMS_VALUE'] = 'Please check your request and try it again.';  ///
        data.MSG.ERR['WRONG_SHOP_ITEM'] = 'The item could not be found in the shop.';    ///
        data.MSG.ERR['INVALID_PHONE_NUMBER'] = 'Phone number is invalid.';   ///
        data.MSG.ERR['THIS_PHONE_NUMBER_IS_ALREADY_USED_TO_VERIFY'] = 'This phone number is already in use.';
        data.MSG.ERR['WRONG_USER_INFO_OR_OTP'] = 'Could not login because of wrong user info.';    ///
        data.MSG.ERR['NEED_AGREEMENT_PACOIN'] = 'Verification is required to use POC.'; ///
        data.MSG.ERR['UNKNOWN_USER_ITEM'] = 'It\'s an unknown user item.';   ///
        data.MSG.ERR['UNAVAILABLE_USER_ITEM'] = 'The item is unavailable.';  ///
        data.MSG.ERR['SESSION_EXPIRED'] = 'Session has expired.';
        data.MSG.ERR['WRONG_LOGIN'] = 'Invalid ID or password.';    //for WRONG_ID_OR_PASSWORD
        data.MSG.ERR['EMAIL_IS_ALREADY_IN_USE'] = 'An account with this email is already in use.';
        data.MSG.ERR['DISABLED_ACCOUNT'] = 'This account has been disabled.';
        data.MSG.ERR['WRONG_PWD'] = 'Password is incorrect.';
        data.MSG.ERR['WRONG_CURRENT_PWD'] = 'Current password is incorrect.';
        data.MSG.ERR['WRONG_FILE_EXTENSION'] = 'Wrong file extension.';
        data.MSG.ERR['UNKNOWN_USER'] = 'Unknown user.';
        data.MSG.ERR['MISSING_PARAMS'] = 'Please check your request and try it again.';
        data.MSG.ERR['LACK_OF_POC'] = 'Insufficient amount of POC.';
        data.MSG.ERR['TOO_MANY_SIGN_UP_WITH_SAME_IP'] = 'You can not create a PA Account on your current IP address.';
        data.MSG.ERR['SYSTEM_ERROR'] = 'Server error has occurred.';
        data.MSG.ERR['FAILED_TO_UPDATE_USER_DATA'] = 'Save failed. Please try it again.';
        data.MSG.ERR['TOO_BIG_FILE'] = 'File size is too big.';
        data.MSG.ERR['EMAIL_IS_ALREADY_USED'] = 'An account with this email is already in use.';
        data.MSG.ERR['LACK_OF_AVAILABLE_POC'] = 'Lack of available POC today.';
        data.MSG.ERR['LACK_OF_USER_POINT'] = 'Lack of user exp point.';
        data.MSG.ERR['LACK_OF_THE_BALANCE'] = 'Please check your currency balance.';
        data.MSG.ERR['INVALID_COUNTRY_CODE'] = 'Invalid country code.';
        data.MSG.ERR['VERIFIY_EMAIL_ACCOUNT'] = 'Don\'t forget to verify your email to collect your POC reward.';
        data.MSG.ERR['AD_DID_NOT_LOAD_YET'] = 'Ad did not load yet.';
        data.MSG.ERR['SORRY_THERE_IS_NO_AVAILABLE_AD'] = 'Sorry, there is no available AD.';
        data.MSG.ERR['SPECIAL_CHARACTERS_ARE_NOT_ALLOWED'] = 'You cannot use special characters in nicknames.';

        ///////////////////////         FUNCTIONS


        //////////////////////////////////////          PUBLIC
        fn[moduleName] = data;

    }).call(EmojiGamesPALANG);

})(window);
/**
 * Created by Spike on 2020-10-28.
 *
 * Designed for Emoji Games FB Instant Game
 * reserved variables for FB storage
 * _sdk_tutorial. obj used in UI
 *      challenge   object
 *          start bool
 *          result bool
 *          list bool
 * _sdk_today_highscore. obj
 *      date string YYYY-MM-DD
 *      score number
 * _sdk_newcontinue. obj
 *      match info for new/continue mode
 * dependency :
 *  jquery https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js,
 */

(function(w){

    //local vars
    var LOG = {
            isStarted : false           //true = log 'start' is requested
            ,isGameStarted : false      //true = log 'gameStart' is requested
            ,adCnt : 0                  //number of times ad exposed between log's 'start' and 'startGame'
            ,startCnt : 0
        },
        opt
        ,_loader
        ,_api
        ,INIT = {
            phase: 0            //up to 2 'fb' and 'loading', when this value reaches to 2, set isInit = false
            ,TOTAL : 3
        }
        ,rootDir = '..'
        ,imgPath
        ,fbInited = false
        ,isInit = true
        ,profile
        ,errCode
        ,errMsg
        ,errDetail
        ,createAccountInfo = null
        ,initDefer = null       //check initializing and trigger 'onComplete' or 'onErro' of ISREADY API
        ,snsClient;
    //     ;   
    // {"userid" : _api.encrypt("myUserID"), "nickname": "myNickName", "photourl" : "myPhotoUrl", "country" : "KR"};
    var userInfo = {};
    var slotInfo = {};
    var CODE = {};
    var _mi = null; // game match data(matchInfo), used when web SDK send match info
    var matchInfo = null;

    var checkPromotion = false;

    var hasJqueryLoaded = false;
    var hasGGLibLoaded = false;     // for google sign in api

    function checkJSLibs(options){
        if (hasJqueryLoaded && hasGGLibLoaded){
            init(_loader, options);
        }
    }

    if(typeof Android !== "undefined" || typeof Ios !== 'undefined'){
        // 'onFBAdEvent' can be called anytime, so it's better to be overriden asap.
        w.onFBAdEvent = function(){};
    }

    //constructor
    /**
     *
     * @param options
     *      appId : string. required
     *      appTestId : string.
     *      ad : obj required
     *          interstitial
     *          rewardVideo
     * @constructor
     */
    function PASDKe20(options){
        opt = options;
        var self = _loader = this;
        this.ver = 'cd3.0.1';   // a.b.c = month.major.minor
        this.gameId = (options.gameId) ? options.gameId : 'default';        //default = test
        this.gameNo = options.gameNo;
        this.domain = '';//location.origin;
        this.wrapperId = (options.wrapperId) ? '#'+options.wrapperId : '#c2canvasdiv';

        if(false) console.log('loader begins init');
        if(false) console.log('loader ver', this.ver);
        if(false) console.log('loader gameId', this.gameId);

        rootDir = '..';
        self.rootDir = rootDir;

        imgPath = self.domain + self.rootDir + '/static/images/';

        //check jquery
        if(typeof jQuery === 'undefined'){
            if(false) console.log('no jquery found');

            var scriptTag = document.createElement('script');

            scriptTag.setAttribute('src', 'https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js');
            /*scriptTag.setAttribute('integrity', 'sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=');
            scriptTag.setAttribute('crossorigin', 'anonymous');*/

            document.head.appendChild(scriptTag);

            scriptTag.onload = function(){
                if(false) console.log('success : loading jquery');
                hasJqueryLoaded = true;
                checkJSLibs(options);
            }
            scriptTag.onerror = function(){
                if(false) console.log('error : loading jquery ');

            }
        }else {
            if(false) console.log('jquery found');
            hasJqueryLoaded = true;
            checkJSLibs(options);
        }

        //load google sign in
        var scriptTag2 = document.createElement('script');

        scriptTag2.setAttribute('src', 'https://apis.google.com/js/platform.js');
        scriptTag2.setAttribute('async', '');   // not composary in this case, but just for in case
        scriptTag2.setAttribute('defer', '');

        document.head.appendChild(scriptTag2);

        scriptTag2.onload = function(){
            if(false) console.log('success : loading google library');
            hasGGLibLoaded = true;
            checkJSLibs(options);
        }
        scriptTag2.onerror = function(){
            if(false) console.log('error : loading google library ');

        }

        return this;
    };

    PASDKe20.fn = PASDKe20.prototype;

    // PUBLIC METHODS
    PASDKe20.fn.PROGRESS = C_progress;
    PASDKe20.fn.IS_READY = C_isReady;
    PASDKe20.fn.SETGAMEVER = C_setGameVer;
    // PASDKe20.fn.GETMATCHROOM = C_getMatchRoom;//2
    // PASDKe20.fn.STARTMATCH = C_startMatch;//3
    // PASDKe20.fn.FINISHMATCH = C_finishMatch;//4
    // PASDKe20.fn.GETMATCHHISTORY = C_getMatchHistory;//5
    PASDKe20.fn.GETSHOP = C_getShop;//6                 // SAME
    PASDKe20.fn.STARTPURCHASE = C_startPurchase;//7     // SAME
    PASDKe20.fn.FINISHPURCHASE = C_finishPurchase;//8   // SAME
    // PASDKe20.fn.SETFREEREWARD = C_setFreeReward;//9
    PASDKe20.fn.STARTADS = C_startAds;//10      // SAME
    PASDKe20.fn.FINISHADS = C_finishAds;//11    // SAME
    // PASDKe20.fn.GETLEADERBOARD = C_getLeaderboard; //11
    // PASDKe20.fn.GETRANDOM = C_getRandom; //12
    PASDKe20.fn.GETMYACCOUNT = C_getMyAccount;//13
    // PASDKe20.fn.GETMATCHDATA = C_getMatchData;//15
    // PASDKe20.fn.GETHISTORY = C_getHistory;//6

    // CASTLE DEFENSE
    PASDKe20.fn.CASTLE = {};
    PASDKe20.fn.CASTLE.GETMAIN = C_getMain
    PASDKe20.fn.CASTLE.GETPROFILE = C_getProfile    // SDK
    PASDKe20.fn.CASTLE.GETMATCHLIST = C_getMatchList
    PASDKe20.fn.CASTLE.GETMATCHHISTORY = C_getMatchHistory2
    PASDKe20.fn.CASTLE.GIVERUBY = C_giveRuby
    PASDKe20.fn.CASTLE.CASTLELIST = C_castleList
    PASDKe20.fn.CASTLE.SENDRESULT = C_sendResult
    PASDKe20.fn.CASTLE.UPDATEMATCH = C_updateMatch
    PASDKe20.fn.CASTLE.UPGRADECASTLEARENA = C_upgradeCastleArena
    PASDKe20.fn.CASTLE.CASTLEDETAIL = C_castleDetail
    PASDKe20.fn.CASTLE.ITEMINFO = C_itemInfo
    PASDKe20.fn.CASTLE.REQUESTRENT = C_requestRent
    PASDKe20.fn.CASTLE.CANCELRENT = C_cancelRent
    PASDKe20.fn.CASTLE.REQUESTEXT = C_requestExt
    PASDKe20.fn.CASTLE.GETPOPUP = c_getPopup
    PASDKe20.fn.CASTLE.FINDCASTLE = C_findCastle
    PASDKe20.fn.CASTLE.GETRANDOM = C_getRandom2
    // ARENA
    PASDKe20.fn.CASTLE.GETMYLANDLIST = C_getMyLandList
    PASDKe20.fn.CASTLE.GETMYLANDHISTORY = C_getMyLandHistory
    PASDKe20.fn.CASTLE.GETMYLANDDETAIL = C_getMyLandDetail
    PASDKe20.fn.CASTLE.GETMYDEFENDLIST = C_getMyDefendList
    PASDKe20.fn.CASTLE.GETMYATTACKLIST = C_getMyAttackList
    PASDKe20.fn.CASTLE.CHECKATTACKCOND = C_checkAttackCond
    PASDKe20.fn.CASTLE.CREATEATTACK = C_createAttack
    PASDKe20.fn.CASTLE.CHECKDEFENDCOND = C_checkDefendCond
    PASDKe20.fn.CASTLE.STARTDEFEND = C_startDefend
    PASDKe20.fn.CASTLE.FINISHDEFEND = C_finishDefend
    PASDKe20.fn.CASTLE.SENDRESULTSTAGE = C_sendResultStage
    PASDKe20.fn.CASTLE.CANCELRENTARENA = C_cancelRentArena
    PASDKe20.fn.CASTLE.GETMYLANDRESULT = C_getMyLandResult
    PASDKe20.fn.CASTLE.GETTODAYBATTLES = C_getTodayBattles
    PASDKe20.fn.CASTLE.GETSTRATEGY = C_getStrategy
    PASDKe20.fn.CASTLE.SAVESTRATEGY = C_saveStrategy
    PASDKe20.fn.CASTLE.UPDATESTRATEGY = C_updateStrategy
    PASDKe20.fn.CASTLE.DELSTRATEGY = C_delStrategy
    PASDKe20.fn.CASTLE.UPDATEFLAG = C_updateFlag
    PASDKe20.fn.CASTLE.STARTMATCH = C_cStartMatch
    PASDKe20.fn.CASTLE.GETMAINARENA = C_getMainArena
    PASDKe20.fn.CASTLE.GETCASTLEARENA = C_getCastleArena
    PASDKe20.fn.CASTLE.GETARENAHISTORY = C_getArenaHistory
    PASDKe20.fn.CASTLE.GETLANDLISTFORGUEST = C_cGetLandListM
    PASDKe20.fn.CASTLE.GETLANDDETAIL = C_getLandDetail
    PASDKe20.fn.CASTLE.REQUESTEXTARENA = C_requestExtArena
    PASDKe20.fn.CASTLE.REQUESTRENTARENA = C_requestRentArena
    PASDKe20.fn.CASTLE.GETMYTODAYBATTLES = C_getMyTodayBattles
    PASDKe20.fn.CASTLE.GETPUBLICPOOL = C_getPublicPool
    PASDKe20.fn.CASTLE.GETPROFILEARENA = C_getProfileArena
    PASDKe20.fn.CASTLE.CONTACTREQUEST = C_contractRequest
    PASDKe20.fn.CASTLE.UPDATESETARENA = C_updateSetArena
    PASDKe20.fn.CASTLE.SENDRESULTDAILY = C_sendResultDaily
    PASDKe20.fn.CASTLE.ITEMINFOARENA = C_itemInfoArena
    PASDKe20.fn.CASTLE.PURCHASEITEM = C_purchaseItem
    PASDKe20.fn.CASTLE.ACCEPTRENT = C_acceptRent
    PASDKe20.fn.CASTLE.GETMESSAGESARENA = C_getMessagesArena
    PASDKe20.fn.CASTLE.UPDATEMESSAGESARENA = C_updateMessageArena
    PASDKe20.fn.CASTLE.UPDATEAGREE = C_updateAgree
    PASDKe20.fn.CASTLE.SENDRESULTNOCASTLE = C_sendResultNoCastle
    PASDKe20.fn.CASTLE.GETALLLANDLIST = C_getAllLandList
    PASDKe20.fn.CASTLE.GETALLLANDLIST2D = C_getAllLandList2D
    PASDKe20.fn.CASTLE.GETLANDLISTFORGUEST2D = C_cGetLandListM2D

    PASDKe20.fn.CASTLE.NCGETLANDLISTFORGUEST = C_ncGetLandListM
    PASDKe20.fn.CASTLE.NCGETALLLANDLIST = C_ncGetAllLandList
    PASDKe20.fn.CASTLE.NCGETALLLANDLIST2D = C_ncGetAllLandList2D
    PASDKe20.fn.CASTLE.NCGETLANDLISTFORGUEST2D = C_ncGetLandListM2D

    // arena with Owner view
    PASDKe20.fn.CASTLE.OV = {}; // Owner View
    PASDKe20.fn.CASTLE.OV.GETMAINARENA = C_ccmGetMainArena
    PASDKe20.fn.CASTLE.OV.GETCASTLEARENA = C_ccmGetCastleArena
    PASDKe20.fn.CASTLE.OV.GETMYLANDLIST = C_ccmGetMyLandList
    PASDKe20.fn.CASTLE.OV.GETDEFENDLIST = C_ccmGetDefendList
    PASDKe20.fn.CASTLE.OV.GETATTACKLIST = C_ccmGetAttackList
    PASDKe20.fn.CASTLE.OV.GETLANDDETAIL = C_ccmGetLandDetail

    // MAP
    PASDKe20.fn.CASTLE.GETLANDLIST = C_getLandListM
    PASDKe20.fn.CASTLE.GETLANDSTATUS = C_getLandStatus
    PASDKe20.fn.CASTLE.CHOOSELAND = C_chooseLand
    PASDKe20.fn.CASTLE.GETPLAYERSLANDSTATUS = C_getPlayersLandStatus
    PASDKe20.fn.CASTLE.GETMAINCM = C_getMainCM
    PASDKe20.fn.CASTLE.GETLANDLIST2D = C_getLandListM2D
    PASDKe20.fn.CASTLE.GETLANDLIST3D = C_getLandListM3D
    PASDKe20.fn.CASTLE.GETLANDFLAG2D = C_getLandFlag2D
    PASDKe20.fn.CASTLE.FINDCASTLEARENA = C_findCastleArena

    PASDKe20.fn.SIGNIN = commonSignIn;
    PASDKe20.fn.SIGNUP = commonSignUp;
    PASDKe20.fn.RESETPASSWORD = C_commonResetPwd;
    // // PASDKe20.fn.POCPURCHASE = commonPocPurchase;
    // // PASDKe20.fn.GETSHOPINFO = commonGetShopInfo;
    // PASDKe20.fn.GETREWARDEXP = commonGetRewardExp;
    // PASDKe20.fn.OPENLINK = openLink;
    PASDKe20.fn.LOGOUT = C_logout;

    PASDKe20.fn.isInited = function(){ return !(isInit) }

    PASDKe20.fn.PLAYER = {};
    PASDKe20.fn.PLAYER.GETINFO = C_GetInfo;
    PASDKe20.fn.PLAYER.SETINFO = C_SetInfo;
    PASDKe20.fn.PLAYER.GETDAILYREWARD = C_GetDailyReward;   // SAME
    PASDKe20.fn.PLAYER.SETDAILYREWARD = C_SetDailyReward;   // SAME
    PASDKe20.fn.PLAYER.USEBALANCE = C_UseBalance;       // SAME
    PASDKe20.fn.PLAYER.UPDATEPOINT = C_UpdatePoint;     // not ready yet
    PASDKe20.fn.PLAYER.UPDATEXP = C_UpdateXP;     // not ready yet

    PASDKe20.fn.MATCH = {};
    // PASDKe20.fn.MATCH.CHALLENGERANDOM = C_ChallengeRandom;     //
    // PASDKe20.fn.MATCH.GETSTATUS = C_GetStatus;     //
    // PASDKe20.fn.MATCH.REPORTSCOREPA = C_ReportScorePA;

    PASDKe20.fn.GAME = {};
    PASDKe20.fn.GAME.GETSAVEDATA = C_getSaveData;   // SAME
    PASDKe20.fn.GAME.SETSAVEDATA = C_setSaveData;   // SAME

    ////////////////////////////////////////           API             //////////////////////////////
    //data will be transfered between modules by this object
    PASDKe20.fn.resolve = resolve;
    // PASDKe20.fn.util = util;

    /**
     *  api  
     * @param arr [API    ]. api  url
     * @param onComplete function.  'arr' url    
     * ex)
     *   resolve(
     *      [_api.member.signUp(id, ....), _api.member.signIn(id, ....)],
     *      function(call1_response, call2_response){
     *          ...
     *      });
     */
    function resolve(arr, onComplete){

        var defer = $.Deferred(),
            cnt = 0, total = arr.length,
            hasErr = false,
            resArr = [];

        function next(){
            cnt++;

            if(cnt == total){
                if(onComplete){
                    onComplete.apply(null, resArr);
                }
            }
        }

        for(var key in arr){
            (function(i){
                var idx = i;

                arr[idx].then(function(res){
                    if(false) console.log('api call', idx, this, res);

                    var _res = res;

                    if(typeof res == 'string'){
                        //check json format
                        var patt = /\,|\:/g,
                            str = res;
                        var hasFormat = patt.test(res);
                        var firstStr = str.substr(0, 1),
                            lastStr = str.substr(str.length-1, 1);
                        if(firstStr == '{' && lastStr == '}' && hasFormat){
                            _res = JSON.parse(res);
                        }
                    }

                    resArr[idx] = _res;
                    next();
                    //
                }, function(err){
                    if(false) console.log('api call failed', idx, this, err);
                    //return err;
                    resArr[idx] = err;
                    hasErr = true;
                    next();
                });


            }).call(this, key);

        }
    }

    ///////////////////         COMMON                      ///////////////////


    function checkInitStatus(resource){
        var self = _loader;
        if(false) console.log('Resource (' + resource + ') is ready', INIT.phase + '/' + INIT.TOTAL);
        if(INIT.phase == INIT.TOTAL){

            startGameAsyncSuccess();

        }
    }

    function startGameAsyncSuccess(){
        var self = _loader;

        //GAME START
        isInit = false;

        // show bot subscription
        // _loader.IGAPI.PLAYER.CHECKSUBSCRIBEBOT(function(){
        //     //
        // }, function (err) {
        //     // do nothing
        // });

        if(self.UTIL.isIOS()){
            // scroll to top to hide address bar in safari
            w.scrollTo(0,1)
        }

        if (_api.isAndroid()){
            var token = w.Android.getPushToken();
            if(false) console.log('send push notification token', token);
            self.resolve([_api.android.setPushId(token)], function (res) {
                // not important to check success / fail status
                if(false) console.log('setPushid called', res);
            });
        }

        //     DOM     
        // DOM     
        var _intv = setInterval(function () {
            if(_api.getUIisReady()){
                // DOM  
                clearInterval(_intv);
                //  IS_READY  
                // C_isReady onComplete  onError  
                initDefer.resolve();

            }
        }, 80);
    }

    var isProgressDone = false;
    function C_progress(percent){
        if (!isProgressDone){
            // This function should not be called when 'percent' value reached 100
            if(false) console.log('ccLoader', percent);

            if(percent >= 100){
                isProgressDone = true
                INIT.phase++;
                checkInitStatus('loading');
            }
        }
    }

    function replaceNullStr(obj){
        var newV = obj;
        var nName = 'Opponent';
        // var nImg = 'https://apps-n.apps.fbsbx.com/instant-bundle/null';
        var nImg = 'static/img/random-profile.png';
        if(obj.opponickname == 'null'){
            newV.opponickname = nName;
            newV.oppophoto = nImg;
        }
        if(obj.nickname == 'null'){
            newV.nickname = nName;
            newV.photo = nImg;
        }
        return newV;
    }

    var checkInitDeferIntv = null;
    function C_isReady(onComplete, onError){

        if(onComplete || onError){

            // the moment when this func is called can be dynamic.
            if(initDefer){
                initDefer.promise().then(function(){

                    // generate match info
                    var _me = _loader.API.getMyInfo();
                    if(matchInfo && matchInfo.matchinfo) _mi = matchInfo.matchinfo;
                    var _match = null;
                    if(_mi){
                        _match = { match : {
                            matchno : matchInfo.matchno, // add matchno,
                            entryfee: _mi.entryfee,
                            matchresult: _mi.matchresult,
                            matchsetno: _mi.matchsetno,
                            matchtype: _mi.matchtype,
                            roomid: _mi.roomid,
                            myinfo: {
                                fbid: _me.id,
                                name: _me.nickname,
                                photo: _me.photo,
                                country: _me.countryCode,
                                gamedata: //_mi.gamedata; later
                                    {score: _mi.myscore}
                            },
                            oppoinfo: {
                                fbid: _mi.oppouserid,
                                name: _mi.opponickname,
                                photo: _mi.oppophoto,
                                country: _mi.oppocountry,
                                gamedata: // _mi.gamedata; later
                                    {score: _mi.opposcore}
                            },
                            // playtype: _mi,
                            rewardamount: _mi.rewardamount,
                            rewardtrophy: _mi.rewardtrophy,
                            issecondplay: (_mi.oppomatchno != '') ? 1 : 0
                        }};
                    }
                    if(onComplete) onComplete(_match);
                }, function(err){
                    if(onError) onError(err);
                });
            }else {
                checkInitDeferIntv = setInterval(function () {
                    if (initDefer){
                        clearInterval(checkInitDeferIntv);
                        checkInitDeferIntv = null;
                        C_isReady(onComplete, onError);
                    }
                }, 50);
            }
        }
    }
    function C_setGameVer(val){
        _api.setGameVer(val);
    }
    function C_getMatchRoom(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _matchmode = _api.encrypt('1'); // always 1(esports) for SDK, 2(pocketarena) for web

        _api.pa.getMatchRoom(_gameid, _userid, _matchmode).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) cdata = {"returncode":CODE.SUCCESS_ERROR,"message":"error"};
            else {
                cdata.recomminfo = cdata.recomminfo.map(function(val, idx){
                    return replaceNullStr(val);
                })
                // cdata.recomminfo2 = cdata.recomminfo2.map(function(val, idx){
                //     return replaceNullStr(val);
                // })
            }
            updateBalances(cdata);
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    /**
     *
     * @param matchsetno
     * @param oppouserid string. random match only
     * @param gamedata object|null. game specific data, the field varies depending on a game
     * @param callback
     * @constructor
     */
    function C_startMatch(matchsetno, oppouserid, gamedata, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _matchsetno = _api.encrypt(matchsetno);
        var _roomid = _api.encrypt(_room.id);
        var _oppouserid = null;
        if(oppouserid) _oppouserid = _api.encrypt(oppouserid);
        var _gamedata = (gamedata) ? _api.encrypt(JSON.stringify(gamedata)) : _api.encrypt(JSON.stringify({}));

        var _matchmode = _api.encrypt('1');
        if(false) console.log('roomid', _room.id, _roomid);
        if(false) console.log('userid', (userInfo.userId || userInfo.uniqueId), _userid);
        if(false) console.log('matchsetno', matchsetno, _matchsetno);
        if(false) console.log('oppouserid', oppouserid, _oppouserid);
        if(false) console.log('gamedata', gamedata, _gamedata);

        _api.pa.startMatch(_gameid, _userid, _matchsetno, _roomid, _oppouserid, _gamedata, _matchmode).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {

            } else {
                cdata = replaceNullStr(cdata);
                updateBalances({
                    returncode : CODE.SUCCESS,
                    userinfo : {
                        rubyamount: cdata.rubyamount,
                        pointamount: cdata.pointamount,
                    }
                });
            }
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_finishMatch(gamescore, matchno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _matchno = _api.encrypt(matchno);
        var _gamescore = _api.encrypt(gamescore);

        // _api.updateTodayHighscore(gamescore, function (res) {
        //     if(res.returncode == CODE.SUCCESS){
                _api.pa.finishMatch(_gameid, _userid, _matchno, _gamescore).then(function(res) {
                    var cdata = res;
                    if(cdata.returncode != CODE.SUCCESS) {

                    } else {
                        cdata = replaceNullStr(cdata);
                    }
                    if(callback)callback(cdata);
                }, function(err){
                    var cdata = {"returncode":CODE.FAIL,"message":"error"};
                    if(callback)callback(cdata);
                });
        //     }else{
        //         if(callback)callback(res);
        //     }
        // });
    }
    function C_getMatchHistory(listcount,page,hlistcount,hpage,flistcount,fpage,callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _hlistcount = _api.encrypt(hlistcount);
        var _hpage = _api.encrypt(hpage);
        var _flistcount = _api.encrypt(flistcount);
        var _fpage = _api.encrypt(fpage);
        var _matchmode = _api.encrypt('1'); // always 1(esports) for SDK, 2(pocketarena) for web

        _api.pa.getMatchHistory(_gameid, _userid, _listcount, _page, _hlistcount, _hpage, _flistcount, _fpage, _matchmode).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {

            } else {
                if(cdata.historyInfo.htotalcount > 0){
                    cdata.historyInfo.historyInfo = cdata.historyInfo.historyInfo.map(function(val, idx){
                        return replaceNullStr(val);
                    });
                };
                if(cdata.pendinginfo.totalcount > 0){
                    cdata.pendinginfo.pendinginfo = cdata.pendinginfo.pendinginfo.map(function(val, idx){
                        return replaceNullStr(val);
                    });
                };
                if(cdata.requestinfo.totalcount > 0){
                    cdata.requestinfo.requestInfo = cdata.requestinfo.requestInfo.map(function(val, idx){
                        return replaceNullStr(val);
                    });
                };
            }
            updateBalances(cdata);
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });

    }
    function C_getShop(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.getShop(_gameid, _userid).then(function(res) {
            var cdata = res;
            updateBalances(cdata);
            // if(_loader.UTIL.isIOS() || !_loader.IGAPI.IAPSUPPORT()){
            //     // no iap
                if(callback)callback(cdata);
            // }else {
            //     // iap
            //     _loader.IGAPI.GETCATALOG(function (res) {
            //         cdata.fbcatalog = res;
            //         if(callback)callback(cdata);
            //     }, function (err) {
            //         var cdata = {"returncode":CODE.FAIL,"message":"error"};
            //         if(callback)callback(cdata);
            //     })
            // }
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_getHistory(listcount,page,callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);

        _api.pa.getHistory(_gameid, _userid, _listcount, _page).then(function(res) {
            var cdata = res;
            updateBalances(cdata);
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_startPurchase(shopno,callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _shopno = _api.encrypt(shopno);

        _api.pa.startPurchase(_gameid, _userid, _shopno).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {
                // cdata = {"returncode":CODE.SUCCESS_ERROR,"message":res.message};
                _api.returnErr(res.returncode, callback, res.message);
            }else {
                if(callback)callback(cdata);
            }
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_finishPurchase(shoplogno,transactionid,callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _shoplogno = _api.encrypt(shoplogno);
        var _transactionid= _api.encrypt(transactionid);

        //gameid, userid, shoplogno, transactionid, productid, purchasetoken,paymentid
        _api.pa.finishPurchase(_gameid, _userid, _shoplogno, _transactionid).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {
                _api.returnErr(cdata.returncode, callback, cdata.message);
                // cdata = {"returncode":CODE.SUCCESS_ERROR,"message":res.message};
            }else {
                if(callback)callback(cdata);
            }
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_setFreeReward(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.setFreeReward(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_startAds(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.startAds(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_finishAds(adslogno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _adslogno = _api.encrypt(adslogno);

        _api.pa.finishAds(_gameid, _userid, _adslogno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_getMyAccount(callback){
        var self = _loader;
        userInfo = _api.getMember();
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.getMyAccount(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_getLeaderboard(leadertype, listcount, page, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _leadertype = _api.encrypt(leadertype+'');
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);

        _api.pa.getLeaderboard(_gameid, _userid, _leadertype, _listcount, _page).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {
            } else {
                if(cdata.totalcount > 0){
                    cdata.leaderinfo = cdata.leaderinfo.map(function(val, idx){
                        return replaceNullStr(val);
                    })
                }
            }
            updateBalances(cdata);
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_getMatchData(matchno, callback){
        var self = _loader;
        userInfo = _api.getMember();
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.getMatchData(_gameid, _userid, matchno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    /**
     *
     * @param matchmode number. 1 = esports, 2 = pa
     * @param callback
     * @constructor
     */
    function C_getRandom(matchmode, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _matchmode = _api.encrypt(matchmode);
        _api.pa.getRandom(_gameid, _userid, _matchmode).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {

            } else {
                cdata.recomminfo = cdata.recomminfo.map(function(val, idx){
                    if(val.oppophoto) val.oppophoto = _api.replacePhotoPath(val.oppophoto);
                    return replaceNullStr(val);
                });
            }
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    };

    function C_getMain(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.getMain(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getProfile(listcount, page, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);

        _api.pa.getProfile(_gameid, _userid, _listcount, _page).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getMatchList(listcount, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);

        _api.pa.getMatchList(_gameid, _userid, _listcount).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getMatchHistory2(listcount, page, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);

        _api.pa.getMatchHistory2(_gameid, _userid, _listcount, _page).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_giveRuby(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.giveRuby(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_castleList(listcount, page, sorting, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _sorting = _api.encrypt(sorting);

        _api.pa.castleList(_gameid, _userid, _listcount, _page, _sorting).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_sendResult(stageno, gamescore, matchresult, wavecount, totalwave, robotno, matchmode, playtime, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _stageno = _api.encrypt(stageno);
        var _gamescore = _api.encrypt(gamescore);
        var _matchresult = _api.encrypt(matchresult);
        var _wavecount = _api.encrypt(wavecount);
        var _totalwave = _api.encrypt(totalwave);
        var _robotno = _api.encrypt(robotno);
        var _matchmode = _api.encrypt(matchmode);
        var _playtime = _api.encrypt(playtime);

        _api.pa.sendResult(_gameid, _userid, _stageno, _gamescore, _matchresult, _wavecount, _totalwave, _robotno, _matchmode, _playtime).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {
                if(cdata.returncode == -77 || cdata.returncode == -44){
                    // -77 : XP in this playing cannot be earned. Only XP that is earned in every 30 seconds is considered.
                    cdata = {"returncode":res.returncode,"message":res.message};
                }else {
                    cdata = {"returncode":CODE.SUCCESS_ERROR,"message":"error"};
                }
            }else {
                _api.setMyInfo({rubyamount : Number(cdata.userinfo.rubyamount)});
                _api.setMyInfo({pointamount : Number(cdata.userinfo.pointamount)});
            }
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_updateMatch(matchno, adslogno, iaplogno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _matchno = _api.encrypt(matchno);
        var _adslogno = _api.encrypt(adslogno);
        var _iaplogno = _api.encrypt(iaplogno);

        _api.pa.updateMatch(_gameid, _userid, _matchno, _adslogno, _iaplogno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_upgradeCastleArena(castleno, itemno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        var _itemno = _api.encrypt(itemno);

        _api.pa.upgradeCastleArena(_gameid, _userid, _castleno, _itemno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_castleDetail(castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);

        _api.pa.castleDetail(_gameid, _userid, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_itemInfo(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.itemInfo(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_requestRent(castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);

        _api.pa.requestRent(_gameid, _userid, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_cancelRent(castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);

        _api.pa.cancelRent(_gameid, _userid, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_requestExt(castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);

        _api.pa.requestExt(_gameid, _userid, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function c_getPopup(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.getPopup(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_findCastle(castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);

        _api.pa.findCastle(_gameid, _userid, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    /**
     * for Castle Defense
     * @param listcount
     * @param callback
     * @constructor
     */
    function C_getRandom2(listcount, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        _api.pa.getRandom2(_gameid, _userid, _listcount).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    };

    function C_getMyLandList(listcount, page, castleno, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _castleno = _api.encrypt(castleno);
        var _maptype = _api.encrypt(maptype);
        _api.pa.getMyLandList(_gameid, _userid, _listcount, _page, _castleno, _maptype).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) cdata = {"returncode":CODE.SUCCESS_ERROR,"message":"error"};
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getMyLandHistory(listcount, page, castleno, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _castleno = _api.encrypt(castleno);
        var _maptype = _api.encrypt(maptype);
        _api.pa.getMyLandHistory(_gameid, _userid, _listcount, _page, _castleno, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getMyLandDetail(castlemapno, castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castlemapno = _api.encrypt(castlemapno);
        var _castleno = _api.encrypt(castleno);
        _api.pa.getMyLandDetail(_gameid, _userid, _castlemapno, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getMyDefendList(listcount, page, castleno, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _castleno = _api.encrypt(castleno);
        var _maptype = _api.encrypt(maptype);
        _api.pa.getMyDefendList(_gameid, _userid, _listcount, _page, _castleno, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getMyAttackList(listcount, page, castleno, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _castleno = _api.encrypt(castleno);
        var _maptype = _api.encrypt(maptype);
        _api.pa.getMyAttackList(_gameid, _userid, _listcount, _page, _castleno, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_checkAttackCond(oppocastlemapno, oppocastleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _oppocastlemapno = (oppocastlemapno) ? _api.encrypt(oppocastlemapno) : null;
        var _oppocastleno = (oppocastleno) ? _api.encrypt(oppocastleno) : null;
        _api.pa.checkAttackCond(_gameid, _userid, _oppocastlemapno, _oppocastleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_createAttack(castleno, stageno, matchdata, paytype, gamescore, oppocastlemapno, oppocastleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        var _stageno = _api.encrypt(stageno);
        var _matchdata = _api.encrypt(matchdata);
        var _paytype = _api.encrypt(paytype);
        var _gamescore = _api.encrypt(gamescore);
        var _oppocastlemapno = (oppocastlemapno) ? _api.encrypt(oppocastlemapno) : null;
        var _oppocastleno = (oppocastleno) ? _api.encrypt(oppocastleno) : null;
        _api.pa.createAttack(_gameid, _userid, _castleno, _stageno, _matchdata, _paytype, _gamescore, _oppocastlemapno, _oppocastleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_checkDefendCond(castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = (castleno) ? _api.encrypt(castleno) : null;
        _api.pa.checkDefendCond(_gameid, _userid, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_startDefend(castleno, battleno, paytype, oppocastleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        var _battleno = _api.encrypt(battleno);
        var _paytype = _api.encrypt(paytype);
        var _oppocastleno = _api.encrypt(oppocastleno);
        _api.pa.startDefend(_gameid, _userid, _castleno, _battleno, _paytype, _oppocastleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_finishDefend(battleno, gamescore, matchresult, castleno, oppocastleno, matchdata, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _battleno = _api.encrypt(battleno);
        var _gamescore = _api.encrypt(gamescore);
        var _matchresult = _api.encrypt(matchresult);
        var _castleno = _api.encrypt(castleno);
        var _oppocastleno = _api.encrypt(oppocastleno);
        var _matchdata = _api.encrypt(matchdata);
        _api.pa.finishDefend(_gameid, _userid, _battleno, _gamescore, _matchresult, _castleno, _oppocastleno, _matchdata).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_sendResultStage(stageno, gamescore, matchresult, wavecount, totalwave, castleno, matchno, matchmode, playtime, callback, starcount){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _stageno = _api.encrypt(stageno);
        var _gamescore = _api.encrypt(gamescore);
        var _matchresult = _api.encrypt(matchresult);
        var _wavecount = _api.encrypt(wavecount);
        var _totalwave = _api.encrypt(totalwave);
        var _castleno = _api.encrypt(castleno);
        var _matchno = _api.encrypt(matchno);
        var _matchmode = _api.encrypt(matchmode);
        var _playtime = (playtime) ? _api.encrypt(playtime) : null;
        var _starcount = _api.encrypt(starcount);
        _api.pa.sendResultStage(_gameid, _userid, _stageno, _gamescore, _matchresult, _wavecount, _totalwave, _castleno, _matchno, _matchmode, _playtime, _starcount).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_cancelRentArena(castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        _api.pa.cancelRentArena(_gameid, _userid, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getMyLandResult(listcount, page, castleno, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _castleno = _api.encrypt(castleno);
        var _maptype = _api.encrypt(maptype);
        _api.pa.getMyLandResult(_gameid, _userid, _listcount, _page, _castleno, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getTodayBattles(listcount, page, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _maptype = _api.encrypt(maptype);
        _api.pa.getTodayBattles(_gameid, _userid, _listcount, _page, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getStrategy(maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _maptype = (maptype) ? _api.encrypt(maptype) : null;
        _api.pa.getStrategy(_gameid, _userid, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_saveStrategy(maptype, strategydata, strategytitle, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _maptype = _api.encrypt(maptype);
        var _strategydata = _api.encrypt(strategydata);
        var _strategytitle = _api.encrypt(strategytitle);
        _api.pa.saveStrategy(_gameid, _userid, _maptype, _strategydata, _strategytitle).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_updateStrategy(maptype, strategydata, strategytitle, strategyno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _maptype = _api.encrypt(maptype);
        var _strategydata = _api.encrypt(strategydata);
        var _strategytitle = _api.encrypt(strategytitle);
        var _strategyno = _api.encrypt(strategyno);
        _api.pa.updateStrategy(_gameid, _userid, _maptype, _strategydata, _strategytitle, _strategyno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_delStrategy(strategyno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _strategyno = _api.encrypt(strategyno);
        _api.pa.delStrategy(_gameid, _userid, _strategyno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_updateFlag(castleno, flagname, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = (castleno) ? _api.encrypt(castleno) : null;
        var _flagname = _api.encrypt(flagname);
        _api.pa.updateFlag(_gameid, _userid, _castleno, _flagname).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_cStartMatch(castleno, stageno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        var _stageno = _api.encrypt(stageno);
        _api.pa.cStartMatch(_gameid, _userid, _castleno, _stageno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getMainArena(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        _api.pa.getMainArena(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getCastleArena(castleno, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        var _maptype = _api.encrypt(maptype);
        _api.pa.getCastleArena(_gameid, _userid, _castleno, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getArenaHistory(listcount, page, castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _castleno = _api.encrypt(castleno);
        _api.pa.getArenaHistory(_gameid, _userid, _listcount, _page, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_cGetLandListM(maptype, startx, starty, endx, endy, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _maptype = (typeof maptype != 'undefined') ? _api.encrypt(maptype) : null;
        var _startx = _api.encrypt(startx);
        var _starty = _api.encrypt(starty);
        var _endx = _api.encrypt(endx);
        var _endy = _api.encrypt(endy);
        _api.pa.cGetLandListM(_gameid, _maptype, _startx, _starty, _endx, _endy).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getLandDetail(castlemapno, castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castlemapno = _api.encrypt(castlemapno);
        var _castleno = _api.encrypt(castleno);
        _api.pa.getLandDetail(_gameid, _userid, _castlemapno, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_requestExtArena(castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        _api.pa.requestExtArena(_gameid, _userid, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_requestRentArena(castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        _api.pa.requestRentArena(_gameid, _userid, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getMyTodayBattles(castleno, listcount, page, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _maptype = _api.encrypt(maptype);
        _api.pa.getMyTodayBattles(_gameid, _userid, _castleno, _listcount, _page, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getPublicPool(castleno, listcount, page, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _maptype = _api.encrypt(maptype);
        _api.pa.getPublicPool(_gameid, _userid, _castleno, _listcount, _page, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getProfileArena(listcount, page, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        _api.pa.getProfileArena(_gameid, _userid, _listcount, _page).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_contractRequest(castleno, telegramid, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        var _telegramid = _api.encrypt(telegramid);
        _api.pa.contractRequest(_gameid, _userid, _castleno, _telegramid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_updateSetArena(setmode, emailyn, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _setmode = _api.encrypt(setmode);
        var _emailyn = _api.encrypt(emailyn);
        _api.pa.updateSetArena(_gameid, _userid, _setmode, _emailyn).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_sendResultDaily(stageno, gamescore, matchresult, wavecount, totalwave, castleno, playtime, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _stageno = _api.encrypt(stageno);
        var _gamescore = _api.encrypt(gamescore);
        var _matchresult = _api.encrypt(matchresult);
        var _wavecount = _api.encrypt(wavecount);
        var _totalwave = _api.encrypt(totalwave);
        var _castleno = _api.encrypt(castleno);
        var _playtime = (playtime) ? _api.encrypt(playtime) : null;
        _api.pa.sendResultDaily(_gameid, _userid, _stageno, _gamescore, _matchresult, _wavecount, _totalwave, _castleno, _playtime).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_itemInfoArena(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        _api.pa.itemInfoArena(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_purchaseItem(castleno, itemno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        var _itemno = _api.encrypt(itemno);
        _api.pa.purchaseItem(_gameid, _userid, _castleno, _itemno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getMessagesArena(listcount, page, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        _api.pa.getMessagesArena(_gameid, _userid, _listcount, _page).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_updateMessageArena(castlemessageno, mode, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castlemessageno = _api.encrypt(castlemessageno);
        var _mode = _api.encrypt(mode);
        _api.pa.updateMessageArena(_gameid, _userid, _castlemessageno, _mode).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_updateAgree(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        _api.pa.updateAgree(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_sendResultNoCastle(stageno, gamescore, matchresult, wavecount, totalwave, playtime, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _stageno = _api.encrypt(stageno);
        var _gamescore = _api.encrypt(gamescore);
        var _matchresult = _api.encrypt(matchresult);
        var _wavecount = _api.encrypt(wavecount);
        var _totalwave = _api.encrypt(totalwave);
        var _playtime = _api.encrypt(playtime);
        _api.pa.sendResultNoCastle(_gameid, _userid, _stageno, _gamescore, _matchresult, _wavecount, _totalwave, _playtime).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getAllLandList(castleno, startx, starty, endx, endy, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _castleno = _api.encrypt(castleno);
        var _startx = _api.encrypt(startx);
        var _starty = _api.encrypt(starty);
        var _endx = _api.encrypt(endx);
        var _endy = _api.encrypt(endy);
        _api.pa.getAllLandList(_gameid, _castleno, _startx, _starty, _endx, _endy).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getAllLandList2D(castleno, startx, starty, endx, endy, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _castleno = _api.encrypt(castleno);
        var _startx = _api.encrypt(startx);
        var _starty = _api.encrypt(starty);
        var _endx = _api.encrypt(endx);
        var _endy = _api.encrypt(endy);
        _api.pa.getAllLandList2D(_gameid, _castleno, _startx, _starty, _endx, _endy).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_cGetLandListM2D(maptype, startx, starty, endx, endy, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _maptype = (typeof maptype != 'undefined') ? _api.encrypt(maptype) : null;
        var _startx = _api.encrypt(startx);
        var _starty = _api.encrypt(starty);
        var _endx = _api.encrypt(endx);
        var _endy = _api.encrypt(endy);
        _api.pa.cGetLandListM2D(_gameid, _maptype, _startx, _starty, _endx, _endy).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_ncGetLandListM(maptype, startx, starty, endx, endy, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _maptype = (typeof maptype != 'undefined') ? _api.encrypt(maptype) : null;
        var _startx = _api.encrypt(startx);
        var _starty = _api.encrypt(starty);
        var _endx = _api.encrypt(endx);
        var _endy = _api.encrypt(endy);
        _api.pa.ncGetLandListM(_gameid, _maptype, _startx, _starty, _endx, _endy).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_ncGetAllLandList(castleno, startx, starty, endx, endy, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _castleno = _api.encrypt(castleno);
        var _startx = _api.encrypt(startx);
        var _starty = _api.encrypt(starty);
        var _endx = _api.encrypt(endx);
        var _endy = _api.encrypt(endy);
        _api.pa.ncGetAllLandList(_gameid, _castleno, _startx, _starty, _endx, _endy).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_ncGetAllLandList2D(castleno, startx, starty, endx, endy, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _castleno = _api.encrypt(castleno);
        var _startx = _api.encrypt(startx);
        var _starty = _api.encrypt(starty);
        var _endx = _api.encrypt(endx);
        var _endy = _api.encrypt(endy);
        _api.pa.ncGetAllLandList2D(_gameid, _castleno, _startx, _starty, _endx, _endy).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_ncGetLandListM2D(maptype, startx, starty, endx, endy, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _maptype = (typeof maptype != 'undefined') ? _api.encrypt(maptype) : null;
        var _startx = _api.encrypt(startx);
        var _starty = _api.encrypt(starty);
        var _endx = _api.encrypt(endx);
        var _endy = _api.encrypt(endy);
        _api.pa.ncGetLandListM2D(_gameid, _maptype, _startx, _starty, _endx, _endy).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_acceptRent(castlemessageno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castlemessageno = _api.encrypt(castlemessageno);
        _api.pa.acceptRent(_gameid, _userid, _castlemessageno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_ccmGetMainArena(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        _api.pa.ccmGetMainArena(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_ccmGetCastleArena(castleno, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        var _maptype = (typeof maptype != 'undefined') ? _api.encrypt(maptype) : null;
        _api.pa.ccmGetCastleArena(_gameid, _userid, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_ccmGetMyLandList(listcount, page, castleno, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _castleno = _api.encrypt(castleno);
        var _maptype = _api.encrypt(maptype);
        _api.pa.ccmGetMyLandList(_gameid, _userid, _listcount, _page, _castleno, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_ccmGetDefendList(listcount, page, castleno, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _castleno = _api.encrypt(castleno);
        var _maptype = _api.encrypt(maptype);
        _api.pa.ccmGetDefendList(_gameid, _userid, _listcount, _page, _castleno, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_ccmGetAttackList(listcount, page, castleno, maptype, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);
        var _castleno = _api.encrypt(castleno);
        var _maptype = _api.encrypt(maptype);
        _api.pa.ccmGetAttackList(_gameid, _userid, _listcount, _page, _castleno, _maptype).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_ccmGetLandDetail(castlemapno, castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castlemapno = _api.encrypt(castlemapno);
        var _castleno = _api.encrypt(castleno);
        _api.pa.ccmGetLandDetail(_gameid, _userid, _castlemapno, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getLandListM(maptype, startx, starty, endx, endy, callback){
        var self = _loader;
        var _maptype = (maptype) ? _api.encrypt(maptype) : null;
        var _startx = _api.encrypt(startx);
        var _starty = _api.encrypt(starty);
        var _endx = _api.encrypt(endx);
        var _endy = _api.encrypt(endy);
        _api.pa.getLandListM(_maptype, _startx, _starty, _endx, _endy).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getLandStatus(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        _api.pa.getLandStatus(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_chooseLand(castlemapno, castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castlemapno = _api.encrypt(castlemapno);
        var _castleno = (castleno) ? _api.encrypt(castleno) : null;
        _api.pa.chooseLand(_gameid, _userid, _castlemapno, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getPlayersLandStatus(castleno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = _api.encrypt(castleno);
        _api.pa.getLandStatus2(_gameid, _userid, _castleno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getMainCM(listcount, page, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _listcount = _api.encrypt(listcount);
        var _page = _api.encrypt(page);

        _api.pa.getMainCM(_gameid, _userid, _listcount, _page).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getLandListM2D(maptype, startx, starty, endx, endy, callback){
        var self = _loader;
        var _maptype = (maptype) ? _api.encrypt(maptype) : null;
        var _startx = _api.encrypt(startx);
        var _starty = _api.encrypt(starty);
        var _endx = _api.encrypt(endx);
        var _endy = _api.encrypt(endy);
        _api.pa.getLandListM2D(_maptype, _startx, _starty, _endx, _endy).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getLandListM3D(maptype, startx, starty, endx, endy, callback){
        var self = _loader;
        var _maptype = (maptype) ? _api.encrypt(maptype) : null;
        var _startx = _api.encrypt(startx);
        var _starty = _api.encrypt(starty);
        var _endx = _api.encrypt(endx);
        var _endy = _api.encrypt(endy);
        _api.pa.getLandListM3D(_maptype, _startx, _starty, _endx, _endy).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getLandFlag2D(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        _api.pa.getLandFlag2D(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_findCastleArena(castleno, positionx, positiony, mode, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _castleno = (castleno) ? _api.encrypt(castleno) : null;
        var _positionx = (positionx) ? _api.encrypt(positionx) : null;
        var _positiony = (positiony) ? _api.encrypt(positiony) : null;
        var _mode = (mode) ? _api.encrypt(mode) : null;
        _api.pa.findCastleArena(_gameid, _userid, _castleno, _positionx, _positiony, _mode).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    ///////////////////         COMMON                      ///////////////////

    /**
     *
     * @param type 'email' | 'sns'
     * @param params object
     *      when type = 'email'
     *          - 'email', 'password'
     *      when type = 'sns'
     *          - 'snsName' = 'facebook' | 'google' | 'apple'
     * @param onComplete
     * @param onError function. pared error object
     */
    function commonSignIn(type, params, callback){

        if(!type || !params){
            if(callback) _api.returnErr(_api.setCode.MISSING_PARAM, callback);
            return;
        }

        w.focus();

        if(type == 'sns'){

            // get lang before sign up
            _api.langCodeForSignUp = _loader.LANG.getLang();

            if (!params.snsName) {
                if(callback) _api.returnErr(_api.setCode.MISSING_PARAM, callback);
                return;
            };
            if (params.snsName != 'google' && params.snsName != 'facebook' && params.snsName != 'apple'){
                if(callback) _api.returnErr(_api.setCode.WRONG_PARAM, callback);
                return;
            };
            _api.member.signInUpSns('in', params.snsName, function(res){

                if(false) console.log('userObj', res);

                if(res.returncode == CODE.SUCCESS){
                    var _userObj = res;
                    var isSignup = (_userObj.signupUser);
                    delete _userObj.signupUser;

                    if(isSignup){
                        updateLanguage(res, callback);
                    }else {
                        if(callback) callback(res);
                    }
                }else {
                    //, error is parsed
                    if(callback) callback(res);
                }
            })

        }else if (type == 'email') {

            var id;
            if (type == 'email') {
                if (!params.email || !params.password) {
                    if(callback) _api.returnErr(_api.setCode.MISSING_PARAM, callback);
                    return;
                };
                id = params.email;
            }

            _api.member.signIn(id, params.password).then(
                function (res) {
                    //success
                    if(false) console.log('success', res);
                    if (res.returncode == CODE.SUCCESS) {

                        if(_api.isAndroid()) Android.loginEmail();
                        else if(_api.isIos()) Ios.loginEmail();
                        _api.onSignInComplete(res.message.user_id, res.message.token, function (res) {
                            // update userInfo
                            userInfo = _api.getMember();
                            if (callback) callback(res);
                        });

                    } else {
                        //0 unknown
                        //1 unknown email
                        //2 wrong password
                        //3 disabled account : this account is disabled.
                        //11 missing parameter : 

                        if (callback) _api.returnErr(res.returncode, callback, res.message);
                    };

                }, function (err) {
                    //err
                    if(false) console.log('err', err);
                    _api.returnServerErr(callback);
                }
            );

        }else {
            //not supported type; -3 = wrong parameter
            if(callback) _api.returnErr(_api.setCode.WRONG_PARAM, callback);
            return;
        }
    }


    /**
     *
     * @param type 'email' | 'sns' | 'phone'
     * @param params
     *      when type = 'email'
     *          - 'email', 'password', 'nickname'
     *      when type = 'sns'
     *          - 'snsName' = 'facebook' | 'google' | 'apple'
     * @param callback function
     */
    function commonSignUp(type, params, callback){

        //if(!email || !nickname || !password){
        if(!type || !params){
            if(callback) _api.returnErr(_api.setCode.MISSING_PARAM, callback);
            return;
        }

        // get lang before sign up
        _api.langCodeForSignUp = _loader.LANG.getLang();

        // copy non-signed in user's info for sign in phase
        var tempInfo = null, random_user_id;
        if (_loader.PLAYER.GETINFO().isAnonymous){
            tempInfo = JSON.parse(JSON.stringify(_loader.PLAYER.GETINFO()));
            random_user_id = tempInfo.id;
        }

        //reset user local db data to prevent to override previous user's record to new user's
        _api.member.signOut(function(){

            if(tempInfo){
                // set user info manually to keep.
                // Otherwise rewardExp is removed and the accumulated exp is not saved to user's account
                _api.setMyInfo({
                    reward_exp : tempInfo.rewardExp,
                    isAnonymous : tempInfo.isAnonymous
                });
            }

            if (type == 'sns') {
                if (!params.snsName) {
                    if(callback) _api.returnErr(_api.setCode.MISSING_PARAM, callback);
                    return;
                };
                if (params.snsName != 'google' && params.snsName != 'facebook' && params.snsName != 'apple'){
                    if(callback) _api.returnErr(_api.setCode.WRONG_PARAM, callback);
                    return;
                };

                _api.member.signInUpSns('up', params.snsName, function(res){

                    if(false) console.log('userObj', res);

                    if(res.returncode == CODE.SUCCESS){
                        // if (onComplete) onComplete(userObj);
                        updateLanguage(res.user, callback);
                    }else {
                        //, error is parsed
                        if(callback) callback(res);
                    }
                });

            }else if (type == 'email') {

                var id;
                if (!params.email || !params.password || !params.nickname) {
                    if(callback) _api.returnErr(_api.setCode.MISSING_PARAM, callback);
                    return;
                };
                id = params.email;

                _api.member.signUp(id, params.nickname, params.password, random_user_id).then(
                    function (res) {
                        //success
                        if(false) console.log('success', res);

                        if (res.returncode == CODE.SUCCESS) {

                            commonSignIn(type, params,
                                function (res) {
                                    // // userObj's lang info is updated
                                    // // if (onComplete) onComplete(userObj, poc);
                                    // updateLanguage(userObj, poc, onComplete, callback);

                                    if(res.returncode == errCode.SUCCESS) {
                                        updateLanguage(res, callback);
                                    }else {
                                        //'res' is processed for response
                                        if (callback) callback(res);
                                    }
                                });

                        } else {

                            //0 "unknown"
                            //1 "email is already used" | "phone is already used"
                            //2 "wrong password"; min 8 max 50
                            //3 "Too many signup with same IP"
                            //4 wrong verification code
                            //11 "missing parameter : "

                            if (res.returncode == _api.setCode.CUSTOM_UNAUTHORIZED) {

                                if (callback) callback(res);

                            } else if (res.returncode == 1 || res.returncode == 2 || res.returncode == 3 || res.returncode == 4) {

                                if (callback) _api.returnErr(res.returncode, callback, res.message);

                            } else {

                                _api.returnServerErr(callback);
                            }
                        }

                    }, function (err) {
                        //err
                        if(false) console.log('err', err);
                        _api.returnServerErr(callback);
                    }
                )

            }else {
                //not supported type
                if(callback) _api.returnErr(_api.setCode.WRONG_PARAM, callback, errMsg.WRONG_PARAMETER_VALUE);
                return;
            }
        });
    }

    /**
     * called after sign up call is successful
     * @param userObj
     *      returncode
     *      user
     * @param callback
     */
    function updateLanguage(userObj, callback){

        if(false) console.log('userObj', userObj, 'lang', _api.langCodeForSignUp);
        // nickname, countryCode, langCode, pwd, newPwd, image, email, callback
        _loader.PLAYER.SETINFO(userObj.nickname, userObj.countryCode, _api.langCodeForSignUp, null, null, null, null, function (res) {
            if(false) console.log('player', _loader.PLAYER.GETINFO())
            if(res.returncode == CODE.SUCCESS){
                // language info is updated
                var newUserObj = _loader.PLAYER.GETINFO();
                var _res = {
                    returncode : res.returncode,
                    user : newUserObj
                };
                _api.langCodeForSignUp = null;
                if (callback) callback(_res);
            }else {
                if (callback) callback(res);
            }
        });
    }

    /**
     *
     * @param email string
     * @param callback function
     */
    function C_commonResetPwd(email, callback){

        var cdata = {"returncode":CODE.FAIL,"message":"error"};
        if(!email){
            if(callback)callback(cdata);
            return;
        }

        _api.member.forgotPwd(email).then(
            function(res){
                //success
                if(false) console.log('success', res);
                var cdata = res;
                if(callback)callback(cdata);

            }, function(err){
                //err
                if(false) console.log('err', err);
                var cdata = {"returncode":CODE.FAIL,"message":"error"};
                if(callback)callback(cdata);
            }
        )
    }

    function C_logout(callback){
        _api.member.signOut(function(){
            if(callback) callback();
        }, function(err) {
            if(callback) callback(err);
        });
    }

    ///////////////////////////////////////////////////////////////////////////////////
    // PLAYER
    ///////////////////////////////////////////////////////////////////////////////////
    function C_GetInfo(){
        var _uinfo = JSON.parse(JSON.stringify(userInfo));
        var _uinfo2 = _api.getMyInfo();
        for(var i in _uinfo2){
            // if(i !== 'nickname'){
                _uinfo[i] = _uinfo2[i];
            // }
        }
        _uinfo.id = (_uinfo.isAnonymous) ? _uinfo.uniqueId : _uinfo.userId;
        delete _uinfo.uniqueId;
        delete _uinfo.userId;
        delete _uinfo.token;
        return _uinfo;
    }

    /**
     *
     * @param data object
     *      nickname,
     *      countryCode,
     *      langCode,
     *      pwd
     *      newPwd
     *      image   string | File
     * @param callback
     * @constructor
     */
    function C_SetInfo(nickname, countryCode, langCode, pwd, newPwd, image, email, callback){
    // function C_SetInfo(data, callback){
        var self = _loader;
        // var _gameid = _api.encrypt(self.gameId);
        // var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        self.resolve([_api.member.setMyInfo(nickname, countryCode, langCode, pwd, newPwd, image, email)], function(res){
        // self.resolve([_api.member.setMyInfo(data.nickname, data.countryCode, data.langCode, data.pwd, data.newPwd, data.image)]).then(function(res){
            var cdata = res;
            if(!cdata.returncode) {
                cdata = {"returncode":CODE.FAIL,"message":"error"};
            }else if(cdata.returncode != CODE.SUCCESS) {
            }else if(cdata.returncode == CODE.SUCCESS) {

            }
            if(callback)callback(cdata);

        });
    }

    ///////////////////////////////////////////////////////////////////////////////////
    // COLYSEUS MATCH CHALLENGE
    ///////////////////////////////////////////////////////////////////////////////////
    function C_ChallengeRandom(handlername,gamedata,callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        N_SetJoinType(handlername+"");
        N_JoinNetwork(gamedata);
        callback("success");
    }
    function C_GetStatus(){
        return N_GetStatus();
    }
    /**
     * redirect to web SDK
     * @param score
     * @constructor
     */
    function C_ReportScorePA(score){
        // matchInfo.matchno may be reset when the page is refreshed
        _loader.API.reportScoreToPA(matchInfo.matchno, score);
    }

    function C_SelectFriend(callback){
        var self = _loader;
        var name = userInfo.name;
        var photo = userInfo.photo;
        var mid = (userInfo.userId || userInfo.uniqueId);
        var opinfo = {"id":"","locale":"","name":"","photo":""};

        function getOppo(){
            self.IGAPI.CONTEXT.GETPLAYERS(function(friends){
                for(var i  = 0 ; i < friends.length; i++){
                    if(friends[i].id != mid){
                        opinfo = friends[i];
                        break;
                    }
                }
                var _opinfo = {"fbid":opinfo.id,"country":opinfo.locale,"name":opinfo.name,"photo":opinfo.photo};
                _opinfo.fbid = opinfo.id;
                callback(_opinfo);

            });
        }

        self.IGAPI.CONTEXT.CHOOSE(null, null, null, function () {

            getOppo();

        }, function(e){

            if(e.code === 'SAME_CONTEXT'){
                //  3  
                getOppo();

            }else {
                if(e.code == 'USER_INPUT'){
                    callback(e);
                }else {
                    callback();
                }
            }
        });
    }
    function C_GetDailyReward(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.getDailyReward(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_SetDailyReward(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.setDailyReward(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(cdata.returncode == CODE.SUCCESS){
                if(cdata.rewardtype == 1){ // ruby
                    _api.setMyInfo({rubyamount : Number(cdata.currentamount)});
                }else if(cdata.rewardtype == 2){
                    _api.setMyInfo({pointamount : Number(cdata.currentamount)});
                }
            }
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_UseBalance(mode,amount,callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _mode = _api.encrypt(mode); // 1 gamemoney(epoint), 2 ruby(xp)
        var _spendamount = _api.encrypt(amount);
        var _modeTemp = mode;
        _api.pa.useBalance(_gameid, _userid, _mode, _spendamount).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {
            }else {
                var _currency = (_modeTemp == 1) ? 'pointamount' : 'rubyamount';
                var _obj = {};
                _obj[_currency] = Number(cdata.currentamount);
                _api.setMyInfo(_obj);
            }
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }
    function C_UpdatePoint(mode,amount,callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _mode = _api.encrypt(mode);  // 1 : get, 2: use
        var _spendamount = _api.encrypt(amount);
        var _modeTemp = mode;
        _api.pa.updatePoint(_gameid, _userid, _mode, _spendamount).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {
            }else {
                _api.setMyInfo({pointamount: Number(cdata.currentamount)});
            }
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_UpdateXP(mode,amount,castleno,paytype,callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _mode = _api.encrypt(mode);  // 1 : get, 2: use
        var _spendamount = _api.encrypt(amount);
        var _castleno = (castleno) ? _api.encrypt(castleno) : null;
        var _paytype = (paytype) ? _api.encrypt(paytype) : null; // 1:use arena pool xp | 2: use player xp
        _api.pa.updateXP(_gameid, _userid, _mode, _spendamount, _castleno, _paytype).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {
            }else {
                _api.setMyInfo({rubyamount: Number(cdata.currentamount)});
            }
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_globalLeader(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.getGlobalLeaderboard(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {

            } else {
                var lbd = (cdata.totalcount == 0) ? [] : cdata.leaderinfo;
                var resObj = formatLB(lbd, cdata.userinfo);
                resObj.count = cdata.totalcount;
                resObj.returncode = cdata.returncode;
                resObj.message = cdata.message;
                cdata = resObj;
            }
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_friendsLeader(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.getFriendsLeaderboard(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {

            } else {
                var lbd = (cdata.totalcount == 0) ? [] : cdata.leaderinfo;
                var resObj = formatLB(lbd);
                resObj.count = cdata.totalcount;
                resObj.returncode = cdata.returncode;
                resObj.message = cdata.message;
                cdata = resObj;
            }
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_updateStage(score, stageno, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));
        var _score = _api.encrypt(score);
        var _stageno = _api.encrypt(stageno);

        _api.pa.updateStage(_gameid, _userid, _score, _stageno).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    function C_getFriendStage(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.getFriendStage(_gameid, _userid).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });
    }

    /**
     * Format our server's leaderboard data to FB's
     * @param data
     * @param userobj
     * @return {[]}
     */
    function formatLB(data, userobj){
        // FB lb entry format
        // country: "ES"
        // fbid: "3655031304541755"
        // name: "Juan Antonio"
        // photo: "https://platform-lookaside.fbsbx.com/...
        // rank: 1
        // score: 29440
        // updatedAt: "2020-07-27T23:10:41Z"
        var pinfo = _loader.IGAPI.PLAYER.GETINFO();
        var _res = {
            count : 0,
            me : {fbid : pinfo.fbid, name: pinfo.name, photo: pinfo.photo, rank: 0, score: 0},
            list : []
        };
        if(data.length == 0){
            return _res;
        }else {
            _res.list = data.map(function(ele, idx){
                var newFormat = {
                    fbid : ele.userid,
                    name : ele.nickname,
                    photo : ele.photo,
                    country : ele.country,
                    rank : Number(ele.ranking),
                    score : Number(ele.score)
                };
                if(ele.userid === pinfo.fbid){
                    _res.me = newFormat;
                }
                return newFormat;
            });
        }
        if(userobj){  // global only
            _res.me.rank = Number(userobj.ranking);
            _res.me.score = Number(userobj.score);
        }
        return _res;
    }
    function C_getSaveData(callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        _api.pa.getUserData(_gameid, _userid, ['data1', 'data2', 'data3', 'data4', 'data5']).then(function(res) {
            var cdata = res;
            if(cdata.returncode != CODE.SUCCESS) {
            }else {
                var _data = cdata;

                var data = (_data.savedata == '') ? {} : _data.savedata,
                    resData = {};
                resData['data1'] = (self.UTIL.isEmpty(data['data1'])) ? '' : data['data1'];
                resData['data2'] = (self.UTIL.isEmpty(data['data2'])) ? '' : data['data2'];
                resData['data3'] = (self.UTIL.isEmpty(data['data3'])) ? '' : data['data3'];
                resData['data4'] = (self.UTIL.isEmpty(data['data4'])) ? '' : data['data4'];
                resData['data5'] = (self.UTIL.isEmpty(data['data5'])) ? '' : data['data5'];

                cdata = resData;
                cdata.returncode = CODE.SUCCESS;
            }
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });


        // fn.resolve([
        //     _api.game.getUserData(['data1', 'data2', 'data3', 'data4', 'data5'])
        // ], function (data) {
        //     if(false) console.log('getUserData', data);
        //
        //     var _data = data;
        //
        //     if(_data.returncode == 100){
        //
        //         var data = (_data.savedata == '') ? {} : _data.savedata,
        //             resData = {};
        //         resData['data1'] = (_util.isEmpty(data['data1'])) ? '' : data['data1'];
        //         resData['data2'] = (_util.isEmpty(data['data2'])) ? '' : data['data2'];
        //         resData['data3'] = (_util.isEmpty(data['data3'])) ? '' : data['data3'];
        //         resData['data4'] = (_util.isEmpty(data['data4'])) ? '' : data['data4'];
        //         resData['data5'] = (_util.isEmpty(data['data5'])) ? '' : data['data5'];
        //
        //         if(onComplete) onComplete(resData['data1'], resData['data2'], resData['data3'], resData['data4'], resData['data5']);
        //
        //     }else {
        //         //err
        //         _api.returnErr(_data.returncode, onError, _data.message);
        //     }
        //
        // })

    }

    /**
     * Each data(n) can store up to 13,000 alphabet characters
     * @param data1 str. JSON format.
     * @param data2
     * @param data3
     * @param data4
     * @param data5
     * @param callback
     */
    function C_setSaveData(data1, data2, data3, data4, data5, callback){
        var self = _loader;
        var _gameid = _api.encrypt(self.gameId);
        var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

        var _savedata = {
            data1 : data1,
            data2 : data2,
            data3 : data3,
            data4 : data4,
            data5 : data5
        };
        _api.pa.setUserData(_gameid, _userid, _savedata).then(function(res) {
            var cdata = res;
            if(callback)callback(cdata);
        }, function(err){
            var cdata = {"returncode":CODE.FAIL,"message":"error"};
            if(callback)callback(cdata);
        });

        // //todo : validate string length of each data. up to 5000
        //
        // var data = {};
        // if(data1) data['data1'] = data1;
        // if(data2) data['data2'] = data2;
        // if(data3) data['data3'] = data3;
        // if(data4) data['data4'] = data4;
        // if(data5) data['data5'] = data5;
        //
        // fn.resolve([
        //     _api.game.setUserData(data)
        // ], function (data) {
        //     if(false) console.log('setUserData', data);
        //
        //     var _data = data;
        //
        //     if(_data.returncode == 100){
        //
        //         if(onComplete) onComplete();
        //
        //     }else {
        //         _api.returnErr(_data.returncode, onError, _data.message);
        //     }
        // })

    }

    function setSDKdata(){
        _api.pa.getUserDataSDK(['_sdk_tutorial', '_sdk_today_highscore'], function(res){
            if(res.returncode == CODE.SUCCESS){
                _api.setTutorial(res.savedata._sdk_tutorial);
                if(res.savedata._sdk_today_highscore){
                    _api.setTodayHighscore(res.savedata._sdk_today_highscore);
                }
            }
        });
    }

    /**
     *
     * @param loader loader itself
     * @param options
     *   gameId string
     *   orientation string
     *   useLeaderboard bool
     *   leaderboardPosition object
     *   style object
     * @return status number return code
     * @return res object when success, user profile
     */
    function init(loader, options) {
        if(false) console.log('init', loader, loader.ver);
        var self = loader;
        _api = _loader.API; // API  
        _api.setVer(loader.ver);
        _api.setEnv();
        _api.setWrapperId(_loader.wrapperId);
        _api.setOrientation(options.orientation);   // will set 'p' if the 'orientation' is undefined
        var orientation = _api.getOrientation();
        if (options.leaderboard) _api.setLBName(options.leaderboard);

        self.resolve([_api.pa.getEmojiList()], function(res){
            if(res.returncode == CODE.SUCCESS){
                _api.setEmojiImg(res.message);
                INIT.phase++;
                checkInitStatus('emoji');
            }else {
                if(false) console.log('error : loading emoji image info');
                initDefer.reject(res);
            }
        });

        // envDomain = _api.getEnvDomain();

        CODE = _api.getCallCode();
        errCode = _api.getErrCode();
        errMsg = _api.getErrMessage();
        errDetail = _api.getErrDetail();

        initDefer = jQuery.Deferred();

        _api.setGameId(self.gameId);
        _api.setGameNo(self.gameNo);

        // isInternal = _api.getIsInternal();   // todo : maybe not necessary
        if (options.useLeaderboard) _api.setUseLeaderboard(options.useLeaderboard);

        if(false) console.log('get loader css', orientation);

        //style file name uses up to one decimal. ex) 1.1.0 = style-v1.1.css
        var styleverArr = loader.ver.split('.'),
            stylever = styleverArr[0] + '.' + styleverArr[1];

        if(orientation == 'l') {
            jQuery('<link rel="stylesheet" href="static/style/ui-landscape.css">').appendTo('head');
        }else {
            jQuery('<link rel="stylesheet" href="static/style/ui.css">').appendTo('head');
        }

        snsClient = _api.getSnsClient();

        //init fb sdk for fb login
        var _protocol = '';
        if(_api.isAndroid() || _api.isIos()) _protocol = 'https:';
        w.fbAsyncInit = function () {
            FB.init({
                appId: snsClient.fb.id,
                xfbml: true,
                cookie: true,
                version: 'v3.1'
            });
        };
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = _protocol+"//connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));

        if(false) console.log('get resource images');

        if(false) console.log('self', self);
        //check gameId, if the game is different remove user info saved in localstorage
        //because user needs to login to the current game
        var oldGameId = w.localStorage.getItem(_api.getLocalKeyName('gameId'));
        if(_api.isAndroid() || _api.isIos()) oldGameId = _api.android.getData('gameId');

        if (oldGameId && self.gameId !== oldGameId) {
            _api.removeMember(true);
        }

        //set default lang
        // _loader.LANG.setLang(w.navigator.language);
        _loader.LANG.setLang(w.navigator.language);

        //check if sdk has uniqueid;
        // if sdk has an uniqueid, it means sdk doesn't have session data of signed user
        // send unique id if sdk has it
        var uniqueId = _api.getMember('uniqueId');

        /////////////////// from here

        var hasSession = _api.checkSessionInfo();
        var hasEGSession = {
            'user_no': undefined,
            'OTP': undefined
        };

        hasEGSession.user_no = _loader.UTIL.getUrlParameter('user_no');
        hasEGSession.OTP = _loader.UTIL.getUrlParameter('otp');
        var hasMatchno = _loader.UTIL.getUrlParameter('matchno');

        //connection from emojigames or wallet site
        if(hasEGSession.user_no && hasEGSession.OTP){   // todo : check the logic
            // INIT.TOTAL++;

            self.resolve([
                _api.service.landing(hasEGSession.user_no, hasEGSession.OTP)
            ], function(landingRes){

                var res2 = landingRes;

                if(res2.returncode == CODE.SUCCESS){

                    // remove param that is otp related, because otp is valid only for one time
                    if (w.history && w.history.pushState) {
                        var _url = decodeURIComponent(w.location.search.substring(1)),
                            urlVars = _url.split("&"),
                            paramsKey,
                            paramStr = '';
                        var filterParam = ['user_no', 'otp'];
                        for (var i = 0; i < urlVars.length; i++) {
                            // split only the first occurrance
                            paramsKey = urlVars[i].split(/\=(.+)/);

                            var isSignInParam = false
                            for (var j = 0; j < filterParam.length; j++ ){
                                if (paramsKey[0] == filterParam[j]){
                                    isSignInParam = true;
                                    break;
                                }
                            }
                            if (isSignInParam) continue;

                            paramStr += '&'+ paramsKey[0] + '=' + paramsKey[1];
                        }
                        paramStr = paramStr.substr(1);
                        if (paramStr != '') paramStr = '?' + paramStr;
                        if(false) console.log('paramStr', paramStr)
                        w.history.pushState('', w.document.title, w.location.pathname + paramStr);
                    }

                    _api.onSignInComplete(res2.message.user_id, res2.message.token, function(res){
                        // update userInfo
                        userInfo = _api.getMember();
                        if(false) console.log('init data');
                        if(false) console.log('userInfo', _api.getMyInfo());
                        if(false) console.log('userActivity', _api.getMyActivity());
                        if(false) console.log('userPocBalance', _api.getMyBalance());

                        if(hasMatchno){
                            var _mn = _api.encrypt(hasMatchno);
                            _loader.GETMATCHDATA(_mn, function(res){
                                if(res.returncode == CODE.SUCCESS){
                                    matchInfo = res;
                                    matchInfo.matchno = hasMatchno;
                                    INIT.phase++;
                                    checkInitStatus('user');
                                }else {
                                    initDefer.reject(res);
                                }
                            })
                        }else {
                            INIT.phase++;
                            checkInitStatus('user');
                        }


                    }, function(err){
                        //err. code is pared from the function

                        initDefer.reject(err);
                    });

                }else {

                    /*switch(res2.returncode){
                        case 0: //unknown
                        case 1: //wrong user_no or otp
                        case 3: //disabled account : this account is disabled.
                        case 11:    //missing parameter : 
                    }*/

                    var _errRes = _api.parseErrCodeAndDetail(res2.returncode, res2.message);
                    initDefer.reject({
                        returncode : _errRes.returncode,
                        message : _errRes[_errRes.returncode],
                        userMessage : _errRes.userMessage,
                        detail : _errRes.detail
                    });
                }
            })

            // get tutorial info
            // self.IGAPI.PLAYER.GETCUSTOMSAVEDATA(['_sdk_tutorial', '_sdk_today_highscore'], function (res) {
            //     // test
            //     // var _rr = res._sdk_tutorial;
            //     // _rr.challenge.list = false;
            //     // _rr.challenge.start = false;
            //     // _rr.challenge.result = false;
            //     // _api.setTutorial(_rr);
            //     _api.setTutorial(res._sdk_tutorial);
            //     if(res._sdk_today_highscore){
            //         _api.setTodayHighscore(res._sdk_today_highscore);
            //     }
            // }, function(err){
            //
            // });

            //user session info from localstorage
        }else if(hasSession){
            // INIT.TOTAL++;

            var self = _loader;
            userInfo = _api.getMember();
            var _gameid = _api.encrypt(self.gameId);
            var _userid = _api.encrypt((userInfo.userId || userInfo.uniqueId));

            self.resolve([
                    _api.member.getMyInfo()
                    ,_api.pa.getMyAccount(_gameid, _userid)
                ]
                ,function (userInfo1, userActivity) {
                    var resdata = userInfo1,
                        resdata2 = userActivity;

                    if(resdata.returncode && resdata2.returncode){

                        if(resdata.returncode == CODE.SUCCESS && resdata2.returncode == CODE.SUCCESS ){
                            //3 = signed up but not verified yet.

                            //user info
                            resdata.message.isAnonymous = false;

                            _api.setMyInfo(resdata.message);
                            _api.setMyInfo(resdata2.userinfo);
                            _api.setMyInfo({'id': userInfo.userId});
                            var userObj = _api.getMyInfo();

                            _loader.LANG.setLang(userObj.languageCode);

                            // //user activity
                            // var userObj2 = {
                            //     win : resdata2.savedata.win
                            //     ,lose : resdata2.savedata.lose
                            //     ,draw : resdata2.savedata.draw
                            //     ,lastAccess : resdata2.savedata.lastAccess
                            //     ,highscore : resdata2.savedata.highscore
                            // };
                            //
                            // _api.setMyActivity(userObj2);

                            if(false) console.log('user is signed in');

                            setSDKdata();

                            if(false) console.log('init data');
                            if(false) console.log('userInfo', _api.getMyInfo());
                            if(false) console.log('userActivity', _api.getMyActivity());
                            if(false) console.log('userPocBalance', _api.getMyBalance());

                            INIT.phase++;
                            checkInitStatus('user');

                        }else {

                            if(false) console.log('user is NOT signed in', resdata);
                            // if(resdata.returncode == 2){    // wrong token; can be expired
                                // 1 : unknown user_id
                                // 2 : wrong token
                                // 3 : disabled account : this account is disabled
                                // 4 : unknown user
                                // set as a signed in user to sign in as a guest user
                                _api.setMyInfo({isAnonymous: false});
                                _api.member.signOut(function(){
                                    if(false) console.log('init data');
                                    if(false) console.log('userInfo', _api.getMyInfo());
                                    if(false) console.log('userActivity', _api.getMyActivity());
                                    if(false) console.log('userPocBalance', _api.getMyBalance());

                                    userInfo = _api.getMember();

                                    setSDKdata();

                                    if(false) console.log('guest user signed in');
                                    INIT.phase++;
                                    checkInitStatus('user');
                                }, function(){
                                    //server error
                                    initDefer.reject({
                                        returncode : errCode.SERVER_ERROR,
                                        message : errMsg[errCode.SERVER_ERROR],
                                        detail : errDetail.SYSTEM_ERROR,
                                        userMessage : _loader.LANG.MSG.ERR.SERVER_ERROR
                                    })
                                });
                            // }else {
                            //     //server error
                            //     initDefer.reject({
                            //         returncode : errCode.SERVER_ERROR,
                            //         message : errMsg[errCode.SERVER_ERROR],
                            //         detail : errDetail.SYSTEM_ERROR,
                            //         userMessage : _loader.LANG.MSG.ERR.SERVER_ERROR
                            //     })
                            // }
                        }


                    }else {
                        //server error
                        initDefer.reject({
                            returncode : errCode.SERVER_ERROR,
                            message : errMsg[errCode.SERVER_ERROR],
                            detail : errDetail.SYSTEM_ERROR,
                            userMessage : _loader.LANG.MSG.ERR.SERVER_ERROR
                        })
                    }
                }
            );
        }else {
            //for non-signed in user
            if(false) console.log('no session');

            if(uniqueId){
                var _pInfo = _api.getGuestInfo();
                _pInfo.id = uniqueId;
                _api.setFirstGuest(false);
                _api.setMyInfoUsingGuestInfo(_pInfo);
                _api.setMember('uniqueId', _pInfo.id);
                _api.setGuestToken(_api.getGuestToken());
                userInfo = _api.getMember();

                var _gameid = _api.encrypt(self.gameId);
                var _userid = _api.encrypt(uniqueId);
                self.resolve([_api.pa.getMyAccount(_gameid, _userid), _api.pa.getEmojiList()],
                    function(res){
                        if(res.returncode == CODE.SUCCESS){
                            _api.setMyInfo(res.userinfo);

                            setSDKdata();

                            INIT.phase++;
                            checkInitStatus('user');
                        }else {
                            var _errRes = _api.parseErrCodeAndDetail(res.returncode, res.message);
                            initDefer.reject(_errRes);
                        }
                });

                return;
            }

            _api.createGuest(function(res){
                if(res.returncode == CODE.SUCCESS){
                    if(false) console.log('init data');
                    if(false) console.log('userInfo', _api.getMyInfo());
                    if(false) console.log('userActivity', _api.getMyActivity());
                    if(false) console.log('userPocBalance', _api.getMyBalance());
                    if(false) console.log('guest user signed in2');

                    userInfo = _api.getMember();
                    setSDKdata();

                    INIT.phase++;
                    checkInitStatus('user');
                }else {
                    var _errRes = _api.parseErrCodeAndDetail(res.returncode, res.message);
                    initDefer.reject(_errRes);
                }
            });
        }
    }

    //////////      UTIL functions

    function setVal(selector, val){
        jQuery(selector).text(val);
    }

    /**
     * Update point and ruby balance when a main menu is clicked
     * @param cdata object. returned value from main menu API (MATCH, RESULT, SHOP, RANK)
     */
    function updateBalances(cdata){
        if(cdata.returncode == CODE.SUCCESS){
            if(cdata.userinfo){
                if(typeof cdata.userinfo.rubyamount != 'undefined') _api.setMyInfo({rubyamount: Number(cdata.userinfo.rubyamount)});
                if(typeof cdata.userinfo.pointamount != 'undefined') _api.setMyInfo({pointamount : Number(cdata.userinfo.pointamount)});
            }
        }
    }
    //export loader
    w.PASDKe20 = PASDKe20;

})(window);

/**
 * This is a template for a module of SDK
 * Created by (developer name) on 20xx-xx-xx.
 * Here comes logic description
 *
 * if module is a module extended, write down dependency
 * dependency : UI.js  (filename)
 */
(function(w){

    (function(){

        var fn = this.fn;    //instance
        var self = this;
        var moduleName = 'UTIL';
        //var _parent = fn[moduleName];     //for module extended
        if(false) console.log('module', moduleName);

        //////////////////////////////////////          PRIVATE

        var errCode;
        var errMsg;

        ///////////////////////         FUNCTIONS

        function checkPlatform(target){
            var ua = w['navigator']['userAgent'] || w['navigator']['vendor'] || w['opera'];

            if (target === 'mobile') {
                return (/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/).test(ua);
            } else if (target === 'ios') {
                return (/iPhone|iPod|iPad/).test(ua);
            } else if (target === 'desktop') {
                //todo : windows phone exception
                return (/Macintosh|Windows/).test(ua);
            } else if (target === 'mac') {
                return (/Macintosh/).test(ua);
            } else if (target === 'window') {
                //todo : windows phone exception
                return (/Windows/).test(ua);
            }
        }

        function getUrlParameter(val) {
            var _url = decodeURIComponent(w.location.search.substring(1)),
                urlVars = _url.split("&"),
                paramsKey;

            for (var i = 0; i < urlVars.length; i++) {
                paramsKey = urlVars[i].split("=");

                if (paramsKey[0] === val) {
                    return paramsKey[1] === undefined ? false : paramsKey[1];
                    break;
                }
            }
        }

        function displayComma(val){
            if(!val) {
                if(val === 0) return '0';
                return '';
            }
            var str = '',
                src = val.toString(),
                isDecimal = (src.indexOf('.') > -1);

            var afterDecimal = ''
            if (isDecimal) {
                var strArr = src.split('.');
                // attach after decimal only up to 2 decimals
                afterDecimal = '.'+strArr[1].substr(0,2);
                src = strArr[0];
            }

            for(var i in src){
                //check decimal
                var input = 'n-'+val;
                if((src.length - i) % 3 == 0 && i > 0) str += ',';
                str += src.charAt(i);
            }

            str += afterDecimal;

            return str;
        }

        /**
         *
         * @param val number. in sec
         */
        function displayDuration(val){
            var _str = '';
            var _val = (val) ? (typeof val == 'string') ? Number(val) : val : 0;
            if (_val == 0) {
                _str = _val + ' sec';
            }else {
                var _day = 0, _h = 0, _m = 0, _s = 0;
                if(_val < 60){  // less than 1 min
                    _str = _val + ' sec';
                    // }else if(_val < 3600){  // less than 1 hour
                    //     _s = _val%60;
                    //     _m = _val/60;
                    //     _str = _m + 'mins' + s + ' sec';
                    // }else if(_val < 86400) {    // less than a day
                    //     _str = _h + 'hours ' + _m + 'mins' + _s + ' sec';
                }else {
                    _s = _val%60;
                    _m = _val/60;
                    _h = _m/60;
                    _day = _h/24;
                    if(_m > 60){
                        _m = _m%60;
                    }
                    if(_h > 24){
                        _h = _h%24;
                    }
                    if(_day > 0){
                        _str = _day + ' day';
                        if(_day > 1){
                            _str += 's ';
                        }else {
                            _str += ' ';
                        };
                    }
                    if(_h > 0){
                        _str += _h + ' hour';
                        if(_h > 1) {
                            _str += 's ';
                        }else {
                            _str += ' ';
                        }
                    }
                    if(_m > 0){
                        _str += _m + ' min';
                        if(_m > 1) {
                            _str += 's ';
                        }else {
                            _str += ' ';
                        }
                    }
                    _str += _s + 'sec';
                }
            }
            return _str;
        }

        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        /**
         * get client timezone +14 -11, or 00 to 23 if 'is24base' set to true
         * @param is24base
         * @returns {string}
         */
        function getClientTimezone(is24base){
            var res = '';
            var time = moment().format().substr(19, 3);
            if(is24base){
                var sign = time.substr(0, 1),
                    number = Number(time.substr(1)),
                    _resTime = null;
                switch(sign){
                    case '-':
                        _resTime = 24 - number;
                        break;
                    case '+':
                        _resTime = number;
                        break;
                }
                if(_resTime < 10){
                    _resTime = '0'+_resTime;
                }
                res = _resTime;
            }else {
                res = time;
            }
            return res.toString();
        }

        function isEmpty(val){
            if(typeof val === 'undefined')  {if(false) console.log('isEmpty1', true, val); return true;}
            if(val === null)                {if(false) console.log('isEmpty2', true, val); return true;}
            if(isNaN(val))                  {       //consider 'NaN' as an empty value
                //isNaN(val) returns true, if val is...
                //  object
                //  string, but when string contains only numbers, returns false

                //json object is also return true;
                if(val.constructor === {}.constructor) {
                    if(JSON.stringify(val) === '{}') {
                        if(false) console.log('isEmpty3-1', true, val);
                        return true;
                    }
                }
            }
            if(val.constructor === {}.constructor){
                if(JSON.stringify(val) === '{}') {
                    if(false) console.log('isEmpty4', true, val);
                    return true;
                }
            }
            if(typeof val === 'string'){
                if(val == ''){ if(false) console.log('isEmpty5', true, val); return true; }
            }
            if(false) console.log('isEmpty', val);
            return false;
        }

        //in some webview, file upload doesn't work
        //line, fb messanger for android
        function canFileUpload(){
            var ua = navigator.userAgent || navigator.vendor || w.opera;
            //return (/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/).test(ua);
            ua = ua.toLowerCase();
            if((/android/).test(ua) && ((/line/).test(ua) || (/fban/).test(ua) || (/fbav/).test(ua))){
                return false;
            }else {
                return true;
            }
        }


        /**
         * prevent rotating issue related to uploading a file on mobile devices
         * Should be called when the image is loaded completely
         * @param img object | tag image object or html img tag
         * @param $wrapper jquery object image wrapper
         */
        function polyfillExif(img, $wrapper){

            //$img.on('load', function() {
            EXIF.getData(img, function() {
                if(false) console.log('Exif=', EXIF.getTag(this, "Orientation"));
                switch(parseInt(EXIF.getTag(this, "Orientation"))) {
                    case 2:
                        $wrapper.addClass('flip'); break;
                    case 3:
                        $wrapper.addClass('rotate-180'); break;
                    case 4:
                        $wrapper.addClass('flip-and-rotate-180'); break;
                    case 5:
                        $wrapper.addClass('flip-and-rotate-270'); break;
                    case 6:
                        $wrapper.addClass('rotate-90'); break;
                    case 7:
                        $wrapper.addClass('flip-and-rotate-90'); break;
                    case 8:
                        $wrapper.addClass('rotate-270'); break;
                }
            });
            //});

        }

        function copyToClipboard(str){
            var isCopySupported = document.execCommand('copy');

            if(false) console.log('is copy Supported', isCopySupported);
            var res = null;
            if (isCopySupported){
                var el = document.createElement('textarea');
                el.value = str;                                 // Set its value to the string that you want copied
                el.setAttribute('readonly', '');                // Make it readonly to be tamper-proof
                el.style.position = 'absolute';
                el.style.left = '-9999px';                      // Move outside the screen to make it invisible
                document.body.appendChild(el);                  // Append the <textarea> element to the HTML document
                var selected =
                    document.getSelection().rangeCount > 0
                        ? document.getSelection().getRangeAt(0) : false;
                el.select();                                    // Select the <textarea> content
                res = document.execCommand('copy');                   // Copy - only works as a result of a user action (e.g. click events)
                document.body.removeChild(el);                  // Remove the <textarea> element
                if (selected) {                                 // If a selection existed before copying
                    document.getSelection().removeAllRanges();    // Unselect everything on the HTML document
                    document.getSelection().addRange(selected);   // Restore the original selection
                }
            }else {
                var isDesktop = checkPlatform('desktop')
                var desc = '';
                if (!isDesktop){
                    //mobile
                    desc = 'Select below ID and tap copy button';
                }else {
                    var isMac = checkPlatform('mac');
                    var ctrl = (isMac) ? 'Command' : 'Ctrl';
                    desc = 'Press \''+ctrl+'\' and \'c\', and then press \'Enter\'';
                }
                var res = prompt(desc,str);

            }
            return (res != null && res != '') ? true : false;
        }

        function setAPIMessages(){
            errCode = fn.API.getErrCode();
            errMsg = fn.API.getErrMessage();
        }

        //////////////////////////////////////          PUBLIC
        //for new module
        fn[moduleName] = { //api map
            isIOS : function () { return checkPlatform('ios') }
            ,isMobile : function(){ return checkPlatform('mobile') }
            ,isDesktop : function(){ return checkPlatform('desktop') }
            ,isWindows : function(){ return checkPlatform('window') }
            ,isMac : function(){ return checkPlatform('mac') }
            ,getUrlParameter : getUrlParameter
            ,displayComma : displayComma
            ,displayDuration : displayDuration
            ,getRandomInt : getRandomInt
            ,removeDuplicate : function(arr){
                return arr.filter(function(item, idx) {
                    return arr.indexOf(item) == idx;
                })
            }
            ,getClientTimezone : getClientTimezone
            ,isEmpty : isEmpty
            ,canFileUpload : canFileUpload
            ,polyfillExif : polyfillExif
            ,copyToClipboard : copyToClipboard
            // called by API
            ,setAPIMessages : setAPIMessages
        };
        //for a module extended; like UI, and GAME
        //api map
        //_parent.METHOD = functionName;

    }).call(PASDKe20);

})(window);
/**
 * This is common API module of FB SDK
 * Created by (SPIKE KANG) on 2020-10-28.
 *
 * This module is responsible for data(model). It communicate with server.
 * All modules get data from this module(GET/SET).
 */
(function(w){

    (function(){

        var fn = this.fn;    //instance
        var self = this;
        var moduleName = 'API';
        if(false) console.log('module', moduleName);

        //////////////////////////////////////          PRIVATE

        var ver = '';   // this will be set at the main file (EmojiGamesFBSDK)
        var gameVer = null;
        var playLog;
        var wrapperId;
        var orientation = 'l';  // l = landscape(default), p = portrait
        var aesPwd = 'emojiYwEi8sS8el4PBcBvgamesYwEi8sS8el4PBcBv'; //'mbizglobal';

        var snsClient = {
            fb : {
                id : undefined      //app id
                ,scope : {fields: 'id, first_name, last_name, name, email, picture.width(160).height(160)'}
            },
            gg : {
                id : undefined      //client id
                ,scope : 'https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email'
            }
        };

        //   
        var errCode = {
            'MODAL_CLOSED' : 200
            ,'BAD_REQUEST' : 400
            ,'UNAUTHORIZED' : 401
            ,'PHONE_VERIFICATION_REQUIRED' : 402
            //,'ETC' : 411
            ,'TOO_MANY_REQUEST' : 429
            //,'INFORMATION_DOES_NOT_MATCH' : 431
            ,'SERVER_ERROR' : 500
            ,'BAD_GATEWAY' : 502
            ,'SERVICE_UNAVAILABLE' : 503
            ,'UNKNOWN' : 505
        };

        //   
        var errMsg = {};
        errMsg[errCode['MODAL_CLOSED']] = 'Modal closed.';
        errMsg[errCode['BAD_REQUEST']] = 'Bad request';
        errMsg[errCode['UNAUTHORIZED']] = 'Unauthorized';
        errMsg[errCode['PHONE_VERIFICATION_REQUIRED']] = 'Phone verification required';
        //errMsg[errCode['ETC']] = 'Etc';
        //errMsg[errCode['INFORMATION_DOES_NOT_MATCH']] = 'The information doesn\'t match';
        errMsg[errCode['TOO_MANY_REQUEST']] = 'Too many request';
        errMsg[errCode['SERVER_ERROR']] = 'Server error';
        errMsg[errCode['BAD_GATEWAY']] = 'Bad gateway';
        errMsg[errCode['SERVICE_UNAVAILABLE']] = 'Service unavailable';
        errMsg[errCode['UNKNOWN']] = 'Unknown';

        var errDetail = {
            'MODAL_CLOSED' : 'MODAL_CLOSED',
            'UNKNOWN' : 'UNKNOWN',
            'SYSTEM_ERROR' : 'SYSTEM_ERROR',
            'MISSING_PARAMETER' : 'MISSING_PARAMETER',
            'WRONG_PARAMETER_VALUE' : 'WRONG_PARAMETER_VALUE',
            //'RESPONSE_FROM_POC_SERVER' : 'RESPONSE_FROM_POC_SERVER',
            'CAN_NOT_GET_USER_POC' : 'CAN_NOT_GET_USER_POC',
            'POC_SERVER_DID_NOT_RESPONSE' : 'POC_SERVER_DID_NOT_RESPONSE',
            'CAN_NOT_REGISTER_TO_BLOCKCHAIN' : 'CAN_NOT_REGISTER_TO_BLOCKCHAIN',
            'DISABLED_ACCOUNT' : 'DISABLED_ACCOUNT',
            'UNKNOWN_USER' : 'UNKNOWN_USER',
            'UNKNOWN_EMAIL' : 'UNKNOWN_EMAIL',
            'WRONG_SHOP_ITEM' : 'WRONG_SHOP_ITEM',
            'LACK_OF_POC' : 'LACK_OF_POC',
            'EMAIL_IS_ALREADY_IN_USE' : 'EMAIL_IS_ALREADY_IN_USE',
            'TOO_MANY_SIGN_UP_WITH_SAME_IP' : 'TOO_MANY_SIGN_UP_WITH_SAME_IP',
            'WRONG_ID_OR_PASSWORD' : 'WRONG_ID_OR_PASSWORD',
            'INVALID_PHONE_NUMBER' : 'INVALID_PHONE_NUMBER',
            'WRONG_USER_INFO_OR_OTP' : 'WRONG_USER_INFO_OR_OTP',
            'THIS_PHONE_NUMBER_IS_ALREADY_USED_TO_VERIFY' : 'THIS_PHONE_NUMBER_IS_ALREADY_USED_TO_VERIFY',
            'FAILED_TO_UPDATE_USER_DATA' : 'FAILED_TO_UPDATE_USER_DATA',
            'WRONG_CURRENT_PASSWORD' : 'WRONG_CURRENT_PASSWORD',
            'WRONG_FILE_EXTENSION' : 'WRONG_FILE_EXTENSION',
            'WRONG_PASSWORD' : 'WRONG_PASSWORD',
            'TOO_BIG_FILE' : 'TOO_BIG_FILE',
            'NEED_AGREEMENT_PACOIN' : 'NEED_AGREEMENT_PACOIN',
            'PHONE_VERIFICATION_REQUIRED' : 'PHONE_VERIFICATION_REQUIRED',
            'UNKNOWN_USER_ITEM' : 'UNKNOWN_USER_ITEM',
            'UNAVAILABLE_USER_ITEM' : 'UNAVAILABLE_USER_ITEM',
            'SERVICE_UNAVAILABLE' : 'SERVICE_UNAVAILABLE',
            'ETC' : 'ETC : ',    //message from another server
            'SESSION_EXPIRED' : 'SESSION_EXPIRED',
            'BAD_GATEWAY' : 'BAD_GATEWAY',
            'WRONG_VERIFICATION_CODE' : 'WRONG_VERIFICATION_CODE',
            'INVALID_COUNTRY_CODE' : 'INVALID_COUNTRY_CODE',
            'VERIFIY_EMAIL_ACCOUNT' : 'VERIFIY_EMAIL_ACCOUNT'
        };

        //      
        //          
        var playerInfo = {},
            // UI  true
            isUIReady = false,
            callCode = {
                SUCCESS : 100,
                SUCCESS_ERROR : -100,
                FAIL : -101
            };

        var tutorial = {
            challenge : {
                list : false,
                start : false,
                result : false
            }
        };
        var todayHighscore = {
            date : '',
            score : 0
        };
        var slotInfo = {};
        var isFirstGuest = false;

        // data from 'createAccount.php'
        // entryfee: "53"
        // matchsetno: "6"
        // message: "success"
        // noticecount: 0
        // pointamount: "552404"
        // returncode: "100"
        // rubyamount: "516230"
        // slotamount: 0
        // slotreceive: "1"
        var initInfo = {};
        var globalLB = null;
        var globalLBName = null;

        var isPSupport = null;
        var promoGameInfo = null;
        var emojiImgs = {
            path: '',
            names: []   // 2 depth array. 1 = exist, 0 = no exist
        }

        // for native apps (android)
        var envParam = null;
        if (isAndroid() || isIos()){
            // get 'env' param from url query params.
            envParam = fn.UTIL.getUrlParameter('env');
        }
        if(false) console.log('envParam', envParam);

        //set environment. local | dev | real
        var cDomain = 'emojigames.io'
            ,paDomain = 'pocketarena.com'
            ,env = 'dev'
            ,imgPath = 'static/images/'
            ,isInternal = false
            ,envDomain = ''
            ,siteEnvDomain = ''
            ,siteEnvDomain2 = 'sdk'
            ,isHttps = (w.location.protocol.indexOf('https') > -1)
            ,gsPort = ''
            ,gsProtocol = 'wss';  //game server protocol

        /**
         * 'env' should be defined before this function is called
         */
        var apiProtocol // = 'https'  //protocol
            ,oldApiUrl // = apiProtocol + '://' + 'pa' + envDomain + '.' + cDomain + ''  //always https
            ,apiUrl // = apiProtocol + '://' + 'h5' + envDomain + '.' + paDomain + ''  //always https
            ,siteUrl // = apiProtocol + '://' + siteEnvDomain + paDomain + ''  //always https; pocketarena site auto login
            ,siteUrl2 // = apiProtocol + '://' + siteEnvDomain + paDomain + ''  //always https; pocketarena site auto login
            ,coinUrl // = apiProtocol + '://' + 'pacoin' + envDomain + '.' + paDomain  //always https
            ,coinApiUrl // = oldApiUrl  //always https
            ,gameApiUrl // = oldApiUrl+'/ssapi/pases/'
            ,gameApiUrl2 // = oldApiUrl+'/ssapi/pases/'
            ,gameAddCommon // = 'common/'
            ,gameAddGame // = 'game/'
            ,gameApiExt; // = '.php';

        if(w.location.origin.indexOf('sdk-dev1.'+paDomain) > -1 ||
            w.location.origin.indexOf('games-dev1.'+paDomain) > -1) {
            env = 'dev';
        }else if(w.location.origin.indexOf('sdk-qa.'+paDomain) > -1 ||
            w.location.origin.indexOf('games-qa.'+paDomain) > -1 ||
            w.location.origin.indexOf('revision.gamedistribution.com') > -1) {
            env = 'qa';
        }else if(w.location.hostname.indexOf(paDomain) > -1 ||
            w.location.origin.indexOf('gamedistribution.com') > -1){
            env = 'real';
        }
        if (isAndroid() || isIos()){
            // overwrite native's env
            env = envParam;
        }
		env = 'real';
        function isAndroid(){   // for checking if sdk is in our native webview
            return (typeof Android !== 'undefined') ? true : false;
        }
        function isIos(){
            return (typeof Ios !== 'undefined') ? true : false;
        }

        function setEnvVar(){
            if(false) console.log('setEnv', env);

            if(env == 'real'){
                envDomain = '';
                siteEnvDomain = '';
                gsPort = '2461';
                isInternal = true;

                snsClient.fb.id = '227908041220106';
                snsClient.gg.id = '499627250932-6f4b10kgeshlj37bsrkmab61v2ed3k74.apps.googleusercontent.com';
            }else if(env == 'qa'){
                envDomain = '-qa';
                siteEnvDomain = env+'.';
                siteEnvDomain2 += envDomain;
                gsPort = '2463';
                isInternal = true;

                snsClient.fb.id = '524621024665118';
                snsClient.gg.id = '499627250932-v7eag271vurqc29mn6geanl90bn7fmn1.apps.googleusercontent.com';
            }else { // dev; default
                var devStr = 'pa-dev[\\d]+\\.'+cDomain,
                    devStr2 = 'h5-dev[\\d]+\\.'+paDomain,
                    devRegExp = new RegExp(devStr),
                    devRegExp2 = new RegExp(devStr2);

                envDomain = '-dev1';
                siteEnvDomain = 'dev1.';
                siteEnvDomain2 += envDomain;
                gsPort = '2462';

                if(w.location.origin.indexOf('sandbox.tnbmobile.co.uk') > -1 ||
                    devRegExp.test(w.location.origin) || devRegExp2.test(w.location.origin) ) {
                    isInternal = true;

                    // //devx and not dev1
                    // //if ( devRegExp.test(w.location.origin) && w.location.origin.indexOf('pa-dev1') == -1) {
                    // if ( devRegExp.test(w.location.origin) ) {
                    //     envDomain = w.location.origin.replace(/https:\/\/pa(-dev[\d]+)\..+/, '$1');
                    //     siteEnvDomain = w.location.origin.replace(/https:\/\/pa-(dev[\d]+)\..+/, '$1.');
                    // }
                    // if ( devRegExp2.test(w.location.origin) ) {
                    //     envDomain = w.location.origin.replace(/https:\/\/h5(-dev[\d]+)\..+/, '$1');
                    //     siteEnvDomain = w.location.origin.replace(/https:\/\/h5-(dev[\d]+)\..+/, '$1.');
                    // }
                }

                snsClient.fb.id = '876951559744073';
                snsClient.gg.id = '499627250932-fdcepniq7neu1fggg0b3fbl2fg25ccdn.apps.googleusercontent.com';
            }

            // in game_netwrok_func.js and Network.js
            w._N_DEFAULT_ROOM_URL = w._N_ROOM_URL = w._N_DM+gsPort;
            w.JTYPE ={
                RANDOM: "state_handler",
                FRIEND: (env == "dev") ? "multi_handler" : "multi_handler"
            };
            w._N_JOINTYPE = w.JTYPE.RANDOM; // default

            apiProtocol = 'https';  //protocol
            oldApiUrl = apiProtocol + '://' + 'pa' + envDomain + '.' + cDomain + '';  //always https
            apiUrl = apiProtocol + '://' + 'h5' + envDomain + '.' + paDomain + '';  //always https
            siteUrl = apiProtocol + '://' + siteEnvDomain2 + '.' + paDomain + '';  //always https; sdk.pocketarena site auto login
            siteUrl2 = apiProtocol + '://' + siteEnvDomain + paDomain + '';  //always https; (web) pocketarena site auto login
            coinUrl = apiProtocol + '://' + 'pacoin' + envDomain + '.' + paDomain;  //always https
            coinApiUrl = oldApiUrl;  //always https
            gameApiUrl = apiProtocol + '://' + siteEnvDomain + cDomain + ''+'/ssapi/pases/';
            gameApiUrl = oldApiUrl+'/ssapi/pases/';
            gameApiUrl2 = oldApiUrl+'/ssapi/pa_arena/';
            gameAddCommon = 'common/';
            gameAddGame = 'game/';
            gameApiExt = '.php';
        }

        var url = apiUrl;
        //callChecker : for checking call status.
        //callChecker.[key] key = call url.
        //      key's value = true | undefined
        //          set true when api is called
        //          delete when api call is finished.
        var callChecker = {};

        var apimember = '/member/',
            apimemberUpper = '/Member/',
            apimyPageUpper = '/api/Mypage/',
            apifMoneyUpper = '/api/Fmoney/',
            apipoc = '/poc/',
            apireward = '/reward/',
            apiservice = '/service/';

        var _api   //self
            ,game = {               //for data related game
                gameNo : undefined
                ,gameId : undefined
                ,myInfo : undefined
                ,opInfo : undefined
                ,nowStatus : 0
                ,user_count : 0
                ,max_wait_time : 240           //opponent search max wait time
                ,action : null
                ,message : null
                ,ami_first : null
                ,is_show_error_message : false
                ,error_message : ""
                ,ACTIONID : {
                    GAME_JOIN: "GAME_JOIN",
                    GAME_LEAVE: "GAME_LEAVE",
                    GAME_OPPOJOIN: "oppoJoin",
                    GAME_GAMESTART: "gameStart",
                    GAME_PLAYING: "gamePlaying",
                    GAME_FINISH_READY: "gameFinishReady",
                    GAME_TIMEOVER_READY: "timeOverReady",
                    GAME_FINISH: "gameFinish",
                    GAME_ERROR: "GAME_ERROR"
                }
                ,RESULT_CODE : {
                    WIN : 1
                    ,LOSE : 2
                    ,DRAW : 3
                    ,SINGLE : 0
                }
            }
            ,user = {               //for data related user
                userId : undefined
                ,token : undefined
                ,uniqueId : undefined
            }
            ,userNo = 0
            ,playerInfo = {rewardExp: 0, isAnonymous : true, rubyamount: 0, pointamount: 0}
            /*email: undefined, nickname: undefined, image: undefined, country: undefined
            ,level: undefined, rewardExp: undefined
            }   //or just rewardExp; for non-signed in user */
            ,playerPocBalance = 0
            ,dbdata = {
                game : {    //game data from db
                    data1 : '', data2 : '', data3 : '', data4 : '', data5 : ''
                },          //sdk data from db
                user : {       //personal data
                    highscore : 0,
                    win : 0,
                    lose : 0,
                    draw : 0,
                    lastAccess : null,
                    notifications : null,
                    prizes: null
                }
            }
            ,isSignInProgressing = false       //true = allow any calls during sign in regardless of session limit
            ,localKeys = {
                userId : '_u'
                ,token : '_t'
                ,gameId : '_g'
                ,lastAction : '_la'
                ,countryCode : '_cc'
                ,languageCode : '_lc'
            }
            ,sessionKeys = {
                uniqueId : '_gu'         //uniqueid
                ,token : '_gt'           // token
                ,nickname : '_gnn'           // nickname
                ,photo : '_gpi'           // profile image
                ,info : '_gi'           // guest user whole info
            }
            ,useLeaderboard = false     //set by game at initiating sdk instance
            ,hasLeaderboard = false
            ,leaderboardLimit = 0
            ,leaderboardType        //0: win, 1: score
            ,isEsports = false
            ,isChampion = false
            ,myLeaderboardNo = null //for e-sports only. used for 'setEsportsLeader.php'
            ,messageAmount = {
                prize : 0,  //total amount from server
                message : 0,    //total amount from server
                read : 0,   //total number of read
                sum : 0     //(prize + message) - read = new messages (unread)
            }
            ,gameEsportsNo = null   //set at the time leaderboard is called. used for link to redirect to another website
            ,gameEsportsData = null;    // eSports info. from 'game.getGameInfo'

        if(false) console.log('loader env', env);

        ///////////////////////         FUNCTIONS

         /**
         *  promise 
         *  var options = {
         *      url : 'https://aaa.com',
         *      ...
         *  };
         *  var loginInfo = callapi(options);
         *  loginInfo.then(function(){ // success }, function(){ //error })
         *
         *    signUp  
         */

         /**
         *
         * @param options obj
         *      options.url string
         *      options.data obj parameters
         *      options.fileUpload boolean
         * @returns {*} promise | false . false when session expires
         */
        function callapi(options){
            if(false) console.log("callapi call");
            function transform(data){
                return jQuery.param(data);
            }

            if(false) console.log('call url : ',  options.url);
            //test
            //options.url = 'https://httpstat.us/502'
            var req, waitingFor = 60000; //60 sec
            if(options.fileUpload){

                var form = new FormData();
                if(false) console.log('options.data', options.data);

                function setFormData(obj){

                    for(var i in obj){
                        if(false) console.log('>>', i, obj[i]);
                        if(i === 'image'){    //profile image
                            form.append(i, obj[i][0]);
                            //}else if(i === 'data'){
                            //    form.append(i, transform(obj[i]));
                        }else {
                            form.append(i, obj[i]);
                        }
                    }

                }

                setFormData(options.data);
                if(false) console.log('file upload', form);

                req = {
                    type : 'POST'
                    ,url : options.url
                    ,processData: false
                    ,contentType: false
                    ,cache : false
                    ,data : form
                    ,timeout : waitingFor
                    //,error : function(xmlhttprequest, textstatus, message) {}
                };

            }else {
                req = {
                    method : 'POST'
                    ,url : options.url
                    ,headers: {
                        'Content-Type' : 'application/x-www-form-urlencoded'
                    }
                    ,cache : false
                    ,data : transform(options.data)
                    ,timeout : waitingFor
                    //,error : function(xmlhttprequest, textstatus, message) {}
                };
            }

            //test; inject mock up return
            // if (req.url.indexOf('verify_activity') > -1){
                // if(false) console.log('test : original url : ', req.url);
                // req.url = 'https://httpstat.us/500';
                // req.url = 'https://httpstat.us/502';
                // req.url = 'https://httpstat.us/503';
                //  req.url = 'https://httpstat.us/504';
                // req.url = 'https://httpstat.us/505';
            // }

            var defer = jQuery.Deferred();

            jQuery.ajax(req).then(function(res, status, jqxhr){

                //convert string to json
                var _res = (typeof res == "string") ? JSON.parse(res) : res;

                // change 'code' to 'returncode'
                if (typeof _res.code != 'undefined'){
                    _res.returncode = _res.code;
                    delete _res.code;
                }

                defer.resolve(_res);

            }, function (jqxhr, status, err) {
                //filter server error
                if(jqxhr.status != 200){

                    defer.reject({returncode: jqxhr.status, message : err});

                }else {

                    defer.reject(err);
                }
            })

            return defer.promise();
        }

        ////////       GAME         ////////

         /**
         *
         * @param gameid
         * @param userid
         * @return promise
         */
        function getMatchRoom(gameid, userid, matchmode){

            var req = {
                url : gameApiUrl + 'getMatchRoom.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _matchmode = _api.encrypt('matchmode');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_matchmode] = matchmode;
            return callapi(req);
        }

         /**
         *
         * @param gameid
         * @param userid
         * @param matchsetno
         * @param roomid
         * @param oppouserid
         * @param gamedata
         * @return promise
         */
        function startMatch(gameid, userid, matchsetno, roomid, oppouserid, gamedata, matchmode){
           
            var req = {
                url : gameApiUrl + 'startMatch.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _matchsetno = _api.encrypt('matchsetno');
            var _roomid = _api.encrypt('roomid');
            var _oppouserid = _api.encrypt('oppouserid');
            var _gamedata = _api.encrypt('gamedata');
            var _matchmode = _api.encrypt('matchmode');
            var _token = _api.encrypt('token');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_matchsetno] = matchsetno;
            req.data[_roomid] = roomid;
            if(oppouserid) req.data[_oppouserid] = oppouserid;
            req.data[_gamedata] = gamedata;
            req.data[_matchmode] = matchmode;
            req.data[_token] = _api.encrypt(user.token);
            return callapi(req);
        }

         /**
         *
         * @param gameid
         * @param userid
         * @param matchno
         * @param gamescore
         * @return promise
         */
        function finishMatch(gameid, userid, matchno, gamescore){
            var req = {
                url : gameApiUrl + 'finishMatch.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _matchno = _api.encrypt('matchno');
            var _gamescore = _api.encrypt('gamescore');
            var _token = _api.encrypt('token');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_matchno] = matchno;
            req.data[_gamescore] = gamescore;
            req.data[_token] = _api.encrypt(user.token);
            return callapi(req);
        }

         /**
         *
         * @param gameid
         * @param userid
         * @param listcount
         * @param page
         * @param hlistcount
         * @param hpage
         * @return promise
         */
        function getMatchHistory(gameid, userid, listcount, page, hlistcount, hpage, flistcount, fpage, matchmode){
            var req = {
                url : gameApiUrl + 'getMatchHistory.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _hlistcount = _api.encrypt('hlistcount');
            var _hpage = _api.encrypt('hpage');
            var _flistcount = _api.encrypt('flistcount');
            var _fpage = _api.encrypt('fpage');
            var _matchmode = _api.encrypt('matchmode');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            req.data[_hlistcount] = hlistcount;
            req.data[_hpage] = hpage;
            req.data[_flistcount] = flistcount;
            req.data[_fpage] = fpage;
            req.data[_matchmode] = matchmode;
            return callapi(req);
        }

         /**
         *
         * @param gameid
         * @param userid
         * @return promise
         */
        function getShop(gameid, userid){
             var req = {
                url : gameApiUrl2 + 'c_getShopArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

         /**
         *
         * @param gameid
         * @param userid
         * @param shopno

         * @return promise
         */
        function startPurchase(gameid, userid, shopno){
            var req = {
                url : gameApiUrl + 'startPurchase.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _shopno = _api.encrypt('shopno');
            var _token = _api.encrypt('token');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_shopno] = shopno;
            req.data[_token] = _api.encrypt(user.token);
            return callapi(req);
        }

         /**
         *
         * @param gameid
         * @param userid
         * @param shoplogno
         * @param transactionid
         * @return promise
         */
        function finishPurchase(gameid, userid, shoplogno, transactionid){
            var req = {
                url : gameApiUrl + 'finishPurchaseNew.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _shoplogno = _api.encrypt('shoplogno');
            var _transactionid = _api.encrypt('transactionid');
            var _token = _api.encrypt('token');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_shoplogno] = shoplogno;
            req.data[_transactionid] = transactionid;
            req.data[_token] = _api.encrypt(user.token);
            return callapi(req);
        }

         /**
         *
         * @param gameid
         * @param userid
         * @return promise
         */
        function setFreeReward(gameid, userid){
            var req = {
                url : gameApiUrl + 'setFreeReward.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

         /**
         *
         * @param gameid
         * @param userid
         * @return promise
         */
        function startAds(gameid, userid){
            var req = {
                url : gameApiUrl + 'startAds.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

         /**
         *
         * @param gameid
         * @param userid
         * @param adslogno
         * @return promise
         */
        function finishAds(gameid, userid, adslogno){
            var req = {
                url : gameApiUrl + 'finishAds.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _adslogno = _api.encrypt('adslogno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_adslogno] = adslogno;
            return callapi(req);
        }

         /**
         *
         * @param gameid
         * @param userid
         * @return promise
         */
        function getMyAccount(gameid, userid){
            var req = {
                url : gameApiUrl + 'getMyAccount.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @param matchno
         * @return promise
         */
        function getMatchData(gameid, userid, matchno){
            var req = {
                url : gameApiUrl + 'getMatchData.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _matchno = _api.encrypt('matchno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_matchno] = matchno;
            return callapi(req);
        }

        /**
         *
         * @param keyArr array. key values to get from server ex) ['data1', 'data2']
         * @return {*}
         */
        function getUserData(gameid, userid, keyArr) {
            // var hasSession = checkSessionInfo();
            var mode = 'game';
            //
            // if(hasSession){

                var req = {
                    url :  gameApiUrl + 'getSaveData.php'
                    ,data : {}
                };
                var _gameid = _api.encrypt('gameid');
                var _userid = _api.encrypt('userid');
                var _mode = _api.encrypt('mode');
                req.data[_gameid] = gameid;
                req.data[_userid] = userid;

                var defer = jQuery.Deferred();

                if(!keyArr){
                    mode = 'sdk';
                    req.data[_mode] = _api.encrypt(mode);
                    callapi(req).then(function(res){

                        var _res = res;

                        if(_res.returncode == 100){
                            //for first time load after signing up, it's empty string ('');
                            var resdata = (fn.UTIL.isEmpty(_res.savedata)) ? {} : JSON.parse(_res.savedata);
                            //save each sdk data except data1 to data5 to remove game data from old version
                            for(var key in resdata){
                                if(key != 'data1' && key != 'data2' && key != 'data3' &&
                                    key != 'data4' && key != 'data5' ){

                                    dbdata.user[key] = resdata[key];

                                }
                            }
                        }

                        _res.savedata = dbdata.user;

                        defer.resolve(_res);

                    }, function (err) {
                        defer.reject(err);
                    });

                }else {

                    if(keyArr){
                        if(keyArr.indexOf('data1') == -1 && keyArr.indexOf('data2') == -1 &&
                            keyArr.indexOf('data3') == -1 && keyArr.indexOf('data4') == -1 &&
                            keyArr.indexOf('data5') == -1 ){
                            mode = 'sdk';
                        }
                    }

                    req.data[_mode] = _api.encrypt(mode);

                    callapi(req).then(function(res){

                        var _data = res;

                        if(_data.returncode == callCode.SUCCESS){

                            //null when it's the first time
                            var sdata = (!_data.savedata) ? {} : JSON.parse(_data.savedata),
                                // _dbdataKey = (mode == 'sdk') ? 'user' : 'game',
                                resObj = {returncode : callCode.SUCCESS, savedata : {}};

                            for(var key in keyArr){
                                var keyName = keyArr[key];

                                if(mode == 'sdk'){
                                    if(keyName != 'data1' && keyName != 'data2' && keyName != 'data3' &&
                                        keyName != 'data4' && keyName != 'data5' ){

                                        resObj.savedata[keyName] = sdata[keyName];
                                        dbdata.user[keyName] = sdata[keyName];

                                    }
                                }else {
                                    if(keyName == 'data1' || keyName == 'data2' || keyName == 'data3' ||
                                        keyName == 'data4' || keyName == 'data5' ){

                                        resObj.savedata[keyName] = sdata[keyName];
                                        dbdata.game[keyName] = sdata[keyName];
                                    }
                                }
                            }
                            defer.resolve(resObj);

                        }else {
                            //err
                            defer.reject(_data);
                        }

                    }, function (err) {
                        defer.reject(err);
                    });

                }
                return defer.promise();

            // }else {
            //
            //     if(!game.gameNo){}
            //     if(!user.userId){}
            //     if(!user.token){}
            //
            //     //return unauthorized err
            //     this.then = function(success, err){
            //         if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
            //     }
            //     return this;
            // }
        }


        /**
         *
         * @param obj certain/all data to save to server. it's before encrypt
         * @returns {setUserData}
         */
        function setUserData(gameid, userid, obj) {

            // var _dbdataKey = 'game';
            // // //sync the data
            // for(var key in obj){
            //     dbdata[_dbdataKey][key] = obj[key];
            // }
            //
            // var req = {
            //     url :  gameApiUrl + 'setSaveData.php'
            //     ,data : {}
            // };
            // var _gameid = _api.encrypt('gameid');
            // var _userid = _api.encrypt('userid');
            // var _gamedata = _api.encrypt('gamedata');
            // req.data[_gameid] = gameid;
            // req.data[_userid] = userid;
            // req.data[_gamedata] = _api.encrypt(JSON.stringify(dbdata[_dbdataKey]));
            //
            // return callapi(req);





            // var hasSession = checkSessionInfo();
            //
            // if(hasSession){

                var defer = jQuery.Deferred();

                var mode = 'game',
                    _dbdataKey = 'game';

                if(obj){
                    if(!obj['data1'] && !obj['data2'] &&
                        !obj['data3'] && !obj['data4'] &&
                        !obj['data5']){

                        mode = 'sdk';
                        _dbdataKey = 'user';

                    }
                }

                //sync the data
                for(var key in obj){
                    dbdata[_dbdataKey][key] = obj[key];
                }

                // var gameData = {
                //     'mode' : mode,
                //     'gamedata' : JSON.stringify({
                //         'gameid' : game.gameId
                //         ,'userid' : user.userId
                //         // ,'token' : user.token
                //         ,'gamedata' : JSON.stringify(dbdata[_dbdataKey])
                //     })
                // };

                if(false) console.log('req obj', obj);
                if(false) console.log('req save data', _dbdataKey, 'dbdata : ', dbdata);

                var req = {
                    url :  gameApiUrl + 'setSaveData.php'
                    ,data : {}
                };
                var _gameid = _api.encrypt('gameid');
                var _userid = _api.encrypt('userid');
                var _mode = _api.encrypt('mode');
                var _gamedata = _api.encrypt('gamedata');
                req.data[_gameid] = gameid;
                req.data[_userid] = userid;
                req.data[_mode] = _api.encrypt(mode);
                req.data[_gamedata] = _api.encrypt(JSON.stringify(dbdata[_dbdataKey]));

                // var req = {
                //     url :  gameApiUrl + 'setSaveData.php'
                //     ,data : gameData
                // };

                callapi(req).then(function(res){
                    defer.resolve(res);
                }, function (err) {
                    defer.reject(err);
                })

                return defer.promise();

            // }else {
            //
            //     if(!game.gameNo){}
            //     if(!user.userId){}
            //     if(!user.token){}
            //
            //     //return unauthorized err
            //     this.then = function(success, err){
            //         if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
            //     }
            //     return this;
            // }
        }

        function setUserDataSDK(obj, callback){
            fn.resolve([
                _api.pa.setUserData(_api.encrypt(game.gameId), _api.encrypt((user.userId || user.uniqueId)), obj)
            ], function(res){
                if(callback) callback(res);
            });
        }

        function getUserDataSDK(keyArr, callback){
            fn.resolve([
                _api.pa.getUserData(_api.encrypt(game.gameId), _api.encrypt((user.userId || user.uniqueId)), keyArr)
            ], function(res){
                if(callback) callback(res);
            });
        }

        function getHistory(gameid, userid, listcount, page){   // get transaction history
            var req = {
                url : gameApiUrl + 'getHistory.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            return callapi(req);
        }

        function getEmojiList(callback){
            var req = {
                url :  siteUrl + apimyPageUpper + 'emojis'
                ,data : {}
            };
            return callapi(req);
        }

        function hCaptcha(response){
            var req = {
                url :  siteUrl + apimyPageUpper + 'hcaptcha' // '/service/Mypage/hcaptcha'
                ,data : {
                    'h-captcha-response' : response
                }
            };
            return callapi(req);
        }

        function landing(user_no, otp){

            var req = {
                url :  siteUrl + apimyPageUpper + 'landingS'
                ,data : {
                    'user_no' : user_no
                    ,'otp' : otp
                    ,'game_no' : game.gameNo
                }
            };

            return callapi(req);

        }

         /**
         * should work only for login users
         * @param gameid
         * @param userid
         * @return promise
         */
        function getDailyReward(gameid, userid){

            var hasSession = checkSessionInfo();
            if(hasSession){
                var req = {
                    url : gameApiUrl + 'getDailyReward.php'
                    ,data : {}
                };
                var _gameid = _api.encrypt('gameid');
                var _userid = _api.encrypt('userid');
                req.data[_gameid] = gameid;
                req.data[_userid] = userid;
                return callapi(req);
            }else {
                //return unauthorized err
                this.then = function(success, err){
                    if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
                }
                return this;
            }

        }

         /**
         * should work only for login users
         * @param gameid
         * @param userid
         * @return promise
         */
        function setDailyReward(gameid, userid){
            var hasSession = checkSessionInfo();
            if(hasSession){
                var req = {
                    url : gameApiUrl + 'setDailyReward.php'
                    ,data : {}
                };
                var _gameid = _api.encrypt('gameid');
                var _userid = _api.encrypt('userid');
                req.data[_gameid] = gameid;
                req.data[_userid] = userid;
                return callapi(req);
            }else {
                //return unauthorized err
                this.then = function(success, err){
                    if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
                }
                return this;
            }
        }

         /**
         *
         * @param gameid
         * @param userid
         * @param mode
         * @param amount
         * @return promise
         */
        function useBalance(gameid, userid,mode,amount){
            var req = {
                url : gameApiUrl + 'useBalance.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _mode = _api.encrypt('mode');
            var _amount = _api.encrypt('amount');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_mode] = mode;
            req.data[_amount] = amount;
            return callapi(req);
        }

        function updatePoint(gameid, userid,mode,amount){
            var req = {
                url : gameApiUrl + 'updatePoint.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _mode = _api.encrypt('mode');
            var _amount = _api.encrypt('amount');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_mode] = mode;
            req.data[_amount] = amount;
            return callapi(req);
        }

        function updateXP(gameid, userid, mode, amount, castleno, paytype){

            var req = {
                url : gameApiUrl + 'updateXP.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _mode = _api.encrypt('mode');
            var _amount = _api.encrypt('amount');
            var _castleno = _api.encrypt('castleno');
            var _paytype = _api.encrypt('paytype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_mode] = mode;
            req.data[_amount] = amount;
            if(castleno) {
                req.data[_castleno] = castleno;
                req.data[_paytype] = paytype;
                req.url = gameApiUrl2 + 'c_updateXP.php'
            }
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @param leadertype
         * @param listcount
         * @param page
         * @param country
         * @return promise
         */
        function getLeaderboard(gameid, userid, leadertype, listcount,page){
            var req = {
                url : gameApiUrl + 'getLeaderboard.php'
                ,data : {}
            };
           var _gameid = _api.encrypt('gameid');
           var _userid = _api.encrypt('userid');
           var _leadertype = _api.encrypt('leadertype');
           var _listcount = _api.encrypt('listcount');
           var _page = _api.encrypt('page');
           req.data[_gameid] = gameid;
           req.data[_userid] = userid;
           req.data[_leadertype] = leadertype;
           req.data[_listcount] = listcount;
           req.data[_page] = page;
            return callapi(req);
        }

        // function startSlotMachine(gameid, userid){
        //     var req = {
        //         url : gameApiUrl + 'startSlot.php'
        //         ,data : {}
        //     };
        //     var _gameid = _api.encrypt('gameid');
        //     var _userid = _api.encrypt('userid');
        //     req.data[_gameid] = gameid;
        //     req.data[_userid] = userid;
        //     return callapi(req);
        // }

        // function finishSlotMachine(gameid, userid, slotlogno){
        //     var req = {
        //         url : gameApiUrl + 'finishSlot.php'
        //         ,data : {}
        //     };
        //     var _gameid = _api.encrypt('gameid');
        //     var _userid = _api.encrypt('userid');
        //     var _slotlogno = _api.encrypt('slotlogno');
        //     req.data[_gameid] = gameid;
        //     req.data[_userid] = userid;
        //     req.data[_slotlogno] = slotlogno;
        //     return callapi(req);
        // }

        // function updateBestScore(gameid, userid, gamescore){
        //     var req = {
        //         url : gameApiUrl + 'updateScoreNew.php'
        //         ,data : {}
        //     };
        //     var _gameid = _api.encrypt('gameid');
        //     var _userid = _api.encrypt('userid');
        //     var _gamescore = _api.encrypt('gamescore');
        //     req.data[_gameid] = gameid;
        //     req.data[_userid] = userid;
        //     req.data[_gamescore] = gamescore;
        //     return callapi(req);
        // }

        function getRandom(gameid, userid, matchmode){
            var req = {
                url : gameApiUrl + 'getRandomNew.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _matchmode = _api.encrypt('matchmode');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_matchmode] = matchmode;
            return callapi(req);
        }

		// function getRandom(gameid, userid, mode){
        //     var req = {
        //         url : gameApiUrl + 'getRandomFriends.php'
        //         ,data : {}
        //     };
        //     var _gameid = _api.encrypt('gameid');
        //     var _userid = _api.encrypt('userid');
        //     var _mode = _api.encrypt('mode');
        //     req.data[_gameid] = gameid;
        //     req.data[_userid] = userid;
		// 	req.data[_mode] = mode;
		//
        //     return callapi(req);
        // }
		
        // function getBestScore(gameid, userid){
        //     var req = {
        //         url : gameApiUrl + 'getBestScore.php'
        //         ,data : {}
        //     };
        //     var _gameid = _api.encrypt('gameid');
        //     var _userid = _api.encrypt('userid');
        //     req.data[_gameid] = gameid;
        //     req.data[_userid] = userid;
        //     return callapi(req);
        // }

        // function getGlobalLeaderboard(gameid, userid){
        //     var req = {
        //         url : gameApiUrl + 'getGlobalLeader.php'
        //         ,data : {}
        //     };
        //     var _gameid = _api.encrypt('gameid');
        //     var _userid = _api.encrypt('userid');
        //     req.data[_gameid] = gameid;
        //     req.data[_userid] = userid;
        //     return callapi(req);
        // }

        // function getFriendsLeaderboard(gameid, userid){
        //     var req = {
        //         url : gameApiUrl + 'getFriendsLeader.php'
        //         ,data : {}
        //     };
        //     var _gameid = _api.encrypt('gameid');
        //     var _userid = _api.encrypt('userid');
        //     req.data[_gameid] = gameid;
        //     req.data[_userid] = userid;
        //     return callapi(req);
        // }

        ////////        MEMBER      //////////
        /**
         *
         * @param id string. email or phone number
         * @param nickname
         * @param pwd
         * @param random_user_id string. optional. for phone sign in
         * @return {*}
         */
        function signUp(id, nickname, pwd, random_user_id){
            var _gameid = _api.encrypt('gameid');
            var req = {
                url : siteUrl + apimyPageUpper + 'signup'
                ,data : {
                    'game_id' : game.gameId
                    ,'nickname' : nickname
                    ,'password' : pwd
                }
            };
            req.data.email = id;
            if(random_user_id) req.data.random_user_id = random_user_id;

            //unique id is sent only when signing in

            return callapi(req);
        }

        /**
         *
         * @param type sign 'in' | 'up'
         * @param snsName 'google' | 'facebook'
         * @param callback
         */
        function signInUpSns(type, snsName, callback){

            function doLogin(_res){
                //res =
                //id
                //name
                //email
                //image
                //access_token

                w.focus();

                function callOAuth(res){
                    var req = {
                        id: res.id
                        ,nickname: res.nickname
                        ,email: res.email
                        ,image: res.image
                        ,accessToken: res.access_token
                    };

                    var userImg = res.image;

                    _api.member.oauth(snsName, req.accessToken,
                        req.id, req.nickname, req.email, req.image).then(
                        function(res2){
                            //success
                            if(false) console.log('success', res2);

                            if(res2.returncode == 100){

                                if(false) console.log('user signed ', type);
                                var res2 = res2.message;

                                //data.user_id
                                //data.token
                                //data.country_code
                                var signupUser = (res2.signup_user);
                                if(!signupUser) _api.langCodeForSignUp = null;

                                //user signed up/in. try member.oauth call one more time
                                if(!res2.user_id){

                                    callOAuth(_res);

                                }else {

                                    _api.onSignInComplete(res2.user_id, res2.token, function(res){ // userObj, poc){

                                        res.user.signupUser = signupUser;

                                        //check image. in fb sign-in case, image can be different.
                                        // 1. fb updates image url sometimes. image has fb url. 'https://platform-lookaside.fbsbx.com/....'
                                        // update image if that's the case
                                        // 2. when user update image, url also changed. image has emojigames url
                                        var isUserImgFBDomain = (res.user.photo.indexOf('platform-lookaside.fbsbx.com') > -1);
                                        if (((res.user.photo != userImg) && isUserImgFBDomain) || type == 'up') {

                                            fn.resolve([
                                                    _api.member.setMyInfo(null, null, null, null, null, userImg)],
                                                function(res3){

                                                    switch(res3.returncode){
                                                        case 100:
                                                            //success
                                                            // needs to set as 'image'
                                                            res.user.photo = userImg;
                                                            _api.setMyInfo({image : userImg});
                                                            if(callback) callback(res);

                                                            break;
                                                        default: //wrong file extension
                                                            if(callback) _api.returnErr(res3.returncode, callback, res3.message);
                                                            break;
                                                    }
                                                })

                                        }else {
                                            if(callback) callback(res);
                                        }


                                    }, function(err){
                                        //err is parsed
                                        if(callback) callback(err);
                                    });

                                }

                            }else {

                                //0 "unknown"
                                //1 "email is already used"
                                //2 "wrong password"; min 8 max 50
                                //3 "Too many signup with same IP"
                                //11 "missing parameter : "

                                if(res2.returncode == 401){

                                    if(callback) callback(res);

                                }else if(res2.returncode == 1 || res2.returncode == 2 || res2.returncode == 3 ){

                                    if(callback) _api.returnErr(res2.returncode, callback, res2.message);

                                }else{
                                    //0 : seems email address conflict

                                    if(callback) _api.returnServerErr(callback);
                                }
                            }

                        }, function(err){
                            //err
                            if(false) console.log('err', err);

                            if(err.returncode == 401){

                                if(callback) callback(err);

                            }else {

                                if(callback) _api.returnServerErr(callback);

                            }
                        }
                    )

                }
                callOAuth(_res);

            }

            if (_api.isAndroid() || _api.isIos()){
                // Call native app function
                var loginType = (snsName === 'facebook') ? 0 : 1;
                if(snsName == 'apple') loginType = 2;
                if(false) console.log('game id', _api.getGameId());
                // Android.showLoginPopup(loginType, _api.getGameId());
                if (loginType == 0){
                    (_api.isIos()) ? Ios.loginFacebook() : Android.loginFacebook();
                }else if (loginType == 1){
                    (_api.isIos()) ? Ios.loginGoogle() : Android.loginGoogle();
                }else {
                    if(_api.isIos()) Ios.loginApple();
                }

                // and wait for response from the native app
                // var loginInterval = setInterval(function() {
                //     var info = Android.getInfoFromApp();  //jsonString
                //         clearInterval(loginInterval);
                w.setSignUp = function(info) {
                    if (info != "" && info.length > 0) {
                        if(false) console.log("loginInfo is : " + info);

                        var _res = JSON.parse(info);

                        if (_res.userMessage) {
                            // error returned
                            if (callback) callback(_res);

                        } else {
                            doLogin(_res);
                        }
                    }
                }

                w.SNSLoginCanceled = function(){
                    if(callback) _api.returnErr(errCode.MODAL_CLOSED, callback);
                }

            }else {
                //create JSO instance to 'client' variable
                authorizeSNSPopup(snsName, function(_res){
                    doLogin(_res);
                }, function(err){
                    //sns login error
                    if(callback) callback(err);
                });
            }
        }

        function ggSignInSuccess(user, onComplete) {
            if(false) console.log('gg success', user)
            if(false) console.log('getAuthResponse', ggAuth.currentUser.get().getAuthResponse())

            var profile = user.getBasicProfile();
            var id = profile.getId() + '';
            var nickname = profile.getName() + '';
            var email = profile.getEmail() + '';
            var image = profile.getImageUrl() + '';
            var actoken = ggAuth.currentUser.get().getAuthResponse().access_token;

            if(false) console.log('success', profile);
            if(false) console.log('id', id)
            if(false) console.log('name', profile.getName())
            if(false) console.log('imageUrl', profile.getImageUrl())
            if(false) console.log('email', profile.getEmail())

            var res = {
                id: id
                ,nickname: nickname
                ,email: email
                ,image: image
                ,access_token: actoken
            };
            if(onComplete) onComplete(res);

        }

        function ggSignInFail(errMsgFromServer, onError){
            if(false) console.log('gg failed', errMsgFromServer);
            //errMsg = error message from google server
            var _err = errMsgFromServer.toLowerCase();
            if(_err === 'popup_closed_by_user'){
                if(onError) _api.returnErr(errCode.MODAL_CLOSED, onError);
            // }else if(_err === 'immediate_failed') {
            }else if(_err === 'popup_blocked_by_browser'){
                if(onError) onError({returncode : 100001, userMessage: 'Popup is blocked by browser.<br>Please check the setting.'});
            }else {
                if(onError) _api.returnErr(errCode.UNKNOWN, onError, errMsg.ETC + ' : ' + _err);
            }
            //// Another possible error values:
            // "user_signed_out" - User is signed-out
            // "access_denied" - User denied access to your app
            // "immediate_failed" - Could not automatically log-in the user
            // "idpiframe_initialization_failed" - domain is not added to the whitelist
        }

        var ggAuth = null
        function authorizeSNSPopup(snsName, onComplete, onError) {

            var providerId = null,
                clientId = null,
                authorization = null,
                redirectUri = null,
                responseType = null,
                scopes = null;

            var lastIdx = location.pathname.lastIndexOf('/');
            var curPathname = location.pathname.substr(0, lastIdx);  //'/spike/src/test.html'

            switch (snsName){
                case 'facebook':

                    if (FB) {

                        FB.login(function(response) {
                            if (response.authResponse) {

                                FB.api('/me',  snsClient.fb.scope, function(user) {
                                    var id = user.id + '';
                                    var email = user.email + '';
                                    var nickname = user.name + '';
                                    var image = user.picture.data.url + '';
                                    //oauth_submit('facebook', id, email, nickname, image, response.authResponse.accessToken);

                                    var res = {
                                        id: id
                                        ,nickname: nickname
                                        ,email: email
                                        ,image: image
                                        ,access_token: response.authResponse.accessToken
                                    };
                                    if(onComplete) onComplete(res);
                                });
                            } else {
                                if(false) console.log('User cancelled login or did not fully authorize.');
                                if(onError) _api.returnErr(errCode.MODAL_CLOSED, onError);
                                //TODO : ERROR exception
                            }
                        }, {scope : 'public_profile,email'});

                        //user is using tracking blocker or secret mode on Note 9 S8 plus
                    }else {

                        var _err = {returncode: errCode.BAD_REQUEST,
                            message: errMsg[errCode['BAD_REQUEST']],
                            detail: errDetail.WRONG_USER_INFO_OR_OTP,
                            userMessage: fn.LANG.MSG.INFO.TURN_OFF_TRACKING_BLOCKER_OR_SIMILAR_TECHNOLOGY_IF_YOU_ARE_USING_IT
                        };
                        //todo : replace word
                        if(onError) onError(_err);

                    }

                    break;
                case 'google':

                    // set params only once
                    if (!ggAuth){
                        if(false) console.log('1 init')
                        gapi.load('auth2', function() {
                            // Ready.
                            ggAuth = gapi.auth2.init({
                                client_id: snsClient.gg.id,
                                response_type : 'permission',
                                cookiepolicy: 'single_host_origin',
                                scope: snsClient.gg.scope //'profile'
                            });

                            ggAuth.then(function(auth2) { // wait for initialisation
                                // if (!auth2.isSignedIn.get()) { // check if already signed in
                                auth2.signIn().then(function(user){
                                    ggSignInSuccess(user, onComplete);
                                }, function(err){
                                    ggSignInFail(err.error, onError);
                                })
                            }, function(err){
                                if(false) console.log('err', err);
                                // case 1 : error: "idpiframe_initialization_failed",
                                //  details: "Not a valid origin for the client: https://pa-dev1itelist this origin for your project's client ID."
                                ggSignInFail(err.error, onError);
                            })
                        });
                    }else {
                        if(false) console.log('2 just run')
                        // var auth2 = gapi.auth2.getAuthInstance()
                        ggAuth.signIn().then(function(user){
                            ggSignInSuccess(user, onComplete);
                        }, function(err){
                            ggSignInFail(err.error, onError);
                        })
                    }

                    break;
                default:
                    return;
                    break;
            }

        }

        /**
         *
         * @param type
         * @param accessToken
         * @param id
         * @param nickname
         * @param email
         * @param image null | string
         * @return {*}
         */
        function oauth(type, accessToken, id, nickname, email, image){

            if(game.gameNo, type, id, accessToken, nickname, email){

                var req = {
                    url : siteUrl + apimyPageUpper + 'oauth'
                    ,data : {
                        'type' : type
                        ,'access_token' : accessToken
                        ,'id' : id
                        ,'email' : email
                        ,'nickname' : nickname
                        //,'image' : image
                        ,'game_no' : game.gameNo
                        //,'user_id' : userId
                        ,'game_id' : game.gameId
                    }
                };

                if (_api.isAndroid() || _api.isIos()) req.data.isApp = 1;
                if(image) req.data.image = image;

                //only if there is poc exp for non-signined in user
                if(user.uniqueId && fn.PLAYER.GETINFO().rewardExp > 0){
                    req.data.unique_id = user.uniqueId;
                }

                return callapi(req);

            }else {
                //return missing parameter err
                this.then = function(success, err){
                    if (success) success({returncode :_api.setCode.MISSING_PARAM});
                }
                return this;
            }

        }

        function signIn(id, pwd){

            if(game.gameNo){
                var req = {
                    url : siteUrl + apimyPageUpper + 'signin'
                    ,data : {
                        'password' : pwd
                        ,'game_no' : game.gameNo
                        //,'user_id' : userId
                    }
                };
                req.data.email = id;

                //only if there is poc exp for non-signined in user
                if(user.uniqueId && fn.PLAYER.GETINFO().rewardExp > 0){
                    req.data.unique_id = user.uniqueId;
                    // req.data.random_user_id = user.uniqueId;
                    // todo check which one to send?
                }

                return callapi(req);

            }else {
                //return missing parameter err
                this.then = function(success, err){
                    if (success) success({returncode : _api.setCode.MISSING_PARAM});
                }
                return this;
            }
        }

        function signInRandom(nickname, image){
            if(game.gameNo){
                var req = {
                    url : siteUrl + apimyPageUpper + 'signin_random_user'
                    ,data : {
                        'game_no' : game.gameNo
                    }
                };

                if(nickname) {
                    req.data.nickname = nickname;
                }
                if(image) {
                    req.data.image = image;
                }
                return callapi(req);

            }else {
                //return missing parameter err
                this.then = function(success, err){
                    if (success) success({returncode : _api.setCode.MISSING_PARAM});
                }
                return this;
            }
        }

        /**
         *
         * @param method string sms | email
         * @param id string. email. when method is 'email'. phone number. when method is 'sms'
         * @param phoneCountryCode string. ex) KR
         * @return {*}
         */
        function vcode(method, id, phoneCountryCode) {

            var req = {
                url : coinApiUrl + apimember+ 'vcode'
                ,data : {
                    'method' : method
                }
            };

            if (method == 'email') {
                req.data.email = id;
                //sms
            }else {
                req.data.phone = id;
                req.data.country_phone = phoneCountryCode;
            }

            return callapi(req);

        }

        function checkEmailAddr(email){
            if(false) console.log('email', email)
            if (email != undefined){

                var req = {
                    url : oldApiUrl + apimember + 'chk_dup'
                    ,data : {
                        'email' : email
                    }
                };

                return callapi(req);

            }else {
                //return missing parameter err
                this.then = function(success, err){
                    if (success) success({returncode :_api.setCode.MISSING_PARAM});
                }
                return this;
            }

        }

        function getEsportsData(){
            return gameEsportsData;
        }

        function setEsportsData(data){
            gameEsportsData = data;
        }

        function resetUserData() {
            setDefaultUserData();
            var cCode = w.localStorage.getItem('_cc');
            if(_api.isAndroid() || _api.isIos()) {
                cCode = _api.android.getData('_cc');
                // name = _api.android.getData(getLocalKeyName('nickname'));
                // image = _api.android.getData(getLocalKeyName('image'));
            }

            _api.removeMember();

            w.localStorage.setItem('_cc', cCode);
            if(_api.isAndroid() || _api.isIos()) _api.android.saveData('_cc', cCode);
            playerInfo = {rewardExp: 0, isAnonymous : true};
            for (var i in user){
                //uniqueId should be remained
                if (i !== 'uniqueId') {
                    delete user[i];
                }
            }
        }

        function signOut(onComplete, onError){
            if(false) console.log('sign out');

            //only if it's signed user
            if (!fn.PLAYER.GETINFO().isAnonymous) {

                resetUserData();
                createGuest(function(res){
                    if(res.returncode == callCode.SUCCESS){
                        if(onComplete) onComplete();
                    }else {
                        // try again
                        setTimeout(function(){
                            createGuest(function(res){
                                if(res.returncode == callCode.SUCCESS){
                                    if(onComplete) onComplete();
                                }else {
                                    // just return callback
                                    if(onError) onError();
                                }
                            });
                        }, 200);
                    }
                });
            }else {

                resetUserData();

                if(onComplete) onComplete();

            }

        }

        function createGuest(callback){
            var idx1 = fn.UTIL.getRandomInt(1, 3);
            var idx2 = fn.UTIL.getRandomInt(1, 9);
            var _photoname = idx1+'-'+idx2+'.png';
            fn.resolve([_api.member.signInRandom(null, _photoname)],
                function(res){
                    if(false) console.log('signInRandom', res);
                    // if(res.returncode == CODE.SUCCESS){
                    if(res.returncode == callCode.SUCCESS){
                        // test
                        // var res = {};
                        // res.user_id = 'uid'+Math.random()*10;
                        // res.token = 'token123';
                        // res.country_code = 'CA';
                        // res.nickname = 'nickname';
                        // res.image = 'static/img/twinkle.png';

                        if(_api.isAndroid() || _api.isIos()) {
                            (_api.isIos()) ? Ios.signOut() : Android.signOut();
                        }

                        //set uniqueid
                        var uniqueId = res.message.user_id;
                        _api.setFirstGuest(true);
                        _api.setMember('uniqueId', uniqueId);
                        _api.setGuestToken(res.message.token);

                        res.message.isAnonymous = true;

                        // _api.setMyInfo({
                        //     COUNTRY_CODE : res.country_code,
                        //     // reward_exp : res.rewardexp,
                        //     isAnonymous : true });
                        _api.setMyInfo(res.message);
                        var _pInfo = _api.getMyInfo();
                        _api.setMyInfo({image: _api.getEmojiImgPath()+res.message.image});
                        var userInfo = _api.getMember();
                        _api.setGuestInfo(_pInfo);

                        var _gameid = _api.encrypt(game.gameId);
                        var _userid = _api.encrypt(uniqueId);
                        fn.resolve([_api.pa.getMyAccount(_gameid, _userid)],
                            function(res){
                                if(res.returncode == callCode.SUCCESS){
                                    _api.setMyInfo(res.userinfo);
                                }
                                // error exception will be done at where this api is called
                                if(callback) callback(res);
                            });


                        // INIT.phase++;
                        // checkInitStatus('user');

                    }else {
                        // var _errRes = _api.parseErrCodeAndDetail(res.returncode, res.message);
                        // initDefer.reject(_errRes);
                        if(callback) callback(res);
                    }
                });
        }

        function replacePhotoPath(imgStr){
            if(imgStr.indexOf('/') > -1){
                return imgStr;
            }else if(imgStr == ''){
                return imgStr;
            }else {
                var reg1 = new RegExp('^[1-3]\\-[1-9]\\.png');
                if(reg1.test(imgStr)){
                    return _api.getEmojiImgPath()+imgStr;
                }else {
                    // https://sdk-dev1.pocketarena.com//upload/user/image/nQeTDzfnuyhu.png?OTaY
                    return siteUrl+'/upload/user/image/'+imgStr;
                }
            }
        }

        function setEmojiImg(arr){
            var _ext;
            for(var i = 0; i < arr.length; i++){
                if(emojiImgs.path == '') {
                    var delimeter = arr[i].lastIndexOf('/')+1;
                    emojiImgs.path = arr[i].substr(0, delimeter);    // includes slash
                }
                var _name = arr[i].substr(delimeter);
                if(!_ext) _ext = _name.substr(_name.lastIndexOf('.')+1);
                var _temp = _name.substr(0, _name.lastIndexOf('.'));
                var _nameArr = _temp.split('-');
                var _i1 = parseInt(_nameArr[0])-1,  // 0...n
                    _i2 = parseInt(_nameArr[1])-1;  // 0...n
                if(!emojiImgs.names[_i1]) emojiImgs.names[_i1] = [];
                emojiImgs.names[_i1][_i2] = 1;
            }
            if(false) console.log('emojiList', emojiImgs);
        }

        function forgotPwd(email){
            var req = {
                url : siteUrl + apimyPageUpper + 'forgot_password'
                ,data : {
                    'email' : email
                }
            };
            return callapi(req);
        }

        function getMyInfo(){

            // var hasSession = checkSessionInfo();
            //
            // if(game.gameNo && hasSession){

                var req = {
                    url :  siteUrl + apimyPageUpper + 'view'
                    ,data : {
                        'game_no' : game.gameNo
                        ,'user_id' : (user.userId || user.uniqueId)
                        ,'token' : user.token
                    }
                };
                return callapi(req);


            // }else {
            //
            //     if(!game.gameNo){}
            //     if(!user.userId){}
            //     if(!user.token){}
            //
            //     //return unauthorized err
            //     this.then = function(success, err){
            //         if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
            //     }
            //     return this;
            // }
        }

        /**
         *
         * @param name
         * @param countryCode
         * @param langCode
         * @param pwdCurrent
         * @param pwd
         * @param image string | File
         * @param email
         * @return {*}
         */
        function setMyInfo(name, countryCode, langCode, pwdCurrent, pwd, image, email){

            // var hasSession = checkSessionInfo();
            //
            // if(game.gameNo && hasSession){

                var req = {data: {}};
                var _data = {};
                if(name) _data.nickname = name;
                if(countryCode) _data.country_code = countryCode;
                if(langCode) {
                    switch(langCode.toUpperCase()){
                        case 'EN':
                            _data.lang = 0;
                            break;
                        case 'KR':
                            _data.lang = 1;
                            break;
                        case 'DE':
                            _data.lang = 2;
                            break;
                        default:
                            break;

                    }
                }
                if(pwdCurrent) _data.current_password = pwdCurrent;
                if(pwd) _data.password = pwd;
                if(email) _data.email = email;
                if(image) {
                    //just update image path. ex) facebook image
                    if(typeof image === 'string'){
                        _data.image = image;
                        //update image file
                    }else {
                        req.data.image = image;
                    }
                }


                req.url = siteUrl + apimyPageUpper + 'edit';
                req.fileUpload = true;
                req.data.game_no = game.gameNo;
                req.data.user_id = (user.userId || user.uniqueId);
                req.data.token = user.token;
                req.data.data = JSON.stringify(_data);

                return callapi(req);


            // }else {
            //
            //     if(!game.gameNo){}
            //     if(!user.userId){}
            //     if(!user.token){}
            //
            //     //return unauthorized err
            //     this.then = function(success, err){
            //         if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
            //     }
            //     return this;
            // }
        }

        function payRefundFee(){
            var hasSession = checkSessionInfo();

            if(game.gameNo && hasSession){

                var req = {
                    url :  oldApiUrl + apimember + 'entrance_fee'
                    ,data : {
                        'game_no' : game.gameNo
                        ,'user_id' : user.userId
                        ,'token' : user.token
                    }
                };
                return callapi(req);


            }else {

                if(!game.gameNo){}
                if(!user.userId){}
                if(!user.token){}

                //return unauthorized err
                this.then = function(success, err){
                    if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
                }
                return this;
            }
        }

        function payReward(){
            var hasSession = checkSessionInfo();

            if(game.gameNo && hasSession){

                var req = {
                    url :  oldApiUrl + apimember + 'reward'
                    ,data : {
                        'game_no' : game.gameNo
                        ,'user_id' : user.userId
                        ,'token' : user.token
                    }
                };
                return callapi(req);


            }else {

                if(!game.gameNo){}
                if(!user.userId){}
                if(!user.token){}

                //return unauthorized err
                this.then = function(success, err){
                    if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
                }
                return this;
            }
        }

        ////////       GAME         ////////

        function gameGetMyInfo(){
            return game.myInfo;
        }
        function gameSetMyInfo(playerObj){
            game.myInfo = playerObj;
        }
        function gameGetOppoInfo(){
            return game.opInfo;
        }
        function gameSetOppoInfo(playerObj){
            game.opInfo = playerObj;
        }

        function gameStart(){

            var hasSession = checkSessionInfo();

            if(game.gameNo && hasSession){

                var req = {
                    url :  gameApiUrl + gameAddCommon + 'startGameNew' + gameApiExt
                    ,data : {
                        'gameid' : game.gameId
                        ,'userid' : user.userId
                        ,'token' : user.token
                        ,'countrycode' : fn.PLAYER.GETINFO().countryCode
                    }
                };
                return callapi(req);

            }else {

                if(!game.gameNo){}
                if(!user.userId){}
                if(!user.token){}

                //return unauthorized err
                this.then = function(success, err){
                    if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
                }
                return this;
            }

        }

        /**
         *
         * @param gameId
         * @param uniqueId string optional can be null
         * @param countryCode string user's country code. Null, if none in local storage
         * @return {*}
         */
        function getGameInfo(gameId, uniqueId){
            //for test : gameId = default
            var req = {
                //url : gameApiUrl + gameAddCommon + 'getGameInfo' + gameApiExt
                url : gameApiUrl + gameAddCommon + 'getGameInfoEsportsNew' + gameApiExt
                ,data : {
                    'gameid' : gameId
                }
            };

            var cc = w.localStorage.getItem('_cc');
            if(_api.isAndroid() || _api.isIos()) cc = _api.android.getData('_cc');
            if (!cc) cc = null;
            req.data.countrycode = cc;
            if (uniqueId) { req.data.uniqueid = uniqueId }
            return callapi(req);
        }

        /////////////////////   castle
        /**
         *
         * @param gameid
         * @param userid
         * @return promise
         */
        function getMain(gameid, userid){

            var req = {
                url : gameApiUrl + 'c_getMain.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

        /**
         * main pd, 12p; User Profile - Overview
         * https://docs.google.com/presentation/d/11YTQUJ0KsIWABG4NXuSyfHeDH9hFr0oaY2h7iR9FoMw/edit#slide=id.gc98c427118_1_241
         * @param gameid
         * @param userid
         * @param listcount
         * @param page
         * @return promise
         */
        function getProfile(gameid, userid, listcount, page){

            var req = {
                url : gameApiUrl + 'c_getProfile.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @param listcount
         * @return promise
         */
        function getMatchList(gameid, userid, listcount){

            var req = {
                url : gameApiUrl + 'c_getMatchList.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @param listcount
         * @param page
         * @return promise
         */
        function getMatchHistory2(gameid, userid, listcount, page){

            var req = {
                url : gameApiUrl + 'c_getMatchHistory.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @return promise
         */
        function giveRuby(gameid, userid){

            var req = {
                url : gameApiUrl + 'giveRuby.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @param listcount
         * @param page
         * @return promise
         */
        function castleList(gameid, userid, listcount, page, sorting){

            var req = {
                url : gameApiUrl + 'c_castleListNew1.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _sorting = _api.encrypt('sorting');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            req.data[_sorting] = sorting;
            return callapi(req);
        }

        function findCastle(gameid, userid, castleno){

            var req = {
                url : gameApiUrl + 'c_findCastle.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            return callapi(req);
        }

        function getRandom2(gameid, userid, listcount){

            var req = {
                url : gameApiUrl + 'c_getRandom.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @param stageno
         * @param gamescore
         * @param matchresult
         * @param wavecount
         * @param totalwave
         * @param robotno
         * @param matchmode
         * @return {*}
         */
        function sendResult(gameid, userid, stageno, gamescore, matchresult, wavecount, totalwave, robotno, matchmode, playtime){

            var req = {
                url : gameApiUrl + 'c_sendResultNew.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _stageno = _api.encrypt('stageno');
            var _gamescore = _api.encrypt('gamescore');
            var _matchresult = _api.encrypt('matchresult');
            var _wavecount = _api.encrypt('wavecount');
            var _totalwave = _api.encrypt('totalwave');
            var _robotno = _api.encrypt('robotno');
            var _matchmode = _api.encrypt('matchmode');
            var _playtime = _api.encrypt('playtime');
            var _version = _api.encrypt('version');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_stageno] = stageno;
            req.data[_gamescore] = gamescore;
            req.data[_matchresult] = matchresult;
            req.data[_wavecount] = wavecount;
            req.data[_totalwave] = totalwave;
            req.data[_robotno] = robotno;
            req.data[_matchmode] = matchmode;
            req.data[_playtime] = playtime;
            req.data[_version] = _api.encrypt(gameVer);
            return callapi(req);
        }


        /**
         *
         * @param gameid
         * @param userid
         * @param matchno
         * @param adslogno
         * @param iaplogno
         * @return {*}
         */
        function updateMatch(gameid, userid, matchno, adslogno, iaplogno){

            var req = {
                url : gameApiUrl + 'c_updateMatch.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _matchno = _api.encrypt('matchno');
            var _adslogno = _api.encrypt('adslogno');
            var _iaplogno = _api.encrypt('iaplogno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_matchno] = matchno;
            req.data[_adslogno] = adslogno;
            req.data[_iaplogno] = iaplogno;
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @param castleno
         * @param itemno
         * @return {*}
         */
        function upgradeCastleArena(gameid, userid, castleno, itemno){

            var req = {
                url : gameApiUrl2 + 'c_upgradeCastleArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            var _itemno = _api.encrypt('itemno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            req.data[_itemno] = itemno;
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @param castleno
         * @param listcount
         * @param page
         * @return promise
         */
        function castleDetail(gameid, userid, castleno){

            var req = {
                url : gameApiUrl + 'c_getCastleNew.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @return promise
         */
        function itemInfo(gameid, userid){

            var req = {
                url : gameApiUrl + 'c_itemInfo.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @param castleno
         * @return promise
         */
        function requestRent(gameid, userid, castleno){

            var req = {
                url : gameApiUrl + 'c_requestRent.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @param castleno
         * @return promise
         */
        function cancelRent(gameid, userid, castleno){

            var req = {
                url : gameApiUrl + 'c_cancelRent.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            return callapi(req);
        }

        /**
         *
         * @param gameid
         * @param userid
         * @param castleno
         * @return promise
         */
        function requestExt(gameid, userid, castleno){

            var req = {
                url : gameApiUrl + 'c_requestExt.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            return callapi(req);
        }

        function getPopup(gameid, userid){
            var req = {
                url : gameApiUrl + 'c_getPopup.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

        function getMyLandList(gameid, userid, listcount, page, castleno, maptype){
            var req = {
                url : gameApiUrl2 + 'c_getMyLandList.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _castleno = _api.encrypt('castleno');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            req.data[_castleno] = castleno;
            req.data[_maptype] = maptype;
            return callapi(req);
        }

        function getMyLandHistory(gameid, userid, listcount, page, castleno, maptype){
            var req = {
                url : gameApiUrl2 + 'c_getMyLandHistory.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _castleno = _api.encrypt('castleno');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            req.data[_castleno] = castleno;
            req.data[_maptype] = maptype;
            return callapi(req);
        }

        function getMyLandDetail(gameid, userid, castlemapno, castleno){
            var req = {
                url : gameApiUrl2 + 'c_getMyLandDetail.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castlemapno = _api.encrypt('castlemapno');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castlemapno] = castlemapno;
            req.data[_castleno] = castleno;
            return callapi(req);
        }

        function getMyDefendList(gameid, userid, listcount, page, castleno, maptype){
            var req = {
                url : gameApiUrl2 + 'c_getMyDefendList.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _castleno = _api.encrypt('castleno');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            req.data[_castleno] = castleno;
            req.data[_maptype] = maptype;
            return callapi(req);
        }

        function getMyAttackList(gameid, userid, listcount, page, castleno, maptype){
            var req = {
                url : gameApiUrl2 + 'c_getMyAttackList.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _castleno = _api.encrypt('castleno');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            req.data[_castleno] = castleno;
            req.data[_maptype] = maptype;
            return callapi(req);
        }

        function checkAttackCond(gameid, userid, oppocastlemapno, oppocastleno){
            var req = {
                url : gameApiUrl2 + 'c_checkAttackCond.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _oppocastlemapno = _api.encrypt('oppocastlemapno');
            var _oppocastleno = _api.encrypt('oppocastleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            if(oppocastlemapno) req.data[_oppocastlemapno] = oppocastlemapno;
            if(oppocastleno) req.data[_oppocastleno] = oppocastleno;
            return callapi(req);
        }

        function createAttack(gameid, userid, castleno, stageno, matchdata, paytype, gamescore, oppocastlemapno, oppocastleno){
            var req = {
                url : gameApiUrl2 + 'c_createAttack.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            var _stageno = _api.encrypt('stageno');
            var _matchdata = _api.encrypt('matchdata');
            var _paytype = _api.encrypt('paytype');
            var _gamescore = _api.encrypt('gamescore');
            var _oppocastlemapno = _api.encrypt('oppocastlemapno');
            var _oppocastleno = _api.encrypt('oppocastleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            req.data[_stageno] = stageno;
            req.data[_matchdata] = matchdata;
            req.data[_paytype] = paytype;
            req.data[_gamescore] = gamescore;
            if(oppocastlemapno) req.data[_oppocastlemapno] = oppocastlemapno;
            if(oppocastleno) req.data[_oppocastleno] = oppocastleno;
            return callapi(req);
        }

        function checkDefendCond(gameid, userid, castleno){
            var req = {
                url : gameApiUrl2 + 'c_checkDefendCond.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            if(castleno) req.data[_castleno] = castleno;
            return callapi(req);
        }

        function startDefend(gameid, userid, castleno, battleno, paytype, oppocastleno){
            var req = {
                url : gameApiUrl2 + 'c_startDefend.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            var _battleno = _api.encrypt('battleno');
            var _paytype = _api.encrypt('paytype');
            var _oppocastleno = _api.encrypt('oppocastleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            req.data[_battleno] = battleno;
            req.data[_paytype] = paytype;
            req.data[_oppocastleno] = oppocastleno;
            return callapi(req);
        }

        function finishDefend(gameid, userid, battleno, gamescore, matchresult, castleno, oppocastleno, matchdata){
            var req = {
                url : gameApiUrl2 + 'c_finishDefend.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _battleno = _api.encrypt('battleno');
            var _gamescore = _api.encrypt('gamescore');
            var _matchresult = _api.encrypt('matchresult');
            var _castleno = _api.encrypt('castleno');
            var _oppocastleno = _api.encrypt('oppocastleno');
            var _matchdata = _api.encrypt('matchdata');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_battleno] = battleno;
            req.data[_gamescore] = gamescore;
            req.data[_matchresult] = matchresult;
            req.data[_castleno] = castleno;
            req.data[_oppocastleno] = oppocastleno;
            req.data[_matchdata] = matchdata;
            return callapi(req);
        }

        function sendResultStage(gameid, userid, stageno, gamescore, matchresult, wavecount, totalwave, castleno, matchno, matchmode, playtime, starcount){
            var req = {
                url : gameApiUrl2 + 'c_sendResultStage.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _stageno = _api.encrypt('stageno');
            var _gamescore = _api.encrypt('gamescore');
            var _matchresult = _api.encrypt('matchresult');
            var _wavecount = _api.encrypt('wavecount');
            var _totalwave = _api.encrypt('totalwave');
            var _castleno = _api.encrypt('castleno');
            var _matchno = _api.encrypt('matchno');
            var _matchmode = _api.encrypt('matchmode');
            var _playtime = _api.encrypt('playtime');
            var _starcount = _api.encrypt('starcount');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_stageno] = stageno;
            req.data[_gamescore] = gamescore;
            req.data[_matchresult] = matchresult;
            req.data[_wavecount] = wavecount;
            req.data[_totalwave] = totalwave;
            req.data[_castleno] = castleno;
            req.data[_matchno] = matchno;
            req.data[_matchmode] = matchmode;
            if(playtime) req.data[_playtime] = playtime;
            req.data[_starcount] = starcount;
            return callapi(req);
        }

        function cancelRentArena(gameid, userid, castleno){
            var req = {
                url : gameApiUrl2 + 'c_cancelRentArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            return callapi(req);
        }

        function getMyLandResult(gameid, userid, listcount, page, castleno, maptype){
            var req = {
                url : gameApiUrl2 + 'c_getMyLandResult.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _castleno = _api.encrypt('castleno');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            req.data[_castleno] = castleno;
            req.data[_maptype] = maptype;
            return callapi(req);
        }

        function getTodayBattles(gameid, userid, listcount, page, maptype){
            var req = {
                url : gameApiUrl2 + 'c_getTodayBattles.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            req.data[_maptype] = maptype;
            return callapi(req);
        }

        function getStrategy(gameid, userid, maptype){
            var req = {
                url : gameApiUrl2 + 'c_getStrategy.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            if(maptype) req.data[_maptype] = maptype;
            return callapi(req);
        }

        function saveStrategy(gameid, userid, maptype, strategydata, strategytitle){
            var req = {
                url : gameApiUrl2 + 'c_saveStrategy.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _maptype = _api.encrypt('maptype');
            var _strategydata = _api.encrypt('strategydata');
            var _strategytitle = _api.encrypt('strategytitle');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_maptype] = maptype;
            req.data[_strategydata] = strategydata;
            req.data[_strategytitle] = strategytitle;
            return callapi(req);
        }

        function updateStrategy(gameid, userid, maptype, strategydata, strategytitle, strategyno){
            var req = {
                url : gameApiUrl2 + 'c_updateStrategy.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _maptype = _api.encrypt('maptype');
            var _strategydata = _api.encrypt('strategydata');
            var _strategytitle = _api.encrypt('strategytitle');
            var _strategyno = _api.encrypt('strategyno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_maptype] = maptype;
            req.data[_strategydata] = strategydata;
            req.data[_strategytitle] = strategytitle;
            req.data[_strategyno] = strategyno;
            return callapi(req);
        }

        function delStrategy(gameid, userid, strategyno){
            var req = {
                url : gameApiUrl2 + 'c_delStrategy.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _strategyno = _api.encrypt('strategyno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_strategyno] = strategyno;
            return callapi(req);
        }

        function updateFlag(gameid, userid, castleno, flagname){
            var req = {
                url : gameApiUrl2 + 'c_updateFlag.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            var _flagname = _api.encrypt('flagname');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            req.data[_flagname] = flagname;
            return callapi(req);
        }

        function cStartMatch(gameid, userid, castleno, stageno){
            var req = {
                url : gameApiUrl2 + 'c_startMatch.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            var _stageno = _api.encrypt('stageno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            req.data[_stageno] = stageno;
            return callapi(req);
        }

        function getMainArena(gameid, userid){
            var req = {
                url : gameApiUrl2 + 'c_getMainArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

        function getCastleArena(gameid, userid, castleno, maptype){
            var req = {
                url : gameApiUrl2 + 'c_getCastleArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            req.data[_maptype] = maptype;
            return callapi(req);
        }

        function getArenaHistory(gameid, userid, listcount, page, castleno){
            var req = {
                url : gameApiUrl2 + 'c_getArenaHistory.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            req.data[_castleno] = castleno;
            return callapi(req);
        }

        function cGetLandListM(gameid, maptype, startx, starty, endx, endy){
            var req = {
                url : gameApiUrl2 + 'c_getLandListM.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _maptype = _api.encrypt('maptype');
            var _startx = _api.encrypt('startx');
            var _starty = _api.encrypt('starty');
            var _endx = _api.encrypt('endx');
            var _endy = _api.encrypt('endy');
            req.data[_gameid] = gameid;
            req.data[_startx] = startx;
            req.data[_starty] = starty;
            req.data[_endx] = endx;
            req.data[_endy] = endy;
            if(maptype) req.data[_maptype] = maptype;

            return callapi(req);
        }

        function getLandDetail(gameid, userid, castlemapno, castleno){
            var req = {
                url : gameApiUrl2 + 'c_getLandDetail.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castlemapno = _api.encrypt('castlemapno');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castlemapno] = castlemapno;
            req.data[_castleno] = castleno;

            return callapi(req);
        }

        function requestExtArena(gameid, userid, castleno){
            var req = {
                url : gameApiUrl2 + 'c_requestExtArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;

            return callapi(req);
        }

        function requestRentArena(gameid, userid, castleno){
            var req = {
                url : gameApiUrl2 + 'c_requestRentArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;

            return callapi(req);
        }

        function getMyTodayBattles(gameid, userid, castleno, listcount, page, maptype){
            var req = {
                url : gameApiUrl2 + 'c_getTodayBattles.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            req.data[_maptype] = maptype;

            return callapi(req);
        }

        function getPublicPool(gameid, userid, castleno, listcount, page, maptype){
            var req = {
                url : gameApiUrl2 + 'c_getPublicPool.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;

            return callapi(req);
        }

        function getProfileArena(gameid, userid, listcount, page){
            var req = {
                url : gameApiUrl2 + 'c_getProfileArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            return callapi(req);
        }

        function contractRequest(gameid, userid, castleno, telegramid){
            var req = {
                url : gameApiUrl2 + 'c_contactRequest.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            var _telegramid = _api.encrypt('telegramid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            req.data[_telegramid] = telegramid;
            return callapi(req);
        }

        function updateSetArena(gameid, userid, setmode, emailyn){
            var req = {
                url : gameApiUrl2 + 'c_updateSetArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _setmode = _api.encrypt('setmode');
            var _emailyn = _api.encrypt('emailyn');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            if(setmode) req.data[_setmode] = setmode;
            if(emailyn) req.data[_emailyn] = emailyn;
            return callapi(req);
        }

        function sendResultDaily(gameid, userid, stageno, gamescore, matchresult, wavecount, totalwave, castleno, playtime){
            var req = {
                url : gameApiUrl2 + 'c_sendResultDaily.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _stageno = _api.encrypt('stageno');
            var _gamescore = _api.encrypt('gamescore');
            var _matchresult = _api.encrypt('matchresult');
            var _wavecount = _api.encrypt('wavecount');
            var _totalwave = _api.encrypt('totalwave');
            var _castleno = _api.encrypt('castleno');
            var _playtime = _api.encrypt('playtime');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_stageno] = stageno;
            req.data[_gamescore] = gamescore;
            req.data[_matchresult] = matchresult;
            req.data[_wavecount] = wavecount;
            req.data[_totalwave] = totalwave;
            req.data[_castleno] = castleno;
            if(playtime) req.data[_playtime] = playtime;
            return callapi(req);
        }

        function itemInfoArena(gameid, userid){
            var req = {
                url : gameApiUrl2 + 'c_itemInfoArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

        function purchaseItem(gameid, userid, castleno, itemno){
            var req = {
                url : gameApiUrl2 + 'c_purchaseItem.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            var _itemno = _api.encrypt('itemno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            req.data[_itemno] = itemno;
            return callapi(req);
        }

        function acceptRent(gameid, userid, castlemessageno){
            var req = {
                url : gameApiUrl2 + 'c_acceptRentExt.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castlemessageno = _api.encrypt('castlemessageno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castlemessageno] = castlemessageno;
            return callapi(req);
        }

        function getMessagesArena(gameid, userid, listcount, page){
            var req = {
                url : gameApiUrl2 + 'c_getMessagesArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            return callapi(req);
        }

        function updateMessageArena(gameid, userid, castlemessageno, mode){
            var req = {
                url : gameApiUrl2 + 'c_updateMessageArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castlemessageno = _api.encrypt('castlemessageno');
            var _mode = _api.encrypt('mode');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castlemessageno] = castlemessageno;
            req.data[_mode] = mode;
            return callapi(req);
        }

        function updateAgree(gameid, userid){
            var req = {
                url : gameApiUrl2 + 'c_updateAgree.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

        function sendResultNoCastle(gameid, userid, stageno, gamescore, matchresult, wavecount, totalwave, playtime){
            var req = {
                url : gameApiUrl2 + 'c_sendResultNoCastle.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _stageno = _api.encrypt('stageno');
            var _gamescore = _api.encrypt('gamescore');
            var _matchresult = _api.encrypt('matchresult');
            var _wavecount = _api.encrypt('wavecount');
            var _totalwave = _api.encrypt('totalwave');
            var _playtime = _api.encrypt('playtime');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_stageno] = stageno;
            req.data[_gamescore] = gamescore;
            req.data[_matchresult] = matchresult;
            req.data[_wavecount] = wavecount;
            req.data[_totalwave] = totalwave;
            req.data[_playtime] = playtime;
            return callapi(req);
        }

        function getAllLandList(gameid, castleno, startx, starty, endx, endy){
            var req = {
                // url : gameApiUrl2 + 'c_getAllLandList.php' // not used any more 220323
                url : gameApiUrl2 + 'c_getLandListM2.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _castleno = _api.encrypt('castleno');
            var _startx = _api.encrypt('startx');
            var _starty = _api.encrypt('starty');
            var _endx = _api.encrypt('endx');
            var _endy = _api.encrypt('endy');
            req.data[_gameid] = gameid;
            req.data[_castleno] = castleno;
            req.data[_startx] = startx;
            req.data[_starty] = starty;
            req.data[_endx] = endx;
            req.data[_endy] = endy;
            return callapi(req);
        }

        function cGetLandListM2D(gameid, maptype, startx, starty, endx, endy){
            var req = {
                url : gameApiUrl2 + 'c_getLandListM2D.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _maptype = _api.encrypt('maptype');
            var _startx = _api.encrypt('startx');
            var _starty = _api.encrypt('starty');
            var _endx = _api.encrypt('endx');
            var _endy = _api.encrypt('endy');
            req.data[_gameid] = gameid;
            req.data[_startx] = startx;
            req.data[_starty] = starty;
            req.data[_endx] = endx;
            req.data[_endy] = endy;
            if(maptype) req.data[_maptype] = maptype;

            return callapi(req);
        }

        function getAllLandList2D(gameid, castleno, startx, starty, endx, endy){
            var req = {
                url : gameApiUrl2 + 'c_getAllLandList2D.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _castleno = _api.encrypt('castleno');
            var _startx = _api.encrypt('startx');
            var _starty = _api.encrypt('starty');
            var _endx = _api.encrypt('endx');
            var _endy = _api.encrypt('endy');
            req.data[_gameid] = gameid;
            req.data[_castleno] = castleno;
            req.data[_startx] = startx;
            req.data[_starty] = starty;
            req.data[_endx] = endx;
            req.data[_endy] = endy;
            return callapi(req);
        }

        function ncGetLandListM(gameid, maptype, startx, starty, endx, endy){
            var req = {
                url : 'https://pa.emojigames.io/ssapi/pa_arena/nc_getLandListM.php'   // live only
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _maptype = _api.encrypt('maptype');
            var _startx = _api.encrypt('startx');
            var _starty = _api.encrypt('starty');
            var _endx = _api.encrypt('endx');
            var _endy = _api.encrypt('endy');
            req.data[_gameid] = gameid;
            req.data[_startx] = startx;
            req.data[_starty] = starty;
            req.data[_endx] = endx;
            req.data[_endy] = endy;
            if(maptype) req.data[_maptype] = maptype;

            return callapi(req);
        }

        function ncGetAllLandList(gameid, castleno, startx, starty, endx, endy){
            var req = {
                url : 'https://pa.emojigames.io/ssapi/pa_arena/nc_getAllLandList.php'   // live only
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _castleno = _api.encrypt('castleno');
            var _startx = _api.encrypt('startx');
            var _starty = _api.encrypt('starty');
            var _endx = _api.encrypt('endx');
            var _endy = _api.encrypt('endy');
            req.data[_gameid] = gameid;
            req.data[_castleno] = castleno;
            req.data[_startx] = startx;
            req.data[_starty] = starty;
            req.data[_endx] = endx;
            req.data[_endy] = endy;
            return callapi(req);
        }

        function ncGetLandListM2D(gameid, maptype, startx, starty, endx, endy){
            var req = {
                url : 'https://pa.emojigames.io/ssapi/pa_arena/nc_getLandListM2D.php'   // live only
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _maptype = _api.encrypt('maptype');
            var _startx = _api.encrypt('startx');
            var _starty = _api.encrypt('starty');
            var _endx = _api.encrypt('endx');
            var _endy = _api.encrypt('endy');
            req.data[_gameid] = gameid;
            req.data[_startx] = startx;
            req.data[_starty] = starty;
            req.data[_endx] = endx;
            req.data[_endy] = endy;
            if(maptype) req.data[_maptype] = maptype;

            return callapi(req);
        }

        function ncGetAllLandList2D(gameid, castleno, startx, starty, endx, endy){
            var req = {
                url : 'https://pa.emojigames.io/ssapi/pa_arena/nc_getAllLandList2D.php'   // live only
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _castleno = _api.encrypt('castleno');
            var _startx = _api.encrypt('startx');
            var _starty = _api.encrypt('starty');
            var _endx = _api.encrypt('endx');
            var _endy = _api.encrypt('endy');
            req.data[_gameid] = gameid;
            req.data[_castleno] = castleno;
            req.data[_startx] = startx;
            req.data[_starty] = starty;
            req.data[_endx] = endx;
            req.data[_endy] = endy;
            return callapi(req);
        }

        function ccmGetMainArena(gameid, userid){
            var req = {
                url : gameApiUrl2 + 'ccm_getMainArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

        function ccmGetCastleArena(gameid, userid, castleno, maptype){
            var req = {
                url : gameApiUrl2 + 'ccm_getCastleArena.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            if(maptype) req.data[_maptype] = maptype;
            return callapi(req);
        }

        function ccmGetMyLandList(gameid, userid, listcount, page, castleno, maptype){
            var req = {
                url : gameApiUrl2 + 'ccm_getMyLandList.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _castleno = _api.encrypt('castleno');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            if(listcount) req.data[_listcount] = listcount;
            if(page) req.data[_page] = page;
            if(castleno) req.data[_castleno] = castleno;
            if(maptype) req.data[_maptype] = maptype;
            return callapi(req);
        }

        function ccmGetDefendList(gameid, userid, listcount, page, castleno, maptype){
            var req = {
                url : gameApiUrl2 + 'ccm_getDefendList.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _castleno = _api.encrypt('castleno');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            if(listcount) req.data[_listcount] = listcount;
            if(page) req.data[_page] = page;
            if(castleno) req.data[_castleno] = castleno;
            if(maptype) req.data[_maptype] = maptype;
            return callapi(req);
        }

        function ccmGetAttackList(gameid, userid, listcount, page, castleno, maptype){
            var req = {
                url : gameApiUrl2 + 'ccm_getMyAttackList.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            var _castleno = _api.encrypt('castleno');
            var _maptype = _api.encrypt('maptype');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            if(listcount) req.data[_listcount] = listcount;
            if(page) req.data[_page] = page;
            if(castleno) req.data[_castleno] = castleno;
            if(maptype) req.data[_maptype] = maptype;
            return callapi(req);
        }

        function ccmGetLandDetail(gameid, userid, castlemapno, castleno){
            var req = {
                url : gameApiUrl2 + 'ccm_getMyAttackList.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castlemapno = _api.encrypt('castlemapno');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            if(castlemapno) req.data[_castlemapno] = castlemapno;
            if(castleno) req.data[_castleno] = castleno;
            return callapi(req);
        }

        function getLandListM(maptype, startx, starty, endx, endy){
            var req = {
                url : gameApiUrl2 + 'cm_getLandListM.php'
                ,data : {}
            };
            var _maptype = _api.encrypt('maptype');
            var _startx = _api.encrypt('startx');
            var _starty = _api.encrypt('starty');
            var _endx = _api.encrypt('endx');
            var _endy = _api.encrypt('endy');
            req.data[_startx] = startx;
            req.data[_starty] = starty;
            req.data[_endx] = endx;
            req.data[_endy] = endy;
            if(maptype) req.data[_maptype] = maptype;

            return callapi(req);
        }

        function getLandStatus(gameid, userid){
            var req = {
                url : gameApiUrl2 + 'cm_getLandStatus.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            return callapi(req);
        }

        function chooseLand(gameid, userid, castlemapno, castleno){
            var req = {
                url : gameApiUrl2 + 'cm_chooseLand.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castlemapno = _api.encrypt('castlemapno');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castlemapno] = castlemapno;
            req.data[_castleno] = castleno;
            return callapi(req);
        }

        function getLandStatus2(gameid, userid, castleno){
            var req = {
                url : gameApiUrl2 + 'c_getLandStatus.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_castleno] = castleno;
            return callapi(req);
        }

        function getMainCM(gameid, userid, listcount, page){
            var req = {
                url : gameApiUrl + 'cm_getMainNew1.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _listcount = _api.encrypt('listcount');
            var _page = _api.encrypt('page');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            req.data[_listcount] = listcount;
            req.data[_page] = page;
            return callapi(req);
        }

        function getLandListM2D(maptype, startx, starty, endx, endy) {
            var req = {
                url: gameApiUrl2 + 'cm_getLandListM2D.php'
                , data: {}
            };
            var _maptype = _api.encrypt('maptype');
            var _startx = _api.encrypt('startx');
            var _starty = _api.encrypt('starty');
            var _endx = _api.encrypt('endx');
            var _endy = _api.encrypt('endy');
            req.data[_startx] = startx;
            req.data[_starty] = starty;
            req.data[_endx] = endx;
            req.data[_endy] = endy;
            if (maptype) req.data[_maptype] = maptype;

            return callapi(req);
        }

        function getLandListM3D(maptype, startx, starty, endx, endy) {
            var req = {
                url: gameApiUrl2 + 'cm_getLandListM3D.php'
                , data: {}
            };
            var _maptype = _api.encrypt('maptype');
            var _startx = _api.encrypt('startx');
            var _starty = _api.encrypt('starty');
            var _endx = _api.encrypt('endx');
            var _endy = _api.encrypt('endy');
            req.data[_startx] = startx;
            req.data[_starty] = starty;
            req.data[_endx] = endx;
            req.data[_endy] = endy;
            if (maptype) req.data[_maptype] = maptype;

            return callapi(req);
        }

        function getLandFlag2D(gameid, userid) {
            var req = {
                url: gameApiUrl2 + 'c_getLandFlag2D.php'
                , data: {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;

            return callapi(req);
        }

        function findCastleArena(gameid, userid, castleno, positionx, positiony, mode){

            var req = {
                url : gameApiUrl2 + 'c_findCastle.php'
                ,data : {}
            };
            var _gameid = _api.encrypt('gameid');
            var _userid = _api.encrypt('userid');
            var _castleno = _api.encrypt('castleno');
            var _positionx = _api.encrypt('positionx');
            var _positiony = _api.encrypt('positiony');
            var _mode = _api.encrypt('mode');
            req.data[_gameid] = gameid;
            req.data[_userid] = userid;
            if(castleno) req.data[_castleno] = castleno;
            if(positionx) req.data[_positionx] = positionx;
            if(positiony) req.data[_positiony] = positiony;
            if(mode) req.data[_mode] = mode;

            return callapi(req);
        }

        /////////////////////   end of castle

        // function updateTodayHighscore(score, onComplete){
        //     if(false) console.log('updateTodayHighscore')
        //
        //     function doSet(){
        //         _thscore.date = _today.format('YYYY-MM-DD');
        //         // update score
        //         _thscore.score = score;
        //         _api.setTodayHighscore(_thscore, true);
        //         if(false) console.log('today highscore updated', _thscore);
        //         fn.UPDATEBESTSCORE(score, function (res) {
        //             onComplete(res);
        //         })
        //     }
        //
        //     var _thscore = _api.getTodayHighscore();
        //     var _today = moment.utc( new Date() ); //.format('YYYY-MM-DD');
        //     var _dataToday = moment.utc(_thscore.date);
        //     // if(false) console.log('_dataToday.diff(_today, \'d\')', _dataToday.diff(_today, 'd'), _today.diff(_dataToday, 'd'))
        //     if( _thscore.date == '' ){
        //         doSet();
        //     }else {
        //         if(_today.diff(_dataToday, 'd') == 0) { // same day
        //             // check the score
        //             if(score > _thscore.score){
        //                 doSet();
        //             }else {
        //                 // just return
        //                 onComplete({returncode: callCode.SUCCESS});
        //             }
        //         }else if(_today.diff(_dataToday, 'd') > 0){ // n days later since the last update
        //             doSet();
        //         }else {
        //             // just return
        //             onComplete({returncode: callCode.SUCCESS});
        //         }
        //     }
        // }

        /**
         * check user session info
         * @returns {undefined|*}
         */
        function checkSessionInfo(){
            if(!user.userId) user.userId = _api.getMember('userId');
            if(!user.token) user.token = _api.getMember('token');

            return (user.userId && user.token);
        }

        /**
         *
         * @param code string. country code to search
         * @return {*} country object
         */
        function getCountries(code){
            var data = [
                {"id": 1, "code" : "AF", "name" : "Afghanistan", "telCode": "93"},
                {"id": 2, "code" : "AX", "name" : "land Islands", "telCode": ""},
                {"id": 3, "code" : "AL", "name" : "Albania", "telCode": "355"},
                {"id": 4, "code" : "DZ", "name" : "Algeria", "telCode": "213"},
                {"id": 5, "code" : "AS", "name" : "American Samoa", "telCode": "684"},
                {"id": 6, "code" : "AD", "name" : "Andorra", "telCode": ""},
                {"id": 7, "code" : "AO", "name" : "Angola", "telCode": ""},
                {"id": 8, "code" : "AI", "name" : "Anguilla", "telCode": ""},
                {"id": 9, "code" : "AQ", "name" : "Antarctica", "telCode": ""},
                {"id": 10, "code" : "AG", "name" : "Antigua and Barbuda", "telCode": ""},
                {"id": 11, "code" : "AR", "name" : "Argentina", "telCode": ""},
                {"id": 12, "code" : "AM", "name" : "Armenia", "telCode": ""},
                {"id": 13, "code" : "AW", "name" : "Aruba", "telCode": ""},
                {"id": 14, "code" : "AU", "name" : "Australia", "telCode": ""},
                {"id": 15, "code" : "AT", "name" : "Austria", "telCode": ""},
                {"id": 16, "code" : "AZ", "name" : "Azerbaijan", "telCode": ""},
                {"id": 17, "code" : "BS", "name" : "Bahamas", "telCode": ""},
                {"id": 18, "code" : "BH", "name" : "Bahrain", "telCode": ""},
                {"id": 19, "code" : "BD", "name" : "Bangladesh", "telCode": ""},
                {"id": 20, "code" : "BB", "name" : "Barbados", "telCode": ""},
                {"id": 21, "code" : "BY", "name" : "Belarus", "telCode": ""},
                {"id": 22, "code" : "BE", "name" : "Belgium", "telCode": ""},
                {"id": 23, "code" : "BZ", "name" : "Belize", "telCode": ""},
                {"id": 24, "code" : "BJ", "name" : "Benin", "telCode": ""},
                {"id": 25, "code" : "BM", "name" : "Bermuda", "telCode": ""},
                {"id": 26, "code" : "BT", "name" : "Bhutan", "telCode": ""},
                {"id": 27, "code" : "BO", "name" : "Bolivia", "telCode": ""},
                {"id": 28, "code" : "BQ", "name" : "Bonaire, Sint Eustatius and Saba", "telCode": ""},
                {"id": 29, "code" : "BA", "name" : "Bosnia and Herzegovina", "telCode": ""},
                {"id": 30, "code" : "BW", "name" : "Botswana", "telCode": ""},
                {"id": 31, "code" : "BV", "name" : "Bouvet Island (Bouvetya)", "telCode": ""},
                {"id": 32, "code" : "BR", "name" : "Brazil", "telCode": ""},
                {"id": 33, "code" : "IO", "name" : "British Indian Ocean Territory (Chagos Archipelago)", "telCode": ""},
                {"id": 34, "code" : "VG", "name" : "British Virgin Islands", "telCode": ""},
                {"id": 35, "code" : "BN", "name" : "Brunei Darussalam", "telCode": ""},
                {"id": 36, "code" : "BG", "name" : "Bulgaria", "telCode": ""},
                {"id": 37, "code" : "BF", "name" : "Burkina Faso", "telCode": ""},
                {"id": 38, "code" : "BI", "name" : "Burundi", "telCode": ""},
                {"id": 39, "code" : "CV", "name" : "Cabo Verde", "telCode": ""},
                {"id": 40, "code" : "KH", "name" : "Cambodia", "telCode": ""},
                {"id": 41, "code" : "CM", "name" : "Cameroon", "telCode": ""},
                {"id": 42, "code" : "CA", "name" : "Canada", "telCode": ""},
                {"id": 43, "code" : "KY", "name" : "Cayman Islands", "telCode": ""},
                {"id": 44, "code" : "CF", "name" : "Central African Republic", "telCode": ""},
                {"id": 45, "code" : "TD", "name" : "Chad", "telCode": ""},
                {"id": 46, "code" : "CL", "name" : "Chile", "telCode": ""},
                {"id": 47, "code" : "CN", "name" : "China", "telCode": ""},
                {"id": 48, "code" : "CX", "name" : "Christmas Island", "telCode": ""},
                {"id": 49, "code" : "CC", "name" : "Cocos (Keeling) Islands", "telCode": ""},
                {"id": 50, "code" : "CO", "name" : "Colombia", "telCode": ""},
                {"id": 51, "code" : "KM", "name" : "Comoros", "telCode": ""},
                {"id": 52, "code" : "CD", "name" : "Congo, Democratic", "telCode": ""},
                {"id": 53, "code" : "CG", "name" : "Congo, Republic", "telCode": ""},
                {"id": 54, "code" : "CK", "name" : "Cook Islands", "telCode": ""},
                {"id": 55, "code" : "CR", "name" : "Costa Rica", "telCode": ""},
                {"id": 56, "code" : "CI", "name" : "Cote d'Ivoire", "telCode": ""},
                {"id": 57, "code" : "HR", "name" : "Croatia", "telCode": ""},
                {"id": 58, "code" : "CU", "name" : "Cuba", "telCode": ""},
                {"id": 59, "code" : "CW", "name" : "Curaao", "telCode": ""},
                {"id": 60, "code" : "CY", "name" : "Cyprus", "telCode": ""},
                {"id": 61, "code" : "CZ", "name" : "Czech Republic", "telCode": ""},
                {"id": 62, "code" : "DK", "name" : "Denmark", "telCode": ""},
                {"id": 63, "code" : "DJ", "name" : "Djibouti", "telCode": ""},
                {"id": 64, "code" : "DM", "name" : "Dominica", "telCode": ""},
                {"id": 65, "code" : "DO", "name" : "Dominican Republic", "telCode": ""},
                {"id": 66, "code" : "EC", "name" : "Ecuador", "telCode": ""},
                {"id": 67, "code" : "EG", "name" : "Egypt", "telCode": ""},
                {"id": 68, "code" : "SV", "name" : "El Salvador", "telCode": ""},
                {"id": 69, "code" : "GQ", "name" : "Equatorial Guinea", "telCode": ""},
                {"id": 70, "code" : "ER", "name" : "Eritrea", "telCode": ""},
                {"id": 71, "code" : "EE", "name" : "Estonia", "telCode": ""},
                {"id": 72, "code" : "ET", "name" : "Ethiopia", "telCode": ""},
                {"id": 73, "code" : "FK", "name" : "Falkland Islands (Malvinas)", "telCode": ""},
                {"id": 74, "code" : "FO", "name" : "Faroe Islands", "telCode": ""},
                {"id": 75, "code" : "FJ", "name" : "Fiji", "telCode": ""},
                {"id": 76, "code" : "FI", "name" : "Finland", "telCode": ""},
                {"id": 77, "code" : "FR", "name" : "France", "telCode": ""},
                {"id": 78, "code" : "GF", "name" : "French Guiana", "telCode": ""},
                {"id": 79, "code" : "PF", "name" : "French Polynesia", "telCode": ""},
                {"id": 80, "code" : "TF", "name" : "French Southern Territories", "telCode": ""},
                {"id": 81, "code" : "GA", "name" : "Gabon", "telCode": ""},
                {"id": 82, "code" : "GM", "name" : "Gambia", "telCode": ""},
                {"id": 83, "code" : "GE", "name" : "Georgia", "telCode": ""},
                {"id": 84, "code" : "DE", "name" : "Germany", "telCode": ""},
                {"id": 85, "code" : "GH", "name" : "Ghana", "telCode": ""},
                {"id": 86, "code" : "GI", "name" : "Gibraltar", "telCode": ""},
                {"id": 87, "code" : "GR", "name" : "Greece", "telCode": ""},
                {"id": 88, "code" : "GL", "name" : "Greenland", "telCode": ""},
                {"id": 89, "code" : "GD", "name" : "Grenada", "telCode": ""},
                {"id": 90, "code" : "GP", "name" : "Guadeloupe", "telCode": ""},
                {"id": 91, "code" : "GU", "name" : "Guam", "telCode": ""},
                {"id": 92, "code" : "GT", "name" : "Guatemala", "telCode": ""},
                {"id": 93, "code" : "GG", "name" : "Guernsey", "telCode": ""},
                {"id": 94, "code" : "GN", "name" : "Guinea", "telCode": ""},
                {"id": 95, "code" : "GW", "name" : "Guinea-Bissau", "telCode": ""},
                {"id": 96, "code" : "GY", "name" : "Guyana", "telCode": ""},
                {"id": 97, "code" : "HT", "name" : "Haiti", "telCode": ""},
                {"id": 98, "code" : "HM", "name" : "Heard Island and McDonald Islands", "telCode": ""},
                {"id": 99, "code" : "VA", "name" : "Holy See (Vatican City State)", "telCode": ""},
                {"id": 100, "code" : "HN", "name" : "Honduras", "telCode": ""},
                {"id": 101, "code" : "HK", "name" : "Hong Kong", "telCode": ""},
                {"id": 102, "code" : "HU", "name" : "Hungary", "telCode": ""},
                {"id": 103, "code" : "IS", "name" : "Iceland", "telCode": ""},
                {"id": 104, "code" : "IN", "name" : "India", "telCode": ""},
                {"id": 105, "code" : "ID", "name" : "Indonesia", "telCode": ""},
                {"id": 106, "code" : "IR", "name" : "Iran", "telCode": ""},
                {"id": 107, "code" : "IQ", "name" : "Iraq", "telCode": ""},
                {"id": 108, "code" : "IE", "name" : "Ireland", "telCode": ""},
                {"id": 109, "code" : "IM", "name" : "Isle of Man", "telCode": ""},
                {"id": 110, "code" : "IL", "name" : "Israel", "telCode": ""},
                {"id": 111, "code" : "IT", "name" : "Italy", "telCode": ""},
                {"id": 112, "code" : "JM", "name" : "Jamaica", "telCode": ""},
                {"id": 113, "code" : "JP", "name" : "Japan", "telCode": ""},
                {"id": 114, "code" : "JE", "name" : "Jersey", "telCode": ""},
                {"id": 115, "code" : "JO", "name" : "Jordan", "telCode": ""},
                {"id": 116, "code" : "KZ", "name" : "Kazakhstan", "telCode": ""},
                {"id": 117, "code" : "KE", "name" : "Kenya", "telCode": ""},
                {"id": 118, "code" : "KI", "name" : "Kiribati", "telCode": ""},
                {"id": 119, "code" : "KP", "name" : "Korea, Democratic", "telCode": ""},
                {"id": 120, "code" : "KR", "name" : "Korea, Republic", "telCode": "82", "telCode": ""},
                {"id": 121, "code" : "KW", "name" : "Kuwait", "telCode": ""},
                {"id": 122, "code" : "KG", "name" : "Kyrgyz Republic", "telCode": ""},
                {"id": 123, "code" : "LA", "name" : "Lao People's Democratic Republic", "telCode": ""},
                {"id": 124, "code" : "LV", "name" : "Latvia", "telCode": ""},
                {"id": 125, "code" : "LB", "name" : "Lebanon", "telCode": ""},
                {"id": 126, "code" : "LS", "name" : "Lesotho", "telCode": ""},
                {"id": 127, "code" : "LR", "name" : "Liberia", "telCode": ""},
                {"id": 128, "code" : "LY", "name" : "Libya", "telCode": ""},
                {"id": 129, "code" : "LI", "name" : "Liechtenstein", "telCode": ""},
                {"id": 130, "code" : "LT", "name" : "Lithuania", "telCode": ""},
                {"id": 131, "code" : "LU", "name" : "Luxembourg", "telCode": ""},
                {"id": 132, "code" : "MO", "name" : "Macao", "telCode": ""},
                {"id": 133, "code" : "MK", "name" : "Macedonia", "telCode": ""},
                {"id": 134, "code" : "MG", "name" : "Madagascar", "telCode": ""},
                {"id": 135, "code" : "MW", "name" : "Malawi", "telCode": ""},
                {"id": 136, "code" : "MY", "name" : "Malaysia", "telCode": ""},
                {"id": 137, "code" : "MV", "name" : "Maldives", "telCode": ""},
                {"id": 138, "code" : "ML", "name" : "Mali", "telCode": ""},
                {"id": 139, "code" : "MT", "name" : "Malta", "telCode": ""},
                {"id": 140, "code" : "MH", "name" : "Marshall Islands", "telCode": ""},
                {"id": 141, "code" : "MQ", "name" : "Martinique", "telCode": ""},
                {"id": 142, "code" : "MR", "name" : "Mauritania", "telCode": ""},
                {"id": 143, "code" : "MU", "name" : "Mauritius", "telCode": ""},
                {"id": 144, "code" : "YT", "name" : "Mayotte", "telCode": ""},
                {"id": 145, "code" : "MX", "name" : "Mexico", "telCode": ""},
                {"id": 146, "code" : "FM", "name" : "Micronesia", "telCode": ""},
                {"id": 147, "code" : "MD", "name" : "Moldova", "telCode": ""},
                {"id": 148, "code" : "MC", "name" : "Monaco", "telCode": ""},
                {"id": 149, "code" : "MN", "name" : "Mongolia", "telCode": ""},
                {"id": 150, "code" : "ME", "name" : "Montenegro", "telCode": ""},
                {"id": 151, "code" : "MS", "name" : "Montserrat", "telCode": ""},
                {"id": 152, "code" : "MA", "name" : "Morocco", "telCode": ""},
                {"id": 153, "code" : "MZ", "name" : "Mozambique", "telCode": ""},
                {"id": 154, "code" : "MM", "name" : "Myanmar", "telCode": ""},
                {"id": 155, "code" : "NA", "name" : "Namibia", "telCode": ""},
                {"id": 156, "code" : "NR", "name" : "Nauru", "telCode": ""},
                {"id": 157, "code" : "NP", "name" : "Nepal", "telCode": ""},
                {"id": 158, "code" : "NL", "name" : "Netherlands", "telCode": ""},
                {"id": 159, "code" : "NC", "name" : "New Caledonia", "telCode": ""},
                {"id": 160, "code" : "NZ", "name" : "New Zealand", "telCode": ""},
                {"id": 161, "code" : "NI", "name" : "Nicaragua", "telCode": ""},
                {"id": 162, "code" : "NE", "name" : "Niger", "telCode": ""},
                {"id": 163, "code" : "NG", "name" : "Nigeria", "telCode": ""},
                {"id": 164, "code" : "NU", "name" : "Niue", "telCode": ""},
                {"id": 165, "code" : "NF", "name" : "Norfolk Island", "telCode": ""},
                {"id": 166, "code" : "MP", "name" : "Northern Mariana Islands", "telCode": ""},
                {"id": 167, "code" : "NO", "name" : "Norway", "telCode": ""},
                {"id": 168, "code" : "OM", "name" : "Oman", "telCode": ""},
                {"id": 169, "code" : "PK", "name" : "Pakistan", "telCode": ""},
                {"id": 170, "code" : "PW", "name" : "Palau", "telCode": ""},
                {"id": 171, "code" : "PS", "name" : "Palestine", "telCode": ""},
                {"id": 172, "code" : "PA", "name" : "Panama", "telCode": ""},
                {"id": 173, "code" : "PG", "name" : "Papua New Guinea", "telCode": ""},
                {"id": 174, "code" : "PY", "name" : "Paraguay", "telCode": ""},
                {"id": 175, "code" : "PE", "name" : "Peru", "telCode": ""},
                {"id": 176, "code" : "PH", "name" : "Philippines", "telCode": ""},
                {"id": 177, "code" : "PN", "name" : "Pitcairn Islands", "telCode": ""},
                {"id": 178, "code" : "PL", "name" : "Poland", "telCode": ""},
                {"id": 179, "code" : "PT", "name" : "Portugal", "telCode": ""},
                {"id": 180, "code" : "PR", "name" : "Puerto Rico", "telCode": ""},
                {"id": 181, "code" : "QA", "name" : "Qatar", "telCode": ""},
                {"id": 182, "code" : "RE", "name" : "Runion", "telCode": ""},
                {"id": 183, "code" : "RO", "name" : "Romania", "telCode": ""},
                {"id": 184, "code" : "RU", "name" : "Russian Federation", "telCode": ""},
                {"id": 185, "code" : "RW", "name" : "Rwanda", "telCode": ""},
                {"id": 186, "code" : "BL", "name" : "Saint Barthlemy", "telCode": ""},
                {"id": 187, "code" : "SH", "name" : "Saint Helena, Ascension and Tristan da Cunha", "telCode": ""},
                {"id": 188, "code" : "KN", "name" : "Saint Kitts and Nevis", "telCode": ""},
                {"id": 189, "code" : "LC", "name" : "Saint Lucia", "telCode": ""},
                {"id": 190, "code" : "MF", "name" : "Saint Martin", "telCode": ""},
                {"id": 191, "code" : "PM", "name" : "Saint Pierre and Miquelon", "telCode": ""},
                {"id": 192, "code" : "VC", "name" : "Saint Vincent and the Grenadines", "telCode": ""},
                {"id": 193, "code" : "WS", "name" : "Samoa", "telCode": ""},
                {"id": 194, "code" : "SM", "name" : "San Marino", "telCode": ""},
                {"id": 195, "code" : "ST", "name" : "Sao Tome and Principe", "telCode": ""},
                {"id": 196, "code" : "SA", "name" : "Saudi Arabia", "telCode": ""},
                {"id": 197, "code" : "SN", "name" : "Senegal", "telCode": ""},
                {"id": 198, "code" : "RS", "name" : "Serbia", "telCode": ""},
                {"id": 199, "code" : "SC", "name" : "Seychelles", "telCode": ""},
                {"id": 200, "code" : "SL", "name" : "Sierra Leone", "telCode": ""},
                {"id": 201, "code" : "SG", "name" : "Singapore", "telCode": ""},
                {"id": 202, "code" : "SX", "name" : "Sint Maarten (Dutch part)", "telCode": ""},
                {"id": 203, "code" : "SK", "name" : "Slovakia (Slovak Republic)", "telCode": ""},
                {"id": 204, "code" : "SI", "name" : "Slovenia", "telCode": ""},
                {"id": 205, "code" : "SB", "name" : "Solomon Islands", "telCode": ""},
                {"id": 206, "code" : "SO", "name" : "Somalia", "telCode": ""},
                {"id": 207, "code" : "ZA", "name" : "South Africa", "telCode": ""},
                {"id": 208, "code" : "GS", "name" : "South Georgia and the South Sandwich Islands", "telCode": ""},
                {"id": 209, "code" : "SS", "name" : "South Sudan", "telCode": ""},
                {"id": 210, "code" : "ES", "name" : "Spain", "telCode": ""},
                {"id": 211, "code" : "LK", "name" : "Sri Lanka", "telCode": ""},
                {"id": 212, "code" : "SD", "name" : "Sudan", "telCode": ""},
                {"id": 213, "code" : "SR", "name" : "Suriname", "telCode": ""},
                {"id": 214, "code" : "SJ", "name" : "Svalbard & Jan Mayen Islands", "telCode": ""},
                {"id": 215, "code" : "SZ", "name" : "Swaziland", "telCode": ""},
                {"id": 216, "code" : "SE", "name" : "Sweden", "telCode": ""},
                {"id": 217, "code" : "CH", "name" : "Switzerland", "telCode": ""},
                {"id": 218, "code" : "SY", "name" : "Syrian Arab Republic", "telCode": ""},
                {"id": 219, "code" : "TW", "name" : "Taiwan", "telCode": ""},
                {"id": 220, "code" : "TJ", "name" : "Tajikistan", "telCode": ""},
                {"id": 221, "code" : "TZ", "name" : "Tanzania", "telCode": ""},
                {"id": 222, "code" : "TH", "name" : "Thailand", "telCode": ""},
                {"id": 223, "code" : "TL", "name" : "Timor-Leste", "telCode": ""},
                {"id": 224, "code" : "TG", "name" : "Togo", "telCode": ""},
                {"id": 225, "code" : "TK", "name" : "Tokelau", "telCode": ""},
                {"id": 226, "code" : "TO", "name" : "Tonga", "telCode": ""},
                {"id": 227, "code" : "TT", "name" : "Trinidad and Tobago", "telCode": ""},
                {"id": 228, "code" : "TN", "name" : "Tunisia", "telCode": ""},
                {"id": 229, "code" : "TR", "name" : "Turkey", "telCode": ""},
                {"id": 230, "code" : "TM", "name" : "Turkmenistan", "telCode": ""},
                {"id": 231, "code" : "TC", "name" : "Turks and Caicos Islands", "telCode": ""},
                {"id": 232, "code" : "TV", "name" : "Tuvalu", "telCode": ""},
                {"id": 233, "code" : "UG", "name" : "Uganda", "telCode": ""},
                {"id": 234, "code" : "UA", "name" : "Ukraine", "telCode": ""},
                {"id": 235, "code" : "AE", "name" : "United Arab Emirates", "telCode": ""},
                {"id": 236, "code" : "GB", "name" : "United Kingdom of Great Britain & Northern Ireland", "telCode": ""},
                {"id": 237, "code" : "UM", "name" : "United States Minor Outlying Islands", "telCode": ""},
                {"id": 238, "code" : "US", "name" : "United States of America", "telCode": ""},
                {"id": 239, "code" : "VI", "name" : "United States Virgin Islands", "telCode": ""},
                {"id": 240, "code" : "UY", "name" : "Uruguay", "telCode": ""},
                {"id": 241, "code" : "UZ", "name" : "Uzbekistan", "telCode": ""},
                {"id": 242, "code" : "VU", "name" : "Vanuatu", "telCode": ""},
                {"id": 243, "code" : "VE", "name" : "Venezuela", "telCode": ""},
                {"id": 244, "code" : "VN", "name" : "Vietnam", "telCode": ""},
                {"id": 245, "code" : "WF", "name" : "Wallis and Futuna", "telCode": ""},
                {"id": 246, "code" : "EH", "name" : "Western Sahara", "telCode": ""},
                {"id": 247, "code" : "YE", "name" : "Yemen", "telCode": ""},
                {"id": 248, "code" : "ZM", "name" : "Zambia", "telCode": ""},
                {"id": 249, "code" : "ZW", "name" : "Zimbabwe"}
            ];

            if(code){
                return data.filter(function(ele, idx){
                    return (code.toLowerCase() === ele.code.toLowerCase());
                });
            }else {
                return data;
            }
        }

        function getLocalKeyName(val){

            return localKeys[val];
        }

        function getSessionKeyName(val){

            return sessionKeys[val];
        }

        /**
         *
         * @returns {boolean} | null . when there is no session info = null,
         *          session has expired = true, session has NOT expired = false
         */
        function hasSessionExpired(){

            var status = false;

            if(_api.checkSessionInfo()){

                var la = _api.getMember('lastAction');
                if(la){

                    //check if it's within 6 hours since the last access
                    var _todayDatetime = moment();
                    la = moment(decryptStr(la));
                    var diff = _todayDatetime.diff(la, 'hours');
                    //if(false) console.log('now', _todayDatetime.format(), 'lastAction', la.format(), 'difference', diff);

                    if(diff >= 24*60 ){
                        //sign out;
                        status = true;
                    }

                }else {
                    //set lastaction if not defined
                    var time = encryptStr(moment().format());
                    _api.setMember('lastAction', time);
                }

            }else{
                status = null;
            }

            return status;

        }

        function setDefaultUserData(){

            playerInfo = { email: undefined, nickname: undefined, birthday: undefined, country: undefined}
            dbdata.user = {       //personal data
                highscore : 0,
                win : 0,
                lose : 0,
                draw : 0,
                lastAccess : null,
                notifications : null,
                prizes : null
            }
        }

        function getPOCErr(msg){
            var resObj = {};
            var _msg = msg.toLowerCase();
            switch(_msg){
                case "unknown":
                    resObj.returncode = errCode.UNKNOWN;
                    resObj.detail = errDetail.UNKNOWN;
                    resObj.userMessage = fn.LANG.MSG.ERR.UNKNOWN;
                    break;
                case "email is already used":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.EMAIL_IS_ALREADY_IN_USE;
                    resObj.userMessage = fn.LANG.MSG.ERR.EMAIL_IS_ALREADY_IN_USE;
                    break;
                case "email is wrong":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_ID_OR_PASSWORD;
                    resObj.userMessage = fn.LANG.MSG.ERR.WRONG_LOGIN;
                    break;
                case "unknown type":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_PARAMETER_VALUE;
                    resObj.userMessage = fn.LANG.MSG.ERR.WRONG_PARAMS_VALUE;
                    break;
                case "wrong user_no":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_PARAMETER_VALUE;
                    resObj.userMessage = fn.LANG.MSG.ERR.WRONG_PARAMS_VALUE;
                    break;
                case "unknown email":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.UNKNOWN_EMAIL;
                    resObj.userMessage = fn.LANG.MSG.ERR.UNKNOWN_USER;
                    break;
                case "unknown user_id":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_PARAMETER_VALUE;
                    resObj.userMessage = fn.LANG.MSG.ERR.UNKNOWN_USER;
                    break;
                case "wrong user_no or otp":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_USER_INFO_OR_OTP;
                    resObj.userMessage = fn.LANG.MSG.ERR.WRONG_USER_INFO_OR_OTP;
                    break;
                case "unknown user":
                    resObj.returncode = errCode.UNAUTHORIZED;
                    resObj.detail = errDetail.UNKNOWN_USER;
                    resObj.userMessage = fn.LANG.MSG.ERR.UNKNOWN_USER;
                    break;
                case "wrong password at signup":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_ID_OR_PASSWORD;
                    resObj.userMessage = fn.LANG.MSG.ERR.WRONG_LOGIN;
                    break;
                case "wrong code":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_PARAMETER_VALUE;
                    resObj.userMessage = fn.LANG.MSG.ERR.MISSING_PARAMS;
                    break;
                case "wrong access_token":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_PARAMETER_VALUE;
                    resObj.userMessage = fn.LANG.MSG.ERR.MISSING_PARAMS;
                    break;
                case "invalid phone number":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.INVALID_PHONE_NUMBER;
                    resObj.userMessage = fn.LANG.MSG.ERR.INVALID_PHONE_NUMBER;
                    break;
                case "invalid country code":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.INVALID_COUNTRY_CODE;
                    resObj.userMessage = fn.LANG.MSG.ERR.INVALID_COUNTRY_CODE;
                    break;
                case "wrong token":
                    resObj.returncode = errCode.UNAUTHORIZED;
                    resObj.detail = errDetail.SESSION_EXPIRED;
                    resObj.userMessage = fn.LANG.MSG.ERR.SESSION_EXPIRED;
                    break;
                case "wrong server":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_PARAMETER_VALUE;
                    resObj.userMessage = fn.LANG.MSG.ERR.MISSING_PARAMS;
                    break;
                case "too many signup with same ip":
                    resObj.returncode = errCode.TOO_MANY_REQUEST;
                    resObj.detail = errDetail.TOO_MANY_SIGN_UP_WITH_SAME_IP;
                    resObj.userMessage = fn.LANG.MSG.ERR.TOO_MANY_SIGN_UP_WITH_SAME_IP;
                    break;
                case "wrong current_password":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_CURRENT_PASSWORD;
                    resObj.userMessage = fn.LANG.MSG.ERR.WRONG_CURRENT_PWD;
                    break;
                case "wrong password":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_ID_OR_PASSWORD;
                    resObj.userMessage = fn.LANG.MSG.ERR.WRONG_LOGIN;
                    break;
                case "disabled account":
                    resObj.returncode = errCode.UNAUTHORIZED;
                    resObj.detail = errDetail.DISABLED_ACCOUNT;
                    resObj.userMessage = fn.LANG.MSG.ERR.DISABLED_ACCOUNT;
                    break;
                case "wrong shop item":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_SHOP_ITEM;
                    resObj.userMessage = fn.LANG.MSG.ERR.WRONG_SHOP_ITEM;
                    break;
                case "need agreement for pacoin":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.NEED_AGREEMENT_PACOIN;
                    resObj.userMessage = fn.LANG.MSG.ERR.NEED_AGREEMENT_PACOIN;
                    break;
                case "fail to update the user data":
                    resObj.returncode = errCode.UNKNOWN;
                    resObj.detail = errDetail.FAILED_TO_UPDATE_USER_DATA;
                    resObj.userMessage = fn.LANG.MSG.ERR.FAILED_TO_UPDATE_USER_DATA;
                    break;
                case "lack of poc":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.LACK_OF_POC;
                    resObj.userMessage = fn.LANG.MSG.ERR.LACK_OF_POC;
                    break;
                case "too big file":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.TOO_BIG_FILE;
                    resObj.userMessage = fn.LANG.MSG.ERR.TOO_BIG_FILE;
                    break;
                case "unknown user_item_no":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.UNKNOWN_USER_ITEM;
                    resObj.userMessage = fn.LANG.MSG.ERR.UNKNOWN_USER_ITEM;
                    break;
                case "wrong file extension":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_FILE_EXTENSION;
                    resObj.userMessage = fn.LANG.MSG.ERR.WRONG_FILE_EXTENSION;
                    break;
                case "unavailable user_item_no":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.UNAVAILABLE_USER_ITEM;
                    resObj.userMessage = fn.LANG.MSG.ERR.UNAVAILABLE_USER_ITEM;
                    break;
                case "error on loadAccount":
                    resObj.returncode = errCode.SERVER_ERROR;
                    resObj.detail = errDetail.SYSTEM_ERROR;
                    resObj.userMessage = fn.LANG.MSG.ERR.SYSTEM_ERROR;
                    break;
                case "error on submitTransaction":
                    resObj.returncode = errCode.SERVER_ERROR;
                    resObj.detail = errDetail.SYSTEM_ERROR;
                    resObj.userMessage = fn.LANG.MSG.ERR.SYSTEM_ERROR;
                    break;
                case "wrong verification code":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_VERIFICATION_CODE;
                    resObj.userMessage = fn.LANG.MSG.ERR.WRONG_VERIFICATION_CODE;
                    break;
                case "The verification code is invalid":    // the same with 'wrong verification code'
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_VERIFICATION_CODE;
                    resObj.userMessage = fn.LANG.MSG.ERR.WRONG_VERIFICATION_CODE;
                    break;
                case "lack of available poc":
                    resObj.returncode = errCode.BAD_REQUEST;
                    resObj.detail = errDetail.WRONG_PARAMETER_VALUE;
                    resObj.userMessage = fn.LANG.MSG.ERR.LACK_OF_AVAILABLE_POC;
                    break;
                case 'unknown id':
                    resObj.returncode = errCode.UNAUTHORIZED;
                    resObj.detail = errDetail.UNKNOWN_USER;
                    resObj.userMessage = fn.LANG.MSG.ERR.UNKNOWN_USER;
                    break;
                default:
                    if(_msg.indexOf('missing parameter') > -1){
                        resObj.returncode = errCode.BAD_REQUEST;
                        resObj.detail = errDetail.MISSING_PARAMETER;
                        resObj.userMessage = fn.LANG.MSG.ERR.MISSING_PARAMS;
                    }
                    //[2] lack of user point = 26
                    if(_msg.indexOf('lack of user point') > -1 ) {
                        resObj.returncode = errCode.BAD_REQUEST;
                        resObj.detail = errDetail.WRONG_PARAMETER_VALUE;
                        resObj.userMessage = fn.LANG.MSG.ERR.LACK_OF_USER_POINT;
                    }else if(_msg.indexOf('check your crypto currency balance') > -1){
                        resObj.returncode = errCode.BAD_REQUEST;
                        resObj.detail = errDetail.WRONG_PARAMETER_VALUE;
                        resObj.userMessage = fn.LANG.MSG.ERR.LACK_OF_THE_BALANCE;
                    }
                    if(_msg.indexOf('this phone number was already used to verify') > -1 ||
                        _msg.indexOf('phone is already used') > -1 ||
                        _msg.indexOf('phone number is already used') > -1 ){
                        resObj.returncode = errCode.BAD_REQUEST;
                        resObj.detail = errDetail.THIS_PHONE_NUMBER_IS_ALREADY_USED_TO_VERIFY;
                        resObj.userMessage = fn.LANG.MSG.ERR.THIS_PHONE_NUMBER_IS_ALREADY_USED_TO_VERIFY;
                    }
                    break;

            }

            return resObj;

        }

        /**
         *
         * @param code
         * @param msg String. message from server. can be null
         * @return {{returncode: *, detail: string}}
         */
        function parseErrCodeAndDetail(code, msg){

            // 200 :  
            //    
            // 400 :   .   ,       Not enough parameters, request data not parsed.
            // 401 :   ( )  Do not have session information.(Not signed in)
            // 402 :      Email authentication required.
            //    
            // 500 :     server system internal error.
            // 503 :  . Service unabailable.    ,   
            // 505 :     Unknown error.

            var resObj = {returncode : code, detail: msg, message: null, userMessage: null};

            if(code == -9){ // 'Please Check Your Crypto Currency Balance.'
                code = 9;   // remap
            }
            try
            {
                //Eddie
                if (code == -1 || code == -6) {

                    resObj.returncode = errCode.UNKNOWN;   //  
                    resObj.detail = errDetail.UNKNOWN;
                    resObj.userMessage = fn.LANG.MSG.ERR.UNKNOWN;

                    //from POC server (Song's)
                    if( code == -6 ){
                        resObj = getPOCErr(msg)
                    }

                }else if (code == -2 || code == -3) {

                    resObj.returncode = errCode.BAD_REQUEST;   //  ,    
                    if(code == -2){
                        resObj.detail = errDetail.MISSING_PARAMETER;
                        resObj.userMessage = fn.LANG.MSG.ERR.MISSING_PARAMS;
                    }else {
                        if (msg.toLowerCase() == 'please verify your email account.'){
                            resObj.detail = errDetail.VERIFIY_EMAIL_ACCOUNT;
                            resObj.userMessage = fn.LANG.MSG.ERR.VERIFIY_EMAIL_ACCOUNT;

                        }else {
                            resObj.detail = errDetail.WRONG_PARAMETER_VALUE;
                            resObj.userMessage = fn.LANG.MSG.ERR.WRONG_PARAMS_VALUE;
                        }
                    }

                }else if (code == -7 || code == -8 || code == -9 || code == -10 ){

                    resObj.returncode = errCode.SERVER_ERROR;   // 
                    if(code == -7){
                        resObj.detail = errDetail.CAN_NOT_GET_USER_POC;
                        resObj.userMessage = fn.LANG.MSG.ERR.SERVER_ERROR;
                    }else if(code == -8){
                        resObj.detail = errDetail.POC_SERVER_DID_NOT_RESPONSE;
                        resObj.userMessage = fn.LANG.MSG.ERR.SERVER_ERROR;
                    }else if(code == -9){
                        resObj.detail = errDetail.CAN_NOT_REGISTER_TO_BLOCKCHAIN;
                        resObj.userMessage = fn.LANG.MSG.ERR.SERVER_ERROR;
                    }else {
                        resObj.detail = errDetail.VERIFIY_EMAIL_ACCOUNT;
                        resObj.userMessage = fn.LANG.MSG.ERR.VERIFIY_EMAIL_ACCOUNT;
                    }

                    //Samuel
                }else if(code == 0 || code == 1 || code == 2 || code == 3 || code == 4 || code == 5 ||
                    code == 9 || code == 10 || code == 11 || code == 12 || code == 13 ||
                    code == 21 || code == 22 ){

                    resObj = getPOCErr(msg);

                }else {

                    //SDK own code
                    if(code == 99){
                        resObj.returncode = errCode.UNAUTHORIZED;
                        resObj.detail = errDetail.SESSION_EXPIRED;
                        resObj.userMessage = fn.LANG.MSG.ERR.SESSION_EXPIRED;

                    }else if(code == 200){
                        resObj.detail = errDetail.MODAL_CLOSED;
                        resObj.userMessage = fn.LANG.MSG.ERR.MODAL_CLOSED;
                        //server error
                    }else {

                        if (code == 500) {
                            resObj.detail = errDetail.SYSTEM_ERROR;
                        }else if (code == 502) {
                            resObj.detail = errDetail.BAD_GATEWAY;
                        }else if (code == 503) {
                            resObj.detail = errDetail.SERVICE_UNAVAILABLE;
                        }else {
                            resObj.detail = errDetail.UNKNOWN;
                        }

                        resObj.userMessage = fn.LANG.MSG.ERR.SERVER_ERROR;

                    }
                }

                if(resObj.returncode == errCode.UNAUTHORIZED){
                    _api.member.signOut();
                }

                resObj.message = (errMsg[resObj.returncode]) ? errMsg[resObj.returncode] : '';

                return resObj;
            }
            catch (ex)
            {
                return resObj;
            }

        }

        /**
         * Trigger errFunc that is from request call
         * @param code. string | number. error code from server
         * @param errFunc. function. 'onError' function from request call api
         * @param message. string. message to return
         */
        function returnErr(code, errFunc, message){

            var _c = parseErrCodeAndDetail(code, message),
                msg = (errMsg[_c.returncode]) ? errMsg[_c.returncode] : '';
            var detail = _c.detail;
            var userMsg = _c.userMessage;
            //if(customMessage) detail = customMessage;
            if(false) console.log('returnErr', _c, msg, userMsg, detail);
            if(errFunc) {
                errFunc({returncode: _c.returncode, message : msg, userMessage: userMsg, detail : detail});
            }

        }

        /**
         * return server errors
         *
         * @param onError function
         */
        function returnServerErr(onError){

            if(onError) onError({
                returncode : errCode.SERVER_ERROR,
                message : errMsg[errCode.SERVER_ERROR],
                detail : errDetail.SYSTEM_ERROR,
                userMessage : fn.LANG.MSG.ERR.SERVER_ERROR
            });
        }

        ////////////        ANDROID

        function nativeGetShop(){
            var hasSession = (checkSessionInfo(true) && _api.getMyInfo());

            if(game.gameNo && hasSession){

                var req = {
                    url :  gameApiUrl + gameAddCommon + 'n_getShop' + gameApiExt
                    ,data : {
                        'gameid' : game.gameId
                        ,'userid' : user.userId || user.uniqueId
                        ,'token' : user.token
                    }
                };
                return callapi(req);

            }else {

                if(!game.gameNo){}
                if(!user.userId){}
                if(!user.token){}

                //return unauthorized err
                this.then = function(success, err){
                    if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
                }
                return this;
            }
        }

        /**
         *
         * @param shopNo string. encrypted data. the data is encrypted from server. sdk doesn't need to encrypt it
         * @return {purchaseStart|*}
         */
        function purchaseStart(shopNo){
            var hasSession = (checkSessionInfo(true) && _api.getMyInfo());

            if(game.gameNo && hasSession){

                var req = {
                    url :  gameApiUrl + gameAddCommon + 'n_purchaseStart' + gameApiExt
                    ,data : {
                        'gameid' : game.gameId
                        ,'userid' : user.userId || user.uniqueId
                        ,'token' : user.token
                        ,'shopno' : shopNo
                    }
                };
                return callapi(req);

            }else {

                if(!game.gameNo){}
                if(!user.userId){}
                if(!user.token){}

                //return unauthorized err
                this.then = function(success, err){
                    if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
                }
                return this;
            }
        }

        /**
         *
         * @param shopLogNo string. encrypted data. the data is encrypted from server. sdk doesn't need to encrypt it
         * @param transactionId string. from 'purchaseStart' api
         * @param productId ... optional. from the native(Android) callback
         * @param purchaseToken ... optional. from the native(Android) callback
         * @param orderId ... optional. from the native(Android) callback
         * @param jsonData ... optional. from the native(Android) callback
         * @param signature ... optional. from the native(Android) callback
         * @return {purchaseComplete|*}
         */
        function purchaseComplete(shopLogNo, transactionId, productId, purchaseToken, orderId, jsonData, signature){
            var hasSession = (checkSessionInfo(true) && _api.getMyInfo());

            if(game.gameNo && hasSession){

                var req = {
                    url :  gameApiUrl + gameAddCommon + 'n_purchaseComplete' + gameApiExt
                    ,data : {
                        'gameid' : game.gameId
                        ,'userid' : user.userId || user.uniqueId
                        ,'token' : user.token
                        ,'shoplogno' : shopLogNo
                        ,'transactionid' : transactionId
                        // ,'productid' : productId
                        // ,'purchasetoken' : purchaseToken
                    }
                };

                if (productId) req.data.productid = productId;
                if (purchaseToken) req.data.purchasetoken = purchaseToken;
                if (orderId) req.data.orderid = orderId;
                if (jsonData) req.data.jsondata = JSON.stringify(jsonData);
                if (signature) req.data.signature = signature;
                return callapi(req);

            }else {

                if(!game.gameNo){}
                if(!user.userId){}
                if(!user.token){}

                //return unauthorized err
                this.then = function(success, err){
                    if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
                }
                return this;
            }
        }

        function updateAsset(mode, kind, amount){
            var hasSession = (checkSessionInfo(true) && _api.getMyInfo());

            if(game.gameNo && hasSession){

                var _assetMode = fn.UTIL.encrypt(mode);
                var _kind = fn.UTIL.encrypt(kind);
                var _amount = fn.UTIL.encrypt(amount);

                var req = {
                    url :  gameApiUrl + gameAddCommon + 'n_updateAssets' + gameApiExt
                    ,data : {
                        'gameid' : game.gameId
                        ,'userid' : user.userId || user.uniqueId
                        ,'token' : user.token
                        ,'assetmode' : _assetMode
                        ,'assetkind' : _kind
                        ,'amounts' : _amount
                    }
                };
                return callapi(req);

            }else {

                if(!game.gameNo){}
                if(!user.userId){}
                if(!user.token){}

                //return unauthorized err
                this.then = function(success, err){
                    if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
                }
                return this;
            }
        }

        function setPushId(pushToken){
            var hasSession = (checkSessionInfo(true) && _api.getMyInfo());

            if(game.gameNo && hasSession){

                var _pushToken = pushToken;

                var req = {
                    url :  gameApiUrl + gameAddCommon + 'n_setPushId' + gameApiExt
                    ,data : {
                        'gameid' : game.gameId
                        ,'userid' : user.userId || user.uniqueId
                        ,'token' : user.token
                        ,'pushtoken' : _pushToken
                    }
                };
                return callapi(req);

            }else {

                if(!game.gameNo){}
                if(!user.userId){}
                if(!user.token){}

                //return unauthorized err
                this.then = function(success, err){
                    if (success) success({returncode :_api.setCode.CUSTOM_UNAUTHORIZED});
                }
                return this;
            }
        }

        function getCurrentTime(){
            var req = {
                url :  gameApiUrl + gameAddCommon + 'n_getCurrentTime' + gameApiExt
                // ,data : {}
            };
            return callapi(req);
        }

        function appSaveData(key, val){
            if(false) console.log('appSaveData key', key, typeof val, val);
            (_api.isIos()) ? Ios.saveData(key, val) : Android.saveData(key, val);
        }

        function appGetData(key){
            var val = (_api.isIos()) ? Ios.getData(key, '') : Android.getData(key, '');
            return (val === '') ? null : val;
        }

        ///////////     END OF ANDROID

        /**
         *
         * This api is for internal. so it returns value that returned by server as it is
         * @param userid
         * @param token
         * @param callback
         */
        function onSignInComplete(userid, token, callback){

            isSignInProgressing = true;

            //success
            _api.setMember('userId', userid);
            _api.setMember('token', token);
            if(_api.isAndroid() || _api.isIos()) {
                _api.android.saveData('uniqueId', '');
                _api.android.saveData('image', '');
                _api.android.saveData('nickname', '');
                _api.android.saveData('rewardExp', '');
            }
            var _uid = userid;

            var now = moment().format();
            // _api.pa.getUserData().then(function(res1){
            //
            //     var _res1 = res1;
            //
            //     if(_res1.returncode == 100){

                    // _api.setMyActivity(_res1.savedata);
                    // _api.game.setUserData({lastAccess : now}).then(function(res){
                    //
                    //     var res = res;
                    //     if(res.returncode == 100){


                    fn.GETMYACCOUNT(function(res){
                        if(res.returncode != callCode.SUCCESS){
                            _api.returnErr(res.returncode, callback);
                        }else {
                            var _gameUserInfo = res.userinfo;
                            fn.resolve([
                                _api.member.getMyInfo()
                            ], function(userInfo){

                                isSignInProgressing = false;
                                //btnLoaingFinished();

                                var userObj
                                    ,resdata = userInfo
                                    ,hasErr = false, _errCode = userInfo.returncode;

                                if(resdata.returncode == callCode.SUCCESS){
                                    w.hcaptcha = undefined;
                                    resdata.message.isAnonymous = false;

                                    _api.setMyInfo(resdata.message);
                                    _api.setMyInfo(_gameUserInfo);
                                    _api.setMyInfo({'id': _uid});
                                    userObj = _api.getMyInfo();

                                    // _api.langCodeForSignUp is defined when user sign up
                                    var lanCode = (_api.langCodeForSignUp) ? _api.langCodeForSignUp : userObj.languageCode;
                                    // var lanCode = userObj.languageCode;

                                    fn.LANG.setLang(lanCode);

                                    // //doesn't need to return success/error message
                                    // //can be loaded later
                                    // fn.PLAYER.GETMESSAGE()

                                }else {
                                    hasErr = true;
                                    _errCode = resdata.returncode;
                                }

                                if(hasErr){
                                    if(false) console.log('onSignInComplete : hasError')
                                    _api.returnErr(_errCode, callback);

                                }else {
                                    //return player data
                                    var fres = {
                                        returncode : callCode.SUCCESS,
                                        user : userObj
                                    };
                                    if(false) console.log('onSignInComplete :', fres);
                                    if(callback) callback(fres);
                                }
                            })
                        }
                    });


                    //     }else {
                    //         _api.returnErr(res.returncode, onError);
                    //     }
                    //
                    // }, function(err){
                    //     //server error
                    //     if(false) console.log('err', err);
                    //
                    //     //btnLoaingFinished();
                    //     isSignInProgressing = false;
                    //
                    //     if(onError) _api.returnServerErr(onError);
                    // })
            //     }else {
            //         if(false) console.log('err', _res1);
            //         //btnLoaingFinished();
            //         isSignInProgressing = false;
            //         _api.returnErr(_res1.returncode, onError, _res1.message);
            //     }
            // }, function(err){
            //     //server error
            //     if(false) console.log('err', err);
            //     isSignInProgressing = false;
            //     _api.returnServerErr(onError);
            // });
        }

        /**
         * redirect to web SDK
         * @param score
         */
        function reportScoreToPA(matchno, score){

            var _url = siteUrl+'/service/sdk/Game/match_result';
            // gameid : 2Ed5noTH
            // userid : udOhzBFmMclw
            // matchno : 149
            // gamescore : (   .)
            // token : GVodcNSztuasXjWJCDry
            var _param = '?gameid='+game.gameId+
                '&userid='+(user.userId || user.uniqueId)+
                '&matchno='+matchno+
                '&gamescore='+score+
                '&token='+user.token;

            // var _id = 'i1';
            // var eleStr = '<a href="'+(_url+_param)+'" target="_self" id="'+_id+'" ' +
            //     'style="width:1px;height:1px;position:absolute; top:0px; left:0px; font-size: 0px; background-color: transparent;">&nbsp;</a>';
            // jQuery(eleStr).appendTo(jQuery('body'));
            //
            // if(false) console.log('url', url);
            // setTimeout(function(){
            //     document.getElementById(_id).click();
            //     //document.getElementById(_id).submit();
            //     jQuery('#'+_id).remove();
            // }, 300);
            w.location.href=_url+_param;
        }

        /////////////////////////////////////////        ETC

         // This is for 'parseErrCodeAndDetail' and 'returnErr' function
         // Sometimes, SDK manually needs to return error object.
         // For that, SDK needs server code to return proper error message using those functions.
         var setCode = {
             WRONG_PARAM : -3,
             MISSING_PARAM : -2,
             CUSTOM_UNAUTHORIZED : 99
         };

        //////////////////////////////////////          PUBLIC

        //      ;
        //   .
        fn[moduleName] = _api = { //api map
            getVer : function() { return ver; }
            ,setVer : function(val) { ver = val; }
            ,setGameVer : function(val) { gameVer = val; }
            ,getErrCode : function () { return errCode; }
            ,getErrMessage : function () { return errMsg; }
            ,getErrDetail : function() { return errDetail; }
            ,getEnvDomain : function(){ return envDomain }
            ,setEnv : function(val) {
                setEnvVar();
            }
            ,encrypt: function (val) {  //  api      
                //encryption : Aes.Ctr.encrypt(f.test.value,'mbizglobal',256);
                return Aes.Ctr.encrypt(val+'', aesPwd, 256);
            }
            ,decrypt: function (val) {
                //decryption : Aes.Ctr.decrypt(f.test1.value,'mbizglobal',256);
                return Aes.Ctr.decrypt(val, aesPwd, 256);
            }
            ,getDomain: function (name) {
                switch(name){
                    case 'sdk.pocketarena':
                        return siteUrl;
                        break;
                    case 'pocketarena': // web
                        return siteUrl2;
                    case 'coin':
                        return coinUrl;
                        break;
                    default:
                        return false;
                        break;
                }
            }
            ,setGameNo : function(val){
                if(false) console.log('setgameno', val)
                game.gameNo = val; }
            ,getGameNo : function(){ return game.gameNo; }
            ,setGameId : function(val){ game.gameId = val; }
            ,getGameId : function(){ return game.gameId; }
            ,getGuestInfo: function() {
                var varName = getSessionKeyName('info');
                var res = w.localStorage.getItem(varName);
                return (res) ? JSON.parse(res) : res;
            }
            ,setGuestInfo: function(val) {  // val = object
                var varName = getSessionKeyName('info');
                w.localStorage.setItem(varName, JSON.stringify(val));
            }
            ,getGuestToken: function() { return w.localStorage.getItem(getSessionKeyName('token')) }
            ,setGuestToken: function(val) {
                user.token = val;
                var varName = getSessionKeyName('token');
                w.localStorage.setItem(varName, user.token);
            }
            ,setFirstGuest: function(val) { isFirstGuest = val; }
            ,getFirstGuest: function() { return isFirstGuest; }
            ,setMember : function(name, val){
                // todo : android
                user[name] = val;
                // uniqueId is id for guest
                // userId is id for signed in user
                if(name === 'userId' || name == 'token' || name == 'lastAction' || name == 'uniqueId'){
                    if(name == 'uniqueId'){
                        var varName = getSessionKeyName(name);
                        w.localStorage.setItem(varName, val);

                        //remove signed in user data
                        _api.removeMember();

                    }else {

                        if(name == 'image' || name == 'countryCode' || name == 'rewardExp') {
                            if(_api.isAndroid() || _api.isIos()) _api.android.saveData(varName, val);
                        }

                        if (name == 'token') {
                            var varName = getLocalKeyName(name);
                            var tstr = w.localStorage.getItem(varName);
                            var tobj;
                            if (tstr) {
                                try {
                                    tobj = JSON.parse(tstr);
                                }catch(err) {
                                    //cases : just token, without object. very first version
                                    tobj = {}
                                }
                            } else {
                                tobj = {};
                            }
                            tobj[game.gameId] = val;
                            w.localStorage.setItem(varName, JSON.stringify(tobj));

                        } else {
                            var varName = getLocalKeyName(name);
                            w.localStorage.setItem(varName, val);

                        }
                        //remove non-signed in user data
                        // w.sessionStorage.clear()
                        for(var i in sessionKeys){
                            var _skey = i;
                            w.localStorage.removeItem(getSessionKeyName(_skey));
                        }

                    }
                }
            }
            ,getMember : function(name){
                var res = (name) ? user[name] : user;
                if((name === 'userId' || name === 'token' || name == 'lastAction' || name == 'uniqueId') && !res){
                    //check localStorage
                    if(name == 'uniqueId'){
                        var varName = getSessionKeyName(name);
                        res = w.localStorage.getItem(varName);
                    }else if(name == 'token'){
                        var varName = getLocalKeyName(name);
                        var tstr = w.localStorage.getItem(varName);
                        if (!tstr) return res;
                        var tobj = null
                        try {
                            tobj = JSON.parse(tstr);
                            for(var key in tobj){
                                if(key == game.gameId){
                                    res = tobj[key];
                                    break;
                                }
                            }
                        }catch(err) {
                            //cases : just token, without object. very first version
                            res = tstr
                        }
                    }else{
                        var varName = getLocalKeyName(name);
                        res = w.localStorage.getItem(varName);
                    }
                }
                return res;
            }
            ,removeMember: function(leaveToken){
                delete w.localStorage.removeItem(getLocalKeyName('gameId'));
                delete w.localStorage.removeItem(getLocalKeyName('userId'));
                delete w.localStorage.removeItem(getLocalKeyName('lastAction'));
                // delete w.localStorage.removeItem(getLocalKeyName('languageCode'));
                delete w.localStorage.removeItem(getLocalKeyName('countryCode'));
                if(_api.isAndroid() || _api.isIos()) {
                    _api.android.saveData(getLocalKeyName('gameId'), '');
                    _api.android.saveData(getLocalKeyName('userId'), '');
                    _api.android.saveData(getLocalKeyName('lastAction'), '');
                }

                if(leaveToken) return;
                // token
                var varName = getLocalKeyName('token');
                var tstr = w.localStorage.getItem(varName);
                if(_api.isAndroid() || _api.isIos()) tstr = _api.android.getData(varName);
                var tobj;
                if (tstr) {
                    try {
                        tobj = JSON.parse(tstr);
                    }catch(err) {
                        //cases : just token, without object. very first version
                        tobj = {}
                    }
                } else {
                    tobj = {};
                }
                if(tobj.hasOwnProperty(game.gameId)) delete tobj[game.gameId];
                w.localStorage.setItem(varName, JSON.stringify(tobj));
                if(_api.isAndroid() || _api.isIos()) _api.android.saveData(varName, JSON.stringify(tobj));
            }
            ,setMyInfoUsingGuestInfo: function(obj){
                playerInfo = obj;
            }
            /**
             * Set user's detail info.
             * @param dataObj
             */
            ,setMyInfo : function (dataObj) {
                if(!playerInfo){
                    playerInfo = {};
                    playerInfo.languageCode = 'EN';  //default
                    playerInfo.rubyamount = 0;
                    playerInfo.pointamount = 0;
                }

                if(dataObj.email) playerInfo.email = dataObj.email;
                if(dataObj.nickname) {
                    playerInfo.nickname = dataObj.nickname;
                }else {
                    //When user is signed in only
                    if (dataObj.email) {
                        playerInfo.nickname = dataObj.email.split('@')[0];
                    }
                }
                if(dataObj.image || dataObj.IMAGE) {
                    playerInfo.photo = (dataObj.image || dataObj.IMAGE);
                    if(playerInfo.isAnonymous){
                        w.localStorage.setItem(getSessionKeyName('photo'), playerInfo.photo);
                    }
                }
                if(dataObj.country_code) {
                    playerInfo.countryCode = dataObj.country_code;
                    playerInfo.country = (this.getCountries(dataObj.country_code)[0]) ? this.getCountries(dataObj.country_code)[0].name : '';
                    w.localStorage.setItem('_cc', playerInfo.countryCode);
                    if(_api.isAndroid() || _api.isIos()) _api.android.saveData('_cc', playerInfo.countryCode);
                }
                //var countryArr = _api.getCountries(playerInfo.countryCode)
                //playerInfo.country = (countryArr.length > 0) ? countryArr[0].name : '-';
                if(dataObj.level || dataObj.level == 0) playerInfo.level = dataObj.level;
                if(dataObj.id_type) playerInfo.idType = dataObj.id_type;
                // will use 'user_id' from 'signin' API, not from 'view' API
                if(dataObj.id) {
                    if(playerInfo.idType == 'phone'){
                        playerInfo.id = dataObj.id;  //phone number '1:1234567890' = country code:number
                        var idArr = playerInfo.id.split(':');
                        playerInfo.formattedId = '+'+idArr[0]+' '+idArr[1];
                    }else {
                        playerInfo.id = dataObj.id;
                    }
                }
                if(dataObj.reward_exp) playerInfo.rewardExp = dataObj.reward_exp;
                if(dataObj.status_pacoin) playerInfo.isVerified = (dataObj.status_pacoin == 'enabled');
                if(dataObj.isAnonymous) playerInfo.isAnonymous = dataObj.isAnonymous;
                if(dataObj.isAnonymous == false) delete playerInfo.isAnonymous;
                if(dataObj.lang >= 0) {
                    switch(dataObj.lang){
                        case 0:
                            playerInfo.languageCode = 'EN';
                            break;
                        case 1:
                            playerInfo.languageCode = 'KR';
                            break;
                        case 2:
                            playerInfo.languageCode = 'DE';
                            break;
                        default:
                            playerInfo.languageCode = 'EN';
                            break;
                    }
                    w.localStorage.setItem('_lc', playerInfo.languageCode);
                    if(_api.isAndroid() || _api.isIos()) _api.android.saveData('_lc', playerInfo.languageCode);
                }
                if(typeof dataObj.exer_draws != 'undefined') playerInfo.exer_draws = Number(dataObj.exer_draws);
                if(typeof dataObj.exer_losts != 'undefined') playerInfo.exer_losts = Number(dataObj.exer_losts);
                if(typeof dataObj.exer_wins != 'undefined') playerInfo.exer_wins = Number(dataObj.exer_wins);
                if(typeof dataObj.match_draws != 'undefined') playerInfo.match_draws = Number(dataObj.match_draws);
                if(typeof dataObj.match_losts != 'undefined') playerInfo.match_losts = Number(dataObj.match_losts);
                if(typeof dataObj.match_wins != 'undefined') playerInfo.match_wins = Number(dataObj.match_wins);
                if(typeof dataObj.pointamount != 'undefined') playerInfo.pointamount = Number(dataObj.pointamount);
                if(typeof dataObj.rubyamount != 'undefined') playerInfo.rubyamount = Number(dataObj.rubyamount);
                if(typeof dataObj.fbtc != 'undefined') playerInfo.fbtc = Number(dataObj.fbtc);
                if(typeof dataObj.feth != 'undefined') playerInfo.feth = Number(dataObj.feth);
                if(typeof dataObj.fpoc != 'undefined') playerInfo.fpoc = Number(dataObj.fpoc);
                if(typeof dataObj.fusdt != 'undefined') playerInfo.fusdt = Number(dataObj.fusdt);

                // for android only
                if (_api.isAndroid()){
                    if (!playerInfo.isAnonymous) {
                        playerInfo.id = user.userId;
                    }else {
                        playerInfo.id = null;
                    }
                }
            }
            // used in FB PA SDK. the same as above, but different way to set
            // ,setPlayerInfo : function(val, key) {
            //     if(!key){ // save the whole
            //         playerInfo = val;
            //     }else {
            //         playerInfo[key] = val;
            //     }
            // }
            ,getMyInfo : function () { return playerInfo; }
            ,delMyInfo : function () { playerInfo = {rewardExp: 0, isAnonymous : true } }
            ,getMyActivity : function(){ return dbdata.user; }
            ,setMyActivity : function (dataObj) {
                for(var key in dataObj){
                    if(dataObj[key]) dbdata.user[key] = dataObj[key];
                }
            }
            ,getMyBalance : function(){ return playerPocBalance; }
            ,setMyBalance : function (val) { playerPocBalance = parseInt(val); }
            ,setUIisReady: function(val) { isUIReady = val }
            ,getUIisReady: function() { return isUIReady }
            ,getCallCode: function(){ return callCode }
            ,checkSessionInfo : checkSessionInfo
            ,getLocalKeyName : getLocalKeyName
            ,setDefaultUserData : setDefaultUserData
            ,parseErrCodeAndDetail : parseErrCodeAndDetail
            ,returnErr : returnErr
            ,returnServerErr : returnServerErr
            ,onSignInComplete : onSignInComplete
            ,getSnsClient: function(){ return snsClient }
            ,setOrientation: function (val) {
                if (val == 'landscape'){
                    orientation = 'l';
                }else {
                    orientation = 'p';
                }
            }
            ,getOrientation: function(){ return orientation }
            ,isAndroid: isAndroid
            ,isIos: isIos
            ,getTutorial: function(){
                return tutorial;
            }
            ,setTutorial: function(val, saveToFBDB, callback){
                if(val){
                    tutorial = val;
                    if(saveToFBDB){
                        // todo : save user's status
                        _api.pa.setUserDataSDK({_sdk_tutorial:tutorial}, function(res){
                            if(res.returncode == callCode.SUCCESS){
                                if(callback) callback();
                            }else {
                                if(callback) callback(res);
                            }
                        })
                        // fn.IGAPI.PLAYER.SETCUSTOMSAVEDATA({_sdk_tutorial:tutorial}, function () {
                        //     if(callback) callback();
                        // }, function (err) {
                        //     if(callback) callback(err);
                        // });
                    }
                }
            }
            ,getTodayHighscore: function(){ return todayHighscore; }
            ,setTodayHighscore: function(val, saveToFBDB){ // val = obj
                if(val){
                    todayHighscore = val;
                    if(saveToFBDB){
                        // todo : maybe needs to change function
                        // fn.IGAPI.PLAYER.SETCUSTOMSAVEDATA({_sdk_today_highscore:todayHighscore});
                    }
                }
            }
            ,getImgPath: function () { return imgPath; }
            // ,updateTodayHighscore: updateTodayHighscore
            // ,sendUpdate: sendUpdate
            // ,setFBLB: setFBLB
            ,setSlotInfo : function(obj){ slotInfo = obj; }
            ,getSlotInfo : function(){ return slotInfo; }
            ,setInitialInfo : function(val){ initInfo = val; }
            ,getInitialInfo : function(){ return initInfo; }
            ,getLBName : function(){ return globalLBName; }
            ,setLBName : function(val){ globalLBName = val; }
            ,getLB : function(){ return globalLB; }
            ,setLB : function(val){ globalLB = val; }
            ,getPromotionApps: function(){ return promo; }
            ,getPromotionPosition: function(){
                if(promoPos2){
                    return promoPos2
                }else {
                    return promoPos;
                }
            }
            ,setPromotionPosition: function(val){ if(val) promoPos = val; }
            ,setPromotionPosition2: function(val){ if(val) promoPos2 = val; }
            // ,initPromotionBtn: initPromotionBtn
            // ,isPromotionSupport: isPromotionSupport
            ,setPromoInfo: function(val){ promoGameInfo = val }

            ,getUseLeaderboard: function(){ return useLeaderboard }
            ,setUseLeaderboard: function(val){ useLeaderboard = val }
            ,getWrapperId : function() { return wrapperId; }
            // '#' is included
            ,setWrapperId : function(id) { wrapperId = id; }
            ,setCode: setCode
            ,getCountries: getCountries
            ,reportScoreToPA: reportScoreToPA
            ,createGuest: createGuest
            ,replacePhotoPath : replacePhotoPath
            ,setEmojiImg: setEmojiImg
            ,getEmojiImgPath: function(){ return emojiImgs.path; }
            ,hasEmojiImg: function(idx1, idx2){ return emojiImgs.names[idx1][idx2]; }
            ,getEmojiCateLength: function(){ return emojiImgs.names.length; }    // 0 = category; ex) 1-3, 1 = emojis; ex) 1-9
            ,getEmojiCateImgLength: function(idx){ return (emojiImgs.names[idx] && emojiImgs.names[idx].length); }    // 0 = category; ex) 1-3, 1 = emojis; ex) 1-9
            ,game : {
                //local
                getGameId: function () {return game.gameId;}
                ,getPlayerInfo: gameGetMyInfo
                ,getGameInfo : getGameInfo
            }
            ,member : { // Samuel's
                signUp : signUp
                ,signIn : signIn
                ,signInRandom : signInRandom
                ,oauth : oauth
                ,signInUpSns : signInUpSns
                ,signOut : signOut
                ,forgotPwd : forgotPwd
                ,getMyInfo : getMyInfo
                ,setMyInfo : setMyInfo
                ,payRefundFee : payRefundFee
                ,payReward : payReward
                ,hasSessionExpired : hasSessionExpired
            }
            ,pa : { // Eddie's
                getMatchRoom : getMatchRoom
                ,startMatch : startMatch
                ,finishMatch : finishMatch
                ,getMatchHistory : getMatchHistory
                ,getShop : getShop

                ,startPurchase : startPurchase 
                ,finishPurchase : finishPurchase
                ,setFreeReward : setFreeReward
                ,startAds : startAds
                ,finishAds : finishAds

                ,getLeaderboard : getLeaderboard
                ,getRandom : getRandom
                ,getMyAccount : getMyAccount
                ,getMatchData : getMatchData
                ,getDailyReward : getDailyReward
                ,setDailyReward : setDailyReward
                ,useBalance : useBalance
                ,updatePoint : updatePoint
                ,updateXP : updateXP

                ,getUserData: getUserData
                ,setUserData: setUserData
                ,setUserDataSDK: setUserDataSDK
                ,getUserDataSDK: getUserDataSDK
                ,getHistory: getHistory

                ,getEmojiList: getEmojiList
                ,hCaptcha: hCaptcha

                // castle
                ,getMain : getMain
                ,getProfile : getProfile
                ,getMatchList : getMatchList
                ,getMatchHistory2 : getMatchHistory2
                ,giveRuby : giveRuby
                ,castleList : castleList
                ,sendResult : sendResult
                ,updateMatch : updateMatch
                ,upgradeCastleArena : upgradeCastleArena
                ,castleDetail : castleDetail
                ,itemInfo : itemInfo
                ,requestRent : requestRent
                ,cancelRent : cancelRent
                ,requestExt : requestExt
                ,getPopup : getPopup
                ,findCastle : findCastle
                ,getRandom2 : getRandom2
                // arena
                ,getMyLandList : getMyLandList
                ,getMyLandHistory : getMyLandHistory
                ,getMyLandDetail : getMyLandDetail
                ,getMyDefendList : getMyDefendList
                ,getMyAttackList : getMyAttackList
                ,checkAttackCond : checkAttackCond
                ,createAttack : createAttack
                ,checkDefendCond : checkDefendCond
                ,startDefend : startDefend
                ,finishDefend : finishDefend
                ,cStartMatch : cStartMatch  // for stage
                ,sendResultStage : sendResultStage //
                ,cancelRentArena : cancelRentArena
                ,getMyLandResult : getMyLandResult
                ,getTodayBattles : getTodayBattles
                ,getStrategy : getStrategy
                ,saveStrategy : saveStrategy
                ,updateStrategy : updateStrategy
                ,delStrategy : delStrategy
                ,updateFlag : updateFlag
                ,getMainArena : getMainArena
                ,getCastleArena : getCastleArena
                ,getArenaHistory : getArenaHistory
                ,cGetLandListM : cGetLandListM
                ,ncGetLandListM : ncGetLandListM
                ,getLandDetail : getLandDetail
                ,requestExtArena : requestExtArena
                ,requestRentArena : requestRentArena
                ,getMyTodayBattles : getMyTodayBattles
                ,getPublicPool : getPublicPool
                ,getProfileArena : getProfileArena
                ,contractRequest : contractRequest
                ,updateSetArena : updateSetArena
                ,sendResultDaily : sendResultDaily
                ,itemInfoArena : itemInfoArena
                ,purchaseItem : purchaseItem
                ,acceptRent : acceptRent
                ,getMessagesArena : getMessagesArena
                ,updateMessageArena : updateMessageArena
                ,updateAgree : updateAgree
                ,sendResultNoCastle : sendResultNoCastle
                ,getAllLandList : getAllLandList
                ,getAllLandList2D : getAllLandList2D
                ,cGetLandListM2D : cGetLandListM2D
                ,ncGetAllLandList : ncGetAllLandList
                ,ncGetAllLandList2D : ncGetAllLandList2D
                ,ncGetLandListM2D : ncGetLandListM2D
                // owner view
                ,ccmGetMainArena : ccmGetMainArena
                ,ccmGetCastleArena : ccmGetCastleArena
                ,ccmGetMyLandList : ccmGetMyLandList
                ,ccmGetDefendList : ccmGetDefendList
                ,ccmGetAttackList : ccmGetAttackList
                ,ccmGetLandDetail : ccmGetLandDetail

                // land
                ,getLandListM : getLandListM
                ,getLandStatus : getLandStatus
                ,chooseLand : chooseLand
                ,getLandStatus2 : getLandStatus2
                ,getMainCM : getMainCM  // castle market's main
                ,getLandListM2D : getLandListM2D
                ,getLandListM3D : getLandListM3D
                ,getLandFlag2D : getLandFlag2D
                ,findCastleArena : findCastleArena
            },
            service: {
                landing : landing
            },
            android : {
                getShop: nativeGetShop
                ,purchaseStart : purchaseStart
                ,purchaseComplete : purchaseComplete
                ,updateAsset : updateAsset
                ,setPushId : setPushId
                ,getCurrentTime: getCurrentTime
                ,saveData: appSaveData
                ,getData: appGetData
            }
        };

        fn.UTIL.setAPIMessages();

    }).call(PASDKe20);

})(window);
/**
 * Created by Spike on 2019-12-03.
 * Native app (android) iap and ad logic
 *
 */
(function(w){

    (function(){
        //this = loader itself
        var fn = this.fn;    //instance
        var self = this;
        var moduleName = 'APP';
        var _api = fn.API;
        if(false) console.log('module', moduleName)

        //////////////////////////////////////          PRIVATE

        var errCode = _api.getErrCode();

        var errMsg = _api.getErrMessage();

        var errDetail = _api.getErrDetail();

        var envDomain = _api.getEnvDomain();

        // belows are used for purchase/ad
        var shopLogNo,
            transactionId;

        ///////////////////////         FUNCTIONS


        //////////////////////////////////////          PUBLIC

        function getShop(onComplete, onError){

            fn.resolve([_api.android.getShop()], function (res) {

                if(false) console.log('resolve result', res);

                if(res.returncode == 100){

                    var _res = {
                        myamount : res.myamount,
                        shop : res.shop
                    }
                    if(onComplete) onComplete(_res);

                }else if(res.returncode){
                    //-1: //SYSTEM ERROR.
                    //-2: //{{Parameter}}  is required
                    //-3: //Please Check Your Game ID.
                    //      Please Check User Informations.
                    //      Please Check Your Shop Number.
                    //-6: //message from POC server
                    //-7: //Can not Get User POC
                    //-8: //POC server did not response
                    if(onError) _api.returnErr(res.returncode, onError, res.message);

                }else {
                    //server error
                    if(onError) _api.returnServerErr(onError);

                }
            })
        }

        /**
         *
         * @param shopNo
         * @param productId
         * @param onComplete
         * @param onError
         */
        function purchase(shopNo, productId, onComplete, onError){

            var _shopNo = shopNo, _productId = productId;
            fn.resolve([_api.android.purchaseStart(_shopNo)], function (res) {

                if(res.returncode == 100 ){

                    shopLogNo = res.shoplogno;
                    transactionId = res.transactionid;

                    Android.getSKUlist(_productId);

                    // 'purchaseResult' will be called from app
                    // set callback
                    w.purchaseResult = function (code, data, signature) {
                        if(false) console.log('purchaseResult begins', code, data, signature);
                        // Refer to official doc : https://developer.android.com/google/play/billing/billing_reference
                        // code = 0 is for success

                        if (code == 0){

                            // test
                            // var dummy = {
                            //     "orderId":"GPA.3328-5490-6085-26533",
                            //     "packageName":"com.pocket.arena.tests",
                            //     "productId":"castle.ruby.200",
                            //     "purchaseTime":1574749927680,
                            //     "purchaseState":0,
                            //     "purchaseToken":"bacbgdinlnpaedjgmhjdokao.AO-J1Owp_Qrh2xZJBWpH6SWkiU0jXn1rmafcCc3yUg_ddSb7gAFlp2ao-Zp-Hq_IR61-QDLqGFZSRQi47uwbm-ZQqFG8XadS0DCweGTqCJG79fiPpVhOpebSt_7OLUQNjd112uqcJpxh"
                            //     "signature":"..."
                            // };
                            // var data = dummy;

                            var pId = data.productId,
                                pToken = data.purchaseToken,
                                pOrderId = data.orderId,
                                pJsonData = data,
                                pSignature = signature;

                            fn.resolve([_api.android.purchaseComplete(shopLogNo, transactionId, pId, pToken, pOrderId, pJsonData, pSignature)], function (res2) {
                                if(res.returncode == 100 ){
                                    if (onComplete) onComplete();
                                }else if(res.returncode){
                                    //-1: //SYSTEM ERROR.
                                    //-2: //{{Parameter}}  is required
                                    //-3: //Please Check Your Game ID.
                                    //      Please Check User Informations.
                                    //      Please Check Your Shop Number.
                                    //-7: //Can not Get User POC
                                    //-8: //POC server did not response

                                    if(onError) _api.returnErr(res.returncode, onError, res.message);

                                }else {
                                    //server error
                                    if(onError) _api.returnServerErr(onError);

                                }
                            })

                        }else {
                            //server error
                            if(onError) _api.returnServerErr(onError);
                        }
                    }

                }else if(res.returncode){
                    //-1: //SYSTEM ERROR.
                    //-2: //{{Parameter}}  is required
                    //-3: //Please Check Your Game ID.
                    //      Please Check User Informations.
                    //      Please Check Your Shop Number.
                    //-7: //Can not Get User POC
                    //-8: //POC server did not response

                    if(onError) _api.returnErr(res.returncode, onError, res.message);

                }else {
                    //server error
                    if(onError) _api.returnServerErr(onError);

                }
            })
        }

        function updateAsset(mode, kind, amount, onComplete, onError){

            if(!mode || !kind || (amount == null || typeof amount == 'undefined')){
                if(onError) _api.returnErr(_api.setCode.MISSING_PARAM, onError);
                return;
            };

            fn.resolve([_api.android.updateAsset(mode, kind, amount)], function (res) {

                if(false) console.log('updateAsset res', res);

                if(res.returncode == 100 ){

                    if(onComplete) onComplete(res.myamount);

                }else if(res.returncode){
                    //-1: //SYSTEM ERROR.
                    //-2: //{{Parameter}}  is required
                    //-3: //Please Check Your Game ID.
                    //      Please Check User Informations.
                    //      Please Check Your Shop Number.
                    //-7: //Can not Get User POC
                    //-8: //POC server did not response

                    if(onError) _api.returnErr(res.returncode, onError, res.message);

                }else {
                    //server error
                    _api.returnServerErr(onError);

                }
            })
        }

        /**
         * this is called only when server call is success
         * @param res object. response data from server api : purchaseStart,
         *                  if the api is not called, this value is null
         * @param _type
         * @param errObj
         * @param onComplete
         * @param onError
         */
        function adProcess(res, _type, errObj, onComplete, onError){

            var _errAd = errObj;

            if (res){
                shopLogNo = res.shoplogno;
                transactionId = res.transactionid;
            }

            // interstitial
            if (_type == 'interstitial'){
                Android.showInterstitialAd();
                //video
            }else if(_type == 'video'){
                Android.showVideoAd();
            }else {
                _errAd = {returncode: errCode.BAD_REQUEST,
                    message: errMsg[errCode['BAD_REQUEST']],
                    detail: errDetail.WRONG_PARAMETER_VALUE,
                    userMessage: fn.LANG.MSG.ERR.WRONG_PARAMS_VALUE
                };
                hasShowAdCalled = false;
                if(onError) onError(_errAd);
            }

            var watchedVideo = false;
            var _save = false;
            // 'purchaseResult' will be called
            // set callback
            w.onFBAdEvent = function (adType, eventName) {
                // Refer to official doc : https://developer.android.com/google/play/billing/billing_reference
                // code = 0 is for success
                if(!hasShowAdCalled) {
                    if(false) console.log('purchase is not being made, pass the signal', hasShowAdCalled);
                    return;
                }
                if (adType == 'interstitial') {
                    // eventName string.
                    // onDismissed ; when ad is closed by user
                    // onError ; when error occurred
                    // onLoadfail ; when load was failed
                    // onInvalidated ; when ad is invalid
                    if (eventName == 'onDismissed'){
                        if (res) {
                            _save = true;
                        }else {
                            hasShowAdCalled = false;
                            if(onComplete) onComplete();
                            return;
                        }
                    }else {
                        hasShowAdCalled = false;
                        if(onError) onError(_errAd);
                        return;
                    }
                }else if (adType == 'video'){
                    // eventName string.
                    // onVieoCompleted ; when ad played to the end. needs to give a reward to user

                    // the rest are the same with interstitial's.
                    // onDismissed ; when ad is closed by user
                    // onError ; when error occurred
                    // onLoadfail ; when load was failed
                    // onInvalidated ; when ad is invalid
                    if (eventName == 'onVideoCompleted'){
                        watchedVideo = true;
                        // should stop here. Wait for 'onDismissed' event
                        return;
                    }else if (eventName == 'onDismissed'){
                        if (watchedVideo){
                            if (res){
                                // call 'onComplete' when finishing calling 'purchaseComplete'
                                _save = true;
                            }else {
                                hasShowAdCalled = false;
                                if (onComplete) {
                                    setTimeout(function(){
                                        onComplete(true);
                                        // give some time so that ad can be loaded
                                    }, 3300);
                                }
                            }
                        }else {
                            hasShowAdCalled = false;
                            if (onComplete) {
                                setTimeout(function(){
                                    onComplete();
                                    // give some time so that ad can be loaded
                                }, 3300);
                            }
                            return;
                        }
                    }else {
                        hasShowAdCalled = false;
                        if(onError) onError(_errAd);
                        return;
                    }
                }else {
                    hasShowAdCalled = false;
                    //server error
                    if(onError) _api.returnServerErr(onError);
                    return;
                }

                if (_save){
                    fn.resolve([_api.android.purchaseComplete(shopLogNo, transactionId)], function (res2) {
                        if(res2.returncode == 100 ){
                            hasShowAdCalled = false;
                            setTimeout(function(){
                                if (onComplete) onComplete(true);
                                // give some time so that ad can be loaded
                            }, 1000);
                        }else if(res2.returncode){
                            //-1: //SYSTEM ERROR.
                            //-2: //{{Parameter}}  is required
                            //-3: //Please Check Your Game ID.
                            //      Please Check User Informations.
                            //      Please Check Your Shop Number.
                            //-7: //Can not Get User POC
                            //-8: //POC server did not response
                            hasShowAdCalled = false;
                            if(onError) _api.returnErr(res2.returncode, onError, res2.message);

                        }else {
                            hasShowAdCalled = false;
                            //server error
                            if(onError) _api.returnServerErr(onError);

                        }
                    })
                }
            }
        }

        // since 'onFBAdEvent' can be called anytime,
        // sdk should let the function run only when the showAd is called.
        // set this var true, when the showAd is called, and then
        // set this var false, when the showAd's process is finished
        var hasShowAdCalled = false;
        /**
         *
         * @param isPurchase bool. set true, if the ad is played from the shop
         * @param type string. 'interstitial', 'video'
         * @param shopNo
         * @param productId
         * @param onComplete
         * @param onError
         */
        function showAd(isPurchase, type, shopNo, productId, onComplete, onError){

            var _errAd = {returncode: errCode.UNKNOWN,
                message: errMsg[errCode['UNKNOWN']],
                detail: errDetail.AD_ERROR,
                userMessage: fn.LANG.MSG.ERR.SORRY_THERE_IS_NO_AVAILABLE_AD
            };

            var _type = type, _shopNo = shopNo, _productId = productId;
            hasShowAdCalled = true;
            if(isPurchase){
                fn.resolve([_api.android.purchaseStart(_shopNo)], function (res) {
                    if(false) console.log('resolve result', res);

                    if(res.returncode == 100) {

                        // shopLogNo = res.shoplogno;
                        // transactionId = res.transactionid;

                        adProcess(res, _type, _errAd, onComplete, onError)

                    }else if(res.returncode){
                        hasShowAdCalled = false;
                        //-1: //SYSTEM ERROR.
                        //-2: //{{Parameter}}  is required
                        //-3: //Please Check Your Game ID.
                        //      Please Check User Informations.
                        //      Please Check Your Shop Number.
                        //-6: //message from POC server
                        //-7: //Can not Get User POC
                        //-8: //POC server did not response
                        if(onError) _api.returnErr(res.returncode, onError, res.message);

                    }else {
                        hasShowAdCalled = false;
                        //server error
                        if(onError) _api.returnServerErr(onError);
                    }
                });

            }else {
                adProcess(null, _type, _errAd, onComplete, onError)
            }
        }

        function getNow(onComplete, onError){
            fn.resolve([_api.android.getCurrentTime()], function (res) {
                if (res.currenttime) {
                    if(onComplete) onComplete(res.currenttime);
                }else {
                    if(onError) _api.returnServerErr(onError);
                }
            });
        }

        function doPause(onPause){
            if(onPause) onPause();
        }

        function doResume(onResume){
            if(onResume) onResume();
            var event = new Event('visibilitychange');
            // event dispatch
            w.document.dispatchEvent(event);
        }

        /**
         *
         * @param eventCategory string required
         * @param eventAction string required
         * @param eventLabel string
         * @param eventValue string
         * @param fieldsObject object
         */
        function appLog(eventCategory, eventAction, eventLabel, eventValue, fieldsObject){
            if(!eventCategory && !eventAction) return;

            var _fieldObj = null;
            var _eventLabel;
            var _eventVal;
            if(eventLabel) _eventLabel = eventLabel.toString();
            if(eventValue) _eventVal = eventValue.toString();
            if(fieldsObject) _fieldObj = JSON.stringify(fieldsObject);
            w.Android.gaSend(eventCategory, eventAction, _eventLabel, _eventVal, _fieldObj);
        }

        w.onPauseWebview = doPause;
        w.onResumeWebview = doResume;

        fn[moduleName] = { //api map
            GETSHOP: getShop
            ,PURCHASE : purchase
            ,UPDATEASSET : updateAsset
            ,SHOWAD : showAd
            ,GETNOW : getNow
            ,PAUSE : doPause
            ,RESUME : doResume
            ,LOG : appLog
        };

        w.setIos = function(){
            if(false) console.log('setIos');
            w.Ios = { // ios app test
                orientationChange: function(status){
                    w.webkit.messageHandlers.orientationChange({status: status});   // 'true', 'false'
                }
                ,toastShort: function(message){
                    w.webkit.messageHandlers.toastShort({message: message});
                }
                ,toastLong: function(message){
                    w.webkit.messageHandlers.toastLong({message: message});
                }
                ,exitPopupPrs: function(exitPopupPrs){
                    w.webkit.messageHandlers.exitPopupPrs({exitPopupPrs: exitPopupPrs});
                }
                ,getData: function(key, defaultVal, callback){  // todo : change all related fn
                    w.webkit.messageHandlers.getData({key: key, defaultVal: defaultVal});
                    w.cbGetData = function(val){
                        if(callback) callback(val);
                    }
                }
                ,saveData: function(key, val){
                    w.webkit.messageHandlers.saveData({key: key, val: val});
                }
                ,getPushToken: function(callback){  // todo : change all related fn
                    w.webkit.messageHandlers.getPushToken();
                    w.cbGetPushToken = function(val){
                        if(callback) callback(val);
                    }
                }
                ,loginGoogle: function(){
                    w.webkit.messageHandlers.loginGoogle();
                }
                ,loginFacebook: function(){
                    w.webkit.messageHandlers.loginFacebook();
                }
                ,loginApple: function(){
                    w.webkit.messageHandlers.loginApple();
                }
                ,signOut: function(){
                    w.webkit.messageHandlers.signOut();
                }
                ,gameExit: function(){
                    w.webkit.messageHandlers.gameExit();
                }
            };
        }

    }).call(PASDKe20);

})(window);
/**
 * Created by Spike on 2020-10-28.
 * HTML templates and display UI
 */
(function(w){

    (function(){
        //this = loader itself
        var fn = this.fn;
        var moduleName = 'UI';
        var _api = fn.API;
        var _util = fn.UTIL;
        if(false) console.log('module', moduleName);

        //////////////////////////////////////          PRIVATE

        var $canvas = null,
            jq = jQuery;
        // var testProfileImg = 'https://pa-dev1.emojigames.io/spikeTest/pa-new-fb/static/img/profile.png';
        var profileImgPolyfill = 'this.onerror=null;this.src=\'static/img/random-profile.png\';';
        var flagImgPolyfill = 'this.onerror=null;this.src=\'static/img/flags/ZZ.png\';';

        // for interval functions
        var ITEMS_PER_LIST = 5;    // display 20 items per call on a list; should be updated in UI_TEMPLATE too
        var _timeIntv1 = null, _timeIntv2 = null, _timeIntv3 = null;
        var defaultFontSize = 16.6;   // the base is desktop resolution
        var defaultViewSize = 540*960;   // the base is desktop resolution
        var isScrolling = false;
        var isTouching = false;
        //element classes
        var eleClass = {
            modal : {
                overlay : 'modal-overlay'
            },
            view : {
                super : 'pa-view-super',
                sceneWrapper : 'pa-view-scene-wrapper',
                scene : 'pa-view-scene',
                content : 'pa-view-content',
                subContent : 'pa-view-super .sub-content'
            }
        };

        // menu name
        var menus = ['home', 'match', 'result', 'shop', 'menu'];
        var MENUS = {
            HOME : 0,
            MATCH : 1,
            RESULT : 2,
            SHOP : 3,
            MENU : 4
        };
        var MATCH_RESULT = { // should change in UI_TEMPLATE too when updated
            PENDING : 1,
            WIN : 2,
            LOSE : 3,
            DRAW : 4
        };
        var GAME_TYPE = {
            NOVICE_RUBY : '_novice_ruby',
            AMA_RUBY : '_ama_ruby',
            NOVICE_POINT : '_novice_point',
            AMA_POINT : '_ama_point'
        };
        var onResultParams = null;
        var onMatchParams = null;
        var onShopParams = null;
        var onRankParams = null;
        var onCompleteFunc;
        var isSearchingRandomOppo = false;
        var clickedMenuId = null;   // used for updating botom active menu

        var resSndRootDir = 'static/sounds/';
        var soundWin;
        var soundLose;

        var eleId = {
            btmMenu : 'sdk-bottom-nav',
            input : {
                email : 'pa-ui-input-email'
                ,pwd : 'pa-ui-input-pwd'
                ,name : 'pa-ui-input-name'
                ,image : 'pa-ui-input-image'
                ,pwdAgain : 'pa-ui-input-pwdAgain'
                ,pwdCur : 'pa-ui-input-pwdCurrent'
                ,tncppAgree : 'pa-ui-check-tncpp-agree'
                ,countryCode  : 'pa-ui-country-code'
                ,langCode  : 'pa-ui-lang-code'
            }
            ,btn : {
                signIn : 'pa-ui-btn-signin'
                ,signUp : 'pa-ui-btn-signup'
                ,signOut : 'pa-ui-btn-signout'
                ,submit : 'pa-ui-btn-submit'
                ,subHeaderClose : 'sub-header-close'
            }
            ,message : 'pa-ui-msg'//for displaying message returned from server
            ,esportsInfo : 'pa-ui-esports-info'
            ,esportsLeaderboard : 'pa-ui-esports-leaderboard'
            ,loadingIcon: 'sdk-loading'
        };

        var MESSAGES = {
            NOT_ENOUGH_RUBY : 'Not enough XP',
            NOT_ENOUGH_POINT : 'Not enough point.',
            AD_IS_NOT_READY : 'Ad is not ready.<br>Please try it later.',
            AD_WATCHED_ALL : 'You watched all available ads for today.<br>Please try it tomorrow.',
            FREE_POINT_IS_NOT_READY : 'Free point is not ready.<br>Please try it later.',
            ERROR_OCCURRED : 'Error has occurred.<br>Please try it later.',
            ERROR_OCCURRED_TRY_AGAIN : 'Error has occurred.<br>Please try it again.',
            SYSTEM_ERROR_OCCURRED : 'System error has occurred.<br>Please try it later.',
            SYSTEM_ERROR_OCCURRED_TRY_AGAIN : 'Server error has occurred.<br>Please try it again.',
            MATCH_TIMED_OUT : 'Searching timed out.<br>Please try it later.',
            NO_DATA_FOUND : 'No data found'
        };

        var ani = {
            bounceIn : 'animated bounceIn'
            ,flash : 'animated flash'
        };

        var UPDATE_VIEW = {
            PROFILE_RUBY : 1,
            PROFILE_POINT : 2
        };

        var CURRENT_PAGE = {
            MAIN : 1,
            SUB : 2
        };
        var currentPage = CURRENT_PAGE.MAIN; // default main papge (home, match, shop, rank)

        var aniDur = 300;   // when css .transition is updated, this should be updated too.

        var clsName = {
            indicatorValid : 'validated',
            indicatorInvalid : 'error'
        };
        // to get friend's country info. should be set null when challenge begins;
        var friendChallengeLB = null;

        var _matchNo_ = null; // for random play; get it from 'startMatch' and send to 'finishMatsh'
        var _match_ = null; // for random play; get it from 'startMatch' and send to 'finishMatsh'
        // match structure
        //  myinfo obj.
        //  oppoinfo obj.
        //  entryfee: "6"
        //  matchresult: ""
        //  matchtype: "1"
        //  playtype: "1"
        //  rewardamount: "10"
        //  rewardtrophy: "100"
        // var match = {}; // keep match data when random play begins

        // to check start scene of a challenge, used in challenge scene
        // 1. match (default)
        // 2. request in result
        var challengeFrom = MENUS.MATCH;

        //sharable variables across modals
        var sharableVars = {
            email : null        //sign in, forgot pwd
        };
        var uiCallType = '';

        var CODE = _api.getCallCode();
        var errCode = _api.getErrCode();
        var errMsg = _api.getErrMessage();
        var errDetail = _api.getErrDetail();

        var imgPath = _api.getImgPath();
        var randimg = imgPath+'image_random.png';

        var inputFocused = false;


        // for switching between sign in and sign up modal to skip the animation during the change
        // when true, skip the animation
        var switchBetweenSignInUp = false;

        ///////////////////////         FUNCTIONS

        function resetChallengeFrom(){
            challengeFrom = MENUS.MATCH;
        }
        /**
         *
         * @param options obj
         *
         * @constructor
         */
        var Tab = function(options){
            var self = this;
            var _opt = (options) ? options : {};
            if(!_opt.id) _opt.id = 'tab';
            var eleId = '#'+_opt.id;
            var childrenLength = 0;
            var curTabIdx = 0;

            this.init = function () {
                var $con = jq(eleId).find('.tab-content');
                childrenLength = $con.children.length;
                $con.width((childrenLength*100)+'%');
                jq(eleId).find('.tab-con').width(100/childrenLength+'%');

                jq(eleId).find('.tab-header button').on('click', function (e) {
                    var $this = jq(e.currentTarget);
                    var $parent = $this.parent();
                    var no = $parent.index();

                    var $li = $this.parent().parent().children('li');
                    $li.removeClass('on');
                    $parent.addClass('on');
                    if(false) console.log('clicked', no);

                    var moveTo = 100 * (no);
                    jq('.tab-active-indicator').css({transform: 'translateX('+moveTo+'%)'});
                    var moveTo2 = 100/childrenLength * no;
                    $con.css({transform: 'translateX('+(moveTo2 * -1)+'%)'});

                    curTabIdx = no;

                    self.openCb(no);
                });

                // test
                // setTimeout(function(){
                //
                //     var str = '<li class="con-flex cf-ver-center">'+
                //         '<div class="pl-rank">114</div>'+
                //         '<div class="pl-photo">photo</div>'+
                //         '<div class="pl-name-flag con-flex cf-column cf-ver-center">'+
                //         '<div class="pl-name">Joe</div>'+
                //         '<div class="pl-flag"></div>'+
                //         '</div>'+
                //         '<div class="pl-badge">'+
                //         '123'+
                //         '</div>'+
                //         '<div class="pl-money">'+
                //         '$34'+
                //         '</div>'+
                //         '</li>';
                //     for(var i = 0; i < 15; i++){
                //         var $playerEle = jq(str);
                //         $playerEle.appendTo('.player-list');
                //     }
                //
                // }, 1000);
            };
            this.open = function(idx){
                var openIdx = idx;
                // remove content
                var $cons = jq(eleId).find('.tab-content');
                $cons.children().eq(idx).empty();
                // open it
                jq(eleId).find('.tab-header button').eq(openIdx).click();
            }
            /**
             * called when a tab is open, default 0 ( the first tab )
             * @param idx
             */
            this.openCb = function(idx){}
            /**
             *
             * @param idx
             * @param str
             */
            this.addContent = function(idx, str){
                var $cons = jq(eleId).find('.tab-content');
                var $con = $cons.children().eq(idx);
                $con.empty();
                jq(str).appendTo($con);
            }
            this.init();
        };

        var Selectbox = function(options){
            var self = this;
            var _opt = (options) ? options : {};
            if(!_opt.id) _opt.id = 'selectbox';
            var eleId = '#'+_opt.id;
            var $input = jq(eleId),
                $wrapper = $input.parent(),
                $list = $wrapper.find('.si-list-box');
            this.init = function(){
                var _$selected = $list.find('button[data-selected=selected]');
                if(_$selected.length > 0){
                    $input.find('span').eq(0).text(_$selected.text());
                }
                $list.find('button').on('click', function (e) {
                    if(_opt.onSelect) _opt.onSelect(e);
                })
            }
            this.init();
            return this;
        };

        var ScrollDownListener = function(options){
            var _opt = options;
            var isReached = false;
            var isCallbackCalled = false;
            var $ele = jq(_opt.selector);
            if($ele.length > 0){
                $ele.off('scroll');
                $ele.scroll(function(){
                    if(Math.ceil($ele.scrollTop() + $ele.outerHeight() + 10) >= $ele.get(0).scrollHeight){
                        isReached = true;
                    }else {
                        isReached = false;
                    }
                    if(isReached){
                        if(!isCallbackCalled){
                            _opt.onScrollAtTheEnd();
                            isCallbackCalled = true;
                            $ele.scroll();
                        }
                    }
                });
            }
            // should be called when all process of 'onScrollAtTheEnd' is done
            this.eventCallbackFinished = function(){
                isCallbackCalled = false;
            }
        }

        // UI ; view  
        //  canvas  document   
        function init(){
            $canvas = jq('canvas');

            var str = '<div class="'+eleClass.view.super+'">'+
                '<div class="'+eleClass.view.sceneWrapper+' con-flex">'+
                    '<div class="'+eleClass.view.scene+' home">'+
                        topMenuDiv()+
                        '<div class="'+eleClass.view.content+'">'+

                        '</div>'+
                        bottomMenuDiv()+
                    '</div>'+
                    '<div class="'+eleClass.view.scene+' sub">'+
                    '</div>'+
                '</div>'+
                asideMenuDiv()+
                '</div>';
            render(str);
        }
        jq(document).ready(function(){

            if(_util.isMobile() && !_util.isIOS()){
                // to prevent resizing while virtual keyboard is used
                jq(w.document).off('focus blur', 'input').on('focus blur', 'input', function(e){
                    if(e.type == 'focus'){
                        inputFocused = true;
                    }else {
                        inputFocused = false;
                        setTimeout(function(){
                            resizeView();
                        }, 400);
                    }
                });
            }

            // sdk     ; because user info required
            var _intv = setInterval(function(){
                if(fn.isInited()){
                    clearInterval(_intv);
                    _intv = null;
                    soundWin = new Howl({src : [resSndRootDir+'challenge_win.mp3']});
                    soundLose = new Howl({src : [resSndRootDir+'challenge_lose.mp3']});
                    init();
                    initView();
                    setUpEvents();

                    // EmojiGamesFBSDK.js isUIReady = true    
                    _api.setUIisReady(true);
                }
            }, 100);
        });

        function playSound(key, event) {
            if (typeof w.C_IsGameSound === 'undefined') {
                w.C_IsGameSound = function(){
                    return true;
                }
            }
            // true, if sound is on
            if (w.C_IsGameSound()) {
                switch (key) {
                    case 'win':
                        soundWin[event]();
                        break;
                    case 'lose':
                        soundLose[event]();
                        break;
                }
            }

        }

        function initView(){
            $canvas = jq('canvas');
            var $topMenu = jq('#sdk-top-minimum');
            var $menu = jq('#sdk-quick-menu');
            var $btmMenu = jq('#'+eleId.btmMenu);
            var $content = jq('.'+eleClass.view.content);

            // this should be a scene like 'HOME'
            if($content.length > 0){
                var wh = $canvas.outerHeight();
                var topH = $topMenu.outerHeight();
                $content.height(wh-topH);
                var btmH = $btmMenu.outerHeight();
                var $child = $content.children().eq(0);
                if($child) $child.css({paddingBottom: btmH + btmH * .2});
            }
        }

        function openMenu($menu){
            if(false) console.log('menu clicked');
            // if($this.hasClass('on')){
            //     $this.removeClass('on')
            // }
            $menu.addClass('on');
            setTimeout(function () {
                $menu.addClass('transition bg-fade show-up');
            }, 10);
        }

        function setUpEvents(){
            // check platform
            var isIOS = fn.UTIL.isIOS();
            if(isIOS){
                jq('body').addClass('is-ios');
            }
            jq('.'+eleClass.view.super).on('touchstart touchend', function(e){
                switch(e.type){
                    case 'touchstart':
                        isTouching = true;
                        break;
                    case 'touchend':
                        isTouching = false;
                        break;
                }
            })

            //////  QUICK MENU : OPEN, CLOSE
            var $menu = jq('#sdk-quick-menu');

            jq('#sdk-btn-top-back').off('click').on('click', function (e) {
                changeMenu(MENUS.HOME);
            })

            function hideMenu(){
                $menu.removeClass('bg-fade show-up');
                setTimeout(function(){
                    $menu.removeClass('on transition');
                }, 300);
                if(false) console.log('1')
            }

            jq('#menu').on('click', function(e){
                openMenu($menu);
            });

            jq('#sdk-quick-menu').on('click', function(e){
                // e.stopPropagation();
                hideMenu();
            });

            jq('#ui-exit').on('click', function(e){
                hideView();
                if(onCompleteFunc) onCompleteFunc('exit');
            });

            // QUICK MENU: MENU CLICK
            jq('.qm-list > li > button').on('click', function(e){
                e.stopPropagation();
                var $this = jq(e.currentTarget);
                var $parent = $this.parent();
                var idx = $parent.index();

                if(idx == 0){
                    // profile
                    UI_profile();
                    hideMenu();
                }else if(idx == 1){
                    // help

                }else if(idx == 2){
                    // tutorial
                    function _saveData(){
                        addLoading();

                        var data = _api.getTutorial();
                        // reset
                        data.challenge.list = false;
                        data.challenge.result = false;
                        data.challenge.start = false;

                        _api.setTutorial(data, true, function(err){
                            removeLoadingIcon();
                            if(!err){
                                var $btmMenu = jq('#'+eleId.btmMenu);
                                $btmMenu.find('li').eq(MENUS.MATCH).find('button').click();
                                hideMenu();
                            }else {
                                UI_message(MESSAGES.ERROR_OCCURRED_TRY_AGAIN, 'Ok', function(e){
                                    if(e){
                                        // user clicked the close button
                                    }else {
                                        _saveData();
                                    }
                                });
                            }
                        })
                    }
                    _saveData();
                }
            });

            // BTM MENU
            var $btmMenu = jq('#'+eleId.btmMenu);
            var $btns = $btmMenu.find('button');
            $btns.on('click', function(e){
                if(false) console.log('e', e)
                var $this = jq(e.currentTarget);
                var $li = $this.parent();
                var matchTutorial = false;
                clickedMenuId = $this.attr('id');
                var sceneName = clickedMenuId.split('-')[2];
                // check if the same menu is clicked
                if($li.hasClass('on') && currentPage == CURRENT_PAGE.MAIN) {
                    var data = _api.getTutorial();
                    if(sceneName === 'match' && !data.challenge.list){
                        // tutorial mode; should go ahead
                        matchTutorial = true;
                    }else {
                        return;
                    }
                }
                var menuIdx = null;
                for(var i in menus){
                    if(menus[i] === sceneName){
                        menuIdx = Number(i);
                    }
                }

                // when update below line, update 'changeMenu' too
                resetChallengeFrom();
                if(sceneName === 'home'){
                    jq('#ui-exit').click();
                    updateBtmMenuActive();
                }else if(sceneName === 'match'){
                    UI_match(matchTutorial);
                    updateBtmMenuActive();
                }else if(sceneName === 'result'){
                    challengeFrom = MENUS.RESULT;
                    UI_result();
                }else if(sceneName === 'shop'){
                    UI_shop();
                    updateBtmMenuActive();
                }else if(sceneName === 'menu'){
                    openMenu(jq('#sdk-quick-menu'));
                    // updateBtmMenuActive();   // doesn't need update
                }
            });

            jq(w.document).off('focus blur', '.msg-form.has-icon input').on('focus blur', '.msg-form.has-icon input', function(e){
                var $self = jq(e.currentTarget);
                if(e.type == 'focusin'){
                    $self.parent().parent().addClass('on')
                }else if(e.type == 'focusout'){
                    if($self.parent().find('input').val().length == 0){
                        $self.parent().parent().removeClass('on')
                    }
                }
            });

            // SELECT BOX
            var _si_etype = 'focusin focusout click',
                _si_ele = '.si-input-box',
                _si_focus_in = false;   // to prevent double run code in click event
            jq(w.document).off(_si_etype, _si_ele).on(_si_etype, _si_ele, function(e){
                var $self = jq(this);
                var $wrapper = $self.parent();
                if(e.type == 'focusin'){
                    if(!$wrapper.hasClass('on')) _si_focus_in = true;
                    $wrapper.addClass('on');
                }else if(e.type == 'click'){
                    if(_si_focus_in) {
                        _si_focus_in = false;
                        return;
                    }
                    if($wrapper.hasClass('on')){
                        $wrapper.removeClass('on');
                    }else {
                        $wrapper.addClass('on');
                    }
                }else if(e.type == 'focusout'){

                }
            });

            var _si_etype2 = 'click',
                _si_ele2 = '.si-list-box button';
            jq(w.document).off(_si_etype2, _si_ele2).on(_si_etype2, _si_ele2, function(e){
                var $self = jq(this);
                var $ul = $self.parent().parent();
                var $wrapper = $ul.parent();
                var $input = $wrapper.find('.si-input-box');

                $input.find('span').eq(0).text($self.text());
                $ul.find('button').attr('data-selected', '');
                $self.attr('data-selected', 'selected');
                $wrapper.removeClass('on');
            });
        }

        function detectScroll(jqEle){
            jqEle.scroll(function() {
                isScrolling = true;
                clearTimeout(jq.data(this, 'scrollTimer'));
                jq.data(this, 'scrollTimer', setTimeout(function() {
                    // do something
                    isScrolling = false;
                    if(false) console.log("Haven't scrolled in 250ms!");
                }, 250));
            });
        }

        /**
         * 'clickedMenuId' should be defined before this is called
         */
        function updateBtmMenuActive(){
            var $btmMenu = jq('#'+eleId.btmMenu);

            var sceneName = clickedMenuId.split('-')[2];
            var $scene = jq('.'+eleClass.view.scene).eq(0);
            var menuIdx = null;
            for(var i in menus){
                if(menus[i] === sceneName){
                    menuIdx = Number(i);
                }
                $scene.removeClass(menus[i]);
            }
            $scene.addClass(sceneName);

            $btmMenu.find('li').each(function(idx){
                var $this = $btmMenu.find('li').eq(idx);
                $this.removeClass('on');
                if(idx === menuIdx){
                    $this.addClass('on');
                }
            });
        }

        function changeMenu(menuNo){
            resetChallengeFrom();

            var $btmMenu = jq('#'+eleId.btmMenu);
            var $li = $btmMenu.find('li');
            var idx = 0;
            if(menuNo === MENUS.HOME){ // home
                idx = 0;
            }else if(menuNo === MENUS.MATCH){
                idx = 1;
            }else if(menuNo === MENUS.RESULT){
                challengeFrom = MENUS.RESULT;
                idx = 2;
            }else if(menuNo === MENUS.SHOP){
                idx = 3;
            }else if(menuNo === MENUS.MENU){
                idx = 4;
            }
            $li.eq(idx).find('button').click();
        }

        var _tab;   // '$tab'can be used in many places
        function setUpSceneEvents(){
            var $accordians = jq('.btn-fold');
            if($accordians.length > 0){
                // fold it
                $accordians.each(function (idx) {
                    if(false) console.log(idx);
                    var $this = jq('.btn-fold').eq(idx);
                    var $wrapper = $this.parent().parent();
                    var contents = $wrapper.children().eq(1).children().length;  // 'item-list''s children
                    if(false) console.log('contents', contents)
                    var conH = $wrapper.children().eq(1).children().eq(1).outerHeight();
                    var marginTop = Number($wrapper.children().eq(1).css('marginTop').replace('px', '')); // it includes 'px', which should be removed
                    if(false) console.log('conH', conH, marginTop)
                    if(false) console.log($wrapper.children().eq(1).css('marginTop'));
                    var maxH = conH * (contents + 1) + marginTop * contents;    // 1 (from contents + 1) is for title...
                    if(false) console.log('maxH', maxH)
                    $wrapper.css({maxHeight: maxH});

                    // set default folding status
                    if(contents > 1){
                        // $wrapper.addClass('accordion-closed')
                    }else {
                        // when use 'display:none'the select 'eq'works differently
                        $this.css('visibility', 'hidden');
                    }
                })

                // add events
                jq('.btn-fold').on('click', function (e) {
                    var $this = jq(e.currentTarget);
                    var $wrapper = $this.parent().parent();
                    // toggle
                    var className = 'accordion-closed';
                    if($wrapper.hasClass(className)){
                        $wrapper.removeClass(className);
                    }else {
                        $wrapper.addClass(className);
                    }
                })
            }

            // tab; used for 'rank'scene
            var $tab = jq('#tab');
            if($tab.length > 0){
                _tab = new Tab({id : 'tab'});
            }

        }

        /**
         *
         * @param clearIntv
         * @param callback function. optional function to do something when sub view is removed
         */
        function setUpSubSceneEvents(clearIntv, callback){
            var $btnClose = jq('#'+eleId.btn.subHeaderClose);
            if($btnClose.length > 0){
                $btnClose.off('click').on('click', function (e) {
                    var $this = jq(e.currentTarget);
                    if(isSearchingRandomOppo){
                        isSearchingRandomOppo = false;
                        N_SetData(NTID.GAME_LEAVE,null);
                    }
                    backToMainFromSub(clearIntv);
                    if(callback) callback();
                })
            }
            var $btnProfileEdit = jq('#edit-profile-name');
            if($btnProfileEdit.length > 0){
                $btnProfileEdit.off('click').on('click', function (e) {
                    var $this = jq(e.currentTarget);

                    // backToMainFromSub(clearIntv);
                    // if(callback) callback();

                    UI_profile_edit();
                })
            }
            setTimeout(function(){
                // stack view; back button
                var $btnSubBack = jq('.sdk-btn-top-back');
                if($btnSubBack.length > 0){
                    $btnSubBack.off('click').on('click', function(e){
                        var $self = jq(e.currentTarget);
                        var $subView = $self.parent().parent().parent();
                        var $superView = $subView.parent().parent();
                        // todo
                        $subView.removeClass('on');
                        setTimeout(function(){
                            $subView.remove();
                            if($superView.hasClass('view-on3')){
                                // considers as modal
                                // todo : the type is only login for now, it needs to be variable when the type is more than the 'login'
                                if(onCompleteFunc) onCompleteFunc('login', {returncode: errCode.MODAL_CLOSED, message : ''});
                            }
                            $superView.removeClass('view-on3');
                        }, aniDur);
                    });
                }
            }, aniDur);
        }

        var ORI = {
            PORTRAIT : 1,
            LANDSCAPE : 2
        };
        function resizeView(){
            $canvas = jq('canvas');

            var $topMenu = jq('#sdk-top-minimum');
            var $menu = jq('#sdk-quick-menu');
            var $btmMenu = jq('#'+eleId.btmMenu);
            var $content = jq('.'+eleClass.view.content);
            var $subContent = jq('.'+eleClass.view.subContent);

            // this should be a scene like 'HOME'
            if($content.length > 0){
                var wh = $canvas.outerHeight();
                var topH = $topMenu.outerHeight();
                $content.height(wh-topH);
                var btmH = $btmMenu.outerHeight();
                var $child = $content.children().eq(0);
                if($child) $child.css({paddingBottom: btmH + btmH * .2});

                var $nodata = jq('.no-data');
                if($nodata.length > 0){
                    $nodata.css({paddingBottom: btmH + btmH * .2});
                }
            }
            if($subContent.length > 0){
                var $subTopMenu = jq('.sdk-top-sub');
                if($subTopMenu.length == 0){
                    $subTopMenu = jq('#sdk-top-minimum');
                }
                var wh = $canvas.outerHeight();
                var topH = $subTopMenu.outerHeight();
                if($subContent.hasClass('scrollable')){
                    $subContent.height(wh-topH);
                }
            }

            var $view = jq('.'+eleClass.view.super);
            var $scene = jq('.'+eleClass.view.scene);
            var $sceneWrapper = jq('.'+eleClass.view.sceneWrapper);

            if($view.length > 0){
                // order is important
                var canW = $canvas.outerWidth();    // add 2 for extra; sometimes width is a bit shorter than canvas
                $view.width(canW);
                var viewH = $canvas.outerHeight();
                if(viewH > w.innerHeight) viewH = w.innerHeight;
                $view.height(viewH);
                $sceneWrapper.width(canW * 2);
                $scene.width(canW);
                var pos = $canvas.offset();
                if(pos.top == 0 && pos.left == 0){
                    pos = $canvas.parent().offset();
                }
                $view.css({top : pos.top});
                $view.css({left : pos.left});
                // $view.height($canvas.outerHeight());

                var $challnegeView = jq('.challenge-players');
                if($challnegeView.length > 0){
                    var $subHeader = jq('.sub-header-title');
                    var $btmBtn = jq('.bottom-btn-fixed');
                    var _h = $canvas.outerHeight() - $subHeader.outerHeight() - $btmBtn.outerHeight();
                    $challnegeView.height(_h);
                }

                // adjust font size
                var canvSize = $canvas.outerWidth()*$canvas.outerHeight();
                var sizeRatio = canvSize/defaultViewSize;
                if(sizeRatio <= .7){
                    sizeRatio = sizeRatio + (1 - sizeRatio) * .3; //.23;
                }
                // if(sizeRatio > 1) sizeRatio = 1;
                var _fSize = defaultFontSize * sizeRatio;
                // if(false) console.log('size ratio', sizeRatio, _fSize);
                $view.css({'font-size': _fSize+'px'});

                var _ori = null; // 1; port, 2;land
                // var _canvOri = (canW > viewH) ? ORI.LANDSCAPE : ORI.PORTRAIT;

                var $super = jq('.'+eleClass.view.super);
                if(w.innerWidth < w.innerHeight){
                    _ori = ORI.PORTRAIT;
                }else {
                    _ori = ORI.LANDSCAPE;
                }

                if(_ori == ORI.PORTRAIT){
                    // only for castle defense
                    if(_api.getOrientation() == 'l' && _util.isMobile()){
                        jq('body').addClass('sdk-portrait');
                        var _topCenterP = w.innerWidth/2;
                        var _leftCenterP = w.innerHeight/2;
                        var _topP = _topCenterP - _leftCenterP;
                        var _leftP = _leftCenterP - _topCenterP;
                        // if(false) console.log('ppp', _topCenterP, _leftCenterP);
                        // if(false) console.log('ppp2', _topP, _leftP);
                        $view.css({'top': _leftP+'px', 'left': _topP+'px'});

                        // if(_canvOri == ORI.LANDSCAPE){
                        //     if(w.innerWidth < 640){ // too small for html
                        //         $view.hide();
                        //     }else {
                        //         $view.show();
                        //     }
                        // }else {
                        //     $view.show();
                        // }
                    }
                }else {
                    if(_api.getOrientation() == 'l' && _util.isMobile()){
                        jq('body').removeClass('sdk-portrait');
                        // $super.css('transform', '');
                    }
                }
            }

            // initView();
            // user profile
            var $uprofile = jq('.msg-modal.type-4 .m-user-profile');
            if($uprofile.length > 0){
                setTimeout(function() {
                    jq('.m-table-body').hide();
                    var _uph = jq('.msg-modal .profile-area').height() - jq('.m-history-title').height() - jq('.m-table-header').height();
                    // if(false) console.log(jq('.msg-modal .profile-area').height(), jq('.m-history-title').height(), jq('.m-table-header').height());
                    jq('.m-table-body').height(_uph);
                    jq('.m-table-body').show();
                }, 300);
            }
        }

        var resizeTimeout;
        var resizeTimeout2;
        jq(w).resize(function () {
            if(inputFocused) return;
            resizeView();
            if(!resizeTimeout){
                // delay for mobile
                resizeTimeout = setTimeout(function(){
                    clearTimeout(resizeTimeout);
                    resizeView();
                    resizeTimeout = null;
                    if(emojiSlider) {
                        emojiSlider.refresh();
                    }
                    // delay for mobile2
                    resizeTimeout = setTimeout(function(){
                        clearTimeout(resizeTimeout);
                        resizeView();
                        resizeTimeout = null;
                        if(emojiSlider) {
                            emojiSlider.refresh();
                        }
                    }, 350);
                }, 350);
            }
        });

        function render(srcStr, destStr){
            if(false) console.log('render this!');

            var $overlay = jq('.'+eleClass.view.super);
            if($overlay.length > 0) {
                var newStr = srcStr.substr(0, srcStr.length - 6).replace('<div class="'+eleClass.view.super+'">', '');
                $overlay.html(newStr);
            }else {
                jq(srcStr).appendTo('body');
            }
            resizeView()

            //for ios active effect
            jq('.'+eleClass.view.super).on('touchstart', function (){});

        }

        function closeTopStack(){
            jq('.pa-view-scene.is-stack').last().find('.sdk-btn-top-back').click();
        }

        function closemodal(){
            jq('#btn-popup-close').click();
        }

        /**
         *
         * @param srcStr string. html content to add to html
         * @param isSub bool. false = main page(d), true = sub page( contents for next to the main pages )
         * @param showCloseBtn bool. true = showCloseBtn
         */
        function renderPage(srcStr, isSub, showCloseBtn, classes){
            var isStack = (srcStr.indexOf('data-is-stack="1"') > -1);
            var $stackLayer;
            if(isStack) {
                if(false) console.log('stack layer');
                // create a div
                $stackLayer = jq('<div class="'+eleClass.view.scene+' sub is-stack '+classes+'">'+srcStr+'</div>');
                $stackLayer.appendTo('.'+eleClass.view.sceneWrapper);
                showView(false, true);
                setTimeout(function(){  // give some time for smooth animation
                    resizeView();
                    $stackLayer.addClass('on');
                }, 100);
            }else if(!isSub){
                // main pages; has a basic structure
                jq('.'+eleClass.view.content).html('');
                jq(srcStr).appendTo('.'+eleClass.view.content);
                // show the top of the scene as default
                jq('.'+eleClass.view.content).scrollTop(0);
                setTimeout(resizeView, 100);
                if(currentPage == CURRENT_PAGE.SUB){
                    backToMainFromSub();
                }
            }else {
                // main pages; structure may be various, so add it to the scene
                var $subScene = jq('.'+eleClass.view.scene).eq(1);
                $subScene.html('');
                jq(srcStr).appendTo($subScene);
                if(!showCloseBtn){
                    jq('#'+eleId.btn.subHeaderClose).hide();
                }
                setTimeout(resizeView, 100);
                if(currentPage == CURRENT_PAGE.MAIN){
                    showSub();
                }
            }
            return $stackLayer;
        }

        function aniLoadingFinished(){
            if(_api.isAndroid() || _api.isIos()) {
                fn[moduleName].HIDELOADING();
            }
            
            var $popup = jq('.modal-content');
            //remove loading element 'div:after'
            if(switchBetweenSignInUp){
                $popup.removeClass('page-loading');
                switchBetweenSignInUp = false;
            }else {
                setTimeout(function(){
                    $popup.removeClass('page-loading');
                }, aniDur + 100);
            }
        }
        w.LoadingFinished = aniLoadingFinished;

        function showSub(){
            var $scene = jq('.'+eleClass.view.scene);
            $scene.addClass('transition').css({transform: 'translateX(-100%)'});
            currentPage = CURRENT_PAGE.SUB;
        }

        /**
         *
         * @param clearIntv bool. clear all local interval when it's true
         */
        function backToMainFromSub(clearIntv){
            var $scene = jq('.'+eleClass.view.scene);
            $scene.css({transform: 'translateX(0)'});
            if(clearIntv) clearIntvEvents();
            setTimeout(function(){
                $scene.removeClass('transition');
            }, aniDur);
            currentPage = CURRENT_PAGE.MAIN;
        }

        function removeLoadingIcon(){
            if(_api.isAndroid() || _api.isIos()){
                fn[moduleName].HIDELOADING();
            }
            
            var $icon = jq('#'+eleId.loadingIcon);
            if($icon.length > 0){
                $icon.remove();
            }
        }

        var sparkles = [];
        function clearIntvEvents(){
            if(_timeIntv1) {
                clearInterval(_timeIntv1);
                clearTimeout(_timeIntv1);
                _timeIntv1 = null;
            }
            if(_timeIntv2) {
                clearInterval(_timeIntv2);
                clearTimeout(_timeIntv2);
                _timeIntv2 = null;
            }
            if(_timeIntv3) {
                clearInterval(_timeIntv3);
                clearTimeout(_timeIntv3);
                _timeIntv3 = null;
            }
            if(winnerSparkle){
                winnerSparkle.stop();
                winnerSparkle = null;
            }
            if(sparkles.length > 0){
                for (var i in sparkles){
                    sparkles[i].stop();
                    sparkles[i] = null;
                }
                sparkles = [];
            }
            jq('.'+eleClass.view.content).off('scroll');
        }

        /**
         *
         * @param remainTime number
         * @param element object.   html  (jquery object)
         */
        function setCountdown(remainTime, $element, onComplete){
            var _remainTime = remainTime;
            var $countdown = $element;
            var isIOS = _util.isIOS();
            _timeIntv1 = setInterval(function () {
                _remainTime -= 1;   // sec
                if(isIOS && (isScrolling || isTouching)) return;    // should not run when scrolling on iOS
                var days = Math.floor(_remainTime / (60*60*24));

                if (days > 0) {
                    days = days + 'D ';
                } else {
                    days = '';
                }

                var countdown = moment.utc(moment.duration(_remainTime, 's').asMilliseconds()).format('HH:mm:ss');
                $countdown.html(
                    days + countdown
                )

                if(_remainTime == 0){
                    clearInterval(_timeIntv1)
                    _timeIntv1 = null;
                    if(onComplete) onComplete();
                }
            }, 1000)
        }

        function updateView(type, val){
            var userInfo = _api.getMyInfo();
            if(type == UPDATE_VIEW.PROFILE_POINT){
                userInfo.pointamount = Number(val);
                jq('.currencies .point span.pa-point-bal').html(_util.displayComma(val));
            }else if(type == UPDATE_VIEW.PROFILE_RUBY){
                userInfo.rubyamount = Number(val);
                jq('.currencies .ruby span.pa-ruby-bal').html(_util.displayComma(val));
            }
            _api.setMyInfo(userInfo);
        }

        /**
         * make 'match' object from the data from the server 'startMatch' and 'finishMatch'
         * @param gameData
         */
        function makeMatchObj(gameData){
            // for request case, gameData has additional keys
            // matchsetno, roomid
            var _data = gameData;
            var _res = {};
            _res.matchresult = '1'; // set as pending(ongoing) //_data.matchresult; no matchresult in random play
            if(gameData.matchresult != '') _res.matchresult = gameData.matchresult;
            _res.rewardamount = _data.rewardamount;
            _res.rewardtrophy = _data.rewardtrophy;
            _res.entryfee = _data.entryfee;
            _res.matchtype = _data.matchtype;
            _res.playtype = 1; // _data.playtype; todo: check this with Eddie

            // var userInfo = fn.IGAPI.PLAYER.GETINFO();
            var userInfo2 = fn.PLAYER.GETINFO();

            var noOppoInfo = (_data.oppouserno == '' || typeof _data.oppouserno == 'undefined');
            _res.oppoinfo = {
                // request challenge has 'oppouniqueid';
                fbid : (!noOppoInfo) ? (_data.oppouserid) ? _data.oppouserid : _data.oppouserno : '',  // will be changed to fbid when match starts if necessary
                name : (!noOppoInfo) ? (_data.opponickname != 'null') ? _data.opponickname : 'Opponent' : 'Opponent',
                photo : (!noOppoInfo) ? (_data.oppophoto != 'null') ? _api.replacePhotoPath(_data.oppophoto) : 'static/img/random-profile.png' : 'static/img/random-profile.png',
                country : (!noOppoInfo) ? _data.oppocountry : 'ZZ',
                gamedata: {score: _data.opposcore},
            };
            _res.myinfo = {
                // id: userInfo.id,
                fbid: userInfo2.id,
                name: userInfo2.nickname,
                photo: userInfo2.photo,
                country: userInfo2.countryCode,
                gamedata : {score: _data.myscore}
            };
            if(gameData.matchsetno) _res.matchsetno = gameData.matchsetno;
            if(gameData.roomid) _res.roomid = gameData.roomid;
            if(!gameData.matchtitle) _res.matchtitle = 'REQUEST CHALLENGE';
            return _res;
        }

        function validateEmail(val){
            return (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\D{2,})+$/.test(val));
        }

        function validateName(val){
            // not empty and no special characters
            return {
                '1' : !_util.isEmpty(val),
                '2' : !(val && /[!@#$%^&*()]+/g.test(val)),
                '3' : !(val && (val.length < 4 || val.length > 20))
            };
        }

        function validatePwd(val){
            var val = (!val) ? '' : val;
            var res = {'1' : false, '2' : false, '3': false};
            //is at least 8 characters?
            if(val.length >= 8){
                res['1'] = true;
            }
            if(val.length <= 50){
                res['2'] = true;
            }
            //has at least 1 special character? !@#$%^&*()
            if(/[!@#$%^&*()]+/g.test(val)){
                res['3'] = true;
            }
            if(false) console.log('res3', res['3'])
            return res;
        }

        ///////////////////////     COMPONENTS (HTML)
        function bottomMenuDiv(){
            var str = ''+
                '<div id="'+eleId.btmMenu+'">'+
                    '<ul class="btm-wrapper con-flex cf-row">'+
                        '<li class="on">'+
                            '<button type="button" id="sdk-btm-home" class="transition">'+
                                '<img src="static/img/icon-home.png" alt="">'+
                                '<span>Home</span>'+
                            '</button>'+
                        '</li>'+
                        '<li>'+
                            '<button type="button" id="sdk-btm-match" class="transition">'+
                                '<span class="ico-wrapper">' +
                                    '<img src="static/img/icon-play.png" alt="">'+
                                    '<img src="static/img/icon-play.png" class="ico-play-big" alt="">'+
                                    '<img src="static/img/icon-menu-twinkle.png" class="btm-twk no1" alt="">' +
                                    '<img src="static/img/icon-menu-twinkle.png" class="btm-twk no2" alt="">' +
                                    '<img src="static/img/icon-menu-twinkle.png" class="btm-twk no3" alt="">' +
                                '</span>'+
                                '<span>Match</span>'+
                            '</button>'+
                        '</li>'+
                        '<li>'+
                            '<button type="button" id="sdk-btm-result" class="transition">'+
                                '<span class="ico-wrapper">' +
                                    '<img src="static/img/icon-result-outline.png" alt="">'+
                                    '<img src="static/img/graph-bar1.png" class="btm-bar no1" alt="">'+
                                    '<img src="static/img/graph-bar1.png" class="btm-bar no2" alt="">'+
                                    '<img src="static/img/graph-bar1.png" class="btm-bar no3" alt="">'+
                                    '<img src="static/img/icon-menu-twinkle.png" class="btm-twk no4" alt="">' +
                                '</span>' +
                                '<span>Result</span>'+
                            '</button>'+
                        '</li>'+
                        '<li>'+
                            '<button type="button" id="sdk-btm-shop" class="transition">'+
                                '<span class="ico-wrapper">' +
                                    '<img src="static/img/icon-shop.png" class="ico-shop" alt="">'+
                                    '<img src="static/img/icon-menu-twinkle.png" class="btm-twk no5" alt="">' +
                                    '<img src="static/img/icon-menu-twinkle.png" class="btm-twk no6" alt="">' +
                                '</span>'+
                                '<span>Shop</span>'+
                            '</button>'+
                        '</li>'+
                        '<li>'+
                            '<button type="button" id="sdk-btm-menu" class="transition">'+
                                '<span class="ico-wrapper">' +
                                    '<img src="static/img/icon-menu.png" alt="">' +
                                    // '<img src="static/img/icon-rank-color.png" class="ico-rank-color" alt="">' +
                                    '<img src="static/img/icon-menu-twinkle.png" class="btm-twk no7" alt="">' +
                                    '<img src="static/img/icon-menu-twinkle.png" class="btm-twk no8" alt="">' +
                                '</span>'+
                                '<span>Menu</span>'+
                            '</button>'+
                        '</li>'+
                    '</ul>'+
                '</div>';
            return str;
        }

        function topMenuDiv(){
            var userInfo = _api.getMyInfo();
            var cc = userInfo.countryCode; // test
            var str = ''+
                '<div id="sdk-top-minimum">'+
                    '<div class="nav-bar con-flex cf-row cf-hor-space-between cf-ver-center">'+
                        '<div class="top-left">'+
                            '<div class="profile-area con-flex">'+
                                '<button id="sdk-btn-top-back" class="con-flex cf-ver-center">' +
                                    '<img src="static/img/btn-back-top.png" class="top-back-img" alt="">' +
                                    '<span class="profile-photo">'+
                                        '<figure><img src="'+userInfo.photo+'" alt="" onerror="'+profileImgPolyfill+'"></figure>'+
                                    '</span>'+
                                '</button>'+
                                '<div class="profile-wrap con-flex cf-row cf-col-center">'+
                                    '<div class="profile-flag"><img src="static/img/flags/'+cc+'.png" alt="'+cc+' flag" onerror="'+flagImgPolyfill+'"></div>'+
                                    '<div class="profile-name">'+userInfo.nickname+'</div>'+
                                '</div>'+
                            '</div>'+
                        '</div>'+
                        '<div class="top-right">'+
                            '<button id="menu" type="button">'+
                                '<img src="static/img/menu.png" alt="" style="width: 100%; max-width: 100%;">'+
                            '</button>'+
                        '</div>'+
                    '</div>'+
                    '<div class="currencies">'+
                        '<ul class="con-flex cf-hor-space-between">'+
                            '<li class="ruby">' +
                                '<span class="ico-wrapper"><img src="static/img/icon-xp.png" alt="">' +
                                    '<img src="static/img/top-point-twinkle.png" class="top-twk no1" alt="">' +
                                    '<img src="static/img/top-point-twinkle.png" class="top-twk no2">' +
                                    '<img src="static/img/top-point-twinkle.png" class="top-twk no3">' +
                                '</span>' +
                                '<span class="pa-ruby-bal">'+_util.displayComma(userInfo.rubyamount)+'</span></li>'+
                            '<li class="point">' +
                                '<span class="ico-wrapper"><img src="static/img/icon-point-glow.png" alt="" class="top-glow">' +
                                    '<img src="static/img/icon-point.png" alt="">' +
                                    '<img src="static/img/top-point-twinkle2.png" class="top-twk no4" alt="">' +
                                '</span>' +
                                '<span class="pa-point-bal">'+_util.displayComma(userInfo.pointamount)+'</span>' +
                            '</li>'+
                        '</ul>'+
                    '</div>'+
                '</div>';
            return str;
        }

        // todo : move to ui_template file
        function subTopMenuDiv(title){
            var str = ''+
                '<div id="sdk-top-sub">'+
                    '<div class="nav-bar">'+
                        '<p class="sub-header-title">'+title+'</p>'+
                        '<button class="sub-header-close" id="'+eleId.btn.subHeaderClose+'"><img src="static/img/btn-close.png" alt=""></button>'+
                    '</div>'+
                '</div>';
            return str;
        }

        function asideMenuDiv(){
            var str = ''+
                '<div id="sdk-quick-menu" class="">'+
                    '<div class="qm-panel transition">'+
                        '<div class="menu-logo"><img src="static/img/menu-logo2.png" alt=""></div>'+
                        '<ul class="qm-list">'+
                            '<li><button type="button"><img src="static/img/icon-menu-profile.png" alt="">profile</button></li>'+
                            '<li style="display:none"><button type="button"><img src="static/img/icon-menu-help.png" alt="">help</button></li>'+
                            '<li><button type="button"><img src="static/img/icon-menu-tutorial.png" alt="">tutorial</button></li>'+
                        '</ul>'+
                        '<div class="aside-ver">ver. e21 '+_api.getVer()+'</div>'+
                        '<button id="ui-exit" class="btn-black">Exit</button>'
                    '</div>'+
                '</div>';
            return str;
        }

        function loadingDiv(){
            var str = ''+
                '<div id="'+eleId.loadingIcon+'">' +
                    '<div>' +
                        '<img src="static/img/circle-countdown.png" alt="">'+
                    '</div>'+
                '</div>';
            return str;
        }

        function addLoading(){
            if(_api.isAndroid() || _api.isIos()){
                fn[moduleName].SHOWLOADING();
            }
            var $loading = loadingDiv();
            jq($loading).appendTo(jq('.'+eleClass.view.super));
        }

        function hideView(){
            var $super = jq('.'+eleClass.view.super);
            $super.removeClass('view-on view-on2 view-on3');
        }

        /**
         * nobg, isStack can't be have the same value
         * @param nobg bool. for modals
         * @param isStack bool. for views that is not belong to a menu
         */
        function showView(nobg, isStack){

            var $countdownDiv = jq('#match-countdown');
            if($countdownDiv.length > 0){
                $countdownDiv.remove();
            }

            var $super = jq('.'+eleClass.view.super);
            // true = for modals
            if(nobg){
                if($super.hasClass('view-on')){    // sdk ui is already on
                    // do nothing
                }else { // display only modal
                    $super.addClass('view-on2');
                }
            }else if(isStack){
                if($super.hasClass('view-on')){    // sdk ui is already on
                    // do nothing
                }else { // display only modal
                    $super.addClass('view-on3');
                }
            }else {
                $super.addClass('view-on');
                if(nobg === false){
                    $super.addClass('remove-vo');
                }
            }
        }

        ///////////////////////     END OF COMPONENTS (HTML)

        /**
         *
         * @param clickedType number. 1 = ongoing, 2 = finish, 3 = request. just return as it is
         * @param pendingPageNo number.
         * @param finishPageNo number.
         * @param requestPageNo number.
         * @param onComplete func.
         */
        function getMatchHistoryPages(clickedType, pendingPageNo, finishPageNo, requestPageNo, onComplete){
            addLoading();
            fn.GETMATCHHISTORY(ITEMS_PER_LIST, pendingPageNo, ITEMS_PER_LIST, finishPageNo, ITEMS_PER_LIST, requestPageNo, function(res){
                // new format
                // var res = {
                //     "returncode": "100",
                //     "message": "success",
                //     "userinfo": {
                //         "nickname": "YXxJlcBZKsgF",
                //         "photo": "",
                //         "country": "US",
                //         "rubyamount": "0",
                //         "pointamount": "47"
                //     },
                //     "requestinfo": {
                //         "rtotalcount": 0,
                //         "rtotalpage": 0,
                //         "rcurrentpage": "1",
                //         "rhasnext": "0",
                //         "requestinfo": null
                //     },
                //     "pendinginfo": {
                //         "totalcount": 0,
                //         "totalpage": 0,
                //         "currentpage": "1",
                //         "hasnext": "0",
                //         "pendinginfo": null
                //     },
                //     "historyInfo": {
                //         "htotalcount": 0,
                //         "htotalpage": 0,
                //         "hcurrentpage": "1",
                //         "hhasnext": "0",
                //         "historyInfo": null
                //     }
                // };

                if(res.returncode == CODE.SUCCESS) {

                    updateView(UPDATE_VIEW.PROFILE_RUBY, res.userinfo.rubyamount);
                    updateView(UPDATE_VIEW.PROFILE_POINT, res.userinfo.pointamount);

                    var pInfo = res.pendinginfo;
                    var hInfo = res.historyInfo;
                    var rInfo = res.requestinfo;

                    if(!pInfo.pendinginfo) pInfo.pendinginfo = [];
                    if(!hInfo.historyInfo) hInfo.historyInfo = [];
                    if(!rInfo.requestinfo) rInfo.requestinfo = [];

                    // just make all views
                    var pViewStr = '';
                    var currentPage,
                        startIdx;
                    for(var i = 0; i < pInfo.pendinginfo.length; i++){
                        currentPage = pInfo.pcurrentpage;
                        startIdx = (currentPage - 1)*ITEMS_PER_LIST;
                        var itemData = pInfo.pendinginfo[i];
                        pViewStr += fn.UI_TEMPLATE.getMatchHistoryItem(1, startIdx+i, itemData);
                    }
                    var hViewStr = '';
                    for(var i = 0; i < hInfo.historyInfo.length; i++){
                        currentPage = hInfo.hcurrentpage;
                        startIdx = (currentPage - 1)*ITEMS_PER_LIST;
                        var itemData = hInfo.historyInfo[i];
                        hViewStr += fn.UI_TEMPLATE.getMatchHistoryItem(2, startIdx+i, itemData);
                    }
                    var rViewStr = '';
                    for(var i = 0; i < rInfo.requestinfo.length; i++){
                        currentPage = rInfo.rcurrentpage;
                        startIdx = (currentPage - 1)*ITEMS_PER_LIST;
                        var itemData = rInfo.requestinfo[i];
                        rViewStr += fn.UI_TEMPLATE.getMatchHistoryItem(3, startIdx+i, itemData);
                    }

                    if(onComplete) onComplete(clickedType, pInfo, pViewStr, hInfo, hViewStr, rInfo, rViewStr);
                }else if(res.returncode === CODE.SUCCESS_ERROR){
                    // todo : stuck at loading when button or close button clicked.
                    // returncode: "-1"
                    // message: "Please Check Opponent Match No."
                    // if(onComplete) onComplete(res);
                    removeLoadingIcon();
                    UI_message(MESSAGES.ERROR_OCCURRED, 'OK');

                }else {
                    // etc;     
                    removeLoadingIcon();
                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                }
            });
        }

        /**
         *
         * @param data obj
         * @param modelData arr
         * @return modelData
         */
        function updateHistoryListView(clickType, data, viewStr, modelData){
            var _model = modelData;
            var arrayKey = (clickType != 1) ? (clickType != 2) ? 'requestinfo' : 'historyInfo' : 'pendinginfo'; // 3, 2, 1
            var hasnextKey = (clickType != 1) ? (clickType != 2) ? 'rhasnext' : 'hhasnext' : 'hasnext';

            var listId = (clickType != 1) ? (clickType != 2) ? '#request-list' : '#finished-list' : '#pending-list';
            var btnWrapper = '.btn-wrapper';
            for(var i = 0; i < data[arrayKey].length; i++){
                var _d = data[arrayKey][i];
                _model.push(_d);
            }
            jq(viewStr).appendTo(jq(listId+' .item-list'));
            if(data[hasnextKey] == 1){
                jq(listId+' '+btnWrapper).show();
            }else {
                jq(listId+' '+btnWrapper).hide();
            }
            // for pending (in progress)...
            if(clickType == 1){
                // check DOM if there is a child
                if(jq(listId+' .item-list').children().length == 0){
                    jq(listId).hide();
                }
            }
            return _model;
        }

        function UI_result(){
            if(false) console.log('run result')

            clearIntvEvents();

            var clickedType = null; // 1 = pending, 2 = finish, 3 = request
            var pendings = [],
                finishes = [],
                requests = [];
            var pending = {currentPage : 1, hasNext: 0, totalCount: 0, totalPage: 0},
                finish = {currentPage: 1, hasNext: 0, totalCount: 0, totalPage: 0},
                request = {currentPage: 1, hasNext: 0, totalCount: 0, totalPage: 0};
            var setEvent = false;

            // called when data fetched from server
            var getListComplete = function(clickedType, pendingData, pendingViewStr, finishData, finishViewStr, requestData, requestViewStr){
                if(false) console.log('Got match history info', pendingData, finishData, requestData);

                pending.hasNext = pendingData.hasnext;
                pending.totalCount = pendingData.totalcount;
                pending.totalPage = pendingData.totalpage;
                finish.hasNext = finishData.hhasnext;
                finish.totalCount = finishData.htotalcount;
                finish.totalPage = finishData.htotalpage;
                request.hasNext = requestData.rhasnext;
                request.totalCount = requestData.rtotalcount;
                request.totalPage = requestData.rtotalpage;

                var pListId = '#pending-list';
                var fListId = '#finished-list';
                var rListId = '#request-list';
                // var btnWrapper = '.btn-wrapper';

                // if user click one of list, update only that list
                if(clickedType){
                    if(clickedType == 1){   // pending
                        pendings = updateHistoryListView(clickedType, pendingData, pendingViewStr, pendings);
                    }else if(clickedType == 2){ // finish
                        finishes = updateHistoryListView(clickedType, finishData, finishViewStr, finishes);
                    }else if(clickedType == 3){ // request
                        requests = updateHistoryListView(clickedType, requestData, requestViewStr, requests);
                    }
                }else {

                    // todo : pending data; check if played in recent 3 days

                    if(pendingData.pendinginfo.length == 0 && finishData.historyInfo.length == 0 && requestData.requestinfo.length == 0){
                        // no data
                        if(false) console.log('no data')
                        UI_message(MESSAGES.NO_DATA_FOUND, 'OK');

                    }else {

                        var str = fn.UI_TEMPLATE.getMatchHistory();
                        renderPage(str);

                        updateBtmMenuActive();

                        setTimeout(function () {
                            jq('.result .no-data').remove();
                            if(pendingData.pendinginfo.length > 0){
                                jq(pListId).show();
                                pendings = updateHistoryListView(1, pendingData, pendingViewStr, pendings);
                            }
                            if(finishData.historyInfo.length > 0){
                                jq(fListId).show();
                                finishes = updateHistoryListView(2, finishData, finishViewStr, finishes);
                            }
                            if(requestData.requestinfo.length > 0){
                                jq(rListId).show();
                                requests = updateHistoryListView(3, requestData, requestViewStr, requests);
                            }
                            jq('.result .list-con').show().css('visibility', '');

                            // run only once
                            // see more
                            // var _pendings = res.pendinginfo;
                            if(pendings.length > 0){
                                // if(pending.hasnext == 1){
                                jq('#show-progress-btn').on('click', function (e) {
                                    var $this = jq(e.currentTarget);
                                    clickedType = 1;
                                    pending.currentPage++;
                                    getMatchHistoryPages(clickedType, pending.currentPage, finish.currentPage, request.currentPage, getListComplete);
                                })
                                // }
                            }
                            // var _finishes = res.listinfo;
                            if(finishes.length > 0){
                                // if(finish.hasnext == 1){
                                jq('#show-finished-btn').on('click', function (e) {
                                    var $this = jq(e.currentTarget);
                                    clickedType = 2;
                                    finish.currentPage++;
                                    getMatchHistoryPages(clickedType, pending.currentPage, finish.currentPage, request.currentPage, getListComplete);
                                })
                                // }
                            }
                            if(requests.length > 0){
                                // if(finish.hasnext == 1){
                                jq('#show-request-btn').on('click', function (e) {
                                    var $this = jq(e.currentTarget);
                                    clickedType = 3;
                                    request.currentPage++;
                                    getMatchHistoryPages(clickedType, request.currentPage, request.currentPage, request.currentPage, getListComplete);
                                })
                                // }
                            }

                            if(!setEvent){
                                setEvent = true;

                                var btnClicked = false;
                                // event should be set up here
                                jq('.item-list').on('click', 'button', function(e) {
                                    var $this = jq(e.currentTarget);

                                    // .btn-play-info  
                                    if ($this.hasClass('btn-play-info')) {
                                        if(btnClicked) return;
                                        btnClicked = true;

                                        // the next procedure can be canceled
                                        setTimeout(function(){
                                            btnClicked = false;
                                        }, 2000);

                                        var matchResult = $this.attr('data-match-result'),
                                            idx = $this.attr('data-idx');
                                        if(false) console.log('clicked', matchResult, idx);

                                        // matchresult == 1 : pending
                                        // matchresult == 2 : win
                                        // matchresult == 3 : lose
                                        // matchresult == 4 : draw

                                        // ongoing array
                                        var gameData = {};
                                        var isRequest = $this.attr('data-request');
                                        if(matchResult == 1){
                                            if(isRequest == 1){
                                                gameData = requests[idx];
                                                // gameData.playtype = '2'; // always friend match;
                                            }else {
                                                gameData = pendings[idx];
                                            }
                                            // finished array
                                        }else {
                                            gameData = finishes[idx];
                                        }
                                        var _match = makeMatchObj(gameData);
                                        _match.issecondplay = (isRequest == 1) ? 1 : 0;   // mark for request challenges for the game to know
                                        if(false) console.log('data', gameData, _match);
                                        if(isRequest == 1){
                                            // start challenge
                                            btnClicked = false;
                                            UI_challenge_check_data(_match, onCompleteFunc);

                                        }else {
                                            // show result
                                            UI_result_challenge({match: _match, isView: true});
                                        }
                                    }
                                });
                            }
                        }, 10);

                    }
                }
                removeLoadingIcon();
                // setUpSceneEvents(); not necessary

            };
            getMatchHistoryPages(clickedType, pending.currentPage, finish.currentPage, request.currentPage, getListComplete);

        }

        /**
         * clicked at MATCH menu
         * @param e
         * @param data
         */
        function matchBtnClick(e, data){
            var $this = jq(e.currentTarget);
            // .btn-play-info  
            if($this.hasClass('btn-play-info')){
                var mSetNo = $this.attr('data-no');
                var idxNo = $this.attr('data-idx');  // only for match
                if(false) console.log('matchBtnClick clicked', mSetNo);
                var isRequest = false;
                var isRecomminfo = false;
                // get data
                var match = data.matches.filter(function(ele, idx) {
                    if(ele.matchsetno == mSetNo) return true;
                })
                if(match.length == 0){
                    match = data.practices.filter(function(ele, idx) {
                        if(ele.matchsetno == mSetNo) return true;
                    })
                }
                // for recommended, it's oppomatchno
                if(match.length == 0){
                    match = data.recomminfo.filter(function(ele, idx) {
                        if(ele.oppomatchno == mSetNo && idx == idxNo) return true;
                    })
                    if(match.length > 0){
                        isRecomminfo = true;
                        match[0].isRecomminfo = true;
                        match[0].matchtitle = "RECOMMENDED PRACTICE";
                    }
                }
                if(match.length == 0){
                    match = data.requests.filter(function(ele, idx) {
                        if(ele.matchsetno == mSetNo) {
                            isRequest = true;
                            return true;
                        }
                    })
                }
                // should exist
                if(match.length > 0){

                    var _data = match[0];
                    // if 'oppomatchno' exists, the current player is the last turn
                    _data.issecondplay = (_data.oppomatchno && _data.oppomatchno != "") ? 1 : 0;   // mark for request challenges for the game to know

                    var canEnter = checkEntryFee(_data.matchtype, _data.entryfee);

                    if(canEnter){
                        // if(isRecomminfo){   // recommende
                        //     _data.oppoObj = {
                        //         fbid: _data.oppouserid,
                        //         name: _data.opponickname,
                        //         photo: _data.oppophoto,
                        //         country: _data.oppocountry,
                        //         gamedata : {score: (_data.opposcore != "") ? _data.opposcore : 0 }
                        //     };
                        // }
                        // doesn't need to call 'UI_challenge_check_data' as data is already given
                        UI_challenge_check_data(_data, function(type, gameData){
                            if(false) console.log('match started', gameData);
                            gameData.match.issecondplay = _data.issecondplay;
                            // type = scene name. 'match', 'challenge', 'result' ....
                            if(onCompleteFunc) onCompleteFunc(type, gameData);
                        });
                    }else {
                        var conStr = fn.UI_TEMPLATE.getMsgLackOfEntryFee();
                        UI_message(conStr, 'Get Entry Fee', function(e){
                            if(e){
                                // user clicked the close button
                            }else {
                                fn.UI.CALL(menus[MENUS.SHOP], onShopParams, onCompleteFunc);
                            }
                        });
                    }
                }else {
                    if(false) console.log('could not find the match');
                }
            }
        }

        var _matchData = null;
        function UI_match(isTutorial){
            if(false) console.log('run match')

            if(isTutorial){
                // this is called when tutorial begins, and current scene is MATCH
                showTutorial('list', _matchData);
                return;
            }

            clearIntvEvents();
            addLoading();

            var data = {
                matches : [],
                practices : [],
                // recommended1 : [],
                // recommended2 : [],
                recomminfo : []
            };

            fn.GETMATCHROOM(function(res){
                // var res = {"returncode":"100","message":"success","userinfo":{"nickname":"Jaehyun","photo":"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=4283139711711521&height=256&width=256&ext=1597394815&hash=AeTn0r3tk1C3Zpre","country":"GB","rubyamount":"516702","pointamount":"554815"},"recomminfo1":[{"matchtype":"3","handlername":"","playtype":"2","matchsetno":"20","matchtitle":"RECOMEND CHALLENGE","description":"TRY TO GET POINT","entryfee":"1","rewardamount":"2","rewardtrophy":"0","maxmember":"2","opporoomid":"aENlJ0ZqFdKk200715","oppomatchno":"1215","oppouserno":"44","oppouniqueid":"4095732587118687","opponickname":"Juhee","oppocountry":"GB","oppophoto":"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=4095732587118687&height=256&width=256&ext=1597390146&hash=AeR9nNQh45kPbYOb"},{"matchtype":"3","handlername":"","playtype":"1","matchsetno":"21","matchtitle":"RECOMEND CHALLENGE","description":"TRY TO GET POINT","entryfee":"2","rewardamount":"4","rewardtrophy":"0","maxmember":"2","opporoomid":"k67XCERdzwHI200715","oppomatchno":"1210","oppouserno":"1289","oppouniqueid":"2890893761009689","opponickname":"Connor","oppocountry":"US","oppophoto":"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=2890893761009689&height=256&width=256&ext=1597331780&hash=AeQmjy19cd25itC5"},{"matchtype":"3","handlername":"","playtype":"1","matchsetno":"22","matchtitle":"RECOMEND CHALLENGE","description":"TRY TO GET POINT","entryfee":"3","rewardamount":"6","rewardtrophy":"0","maxmember":"2","opporoomid":"CUi4W0gDIuY9200715","oppomatchno":"348","oppouserno":"344","oppouniqueid":"3414896665211959","opponickname":"Sai","oppocountry":"US","oppophoto":"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=3414896665211959&height=256&width=256&ext=1596332078&hash=AeTRDVc5jReGM_WB"}],"recomminfo2":[{"matchtype":"4","handlername":"","playtype":"1","matchsetno":"24","matchtitle":"RECOMEND CHALLENGE","description":"TRY TO GET POINT","entryfee":"1","rewardamount":"2","rewardtrophy":"0","maxmember":"2","opporoomid":"MmLlvUf3Loqd200715","oppomatchno":"548","oppouserno":"30","oppouniqueid":"3749892948417388","opponickname":"Nguyen","oppocountry":"US","oppophoto":"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=3749892948417388&height=256&width=256&ext=1597226494&hash=AeQWH8zIh1yQIMeg"},{"matchtype":"4","handlername":"","playtype":"1","matchsetno":"24","matchtitle":"RECOMEND CHALLENGE","description":"TRY TO GET POINT","entryfee":"1","rewardamount":"2","rewardtrophy":"0","maxmember":"2","opporoomid":"HFqKyzZcNFvJ200715","oppomatchno":"900","oppouserno":"37","oppouniqueid":"2982363678511269","opponickname":"Amanda","oppocountry":"US","oppophoto":"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=2982363678511269&height=256&width=256&ext=1597377016&hash=AeRx-HsjQIDhRJZR"},{"matchtype":"4","handlername":"","playtype":"1","matchsetno":"24","matchtitle":"RECOMEND CHALLENGE","description":"TRY TO GET POINT","entryfee":"1","rewardamount":"2","rewardtrophy":"0","maxmember":"2","opporoomid":"PprHVz2lVJi6200715","oppomatchno":"822","oppouserno":"33","oppouniqueid":"3016517735130801","opponickname":"\uc720\uc0c1\uc6d0","oppocountry":"KR","oppophoto":"https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=3016517735130801&height=256&width=256&ext=1596961394&hash=AeQ0X9AJyKrJOBX8"}],"matchinfo":[{"matchtype":"1","handlername":"2Ed5noTH_novice_ruby","playtype":"1","matchsetno":"5","matchtitle":"NOVICE CHALLENGE","description":"TRY TO GET RUBY","entryfee":"21","rewardamount":"40","rewardtrophy":"40","maxmember":"2"},{"matchtype":"1","handlername":"2Ed5noTH_pro_ruby","playtype":"1","matchsetno":"13","matchtitle":"PRO CHALLENGE","description":"TRY TO GET RUBY","entryfee":"53","rewardamount":"100","rewardtrophy":"100","maxmember":"2"}],"practiceinfo":[{"matchtype":"2","handlername":null,"playtype":"2","matchsetno":"6","matchtitle":"PLAY WITH FRIENDS","description":"TRY TO GET POINT","entryfee":"53","rewardamount":"100","rewardtrophy":"100","maxmember":"2"},{"matchtype":"2","handlername":"2Ed5noTH_novice_point","playtype":"1","matchsetno":"7","matchtitle":"NOVICE CHALLENGE","description":"TRY TO GET POINT","entryfee":"6","rewardamount":"10","rewardtrophy":"2","maxmember":"2"},{"matchtype":"2","handlername":"2Ed5noTH_ama_point","playtype":"1","matchsetno":"8","matchtitle":"AMATUER CHALLENGE","description":"TRY TO GET POINT","entryfee":"53","rewardamount":"100","rewardtrophy":"100","maxmember":"2"}]};
                if(res.returncode == CODE.SUCCESS) {
                    var mhInfo = res;
                    if(false) console.log('Got match room info', mhInfo);

                    // update user info; fee may be charged
                    updateView(UPDATE_VIEW.PROFILE_RUBY, mhInfo.userinfo.rubyamount);
                    updateView(UPDATE_VIEW.PROFILE_POINT, mhInfo.userinfo.pointamount);

                    removeLoadingIcon();

                    for(var i in mhInfo.matchinfo){
                        data.matches.push(mhInfo.matchinfo[i]);
                    }
                    for(var i in mhInfo.practiceinfo){
                        data.practices.push(mhInfo.practiceinfo[i]);
                    }
                    // for(var i in mhInfo.recomminfo1){
                    //     data.recommended1.push(mhInfo.recomminfo1[i]);
                    // }
                    // for(var i in mhInfo.recomminfo2){
                    //     data.recommended2.push(mhInfo.recomminfo2[i]);
                    // }
                    for(var i in mhInfo.recomminfo){
                        data.recomminfo.push(mhInfo.recomminfo[i]);
                    }
                    _matchData = data;  // for tutorial

                    var str = fn.UI_TEMPLATE.getMatchRoom(mhInfo);
                    renderPage(str);

                    setUpSceneEvents();

                    // tutorial
                    showTutorial('list', data);

                    jq('.item-list').on('click', 'button', function(e){
                        matchBtnClick(e, data);
                    });

                }else if(res.returncode === CODE.SUCCESS_ERROR){
                    // todo : error exception
                    removeLoadingIcon();
                    UI_message(MESSAGES.ERROR_OCCURRED, 'OK');
                }else {
                    // etc;     
                    removeLoadingIcon();
                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                }
            });
        }

        function doPurchase(item){
            fn.STARTPURCHASE(item.shopno, function(res){
                if(false) console.log('res', res);
                if(res.returncode == CODE.SUCCESS){

                    fn.FINISHPURCHASE(res.shoplogno, res.transactionid, function(res){
                        removeLoadingIcon();
                        if(res.returncode == CODE.SUCCESS){
                            updateView(UPDATE_VIEW.PROFILE_RUBY, res.rubyamount);
                            updateView(UPDATE_VIEW.PROFILE_POINT, res.pointamount);
                        }else if(res.returncode === CODE.SUCCESS_ERROR){
                            // todo : error exception
                            UI_message(MESSAGES.ERROR_OCCURRED_TRY_AGAIN, 'OK');
                        }else {
                            // etc;     
                            UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED_TRY_AGAIN, 'OK');
                        }
                    })

                }else {
                    // todo : error exception
                    removeLoadingIcon();
                    UI_message(res.userMessage, 'OK');
                }
            })
        }

        // for only first call of shop menu
        function callShopAPI(listcount, callback){

            var _gameid = _api.encrypt(_api.getGameId());
            var _userid = _api.encrypt((_api.getMember('userId') || _api.getMember('uniqueId')));
            var calls = [_api.pa.getShop(_gameid,_userid)];
            var _me = _api.getMyInfo();
            if(!_me.isAnonymous){
                var _listcount = _api.encrypt(listcount),
                    _page = _api.encrypt('1');
                calls.push(_api.pa.getHistory(_gameid,_userid,_listcount,_page));
            }
            fn.resolve(calls, function(res1, res2){
                if(res1.returncode){
                    if(res1.returncode == CODE.SUCCESS){
                        if(res2){
                            if(res2.returncode != CODE.SUCCESS){
                                removeLoadingIcon();
                                UI_message(MESSAGES.ERROR_OCCURRED, 'OK');
                                return;
                            }
                        }
                        // only when success
                        callback(res1, res2);
                    }else {
                        removeLoadingIcon();
                        UI_message(MESSAGES.ERROR_OCCURRED, 'OK');
                    }
                }else {
                    // etc;     
                    removeLoadingIcon();
                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                }
            });
        }

        /**
         *
         * @param data obj
         * @param modelData arr
         * @return modelData
         */
        function updateTransactionHistoryListView(data, viewStr, modelData){
            var _model = modelData;
            var arrayKey = 'historyinfo';
            var hasnextKey = 'hasnext';

            var listId = '#transaction-history';
            var btnWrapper = '.btn-wrapper';
            for(var i = 0; i < data[arrayKey].length; i++){
                var _d = data[arrayKey][i];
                _model.push(_d);
            }
            jq(viewStr).appendTo(jq(listId+' .item-list'));
            if(data[hasnextKey] == 1){
                jq(listId+' '+btnWrapper).show();
            }else {
                jq(listId+' '+btnWrapper).hide();
            }
            return _model;
        }

        function getTransactionHistoryPages(listcount, pageNo, onComplete){
            var _listcount = listcount;
            addLoading();
            fn.GETHISTORY(_listcount, pageNo, function(res){

                if(res.returncode == CODE.SUCCESS) {

                    updateView(UPDATE_VIEW.PROFILE_RUBY, res.userinfo.rubyamount);
                    updateView(UPDATE_VIEW.PROFILE_POINT, res.userinfo.pointamount);

                    var pInfo = res;

                    // just make all views
                    var pViewStr = '';
                    var currentPage,
                        startIdx;
                    currentPage = pInfo.currentpage;
                    for(var i = 0; i < pInfo.historyinfo.length; i++){
                        startIdx = (currentPage - 1)*_listcount;
                        var itemData = pInfo.historyinfo[i];
                        pViewStr += fn.UI_TEMPLATE.getTransactionHistoryItem(startIdx+i, itemData);
                    }
                    removeLoadingIcon();
                    if(onComplete) onComplete(pInfo, pViewStr);
                }else if(res.returncode === CODE.SUCCESS_ERROR){
                    // todo : stuck at loading when button or close button clicked.
                    // returncode: "-1"
                    // message: "Please Check Opponent Match No."
                    // if(onComplete) onComplete(res);
                    removeLoadingIcon();
                    UI_message(MESSAGES.ERROR_OCCURRED, 'OK');

                }else {
                    // etc;     
                    removeLoadingIcon();
                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                }
            });
        }

        function UI_shop(){

            clearIntvEvents();
            addLoading();

            var histories = [];
            var history = {currentPage : 1, hasNext: 0, totalCount: 0, totalPage: 0};
            var historylistcount = 10;

            callShopAPI(historylistcount, function(res, res2){
                var sInfo = res;
                if(false) console.log('Got shop info', sInfo, res2);

                removeLoadingIcon();

                // update user info; fee may be charged
                updateView(UPDATE_VIEW.PROFILE_RUBY, res.userinfo.rubyamount);
                updateView(UPDATE_VIEW.PROFILE_POINT, res.userinfo.pointamount);

                var str = fn.UI_TEMPLATE.getShop(sInfo, res2);
                renderPage(str);

                setUpSceneEvents();

                var isios = _util.isIOS();
                if(!isios){
                    setTimeout(function(){
                        var sparkle = new ParticleEmitter({
                            src : 'static/img/twinkle.png',
                            amount : 4,
                            container : '.reward-img.point',
                            minScale : .4,
                            maxScale : .9
                        });
                        var sparkle2 = new ParticleEmitter({
                            src : 'static/img/twinkle.png',
                            amount : 4,
                            container : '.reward-img.ruby',
                            minScale : .4,
                            maxScale : .9
                        });
                        sparkles.push(sparkle);
                        sparkles.push(sparkle2);
                    }, aniDur);
                }

                function addCDEle(){
                    var $cdEle = jq('#remain-free');
                    if($cdEle.length == 0){
                        jq(fn.UI_TEMPLATE.getRemainFree()).appendTo(jq('#remain-free-wrapper'));
                    }
                }

                if(sInfo.freelist.canreceive != 1){
                    setCountdown(sInfo.freelist.remaintime, jq('#remain-free'), function(){
                        jq('#remain-free').parent().remove();
                        sInfo.freelist.canreceive = 1;
                    });
                }

                if(res2){
                    // updateTransactionHistoryListView(finishData, finishViewStr, finishes);

                    var getListComplete = function(historyData, historyViewStr){
                        history.hasNext = historyData.hasnext;
                        history.totalCount = historyData.totalcount;
                        history.totalPage = historyData.totalpage;

                        var hListId = '#transaction-history';
                        if(history.hasNext) {
                            jq('#transaction-history .btn-wrapper').show();
                        }else {
                            jq('#transaction-history .btn-wrapper').hide();
                        }

                        histories = updateTransactionHistoryListView(historyData, historyViewStr, histories);
                    }

                    histories = res2.historyinfo;
                    history.hasNext = res2.hasnext;
                    history.totalCount = res2.totalcount;
                    history.totalPage = res2.totalpage;
                    if(history.hasNext) {
                        jq('#transaction-history .btn-wrapper').show();
                    };

                    jq('#show-transaction-btn').on('click', function(e){

                        var $this = jq(e.currentTarget);
                        history.currentPage++;
                        getTransactionHistoryPages(historylistcount, history.currentPage, getListComplete);
                    })
                }

                jq('.btn-play-info').on('click', function(e){
                    var $this = jq(e.currentTarget);

                        var userInfo = _api.getMyInfo();
                        var type = $this.attr('data-type');
                        var shopNo = $this.attr('data-shopno');
                        if(false) console.log('clicked', type, shopNo);
                        var item = null;
                        if(type == 'pa-login') {
                            UI_signin(function(type, data){
                                // user logged in
                                if(data.returncode == CODE.SUCCESS){
                                    var $btnLogin = jq('button[data-type=pa-login]');
                                    if($btnLogin.length > 0){
                                        $btnLogin.parent().parent().parent().hide();
                                    }
                                }
                            });
                        }else if(type == 'offer'){
                            item = sInfo.shopdata.offerlist.filter(function(ele, idx){
                                return (ele.shopno == shopNo);
                            })[0];
                            // todo
                        }else if(type == 'ruby'){
                            item = sInfo.shopdata.rubylist.filter(function(ele, idx){
                                return (ele.shopno == shopNo);
                            })[0];

                            // login required
                            if(userInfo.isAnonymous){
                                UI_signin(function(type, data){
                                    // user logged in
                                    if(data.returncode == CODE.SUCCESS){
                                        var $btnLogin = jq('button[data-type=pa-login]');
                                        if($btnLogin.length > 0){
                                            $btnLogin.parent().parent().parent().hide();
                                        }
                                        addLoading();
                                        doPurchase(item);
                                    }
                                })
                            }else {
                                addLoading();
                                doPurchase(item);
                            }

                        }else if(type == 'point'){
                            item = sInfo.shopdata.pointlist.filter(function(ele, idx){
                                return (ele.shopno == shopNo);
                            })[0];

                            if(Number(userInfo.rubyamount) < Number(item.disprice)){
                                UI_message(MESSAGES.NOT_ENOUGH_RUBY, null);
                                return;
                            }
                            addLoading();
                            fn.STARTPURCHASE(item.shopno, function(res){
                                if(false) console.log('res', res);
                                if(res.returncode == CODE.SUCCESS){

                                    fn.FINISHPURCHASE(res.shoplogno, res.transactionid, function(res){
                                        removeLoadingIcon();
                                        if(res.returncode == CODE.SUCCESS){
                                            updateView(UPDATE_VIEW.PROFILE_RUBY, res.rubyamount);
                                            updateView(UPDATE_VIEW.PROFILE_POINT, res.pointamount);
                                        }else if(res.returncode === CODE.SUCCESS_ERROR){
                                            // todo : error exception
                                            UI_message(MESSAGES.ERROR_OCCURRED, 'OK');
                                        }else {
                                            // etc;     
                                            UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                                        }
                                    })
                                }else if(res.returncode === CODE.SUCCESS_ERROR){
                                    // todo : error exception
                                    removeLoadingIcon();
                                    UI_message(MESSAGES.ERROR_OCCURRED, 'OK');
                                }else {
                                    removeLoadingIcon();
                                    // etc;     
                                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                                }
                            })
                        }else if(type == 'free'){
                            item = sInfo.freelist;
                            // canreceive: "0" 1 = can | 2 = can not

                            if(item.canreceive == 1){
                                addLoading();
                                var amount = item.rewardpoint;
                                fn.SETFREEREWARD(function(res){
                                    removeLoadingIcon();
                                    if(res.returncode == CODE.SUCCESS) {
                                        if(false) console.log('res', res);
                                        // update profile

                                        userInfo.pointamount = Number(userInfo.pointamount) + Number(amount);
                                        _api.setMyInfo(userInfo);
                                        // jq('#sdk-top-minimum .currencies .point span').html(amount);
                                        updateView(UPDATE_VIEW.PROFILE_POINT, userInfo.pointamount);

                                        addCDEle();
                                        // countdown
                                        sInfo.freelist.canreceive = 2;
                                        sInfo.freelist.remaintime = res.remaintime;
                                        setCountdown(sInfo.freelist.remaintime, jq('#remain-free'), function(){
                                            //  .   
                                            jq('#remain-free').parent().remove();
                                            sInfo.freelist.canreceive = 1;
                                        });
                                    }else if(res.returncode === CODE.SUCCESS_ERROR){
                                        // todo : error exception
                                        UI_message(MESSAGES.ERROR_OCCURRED, 'OK');
                                    }else {
                                        // etc;     
                                        UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                                    }
                                });
                            }else {
                                UI_message(MESSAGES.FREE_POINT_IS_NOT_READY, 'OK', function () {
                                })
                            }
                        }else if(type == 'ads'){
                            item = sInfo.adslist;
                            if(Number(item.watchcnt) >= Number(item.maxwatchcnt)){
                                UI_message(MESSAGES.AD_WATCHED_ALL, null);
                                return;
                            }

                            addLoading();

                            var adslogno;
                            fn.STARTADS(function(res){
                                if(res.returncode == CODE.SUCCESS){
                                    adslogno = res.adslogno;
                                    fn.IGAPI.AD.SHOW('rewardVideo', function(){
                                        // watched reward
                                        // canreceive: "0" 1 = can | 2 = can not
                                        // maxwatchcnt: "10"
                                        // watchcnt: "0"
                                        // rewardruby: "20"

                                        function finishAd(){
                                            fn.FINISHADS(adslogno, function(res){
                                                removeLoadingIcon();
                                                if(res.returncode == CODE.SUCCESS){

                                                    sInfo.adslist.watchcnt = Number(sInfo.adslist.watchcnt) + 1;
                                                    jq('.watchcount').html('('+sInfo.adslist.watchcnt+'/'+sInfo.adslist.maxwatchcnt+')');
                                                    userInfo.rubyamount = Number(res.rubyamount);
                                                    _api.setMyInfo(userInfo);
                                                    updateView(UPDATE_VIEW.PROFILE_RUBY, userInfo.rubyamount);

                                                }else if(res.returncode === CODE.SUCCESS_ERROR){
                                                    // todo : error exception
                                                    UI_message(MESSAGES.ERROR_OCCURRED_TRY_AGAIN, 'OK', function(e){
                                                        if(e){
                                                            // user clicked the close button
                                                        }else {
                                                            finishAd();
                                                        }
                                                    });
                                                }else {
                                                    // etc;     
                                                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                                                }
                                            });
                                        }
                                        finishAd();
                                    }, function(err){

                                        removeLoadingIcon();
                                        UI_message(MESSAGES.AD_IS_NOT_READY, 'OK', function () {
                                        })
                                    })
                                }else if(res.returncode === CODE.SUCCESS_ERROR){
                                    // todo : error exception
                                    removeLoadingIcon();
                                    // -1 = You can not see the Free Ads.
                                    UI_message(MESSAGES.ERROR_OCCURRED, 'OK');
                                }else {
                                    // etc;     
                                    removeLoadingIcon();
                                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                                }
                            });
                        }
                        if(false) console.log('item', item);

                });
            });

        }

        function getLBData(tabIdx, lbType, page, onComplete){
            fn.GETLEADERBOARD(lbType, ITEMS_PER_LIST, page, function(res){
                if(res.returncode == CODE.SUCCESS) {
                    clearIntvEvents();
                    var lInfo = res;
                    if(false) console.log('Got leaderboard info', lbType, lInfo);

                    removeLoadingIcon();

                    var $tabCons = jq('.tab-content').children().eq(tabIdx);

                    lInfo.leadertype = lbType;
                    var str = fn.UI_TEMPLATE.getLeaderboard(tabIdx, lInfo);
                    if(page == 1){
                        _tab.addContent(tabIdx, str);
                    }else {
                        var $list = $tabCons.find('.rank-list .item-list');
                        jq(str).appendTo($list);
                    }

                    // setUpSceneEvents();

                    var isios = _util.isIOS();
                    if(!isios){
                        setTimeout(function(){
                            var sparkle = new ParticleEmitter({
                                src : 'static/img/twinkle.png',
                                amount : 4,
                                container : '.sparkle-con',
                                minScale : .2,
                                maxScale : .4
                            });
                            sparkles.push(sparkle);
                        }, aniDur);
                    }

                    setCountdown(lInfo.remaintime, $tabCons.find('.countdown'));
                    if(onComplete) onComplete(res);

                }else if(res.returncode === CODE.SUCCESS_ERROR){
                    // todo : error exception
                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED_TRY_AGAIN, 'OK', function (e) {
                        getLBData(tabIdx, lbType, page, onComplete);
                    });
                }else {
                    // etc;     
                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED_TRY_AGAIN, 'OK', function (e) {
                        getLBData(tabIdx, lbType, page, onComplete);
                    });
                }
            });
        }

        function UI_rank(onComplete){

            clearIntvEvents();

            var str = ''+
                '<div id="tab" class="tab-wrapper rank">'+
                    '<div class="tab-header">'+
                        '<ul class="tab tab-all-2 con-flex cf-hor-space-between">'+
                            '<li><button type="button"><span>practice</span></button></li>'+
                            '<li><button type="button"><span>pro</span></button></li>'+
                        '</ul>'+
                        '<span class="tab-active-indicator transition"></span>'+
                    '</div>'+
                    '<div class="tab-content transition con-flex">'+
                        '<div class="tab-con"><!-- contetn 1 -->'+
                        '</div>'+
                        '<div class="tab-con"><!-- contetn 2 -->'+
                        '</div>'+
                    '</div>'+
                '</div>';

            renderPage(str);

            // code order is important
            setUpSceneEvents();
            // detectScroll(jq('.'+eleClass.view.content));
            detectScroll(jq('.tab-wrapper'));

            var LB_TYPE = {
                PRACTICE : 1,
                MATCH : 2
            };

            _tab.openCb = function(idx){
                // a tab opened. idx is the number of the opened tab
                var pageNo = 1;
                var hasNext = 0;    // 0 = no

                addLoading();
                var _idx = idx;
                var lbType = LB_TYPE.PRACTICE; // for idx = 0;
                if(_idx == 1){
                    lbType = LB_TYPE.MATCH;
                }

                var maxItem = 100;
                var scroller = new ScrollDownListener({
                    selector: '.tab-wrapper',
                    onScrollAtTheEnd: function(){
                        if(pageNo * ITEMS_PER_LIST < maxItem && hasNext == 1){ // display up to 100
                            pageNo++;
                            if(false) console.log('scroll event', pageNo);
                            addLoading();
                            getLBData(_idx, lbType, pageNo, function (res) {
                                hasNext = res.hasnext;
                                scroller.eventCallbackFinished();
                            });
                        }
                    }
                })

                getLBData(_idx, lbType, pageNo, function (res) {
                    hasNext = res.hasnext;
                    jq('.tab-content').children().each(function(idx){
                        if(_idx != idx){
                            jq(this).empty();
                        }
                    });
                });
            };
            _tab.open(0);
        }

        function checkEntryFee(type, fee){
            var res = false;
            var _fee = Number(fee);
            var userInfo = _api.getMyInfo();
            if(type == 2 || type == 4){  // match(challenge)
                if(Number(userInfo.rubyamount) >= _fee){
                    res = true;
                }
            }else {
                if(Number(userInfo.pointamount) >= _fee){
                    res = true;
                }
            }
            return res;
        }

        function getFriendLB(lbName, onComplete, onError) {
            if(!friendChallengeLB){
                fn.GETFRIENDSLEADER(function(res){
                    if(res.returncode == CODE.SUCCESS) {
                        friendChallengeLB = res.list;
                        if(onComplete) onComplete(friendChallengeLB);
                    }else if(res.returncode == CODE.SUCCESS_ERROR){
                        UI_message(MESSAGES.ERROR_OCCURRED, 'OK');
                    }else {
                        // etc;     
                        UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                    }
                })
            }else {
                if(onComplete) onComplete(friendChallengeLB);
            }
        }

        /**
         *
         * @param data obj. optional.
         *      payload object.
         *      oppoObj object. for single play result in game, new/continue play
         * @param onStart func. required
         * @constructor
         */
        function UI_challenge_check_data(data, onStart){
            var _data = data;

            // data from game, doesn't have 'isRecomminfo
            if(data.oppoObj === null || data.oppoObj){
                if(data.oppoObj){
                    _data = data.oppoObj;
                    if(_data.opporoomid && data.opporoomid != ''){
                        _data.isRecomminfo = true;
                    }
                }
                // no case yet for 'data.oppoObj === null'
            }

            if(_data.isRecomminfo){    // recommended
                _room = {
                    id : _data.opporoomid
                };
            }else if(_data.issecondplay == 1){
                _room = {
                    id : _data.roomid
                };
            }
            UI_challenge(_data, onStart);
        }

        /**
         * Show tutorial
         * @param type
         * @param data
         * @param arg1
         * @param arg2
         * @return {boolean} true if the tutorial begins
         */
        function showTutorial(type, data, arg1, arg2){
            var _tut = fn.API.getTutorial();
            var show = false;
            if(type == 'list') {
                if(!_tut.challenge.list){
                    show = true;
                    setTimeout(function(){
                        var $super = jq('.'+eleClass.view.super);
                        var $btn = jq('.panel-wrapper').eq(2);
                        var $foldBtn = $btn.find('.btn-fold');
                        var pos = $foldBtn.offset();
                        var dist = w.innerHeight - $btn[0].scrollTop; //pos.top; //Math.abs(pos.top - $super.outerHeight() - $foldBtn.outerHeight() - 130);
                        var aniDur = 1000;
                        // scroll down;

                        jq('.pa-view-content').animate({ scrollTop: dist }, {duration: aniDur});

                        setTimeout(function(){
                            // pick up the sec 'novice challenge'
                            var $match = jq('.panel-wrapper').eq(2).find('.item-list > .pc-con').eq(1);
                            var $helpDiv = jq('<div class="pa-view-float help transition"></div>')
                            var $clone = $match.clone();
                            $clone.appendTo($helpDiv);
                            $clone.outerWidth($match.outerWidth());
                            $clone.outerHeight($match.outerHeight());
                            var $super = jq('.'+eleClass.view.super);
                            var left = $match.offset().left - $super.offset().left;
                            var top = $match.offset().top - $super.offset().top;
                            // if(false) console.log($match.offset(), $match.scrollLeft(), $match.scrollTop())
                            $clone.css({top: top, left: left});
                            $clone.css({position: 'absolute'});
                            $helpDiv.appendTo('.'+eleClass.view.super);
                            setTimeout(function(){
                                $helpDiv.addClass('dimm-on');
                                // add arrow
                                var $arrow = jq('<img src="static/img/arrow-down.png" class="help-arrow">');
                                $arrow.appendTo($helpDiv);
                                var $playBtn = $clone.find('.play-info > div');
                                var left = $playBtn.offset().left - $super.offset().left + $playBtn.outerWidth()/2;
                                var top = $playBtn.offset().top - $super.offset().top;
                                $arrow.css({top: top, left: left});
                                // give some delay for iOS
                                setTimeout(function(){
                                    $arrow.addClass('on');
                                }, 210);
                            }, 300)
                            $clone.find('button').on('click', function(e){
                                if(false) console.log('clone clicked')
                                $helpDiv.remove();
                                matchBtnClick(e, data);
                                _tut.challenge.list = true;
                                fn.API.setTutorial(_tut, true);
                            });
                        }, 310 + aniDur);
                    }, 100)
                }
            }else if(type == 'start'){
                if(!_tut.challenge.start){
                    show = true;
                    setTimeout(function(){
                        setTimeout(function(){
                            // pick up the sec 'novice challenge'
                            var $match = jq('.'+eleClass.view.scene+'.sub .btn-gradient');
                            var $helpDiv = jq('<div class="pa-view-float help transition"></div>')
                            var $clone = $match.clone();
                            $clone.appendTo($helpDiv);
                            $clone.outerWidth($match.outerWidth());
                            $clone.outerHeight($match.outerHeight());
                            var $super = jq('.'+eleClass.view.super);
                            var left = $match.offset().left - $super.offset().left;
                            var top = $match.offset().top - $super.offset().top;
                            // if(false) console.log($match.offset(), $match.scrollLeft(), $match.scrollTop())
                            $clone.css({top: top, left: left});
                            $clone.css({position: 'absolute'});
                            $helpDiv.appendTo('.'+eleClass.view.super);
                            setTimeout(function(){
                                $helpDiv.addClass('dimm-on');
                                // add arrow
                                var $arrow = jq('<img src="static/img/arrow-down.png" class="help-arrow">');
                                $arrow.appendTo($helpDiv);
                                var $playBtn = $match; // the same element
                                var left = $playBtn.offset().left - $super.offset().left + $playBtn.outerWidth()/2;
                                var top = $playBtn.offset().top - $super.offset().top;
                                $arrow.css({top: top, left: left});
                                // give some delay for iOS
                                setTimeout(function(){
                                    $arrow.addClass('on');
                                }, 210);
                            }, 300)
                            $clone.on('click', function(e){
                                if(false) console.log('clone clicked')
                                $helpDiv.remove();
                                startBtnClick(e, data, arg1, arg2); // arg1 = status, arg2 = onStart
                                _tut.challenge.start = true;
                                fn.API.setTutorial(_tut, true);
                            });
                        }, 310);
                    }, 100)
                }
            }else if(type == 'result'){
                if(!_tut.challenge.result){
                    show = true;
                    setTimeout(function(){
                        setTimeout(function(){
                            // pick up the sec 'novice challenge'
                            var $match = jq('.'+eleClass.view.scene+'.sub .btn-gradient');
                            var $helpDiv = jq('<div class="pa-view-float help transition"></div>')
                            var $clone = $match.clone();
                            $clone.appendTo($helpDiv);
                            $clone.outerWidth($match.outerWidth());
                            $clone.outerHeight($match.outerHeight());
                            var $super = jq('.'+eleClass.view.super);
                            var left = $match.offset().left - $super.offset().left;
                            var top = $match.offset().top - $super.offset().top;
                            // if(false) console.log($match.offset(), $match.scrollLeft(), $match.scrollTop())
                            $clone.css({top: top, left: left});
                            $clone.css({position: 'absolute'});
                            $helpDiv.appendTo('.'+eleClass.view.super);
                            setTimeout(function(){
                                $helpDiv.addClass('dimm-on');
                                // add arrow
                                var $arrow = jq('<img src="static/img/arrow-down.png" class="help-arrow">');
                                $arrow.appendTo($helpDiv);
                                var $playBtn = $match; // the same element
                                var left = $playBtn.offset().left - $super.offset().left + $playBtn.outerWidth()/2;
                                var top = $playBtn.offset().top - $super.offset().top;
                                $arrow.css({top: top, left: left});
                                // give some delay for iOS
                                setTimeout(function(){
                                    $arrow.addClass('on');
                                }, 210);
                            }, 300)
                            $clone.on('click', function(e){
                                if(false) console.log('clone clicked')
                                $helpDiv.remove();
                                resultBtnClick();
                                _tut.challenge.result = true;
                                fn.API.setTutorial(_tut, true);
                            });
                        }, 310);
                    }, 100)
                }
            }
            return show;
        }

        /**
         * In challenge scene
         * @param e
         * @param data
         * @param status
         * @param onStart
         */
        function startBtnClick(e, data, status, onStart){
            // remove autoStart interval
            clearTimeout(_timeIntv3);
            clearInterval(_timeIntv3);
            _timeIntv3 = null;

            var $this = jq(e.currentTarget);
            var _data = data, _status = status;
            if(false) console.log('data', _data);
            ////////        _data : random match
            // matchtype: "1"
            // playtype: "1"
            // matchsetno: "1"
            // matchtitle: "NOVICE CHALLENGE"
            // description: "TRY TO GET RUBY"
            // entryfee: "6"
            // rewardamount: "10"
            // rewardtrophy: "100"
            // maxmember: "2"

            // check entry fee
            var canEnter = checkEntryFee(_data.matchtype, _data.entryfee);

            if(canEnter){
                friendChallengeLB = null;

                if(_status.status != 3){    // good to go

                }

                addLoading();
                // if it's user
                var oppoid = null;
                // user oppo id is encrypted here, should be decrypted for 'startmatch'
                // if(_status.opinfo.fbid && (_status.opinfo.fbid.indexOf('RBT_EMOJIS') == -1 || _status.opinfo.fbid.indexOf('REUSED_EMOJIS') == -1)){
                    // always send oppoid
                    oppoid = _status.opinfo.fbid;
                // };
                var _gamedata = {};
                _gamedata[_status.myinfo.id] = _status.myinfo.gamedata;
                if(_status.opinfo.id) _gamedata[_status.opinfo.id] = _status.opinfo.gamedata;
                fn.STARTMATCH(_data.matchsetno, oppoid, _gamedata, function (res) {
                    // res obj
                    // returncode: "100"
                    // message: "success"
                    // matchno: 1

                    if(res.returncode == CODE.SUCCESS) {
                        if(false) console.log('random match began', res);

                        var _res = {};
                        if(res.matchno){
                            _matchNo_ = res.matchno;
                        }
                        _res.myinfo = _status.myinfo;
                        _res.oppoinfo = _status.opinfo;
                        if(!_res.myinfo.gamedata) _res.myinfo.gamedata = {};
                        if(!_res.oppoinfo.gamedata) _res.oppoinfo.gamedata = {};

                        _res.matchsetno = _data.matchsetno;
                        _res.matchresult = '1'; // set as pending(ongoing) //_data.matchresult; no matchresult in random play
                        _res.rewardamount = _data.rewardamount;
                        _res.rewardtrophy = _data.rewardtrophy;
                        _res.entryfee = _data.entryfee;
                        _res.matchtype = _data.matchtype;
                        _res.playtype = 1; // _data.playtype; todo: check this with Eddie

                        _match_ = _res;
                        var match = { match : _res };
                        if(_data.isNewContinue){
                            function doSave(){
                                // set _matchNo_ as well
                                _match_.matchno = _matchNo_;
                                var newconObj = {
                                    _sdk_newcontinue : JSON.stringify(_match_)
                                };
                                fn.IGAPI.PLAYER.SETCUSTOMSAVEDATA(newconObj, function(res){
                                    removeLoadingIcon();
                                    UI_match_countdown(function(){
                                        hideView();
                                        if(onStart) onStart('match', match);
                                        // if(typeof gameFuncCall != 'undefined') gameFuncCall('match', match);
                                    })
                                }, function(err){
                                    // removeLoadingIcon();
                                    UI_message(MESSAGES.ERROR_OCCURRED_TRY_AGAIN, 'Ok', function(e){
                                        if(e){
                                            // user clicked the close button
                                        }else {
                                            doSave();
                                        }
                                    });
                                });
                            }
                            doSave();
                        }else {
                            removeLoadingIcon();
                            UI_match_countdown(function(){
                                hideView();
                                if(onStart) onStart('match', match);
                                // if(typeof gameFuncCall != 'undefined') gameFuncCall('match', match);
                            })
                        }


                    }else if(res.returncode === CODE.SUCCESS_ERROR){
                        // todo : error exception
                        removeLoadingIcon();
                        UI_message(MESSAGES.ERROR_OCCURRED, 'OK');
                    }else {
                        // etc;     
                        removeLoadingIcon();
                        UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                    }
                });

            }else {

                var conStr = fn.UI_TEMPLATE.getMsgLackOfEntryFee();
                UI_message(conStr, 'Get Entry Fee', function(e){
                    if(e){
                        // user clicked the close button
                    }else {
                        fn.UI.CALL(menus[MENUS.SHOP], onShopParams, onCompleteFunc);
                    }
                });
            }
        }

        /**
         *
         * @param data object. the data param will be sent from UI_match
         *  match object. match info
         * @param onStart func. match info
         * @param isPayload bool. true when data is from payload
         * @constructor
         */
        function UI_challenge(data, onStart, isPayload){
            showView();
            if(false) console.log('challenge', data);
            clearIntvEvents();

            var _data = data;
            var _status = null;
            var str = fn.UI_TEMPLATE.getChallenge(_data);
            renderPage(str, true, true);

            setUpSubSceneEvents(true, function(){
                var goTo = MENUS.MATCH; // default
                if(challengeFrom == MENUS.RESULT){
                    goTo = MENUS.RESULT;
                }
                fn.UI.CALL(menus[goTo], null, onCompleteFunc);
                friendChallengeLB = null;
            });

            /**
             * Start automatically 2 sec later when the scene is ready
             */
            function autoStart(){
                _timeIntv3 = setTimeout(function(){
                    clearTimeout(_timeIntv3);
                    _timeIntv3 = null;
                    jq('#start-challenge').click();
                }, 2000);
            }

            function updateOppoView(data2){
                // --- case 1; PLAYER.SELECTFRIEND. empty info. real, but friend who hasn't played the game yet
                // fbid: ""
                // country: ""
                // name: ""
                // photo: "data:image/png;base64,iVBORw0KGgoAAAANS..."
                // --- case 2; PLAYER.SELECTFRIEND. MATCH.CHALLENGERANDOM. existing info. real user
                // fbid: "123123123"
                // country: "KR"
                // name: ""
                // photo: "http(s)://..."
                // --- case 3; MATCH.CHALLENGERANDOM existing info. bot
                // id: "RBT_EMOJIS_69rpqJJsV"
                // name: "Matthew"
                // fbid: "RBT_EMOJIS_69rpqJJsV_GB_57"
                // photo: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD"
                // locale: "EN"
                // currentP: 0
                var $p2 = jq('.c-player.no2');
                var $name = $p2.find('.chg-name');
                var $flag = $p2.find('.chg-flag');
                var $photo = $p2.find('.chg-img');

                var _data = data2;

                $name.html(_data.name);
                $flag.html('<img src="static/img/flags/'+_data.country+'.png">');
                $photo.html('<img src="'+_data.photo+'" onerror="'+profileImgPolyfill+'">');
            }

            // always random play
            // if(_data.matchtype >= 3) {    // recommended opponent, 3 = match 4 = practice
            if(_data.isRecomminfo || _data.issecondplay == 1) {    // recommended opponent, 3 = match 4 = practice
                // description: "TRY TO GET POINT"
                // entryfee: "3"
                // handlername: ""
                // issecondplay: 0
                // matchsetno: "22"
                // matchtitle: "RECOMEND CHALLENGE"
                // matchtype: "3"
                // maxmember: "2"
                // oppocountry: "GB"
                // oppomatchno: "1010"
                // opponickname: "Susan"
                // oppophoto: "https://platform-lookaside.fbsbx.com/platform/instantgames/profile_pic.jpg?igpid=3045596218852277&height=256&width=256&ext=1597189976&hash=AeTKk2xgYEaeG2Ap"
                // opporoomid: "etWD7PPbaXcX200716"
                // oppouniqueid: "3045596218852277"
                // oppouserno: "1287"
                // playtype: "1"
                // rewardamount: "6"
                // rewardtrophy: "0"

                removeLoadingIcon();
                var _fakeSec = 0;

                _timeIntv3 = setTimeout(function() {
                    isSearchingRandomOppo = false;
                    jq('.vs-loading').hide();

                    if(_data.issecondplay != 1 || _data.isRecomminfo){ // if(!_data.myinfo){ // first challenge
                        // var userInfo = fn.IGAPI.PLAYER.GETINFO();
                        var userInfo2 = fn.PLAYER.GETINFO();
                        _status = {
                            opinfo : {
                                fbid : _data.oppouserid,
                                id : _data.oppouserid,
                                name : _data.opponickname,
                                photo : _api.replacePhotoPath(_data.oppophoto),
                                country : _data.oppocountry,
                                gamedata: {score: 0}
                            },
                            myinfo : {
                                fbid: userInfo2.id,
                                id: userInfo2.id,
                                name: userInfo2.nickname,
                                photo: userInfo2.photo,
                                country: userInfo2.countryCode,
                                gamedata : {score: 0}
                            }
                        };
                        _status.oppomatchno = _data.oppomatchno;
                        var _gamedata = (typeof getGameData !== 'undefined') ? getGameData('match') : {};
                        for(var i in _gamedata){
                            _status.opinfo.gamedata[i] = _gamedata[i];
                            _status.myinfo.gamedata[i] = _gamedata[i];
                        }
                        if(_data.issecondplay){
                            if(_data.opposcore != '') _status.opinfo.gamedata.score = _data.opposcore;
                        }
                    }else {
                        // request info case, _status is not defined
                        if(!_status) _status = {};
                        _status.opinfo = _data.oppoinfo;
                        _status.myinfo = _data.myinfo;
                    }
                    // roomid is generated when start button is clicked

                    updateOppoView(_status.opinfo);

                    // tutorial
                    var isShow = showTutorial('start', data, _status, onStart);

                    jq('#start-challenge').prop('disabled', false);

                    if(!isShow) autoStart();
                }, _fakeSec * 1000);

            }else {
                jq('.vs-loading').show();
                // var _gamedata = (onMatchParams) ? onMatchParams : null;
                var _gamedata = (typeof getGameData !== 'undefined') ? getGameData('match') : {};
                fn.MATCH.CHALLENGERANDOM(_data.handlername, _gamedata, function(res){
                    if(false) console.log('MATCH.CHALLENGERANDOM : res', res);
                    isSearchingRandomOppo = true;

                    var cdRan = false;
                    _timeIntv3 = setInterval(function(){
                        _status = fn.MATCH.GETSTATUS();
                        if(false) console.log('status', _status, 'roomid', _status.roomid);
                        if(_status.status == N_POPUP_STATUS.SEARCHING) {
                            if(_status.time <= 10){
                                cdRan = true;
                                isSearchingRandomOppo = false;

                                jq('.vs-loading').hide();

                                // no oppoinfo
                                _status.opinfo = {
                                    // id shouldn't be set
                                    name : 'Opponent',
                                    photo : 'static/img/random-profile.png',
                                    country : 'ZZ'
                                };

                                // update oppoinfo on view
                                updateOppoView(_status.opinfo);

                                // tutorial
                                var isShow = showTutorial('start', data, _status, onStart);

                                clearInterval(_timeIntv3);
                                _timeIntv3 = null;

                                jq('#start-challenge').prop('disabled', false);

                                if(!isShow) autoStart();

                            }
                        }else if(_status.status == N_POPUP_STATUS.COUNTDOWN){
                            if(!cdRan){
                                cdRan = true;
                                isSearchingRandomOppo = false;
                                jq('.vs-loading').hide();

                                // update opinfo's country to 'US', if it's 'EN'.
                                if(_status.opinfo.country == 'EN'){
                                    _status.opinfo.country = 'US';
                                }

                                // update oppoinfo on view
                                updateOppoView(_status.opinfo);

                                // tutorial
                                var isShow = showTutorial('start', data, _status, onStart);

                                clearInterval(_timeIntv3);
                                _timeIntv3 = null;

                                jq('#start-challenge').prop('disabled', false);

                                // Sometimes even if there is error that there is no opponent, game can be began
                                // in random play, oppo info is always given
                                if(_status.opinfo.fbid == '' && _status.opinfo.name == ''){
                                    UI_message(MESSAGES.ERROR_OCCURRED, 'OK', function (e) {
                                        // go back to match
                                        fn.UI.CALL(menus[MENUS.MATCH], onMatchParams, onCompleteFunc);
                                    });
                                    return;
                                }

                                if(!isShow) autoStart();

                            }
                        // }else if(_status.status == N_POPUP_STATUS.GAMESTART){
                        //     // clearInterval(_timeIntv3);
                        //     // _timeIntv3 = null;
                        }else if(_status.status == N_POPUP_STATUS.SEARCHING_TIMEOUT){
                            clearInterval(_timeIntv3);
                            _timeIntv3 = null;
                            isSearchingRandomOppo = false;
                            jq('.vs-loading').hide();
                            UI_message(MESSAGES.MATCH_TIMED_OUT, 'OK', function (e) {
                                // go back to match
                                fn.UI.CALL(menus[MENUS.MATCH], onMatchParams, onCompleteFunc);
                            });
                        }
                    }, 10);
                })
            }


            var btnClicked = false;
            jq('#start-challenge').on('click', function(e){
                if(btnClicked) return;
                btnClicked = true;
                startBtnClick(e, _data, _status, onStart);
            })
        }

        function getFriendCountry(oppoObj, onComplete, onError){
            var lbName = _api.getLBName();  // not used since 1.41
            if(false) console.log('get lb', lbName);
            getFriendLB(lbName, function(list){
                if(false) console.log('get flag : lb list', list);
                var opObj = oppoObj;
                if(list.length > 0){
                    var oppoData = list.filter(function(val, idx){
                        if(opObj.fbid == val.fbid){
                            opObj.country = val.country;
                        }
                    });
                }
                if(onComplete) onComplete(opObj);

            }, function(){
                if(onError) onError();
            });
        }

        function resultBtnClick(){
            fn.UI.CALL(menus[MENUS.RESULT], onMatchParams, onCompleteFunc);
        }

        /**
         *
         * @param type MATCH_RESULT
         * @param data
         *      'match' object.
         *      'score' number. player's score. This will be set when this is called after a game played
         *      'isView' bool. set true when this is called by clicking a match on Home. data is already given
         * @constructor
         */
        function UI_result_challenge(data){
            if(false) console.log('ui result challenge', data);
            clearIntvEvents();
            jq('.'+eleClass.view.scene+'.sub').empty();
            addLoading();

            var _match = data.match;

            if(data.isView){

                var str = fn.UI_TEMPLATE.getChallengeResult(_match);
                renderPage(str, true);
                removeLoadingIcon();
                setUpSubSceneEvents();

                // tutorial
                showTutorial('result', data);

                jq('#btn-next').on('click', function(e){
                    // rematch
                    var _res = _match;
                    var _data = data;
                    if(_res.playtype == 1) { // random
                        resultBtnClick();
                    }else {
                        if(_res.matchresult == 1){  // pending
                            resultBtnClick();
                        }else {

                            function doPlay(){
                                if(false) console.log('rematch', _res, data);
                                // reset data
                                _matchNo_ = null;
                                _data.match.issecondplay = 0;
                                _data.match.matchresult = 1; //pending
                                _data.match.myinfo.gamedata.score = 0;
                                _data.match.oppoinfo.gamedata.score = 0;
                                delete _data.match.roomid;
                                UI_challenge(_data.match, onCompleteFunc);
                            }
                            function doAsk(){
                                var conStr = fn.UI_TEMPLATE.getMsgChallengeAgain(_match.oppoinfo.name);
                                UI_message(conStr, 'Yes, Play Now!', function (e) {
                                    if (e) {
                                        // user clicked close button
                                        resultBtnClick();
                                    } else {
                                        doPlay();
                                    }
                                })
                            }
                            function doCtx(){
                                // the same context case is already checked when this api is called
                                fn.IGAPI.CONTEXT.CREATE(_match.oppoinfo.fbid, function(){
                                    var opObj = _match.oppoinfo;
                                    getFriendCountry(opObj, function(oppoObj){
                                        _match.oppoinfo = oppoObj;
                                        doPlay();
                                    }, function(err){
                                        UI_message(MESSAGES.ERROR_OCCURRED, 'OK', function (e) {
                                            if (e) {
                                                // user clicked close button
                                                resultBtnClick();
                                            } else {
                                                doCtx();
                                            }
                                        });
                                    });
                                }, function (err) {
                                    if(err.code == 'USER_INPUT'){
                                        resultBtnClick();
                                    }else {
                                        UI_message(MESSAGES.ERROR_OCCURRED, 'OK', function (e) {
                                            if (e) {
                                                // user clicked close button
                                                resultBtnClick();
                                            } else {
                                                doCtx();
                                            }
                                        });
                                    }
                                })
                            }
                            // check ctx type
                            if(fn.IGAPI.CONTEXT.GETINFO().type === 'SOLO'){
                                doCtx();
                            }else {
                                function doGetCtxPlayer(){
                                    fn.IGAPI.CONTEXT.GETPLAYERS(function(res){
                                        var hasFriend = false;
                                        res.filter(function(ele, idx){
                                            if(ele.id == _match.oppoinfo.fbid){
                                                hasFriend = true;
                                            }
                                        });
                                        if(hasFriend){ // same context
                                            doAsk();
                                        }else { // different context
                                            doCtx();
                                        }

                                    }, function (err) {
                                        UI_message(MESSAGES.ERROR_OCCURRED, 'OK', function (e) {
                                            if (e) {
                                                // user clicked close button
                                                resultBtnClick();
                                            } else {
                                                doGetCtxPlayer();
                                            }
                                        });
                                    })
                                }
                                doGetCtxPlayer();
                            }
                        }
                    }
                });

            }else {
                _match = _match_;
                // '_match_', '_matchNo_' is set when 'startMatch' is called
                if(false) console.log('matchno', _matchNo_)
                var _data = data;
                fn.FINISHMATCH(data.score, _matchNo_, function(res){
                    _match.myinfo.gamedata.score = data.score;
                    if(res.returncode == CODE.SUCCESS) {
                        _match.oppoinfo.gamedata.score = res.opposcore;

                        var _res = res;
                        // sometimes, 'playtype' is missing from the res
                        if(!_res.playtype) _res.playtype = 1; // _match.playtype; 1; // todo: check this with Eddie
                        function _savedata(){
                            // set score to fb leaderboard, if it's being used
                            // _api.setFBLB(_data.leaderboard, _data.score, {country: _match.myinfo.country}, function(err){
                            //     if(err){
                            //         UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED_TRY_AGAIN, 'OK', function (e) {
                            //             _savedata();
                            //         });
                            //     }else {
                                    _match.matchresult = _res.matchresult;
                                    var str = fn.UI_TEMPLATE.getChallengeResult(_match);
                                    renderPage(str, true);

                                    if(_match.playtype == 1){  // random
                                        removeLoadingIcon();
                                        setUpSubSceneEvents();
                                    }else { // friend
                                        _saveData2();   // todo ; maybe friend play is not used
                                    }

                                    // update reward
                                    if(_res.matchresult == MATCH_RESULT.WIN){
                                        playSound('win', 'play');
                                        if(_res.matchtype == 1){  // match(challenge), ruby
                                            updateView(UPDATE_VIEW.PROFILE_RUBY, _res.rewardamount);
                                        }else { // practice
                                            updateView(UPDATE_VIEW.PROFILE_POINT, _res.rewardamount);
                                        }
                                    }else if(_res.matchresult == MATCH_RESULT.LOSE){
                                        playSound('lose', 'play');
                                    }

                                    if(_res.matchresult == MATCH_RESULT.WIN || _res.matchresult == MATCH_RESULT.LOSE) {
                                        showWinnerAni(_res.matchtype, _res.rewardamount);
                                    }

                                    // tutorial
                                    showTutorial('result', data);

                                    // 'next' button
                                    jq('#btn-next').on('click', function(){
                                        if(_res.playtype == 1){ // random
                                            resultBtnClick();
                                        }else { // friend
                                            // rematch
                                            if(_res.matchresult == 1){  // pending
                                                resultBtnClick();
                                            }else {
                                                // it's the same context
                                                var conStr = fn.UI_TEMPLATE.getMsgChallengeAgain(_match.oppoinfo.name);
                                                UI_message(conStr, 'Yes, Play Now!', function (e) {
                                                    if(e){
                                                        // user clicked close button
                                                        resultBtnClick();
                                                    }else {
                                                        if(false) console.log('rematch', _res, data);

                                                        // reset data
                                                        _matchNo_ = null;
                                                        _data.match.issecondplay = 0;
                                                        _data.match.matchresult = 1; //pending
                                                        _data.match.myinfo.gamedata.score = 0;
                                                        _data.match.oppoinfo.gamedata.score = 0;
                                                        delete _data.match.roomid;
                                                        UI_challenge(_data.match, onCompleteFunc);
                                                    }
                                                });
                                            }
                                        }
                                    });
                                // }
                            // });
                        }

                        function _saveData2(){
                            var _update = _data.update;
                            // if payload data is more than 1000byte, it causes error.
                            var _nMatch = JSON.parse(JSON.stringify(_match));
                            _nMatch.myinfo.photo = null;
                            _nMatch.oppoinfo.photo = null;
                            var payload = {
                                action : 'challenge',
                                data : _nMatch
                            };
                            // test
                            // _update.text += ', result:'+_match.matchresult;
                            _api.sendUpdate(_update.text, _update.cta, _update.image, payload, function(err){
                                if(err){
                                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED_TRY_AGAIN, 'OK', function (e) {
                                        _saveData2();
                                    });
                                }else {
                                    removeLoadingIcon();
                                    setUpSubSceneEvents();
                                    UI_message('FB Message has been sent', 'OK');
                                }
                            })
                        }

                        _savedata();

                    }else if(res.returncode === CODE.SUCCESS_ERROR){
                        // todo : error exception
                        removeLoadingIcon();
                        UI_message(MESSAGES.ERROR_OCCURRED, 'OK');
                    }else {
                        // etc;     
                        removeLoadingIcon();
                        UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                    }

                });
            }

        }

        var winnerSparkle = null;
        /**
         *
         * @param type string. 1 = ruby, 2 = point
         * @param amount string
         */
        function showWinnerAni(type, amount){
            var _amount = Math.ceil(amount / 3);
            if(_amount > 20) _amount = 20;
            var $winnerDiv = jq('.winner');
            var $rewardFrom = jq('.challenge-reward img');

            var runFinal = false;
            if($rewardFrom.length > 0){
                var reward = (type == 1) ? '' : 'point';
                // create particles
                setTimeout(function(){
                    var particle = new ParticleShoot({
                        amount : _amount,
                        cloneObj : '.challenge-reward img',
                        container : '.'+eleClass.view.scene+'.sub',
                        target : '.winner .ri-img',
                        interval : .1,  // in sec
                        onProgress : function(cnt){
                            if(false) console.log('cnt', cnt);
                            var isAlmostFinal = (cnt >= parseInt(_amount/2.5));
                            if(isAlmostFinal && !runFinal){
                                runFinal = true;
                                if(false) console.log('show highlight');
                                $winnerDiv.addClass('effect-on');
                                jq('.winner .ani-win.halo1, .winner .ani-win.halo2').addClass('transition');
                                setTimeout(function(){
                                    $winnerDiv.removeClass('effect-on');
                                }, 1300);
                            }
                        }
                    })
                }, aniDur+100);

                winnerSparkle = new ParticleEmitter({
                    src : 'static/img/twinkle.png',
                    amount : 4,
                    container : '.winner .ani-win.twinkle',
                    minScale : .2,
                    maxScale : .45
                });
            }
        }

        /**
         *
         * @param options
         *  amount
         *  target
         *  container
         *  cloneObj
         *  interval
         *  onProgress
         * @constructor
         */
        var ParticleShoot = function(options){
            var self = this;
            var _opt = (options) ? options : {};
            this.amount = (_opt.amount) ? _opt.amount : 10;

            var $con = jq(_opt.container);
            var $target = jq(_opt.target);
            var $cloneObj = jq(_opt.cloneObj);
            var $super = jq('.'+eleClass.view.super);

            var fromPos = $cloneObj.offset();
            var superPos = $super.offset();
            fromPos.top = fromPos.top - superPos.top;
            fromPos.left = fromPos.left - superPos.left;
            var toPos = $target.offset();
            toPos.top = toPos.top - superPos.top + ($target.width() - $cloneObj.width())/2;
            toPos.left = toPos.left - superPos.left + ($target.height() - $cloneObj.height())/2;

            var cnt = 0, prevCnt = 0;
            var startAni = new Ani();
            startAni.run(function(dt){
                var cnt = Math.ceil(dt/_opt.interval);
                if(prevCnt != cnt){
                    var idx = cnt - 1;
                    // cnt++;
                    // if(cnt != prevCnt){
                    //     if(false) console.log(cnt);
                    // }
                    if(cnt < self.amount){
                        var $obj = $cloneObj.clone();
                        fromPos.top = fromPos.top - $obj.height();
                        fromPos.left = fromPos.left - $obj.width();
                        $obj.css(fromPos);
                        // $obj.css({'transition-delay': '.'+(i)+'s'});
                        $obj.addClass('particle-shoot');
                        $obj.addClass('transition');
                        $obj.appendTo($con);

                        setTimeout(function(){
                            $obj.css(toPos);
                            setTimeout(function(){
                                $obj.css({opacity: 0})
                                _opt.onProgress(cnt);
                            }, aniDur);
                        }, 10);
                    }else {
                        startAni.stop();
                    }
                }
                prevCnt = cnt;
            })
        };

        /**
         *
         * @param options
         *  src
         *  amount
         *  container
         *  minScale
         *  maxScale
         * @constructor
         */
        var ParticleEmitter = function(options){
            var self = this;
            var _opt = (options) ? options : {};
            this.amount = (_opt.amount) ? _opt.amount : 10;

            var $con = jq(_opt.container);
            var $target = jq(_opt.target);
            var $cloneObj = jq(_opt.cloneObj);
            var $super = jq('.'+eleClass.view.super);

            var _w = $con.width(),
                _h = $con.height();
            var $virCon = jq('<div style="position:absolute;top:0;left:0;width:100%;height:100%"></div>');
            $virCon.appendTo($con);
            var cnt = 0, prevCnt = 0;
            var _imgRatio = 0;
            var startAni = new Ani();
            startAni.run(function(dt){
                if(cnt == 2) return;
                var cnt = parseInt(dt / 1); // update per sec
                if(prevCnt != cnt){
                    for(var i = 0; i < self.amount; i++){
                        (function(i){
                            var img = new Image();
                            img.onload = function(e){
                                var $img = jq(e.currentTarget);
                                var top = _util.getRandomInt(0, 85);
                                var left = _util.getRandomInt(0, 85);
                                var scale0 = _util.getRandomInt(_opt.minScale * 100, _opt.maxScale * 100);
                                var _scale = scale0*.01;
                                var _ratio = ($img.width()/$con.width() * 100) / 2;
                                var _delay = _util.getRandomInt(0, 80);
                                _delay = _delay * .01;
                                // if(false) console.log($img.width(), $img.height(), $con.width(), _ratio, _scale);
                                $img.addClass('particle-twinkle transition');
                                setTimeout(function () {
                                    $img.css({top: (top - $img.width()/2)+'%', left: (left - $img.width()/2)+'%',
                                        'opacity' : 1,
                                        'transition-delay': _delay+'s',
                                        'transform': 'scale('+_scale+')'});
                                    setTimeout(function(){
                                        $img.css({'opacity' : 0});
                                    },_delay*100+300); // stay for 300
                                }, 10);
                                $img.appendTo($virCon);
                            }
                            img.src = _opt.src;
                            img.crossOrigin = 'anonymous';
                        })(i);
                    }
                    setTimeout(function(){
                        // if(false) console.log($con.children().length)
                        if($virCon.children().length > 0){
                            for(var i = 0; i < self.amount; i++){
                                var $child = $virCon.children()[i];
                                if($child){
                                    $child.remove();
                                }
                            }
                        }
                    }, 2000);
                }
                prevCnt = cnt;
            });
            this.stop = function(){
                startAni.stop();
            }
            return this;
        }

        function Ani(){
            var self = this;

            var runPerOnce = 500; // in ms
            var isIOS = _util.isIOS();
            this.start = undefined;
            this.aframe = null;
            this.run = function(callback){
                var self = this;
                self.cb = callback;
                self.step = function(dt){
                    if( self.start === undefined){
                        self.start = dt;
                    }
                    var elapsed = (dt - self.start)/runPerOnce;

                    if(!isIOS){
                        self.cb(elapsed);
                    }else {
                        if(!isScrolling || !isTouching) self.cb(elapsed); // should not run when scrolling on iOS
                    }
                    w.cancelAnimationFrame(self.aframe);
                    if(self.step){
                        self.aframe = w.requestAnimationFrame(self.step);
                    }
                }
                self.aframe = w.requestAnimationFrame(self.step);
                // self.step(0);
            };
            this.stop = function(){
                w.cancelAnimationFrame(self.aframe);
                self.aframe = null;
                self.step = null;
            }
        }

        function UI_profile(){

            clearIntvEvents();

            fn.GETMYACCOUNT(function(res){
                if(res.returncode == CODE.SUCCESS) {
                    var pInfo = res.userinfo;
                    if(false) console.log('Got user info', pInfo);
                    // update user info
                    _api.setMyInfo(pInfo);

                    removeLoadingIcon();
                    var conStr = fn.UI_TEMPLATE.getProfile(_api.getMyInfo());
                    jq(conStr).appendTo(jq('.sub-content'));

                }else if(res.returncode === CODE.SUCCESS_ERROR){
                    // todo : error exception
                    removeLoadingIcon();
                    UI_message(MESSAGES.ERROR_OCCURRED, 'OK');
                }else {
                    // etc;     
                    removeLoadingIcon();
                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                }

                setUpSubSceneEvents();
            });

            var str = ''+
                subTopMenuDiv('Profile') +
                '<div class="sub-content">' +
                '</div>'+
                loadingDiv();
                '';
            renderPage(str, true, true);

        }

        function UI_profile_edit(onComplete){

            var str = fn.UI_TEMPLATE.getProfileEdit();

            renderPage(str, true, true, 'bg-gray');

            // addEmojiBtnListener('#save');
            addEmojiBtnListener('edit', '#save');

            setUpSubSceneEvents();
        }

        /**
         *
         * @param type 'email'
         * @param id (email)
         * @param pwd
         * @param callback
         */
        function callSignIn(type, id, pwd, callback){

            var $msgEle = jq('#'+eleId.message),
                $msgEmailEle = jq('#'+eleId.input.email+'-msg')
                ,$msgPwdEle = jq('#'+eleId.input.pwd+'-msg');

            addLoading();

            var data = {
                password : pwd
            };
            data.email = id;

            fn.SIGNIN(type, data, function(res){
                removeLoadingIcon();

                if(res.returncode == CODE.SUCCESS) {
                    updateProfileArea();
                    if(callback) callback(res);
                }else if(res.returncode == 401){
                    // $msgEle.html(fn.LANG.MSG.ERR.UNAUTHORIZED);
                    UI_message(fn.LANG.MSG.ERR.UNAUTHORIZED, fn.LANG.BTN.CLOSE);

                }else if(res.returncode == 400){

                    if(res.detail == errDetail.UNKNOWN_EMAIL ||
                        res.detail == errDetail.UNKNOWN_USER ||
                        res.detail == errDetail.WRONG_ID_OR_PASSWORD ||
                        res.detail == errDetail.WRONG_PASSWORD){
                        UI_message(fn.LANG.MSG.ERR.WRONG_LOGIN, fn.LANG.BTN.CLOSE);
                        hasSignInFailed = true;
                    }
                }else{

                    if(res.returncode){
                        // $msgEle.html(res.message);
                        UI_message(res.userMessage, fn.LANG.BTN.CLOSE);
                    }else {
                        $msgEle.html(errMsg[errCode['SERVER_ERROR']]);
                        UI_message(errMsg[errCode['SERVER_ERROR']], fn.LANG.BTN.CLOSE);
                    }
                }
                if(callback) callback(res);

            });
        }

        function checkHCaptcha(response, onComplete){
            if(w.location.hostname == 'localhost' || fn.API.isAndroid() || _api.isIos()){
                onComplete();
            }else {
                fn.resolve([_api.pa.hCaptcha(response)], function(res){
                    if (typeof res.result == 'undefined' || res.result === 0 ) {   // NOT PASS CAPTCHA
                        removeLoadingIcon();
                        UI_message((res.message || MESSAGES.SYSTEM_ERROR_OCCURRED), fn.LANG.BTN.CLOSE);
                    } else {  // PASS CAPTCHA, DO OTHER LOGIC (SIGN UP THE USER)
                        // res.result === 2, considered as passed
                        if(onComplete) onComplete();
                    }
                });
            }
        }

        function resethCaptcha(){
            jq('.h-captcha').html('');
            w.hcaptcha = undefined;
            setTimeout(function(){
                jq('<script src="https://hcaptcha.com/1/api.js" async defer id="hcaptchscript"></script>').insertBefore('.h-captcha');
            }, 450);
        }

        /**
         * Sign in/up
         * @param onComplete
         * @constructor
         */
        function UI_signin(onComplete){
            w.hcaptcha = undefined;
            var _uiType = 'login';
            var str = fn.UI_TEMPLATE.getSignIn();

            renderPage(str, true, false, 'bg-gray-alpha');

            setUpSubSceneEvents();

            var _me = _api.getMyInfo();
            var data = {
                //for 'email' regType. share this value with phone number. ('sms' type)
                email : (sharableVars.email) ? sharableVars.email : null
                //for 'sms' regType
                //,phone : null
                ,password : null
                ,nickname : null
                ,isEmailValid : false
                ,isPwdValid : false
                ,isNameVaild : false
                ,regType : 'email'  // 'email' | 'sms'
            };

            var _tabIdx = 0;
            jq('.tab-wrapper.type-2 button').on('click', function (e) {
                var $self = jq(e.currentTarget);

                var $li = $self.parent();
                var _idx = $li.index();

                ////////// UI logic
                _tabIdx = _idx;
                jq('.tab-wrapper.type-2 li').removeClass('on');
                $li.addClass('on');
                var _x = (_idx == 0) ? 0 : 100;
                jq('.tab-wrapper.type-2 .tab-active-indicator').css({'transform': 'translate('+_x+'%, 0)'});

                // log in
                if(_tabIdx == 0) {
                    jq('.signup-field').hide();
                    jq('.signin-field').show();
                    jq('#sign-in-up').text('Login');
                    jq('#hcaptchscript').remove();
                    jq('.h-captcha').html('');
                    w.hcaptcha = undefined;
                    // sign up
                }else {
                    jq('.signup-field').show();
                    jq('.signin-field').hide();
                    jq('#sign-in-up').text('Sign up');
                    jq('<script src="https://hcaptcha.com/1/api.js" async defer id="hcaptchscript"></script>').insertBefore('.h-captcha');
                }

                // if(data.password){
                //     var res = validatePwd(data.password);
                //     data.isPwdValid = (_tabIdx == 0) ? (res['1'] && res['2']) : (res['1'] && res['2'] && res['3']);
                //     $wrapper = jq('#'+eleId.input.pwd).parent().parent();
                //     var $msg = $wrapper.find('.tooltip span');
                //
                //     if(data.isPwdValid){
                //         $wrapper.addClass('is-valid');
                //         $wrapper.removeClass('is-invalid');
                //         $msg.html('');
                //     }else{
                //         $wrapper.addClass('is-invalid');
                //         $wrapper.removeClass('is-valid');
                //         if((_tabIdx == 1) && res['1'] && res['2'] && !res['3']) {
                //             $msg.html('At least 1 speacial character(!@#$%^&*()) is required.');
                //         }else {
                //             $msg.html(fn.LANG.MSG.ERR.INPUT.INVALID_PWD_LENTH + ' ');
                //         }
                //     }
                // }

                resizeView();

                if(_idx == _tabIdx) return;

                ////////// function logic


            });
            // run the first tab as a default
            jq('.tab-wrapper.type-2 li:eq('+_tabIdx+') button').click();

            jq('#forgot-pwd').on('click', function (e) {

                UI_change_pwd(function(e, val){
                    var self = this;
                    if(e){
                        // clicked close

                    }else {
                        // e = string. email
                        if(false) console.log('the confirm button clicked', val);

                        addLoading();

                        fn.RESETPASSWORD(val, function (res) {
                            //call reset pwd api
                            removeLoadingIcon();
                            // if success
                            //  'The reset email has successfully sent.<br>Please check your email.';
                            var _txt = fn.LANG.MSG.INFO.RESET_PWD_HAS_SENT+'<br>'+fn.LANG.MSG.INFO.CHECK_YOUR_MAILBOX;
                            if(res.returncode != CODE.SUCCESS || !res.returncode){
                                _txt = fn.LANG.MSG.ERR.ETC; // todo : error detail
                            }
                            // if failed
                            // _txt = 'Failed to send the email.<br>Please try it again.';

                            UI_message(_txt, 'Confirm', function(e){
                                var self = this;
                                if(e){
                                    // clicked close

                                }else {
                                    if(false) console.log('the confirm button clicked 2');
                                }
                            });
                        })
                    }
                });
            })
            
            ////// SNS SIGN IN / UP
            //sns sign in button
            jq('.sns-button').on('click', function (e) {
                e.preventDefault();
                addLoading();

                //check type
                var $self = jq(e.currentTarget)
                    ,id = $self.attr('id'),
                    snsName = (id.indexOf('fb') > -1) ? 'facebook' : 'google';
                if(id.indexOf('apple') > -1) snsName = 'apple';
                if(false) console.log('sns name', snsName);

                if(_tabIdx == 0) {  // login

                    fn.SIGNIN('sns', {snsName: snsName}, function(res){
                        if(false) console.log('sns sign in', res);
                        removeLoadingIcon();

                        if(res.returncode == CODE.SUCCESS){
                            // if(onComplete) onComplete(userObj, poc); // todo : check what to do
                            updateProfileArea();
                            closeTopStack();
                            if(onComplete) onComplete(_uiType,res);
                            if(uiCallType == 'login') onCompleteFunc = null;  // reset to prevent to return function twice
                        }else {
                            // err
                            if(res.returncode == 200){
                                //closed by user
                                if(snsName == 'google'){
                                    UI_message(fn.LANG.MSG.ERR.GOOGLE_SIGN_IN_WINDOW_CLOSED, fn.LANG.BTN.CLOSE);
                                }
                            }else if(res.returncode == 100001){
                                UI_message(res.userMessage, fn.LANG.BTN.CLOSE);
                            }else if(res.returncode == errCode.SERVICE_UNAVAILABLE){
                                // $msgEle.html('');
                            }else {
                                UI_message(fn.LANG.MSG.ERR.ETC, fn.LANG.BTN.CLOSE);
                            }

                            //0 "unknown"
                            //1 "email is already used"
                            //2 "wrong password"; min 8 max 50
                            //3 "Too many signup with same IP"
                            //11 "missing parameter : "
                        }

                    });
                }else { // sign up

                    fn.SIGNUP('sns', {snsName: snsName}, function(res){
                        if(false) console.log('sns sign up', res);
                        removeLoadingIcon();

                        if(res.returncode == CODE.SUCCESS){
                            // if(onComplete) onComplete(userObj, poc); // todo : check what to do
                            updateProfileArea();
                            closeTopStack();
                            if(onComplete) onComplete(_uiType,res);
                            if(uiCallType == 'login') onCompleteFunc = null;  // reset to prevent to return function twice
                        }else {
                            if(res.returncode == 200){
                                //closed by user
                                if(snsName == 'google') {
                                    UI_message(fn.LANG.MSG.ERR.GOOGLE_SIGN_IN_WINDOW_CLOSED, fn.LANG.BTN.CLOSE);
                                }
                            }else if(res.returncode == 100001){
                                UI_message(res.userMessage, fn.LANG.BTN.CLOSE);
                            }else {
                                UI_message(fn.LANG.MSG.ERR.ETC, fn.LANG.BTN.CLOSE);
                            }

                            //0 "unknown"
                            //1 "email is already used"
                            //2 "wrong password"; min 8 max 50
                            //3 "Too many signup with same IP"
                            //11 "missing parameter : "
                        }
                    })
                }
            });

            ////// EMAIL SIGN IN / UP
            jq('#sign-in-up').on('click', function (e) {

                var type = 'email';

                // validate
                data.isEmailValid = validateEmail(data.email);
                var $wrapper = jq('#'+eleId.input.email).parent().parent();
                var $msg = $wrapper.find('.tooltip span');

                if(!data.isEmailValid){
                    $msg.html('');
                    if (data.email != ''){
                        $msg.html(fn.LANG.MSG.ERR.INPUT.INVALID_EMAIL);
                    }else {
                        $msg.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_EMAIL);
                    }
                    $wrapper.addClass('is-invalid');
                    $wrapper.removeClass('is-valid');
                }else {
                    $wrapper.addClass('is-valid');
                    $wrapper.removeClass('is-invalid');
                    $msg.html('');
                }

                $wrapper = jq('#'+eleId.input.pwd).parent().parent();
                $msg = $wrapper.find('.tooltip span');

                var res = validatePwd(data.password);
                // data.isPwdValid = (res['1'] && res['2'] && res['3']);
                data.isPwdValid = (_tabIdx == 0) ? (res['1'] && res['2']) : (res['1'] && res['2'] && res['3']);

                if(res['1'] && res['2'] && !res['3']) {
                    if(_tabIdx == 1){
                        $msg.html('At least 1 speacial character(!@#$%^&*()) is required.');
                    }
                }else {
                    $msg.html(fn.LANG.MSG.ERR.INPUT.INVALID_PWD_LENTH + ' ');
                }

                if(data.isPwdValid){
                    $wrapper.addClass('is-valid');
                    $wrapper.removeClass('is-invalid');
                    $msg.html('');
                }else{
                    $wrapper.addClass('is-invalid');
                    $wrapper.removeClass('is-valid');
                }

                // log in
                if(_tabIdx == 0) {
                    if(!data.isEmailValid || !data.isPwdValid) return;
                    addLoading();

                    callSignIn(type, data.email, data.password, function(res){

                        removeLoadingIcon();

                        if(res.returncode == CODE.SUCCESS){
                            updateProfileArea();
                            closeTopStack();
                            if(onComplete) onComplete(_uiType,res);
                            if(uiCallType == 'login') onCompleteFunc = null;  // reset to prevent to return function twice
                        }
                        // if(onComplete) callback(onComplete);  // todo : check what to return
                    });
                    // sign up
                }else {

                    $wrapper = jq('#'+eleId.input.name).parent().parent();
                    $msg = $wrapper.find('.tooltip span');

                    var isAllEmptyString = true;
                    for ( var i in data.nickname){
                        if (data.nickname[i] != ' ') isAllEmptyString = false;
                    }

                    data.isNameVaild = validateName(data.nickname);
                    if(!data.isNameVaild['1'] || !data.isNameVaild['2'] || !data.isNameVaild['3'] || isAllEmptyString){
                        if(!data.isNameVaild['1'] || isAllEmptyString) {
                            $msg.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_NICKNAME);
                        }
                        if(!data.isNameVaild['3']){
                            $msg.html(fn.LANG.MSG.ERR.INPUT.INVALID_NICKNAME_LENGTH);
                        }
                        if(!data.isNameVaild['2']){
                            $msg.html(fn.LANG.MSG.ERR.INPUT.SPECIAL_CHARACTERS_ARE_NOT_ALLOWED);
                        }
                        $wrapper.addClass('is-invalid');
                        $wrapper.removeClass('is-valid');
                    }else {
                        $wrapper.addClass('is-valid');
                        $wrapper.removeClass('is-invalid');
                        $msg.html('');
                    }
                    if(!data.isEmailValid || (!data.isNameVaild['1'] || !data.isNameVaild['2'] || !data.isNameVaild['3'] || isAllEmptyString) || !data.isPwdValid) return;
                    //==
                    addLoading();
                    var params = {
                        nickname : null,
                        password : data.password
                    };

                    var regType = data.regType;
                    params.email = data.email;

                    var hcaptcharesponse = jq('.h-captcha iframe').attr('data-hcaptcha-response');

                    checkHCaptcha(hcaptcharesponse, function(){
                        //sign up + sign in
                        fn.SIGNUP(regType, params, function(res){

                            removeLoadingIcon();

                            // var msg = {
                            //     title: fn.LANG.TITLE.ACCOUNT_VERIFICATION,
                            //     text: fn.LANG.MSG.INFO.VERIFICATION_EMAIL_HAS_BEEN_SENT_TO_YOUR_EMAIL_PLEASE_CHECK_YOUR_MAILBOX,
                            //     buttons: [{text: fn.LANG.BTN.OK}]
                            // };
                            //
                            // // 2. show message modal for it
                            // // setTimeout(function () {
                            // fn.UI.MESSAGE(msg, function(){
                            //     //button clicked
                            //     if(onComplete) onComplete(userObj, poc);
                            //
                            // }, function (err) {
                            //
                            //     //just closed without sign in/up
                            //     if (err.returncode == 200){
                            //         if(onComplete) onComplete(userObj, poc);
                            //     }
                            // })
                            // // }, 500);

                            // if(onComplete) callback(onComplete);  // todo : check what to return
                            if(res.returncode == CODE.SUCCESS){
                                updateProfileArea();
                                closeTopStack();
                                if(onComplete) onComplete(_uiType,res);
                                if(uiCallType == 'login') onCompleteFunc = null;  // reset to prevent to return function twice
                            }else {
                                if(res.returncode){
                                    var msg = fn.LANG.MSG.ERR.UNKNOWN;
                                    if(res.detail == errDetail.EMAIL_IS_ALREADY_IN_USE){
                                        msg = fn.LANG.MSG.ERR.EMAIL_IS_ALREADY_IN_USE;
                                        // var $input = jq('#'+eleId.input.email);
                                        // var $indicator = $input.parent().find('.field-check');
                                        // showAni($indicator, ani.flash + ' ' + clsName.indicatorInvalid);
                                    }else if(res.detail == errDetail.WRONG_VERIFICATION_CODE ||
                                        res.detail == errDetail.TOO_MANY_SIGN_UP_WITH_SAME_IP ||
                                        res.detail == errDetail.THIS_PHONE_NUMBER_IS_ALREADY_USED_TO_VERIFY){
                                        msg = res.userMessage;
                                    }
                                    UI_message(msg, fn.LANG.BTN.CLOSE);
                                    //if(onError) onError(err);
                                }else {
                                    UI_message(fn.LANG.MSG.ERR.ETC, fn.LANG.BTN.CLOSE);
                                }
                            }

                        });
                    });
                }
            })

            //input : email; switch to phone number
            // if the country is supporting sms verification
            jq('#'+eleId.input.email).on('change paste keyup focus blur', function(e){
                if(false) console.log(jq(e.currentTarget).val());

                if(e.type == 'focus' || e.type == 'blur'){
                    if(_tabIdx == 1){
                        if(_util.isMobile() && !_util.isIOS()){
                            resethCaptcha();
                        }
                    }
                }

                var $self = jq(e.currentTarget);
                var id = $self.attr('id');
                var val = $self.val();
                var $wrapper = $self.parent().parent();
                var $msg = $wrapper.find('.tooltip span');

                sharableVars.email = data.email = val;

                data.regType = 'email';

                $wrapper.removeClass('is-invalid is-valid');
                $msg.html('');
                data.isEmailValid = validateEmail(val);
                if(!data.isEmailValid){
                //     $msg.html('');
                //     if (val != ''){
                //         $msg.html(fn.LANG.MSG.ERR.INPUT.INVALID_EMAIL);
                //     }else {
                //         $msg.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_EMAIL);
                //     }
                //     $wrapper.addClass('is-invalid');
                    $wrapper.removeClass('is-valid');
                }else {
                    $wrapper.addClass('is-valid');
                    $wrapper.removeClass('is-invalid');
                    $msg.html('');
                }
                // isSignInButtonEnabled();
            });

            //input : password
            jq('#'+eleId.input.pwd).on('change paste keyup', function(e){
                if(false) console.log(jq(e.currentTarget).val());

                var $self = jq(e.currentTarget);
                var $wrapper = $self.parent().parent();
                var $msg = $wrapper.find('.tooltip span');
                var val = data.password = $self.val();

                //messages
                // $msg.html(fn.LANG.MSG.ERR.INPUT.INVALID_PWD_LENTH + ' ');

                var res = validatePwd(val);

                $wrapper.removeClass('is-invalid is-valid');
                $msg.html('');
                data.isPwdValid = (_tabIdx == 0) ? (res['1'] && res['2']) : (res['1'] && res['2'] && res['3']);

                if((_tabIdx == 1) && res['1'] && res['2'] && !res['3']) {
                    // $msg.html('At least 1 speacial character(!@#$%^&*()) is required.');
                }

                if(data.isPwdValid) {
                    $wrapper.addClass('is-valid');
                    $wrapper.removeClass('is-invalid');
                    $msg.html('');
                }else{
                //     $wrapper.addClass('is-invalid');
                    $wrapper.removeClass('is-valid');
                }
                // isSignInButtonEnabled();
            });

            var isAllEmptyString = true;
            for ( var i in data.nickname){
                if (data.nickname[i] != ' ') isAllEmptyString = false;
            }
            jq('#'+eleId.input.name).val(data.nickname);
            data.isNameVaild = validateName(data.nickname);
            if(!data.isNameVaild['1'] || !data.isNameVaild['2'] || !data.isNameVaild['3'] || isAllEmptyString){

            }else {
                var $wrapper = jq('#'+eleId.input.name).parent().parent();
                $wrapper.addClass('is-valid on');
                $wrapper.removeClass('is-invalid');
            }

            //input : nickname
            jq('#'+eleId.input.name).on('change paste keyup', function(e){
                if(false) console.log(jq(e.currentTarget).val());

                var $self = jq(e.currentTarget);
                var $wrapper = $self.parent().parent();
                var $msg = $wrapper.find('.tooltip span');
                var id = $self.attr('id');
                var val = data.nickname = $self.val();

                var isAllEmptyString = true;
                for ( var i in val){
                    if (val[i] != ' ') isAllEmptyString = false;
                }

                $wrapper.removeClass('is-invalid is-valid');
                $msg.html('');
                data.isNameVaild = validateName(val);
                if(!data.isNameVaild['1'] || !data.isNameVaild['2'] || !data.isNameVaild['3'] || isAllEmptyString){
                //     if(!data.isNameVaild['1'] || isAllEmptyString) {
                //         $msg.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_NICKNAME);
                //     }
                //     if(!data.isNameVaild['2']){
                //         $msg.html(fn.LANG.MSG.ERR.INPUT.SPECIAL_CHARACTERS_ARE_NOT_ALLOWED);
                //     }
                //     $wrapper.addClass('is-invalid');
                    $wrapper.removeClass('is-valid');
                //
                }else {
                    $wrapper.addClass('is-valid');
                    $wrapper.removeClass('is-invalid');
                    $msg.html('');
                }
                // isSignInButtonEnabled();
            });

            function isSignInButtonEnabled(){
                var isit = false;
                if(_tabIdx == 0) {  // in
                    isit = (data.isPwdValid && data.isEmailValid);
                }else { // up
                    isit = (data.isPwdValid && data.isEmailValid && data.isNameVaild);
                }
                // jq('#sign-in-up').attr('disabled', !isit);
            }
        }

        /**
         *
         * @param options
         *  newWindow bool. default false, open in a new window if true
         *  type string. default 'sdk', 'web'
         * @param onComplete
         * @constructor
         */
        function UI_openPA(options, onComplete){
            var _uiType = 'openPA';
            var _me = _api.getMyInfo();
            var _newWindow = (options && options.newWindow) ? options.newWindow : false;
            var _type = (options && options.type) ? options.type : 'sdk';

            if(_type == 'sdk'){
                if(_me.isAnonymous){
                    UI_signin(function(type, data){
                        // called only when login/sign up is done
                        _me = _api.getMyInfo();
                        if(!_me.isAnonymous){
                            openlink(_newWindow, _type);
                        }
                        if(onComplete) onComplete(_uiType, data);
                    });
                }else {
                    openlink(_newWindow, _type);
                    // give some delay to show loading icon
                    setTimeout(function(){
                        if(onComplete) onComplete(_uiType, {returncode: CODE.SUCCESS_ERROR});
                    }, 1000);
                }
            }else if(_type == 'web'){
                openlink(_newWindow, _type);
                // give some delay to show loading icon
                setTimeout(function(){
                    if(onComplete) onComplete(_uiType, {returncode: CODE.SUCCESS_ERROR});
                }, 1000);
            }
        }

        var linkcnt = 0;
        function openlink(_newWindow, _type){
            // todo : vary the env
            // var url = 'https://dev1.pocketarena.com/service/sdk/Game/match_room';
            var _id = 'linktoegpage'+linkcnt;

            var target='target="_self"';
            if(_newWindow){
                target = target.replace('_self', '_blank');
            }
            var pageLink = ''
            // if (pageName) {
            //     pageLink += '&'
            //     switch (pageName) {
            //         case 'esportsHistory':
            //             pageLink += 'target=result_history&game_id='+_api.getGameId()
            //                 +'&game_esports_no='+_api.getGameEsportsNo();
            //             break;
            //         case 'esportsLeaderboard':
            //             pageLink += 'target=pa_championship&game_id='+_api.getGameId();
            //     }
            // }

            var url = _api.getDomain('sdk.pocketarena')+'/service/Main/login_auto';
            if(_type == 'sdk'){
                url += '/?user_id='+_api.getMember('userId')+
                    '&token='+_api.getMember('token')+
                    '&game_no='+_api.getGameNo() +
                    '&game_id='+_api.getGameId() +
                    pageLink;
            }else if(_type == 'web'){
                url = _api.getDomain('pocketarena');
            }else {
                return;
            }

            var eleStr = '<a href="'+url+'" '+target+' id="'+_id+'" ' +
                'style="width:1px;height:1px;position:absolute; top:0px; left:0px; font-size: 0px; background-color: transparent;">&nbsp;</a>';
            jq(eleStr).appendTo(jq('body'));

            if(false) console.log('url', url);
            setTimeout(function(){
                document.getElementById(_id).click();
                //document.getElementById(_id).submit();
                jq('#'+_id).remove();
                linkcnt++;
            }, 30);
        }

        function UI_change_pwd(onComplete){

            var options = {
                title : 'Reset password',
                msg : 'Please enter your email to get new password.',
                placeholder : 'Email',
                btnText : 'Confirm',
            };
            var str = fn.UI_TEMPLATE.getChangePwdModal(options);

            _doAddModal(str, function(e){
                var val = jq('#forgot-email').val();
                if(onComplete) onComplete(e, val);
            }, false);

            jq('#forgot-email').on('change paste keyup', function(e){
                if(false) console.log(jq(e.currentTarget).val());

                var $self = jq(e.currentTarget);
                var id = $self.attr('id');
                var val = $self.val();
                var $wrapper = $self.parent().parent();
                var $msg = $wrapper.find('.tooltip span');

                var res = validateEmail(val);
                if(!res){
                    $msg.html('');
                    if (val != ''){
                        $msg.html(fn.LANG.MSG.ERR.INPUT.INVALID_EMAIL);
                    }else {
                        $msg.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_EMAIL);
                    }
                    $wrapper.addClass('is-invalid');
                    $wrapper.removeClass('is-valid');
                }else {
                    $wrapper.addClass('is-valid');
                    $wrapper.removeClass('is-invalid');
                    $msg.html('');
                }
                jq('#btn-popup').attr('disabled', !res);
            });
        }

        /**
         * Add countdown scene to the view
         * @param onComplete
         * @constructor
         */
        function UI_match_countdown(onComplete){
            if(false) console.log('start countdown')
            clearIntvEvents();

            var str = fn.UI_TEMPLATE.getChallengeCountdown();
            var $view = jq('.'+eleClass.view.super);
            jq(str).appendTo($view);

            var cnt = 0;
            var intv = setInterval(function () {
                if(cnt < 2){
                    var cd = 3 - (cnt + 1);
                    jq('.cd-no').html(cd);
                }else {
                    cnt = null;
                    clearInterval(intv);
                    jq('.cd-no').html(0);
                    if(false) console.log('finish')
                    if(onComplete) onComplete();
                }
                cnt++;
            }, 1000);
        }

        /**
         *
         * @param messageStr string. html 5 tag can be used
         * @param btnStr string | null. html 5 can be used
         * @param onComplete function. called when user clicks the button
         * @constructor
         */
        function UI_message(messageStr, btnStr, onComplete){
            var str = fn.UI_TEMPLATE.getMessage(messageStr, btnStr);

            var $wrapper = jq('#msg-wrapper');
            if($wrapper.length == 0){
                _doAddModal(str, onComplete);
            }else {
                // still exist; add a bit later
                $wrapper.removeClass('on');
                setTimeout(function(){
                    _doAddModal(str, onComplete);
                }, aniDur);
            }
        }

        function addEmojiBtnListener(mode, btnId, onComplete){
            var _mode = mode;
            if(mode == 'edit') {
                // need to activate slider if necessary
                // jq(w).trigger('activeEmojiSlider');
                var tempIntv1 = setTimeout(function () {
                    var $elist = jq('.emoji-select-list');
                    if ($elist.length > 0) {
                        clearInterval(tempIntv1);
                        // images contained should be loaded first
                        var $imgs = $elist.children().eq(0).find('img');
                        var tot = $imgs.length, _s = 0;
                        for (var i = 0; i < tot; i++) {
                            var img = new Image();
                            img.onload = function () {
                                _s += 1;
                                if (_s == tot) {
                                    jq(w).trigger('activeEmojiSlider');
                                    emojiSlider.goToSlide(curIdx - 1);
                                }
                            };
                            img.onerror = function () {
                                _s += 1;
                                if (_s == tot) {
                                    jq(w).trigger('activeEmojiSlider');
                                    emojiSlider.goToSlide(curIdx - 1);
                                }
                            }
                            img.src = $imgs[i].src;
                            if(false) console.log($imgs[i].src)
                        }
                    }
                }, 350);

                // add event listener
                curIdx = 1; // default
                curIdx2 = 1; // default
                selectedCurIdx = 1;
                maxCate = _api.getEmojiCateLength();
                var userphoto = _api.getMyInfo().photo;
                if (userphoto && userphoto.indexOf('http') == -1) {
                    var tempinfo = userphoto.split('/');
                    var tempinfo2 = tempinfo[tempinfo.length - 1].split('.')[0];
                    var idxinfo = tempinfo2.split('-');
                    curIdx = idxinfo[0];
                    curIdx2 = idxinfo[1];
                    selectedCurIdx = idxinfo[0];
                }

                // emoji events
                jq(document).off('click', '.esg-l').on('click', '.esg-l', function (e) {
                    var _idx = curIdx - 1;
                    if (_idx < 1) _idx = 1;
                    moveTo(_idx);
                });
                jq(document).off('click', '.esg-r').on('click', '.esg-r', function (e) {
                    var _idx = curIdx + 1;
                    if (_idx > maxCate) _idx = maxCate;
                    moveTo(_idx);
                });
                jq(document).off('click', '.emoji-select-groups ul button').on('click', '.emoji-select-groups ul button', function (e) {
                    var $self = jq(this);
                    var _val = Number(jq(this).val());
                    if(false) console.log(_val)
                    moveTo(_val);
                });
                jq(document).off('click', '.emoji-select-list button').on('click', '.emoji-select-list button', function (e) {
                    var $self = jq(this);
                    var _val = jq(this).val().split('-')[1];
                    if(false) console.log(_val)
                    selectedCurIdx = curIdx;
                    curIdx2 = _val;

                    jq('.emoji-select-list li').removeClass('on');
                    jq('.emoji-select-list ul:eq(' + (curIdx - 1) + ') li:eq(' + (_val - 1) + ')').addClass('on');
                });

                jq(document).off('click', '#btn-emoji-close').on('click', '#btn-emoji-close', function (e) {
                    jq('body').removeClass('modal-open');
                    jq('.modal').remove();
                    emojiSlider = null;
                });
            }

            // save button
            var isClicked = false;
            jq(document).off('click', btnId).on('click', btnId, function(e) {
                e.stopPropagation();
                if(isClicked) return;
                isClicked = true;

                if(_mode == 'view'){
                    _doCloseModal();
                    UI_emojiModal('edit', onComplete);
                }else if(mode == 'edit'){
                    // save emoji
                    if(false) console.log('save');

                    var _name = jq('#emoji-username').val();
                    var _photo = selectedCurIdx + '-' + curIdx2 + '.png';

                    // validate name
                    var isAllEmptyString = true;
                    for ( var i in _name){
                        if (_name[i] != ' ') isAllEmptyString = false;
                    }
                    var isNameVaild = validateName(_name);
                    var $wrapper = jq('#emoji-username').parent().parent();
                    var $msg = $wrapper.find('.tooltip span');
                    if(!isNameVaild['1'] || !isNameVaild['2'] || !isNameVaild['3'] || isAllEmptyString){
                        if(!isNameVaild['1'] || isAllEmptyString) {
                            $msg.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_NICKNAME);
                        }
                        if(!isNameVaild['3']){
                            $msg.html(fn.LANG.MSG.ERR.INPUT.INVALID_NICKNAME_LENGTH);
                        }
                        if(!isNameVaild['2']){
                            $msg.html(fn.LANG.MSG.ERR.INPUT.SPECIAL_CHARACTERS_ARE_NOT_ALLOWED);
                        }
                        $wrapper.addClass('is-invalid');
                        $wrapper.removeClass('is-valid');
                    }else {
                        $wrapper.addClass('is-valid');
                        $wrapper.removeClass('is-invalid');
                        $msg.html('');
                    }
                    if(!isNameVaild['1'] || !isNameVaild['2'] || !isNameVaild['3'] || isAllEmptyString) {
                        isClicked = false;
                        return;
                    }

                    addLoading();
                    fn.PLAYER.SETINFO(_name, null, null, null, null, _photo, null, function(res){
                        isClicked = false;
                        removeLoadingIcon();
                        if(false) console.log('setinfo : ', res);
                        if(res.returncode == CODE.SUCCESS){
                            // update data
                            var _me = _api.getMyInfo();
                            _me.nickname = _name;
                            _me.photo = _api.getEmojiImgPath()+_photo;
                            _api.setGuestInfo(_me);

                            updateProfileArea();

                            _doCloseModal();
                            if(onComplete) onComplete();
                        }else if(res.returncode === CODE.SUCCESS_ERROR){
                            // returncode: "-1"
                            UI_message(MESSAGES.ERROR_OCCURRED, 'OK');

                        }else {
                            // etc;     
                            UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK');
                        }
                    });

                }
            });
        }

        function updateProfileArea(){
            var _me = _api.getMyInfo();
            // update UI
            if(jq('#sdk-top-minimum .profile-photo').length > 0){
                jq('#sdk-top-minimum .profile-photo img').attr('src', _me.photo);
                jq('#sdk-top-minimum .profile-name').text(_me.nickname);
                if(jq('.sub-content .prf-name').length > 0){
                    jq('.sub-content .prf-name').text(_me.nickname);
                }
            }
            if(jq('#edit-profile-photo .prf-img').length > 0){
                jq('#edit-profile-photo .prf-img img').attr('src', _me.photo);
            }
            if(typeof _me.rubyamount != 'undefined'){
                updateView(UPDATE_VIEW.PROFILE_RUBY, _me.rubyamount);
                updateView(UPDATE_VIEW.PROFILE_POINT, _me.pointamount);
            }
        }

        function UI_signinModal(callback){
            w.hcaptcha = undefined;
            var str = fn.UI_TEMPLATE.getSigninModal();
            var $wrapper = jq('#msg-wrapper');
            if($wrapper.length == 0){
                _doAddModal(str, callback);
            }else {
                // still exist; add a bit later
                $wrapper.removeClass('on');
                setTimeout(function(){
                    _doAddModal(str, callback);
                }, aniDur);
            }
            setTimeout(function () {
                var _uiType = 'login';
                jq('.pa-ui-btn-signup').on('click', function(e){
                    e.preventDefault();
                    UI_signupAllModal(callback);
                });
                jq('#pa-ui-btn-forgot-pwd').on('click', function (e) {
                    e.preventDefault();
                    UI_forgotPwdModal(callback);
                })

                jq('.sns-button').on('click', function (e) {
                    addLoading();

                    //check type
                    var $self = jq(e.currentTarget)
                        ,id = $self.attr('id'),
                        snsName = (id.indexOf('fb') > -1) ? 'facebook' : 'google';
                    if(id.indexOf('apple') > -1) snsName = 'apple';

                    fn.SIGNIN('sns', {snsName: snsName}, function(res){
                        if(false) console.log('sns sign in', res);
                        removeLoadingIcon();

                        if(res.returncode == CODE.SUCCESS){
                            // if(onComplete) onComplete(userObj, poc); // todo : check what to do
                            updateProfileArea();
                            // closeTopStack();
                            if(callback) callback(_uiType,res);
                            if(uiCallType == 'login') onCompleteFunc = null;  // reset to prevent to return function twice
                            closemodal();
                        }else {
                            // err
                            if(res.returncode == 200){
                                //closed by user
                                if(snsName == 'google'){
                                    UI_message(fn.LANG.MSG.ERR.GOOGLE_SIGN_IN_WINDOW_CLOSED, fn.LANG.BTN.CLOSE);
                                }
                            }else if(res.returncode == 100001){
                                UI_message(res.userMessage, fn.LANG.BTN.CLOSE);
                            }else if(res.returncode == errCode.SERVICE_UNAVAILABLE){
                                // $msgEle.html('');
                            }else {
                                UI_message(fn.LANG.MSG.ERR.ETC, fn.LANG.BTN.CLOSE);
                            }

                            //0 "unknown"
                            //1 "email is already used"
                            //2 "wrong password"; min 8 max 50
                            //3 "Too many signup with same IP"
                            //11 "missing parameter : "
                        }

                    });
                })

                var data = {
                    email : null
                    ,password : null
                    ,isEmailValid : false
                    ,isPwdValid : false
                };
                if(sharableVars.email){
                    jq('#'+eleId.input.email).val(sharableVars.email);
                    data.email = sharableVars.email;
                }

                //input : email
                jq('#'+eleId.input.email).on('change paste keyup', function(e){
                    if(false) console.log(jq(e.currentTarget).val());

                    var id = jq(e.currentTarget).attr('id');
                    var val = data.email = jq(e.currentTarget).val();

                    sharableVars.email = val;

                });

                //input : pwd
                jq('#'+eleId.input.pwd).on('change paste keyup', function(e){
                    if(false) console.log(jq(e.currentTarget).val());

                    var id = jq(e.currentTarget).attr('id');
                    var val = jq(e.currentTarget).val();

                    data.password = val;
                });

                jq('#pa-ui-btn-submit').on('click', function(e) {
                    e.preventDefault();

                    var $msgEle = jq('#' + eleId.message)
                        ,$msgEmailEle = jq('#' + eleId.input.email + '-msg')
                        ,$msgPwdEle = jq('#' + eleId.input.pwd + '-msg');
                    if(!data.email){
                        $msgEmailEle.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_EMAIL);
                    }
                    if(!data.password){
                        $msgPwdEle.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_PWD);
                    }

                    if(data.email && data.password){
                        //double check, will not proceed if invalid
                        var isValid = validationMessage(data.email);

                        var res = validatePwd(data.password);
                        // data.isPwdValid = (res['1'] && res['2'] && res['3']);
                        data.isPwdValid = (res['1'] && res['2']);

                        if(res['1'] && res['2']) { // && !res['3']) {
                            // if(_tabIdx == 1){
                            //     $msg.html('At least 1 speacial character(!@#$%^&*()) is required.');
                            // }
                            $msgPwdEle.html('');
                            jq('#'+eleId.input.pwd).parent().find('.field-check').addClass('validated');
                            jq('#'+eleId.input.pwd).parent().find('.field-check').removeClass('error');
                        }else {
                            $msgPwdEle.html(fn.LANG.MSG.ERR.INPUT.INVALID_PWD_LENTH + ' ');
                            jq('#'+eleId.input.pwd).parent().find('.field-check').addClass('error');
                            jq('#'+eleId.input.pwd).parent().find('.field-check').removeClass('validated');
                        }

                        if(!isValid || !data.isPwdValid) return;

                        addLoading();
                        var type = 'email';
                        callSignIn(type, data.email, data.password, function(res){

                            removeLoadingIcon();
                            if(res.returncode == CODE.SUCCESS){
                                updateProfileArea();
                                // closeTopStack();
                                if(callback) callback(_uiType,res);
                                if(uiCallType == 'login') onCompleteFunc = null;  // reset to prevent to return function twice
                                closemodal();
                            }else {

                            }
                            // if(onComplete) callback(onComplete);  // todo : check what to return
                        });
                    }
                });
            }, aniDur)
        }

        function UI_signupModal(callback){
            w.hcaptcha = undefined;
            var str = fn.UI_TEMPLATE.getSignupModal();
            var $wrapper = jq('#msg-wrapper');
            if($wrapper.length == 0){
                _doAddModal(str, callback);
            }else {
                // still exist; add a bit later
                $wrapper.removeClass('on');
                setTimeout(function(){
                    _doAddModal(str, callback);
                }, aniDur);
            }
            setTimeout(function () {
                var _uiType = 'login';
                var _me = _api.getMyInfo();

                jq('<script src="https://hcaptcha.com/1/api.js" async defer id="hcaptchscript"></script>').insertBefore('.h-captcha');

                jq('.pa-ui-btn-signup').on('click', function(e){
                    e.preventDefault();
                    UI_signupAllModal(callback);
                });

                var data = {
                    email : null
                    ,password : null
                    ,nickname : null
                    ,isEmailValid : false
                    ,isPwdValid : false
                    ,regType : 'email'
                };
                if(sharableVars.email){
                    jq('#'+eleId.input.email).val(sharableVars.email);
                    data.email = sharableVars.email;
                }
                if(data.nickname) {
                    jq('#'+eleId.input.name).val(data.nickname);
                }

                //input : email
                jq('#'+eleId.input.email).on('change paste keyup', function(e){
                    if(false) console.log(jq(e.currentTarget).val());

                    var id = jq(e.currentTarget).attr('id');
                    var val = data.email = jq(e.currentTarget).val();

                    sharableVars.email = val;

                });

                //input : nickname
                jq('#'+eleId.input.name).on('change paste keyup', function(e){
                    if(false) console.log(jq(e.currentTarget).val());

                    var $self = jq(e.currentTarget);
                    var id = $self.attr('id');
                    var val = $self.val();
                    data.nickname = val;
                });

                //input : pwd
                jq('#'+eleId.input.pwd).on('change paste keyup', function(e){
                    if(false) console.log(jq(e.currentTarget).val());

                    var id = jq(e.currentTarget).attr('id');
                    var val = jq(e.currentTarget).val();

                    data.password = val;
                });

                jq('#pa-ui-btn-submit').on('click', function(e) {
                    e.preventDefault();

                    var $msgEle = jq('#' + eleId.message)
                        ,$msgEmailEle = jq('#' + eleId.input.email + '-msg')
                        ,$msgNameEle = jq('#' + eleId.input.name + '-msg')
                        ,$msgPwdEle = jq('#' + eleId.input.pwd + '-msg');
                    if(!data.email){
                        $msgEmailEle.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_EMAIL);
                    }
                    if(!data.password){
                        $msgPwdEle.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_PWD);
                    }
                    var isAllEmptyString = true;
                    for ( var i in data.nickname){
                        if (data.nickname[i] != ' ') isAllEmptyString = false;
                    }
                    if(!data.nickname || data.nickname == '') isAllEmptyString = true;
                    if(isAllEmptyString) {
                        $msgNameEle.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_NICKNAME);
                    }

                    // if(data.email && data.password && !isAllEmptyString){
                        //double check, will not proceed if invalid
                        var isValid = validationMessage(data.email);
                        if(isValid) $msgEmailEle.html('');

                        var res = validatePwd(data.password);
                        data.isPwdValid = (res['1'] && res['2'] && res['3']);
                        // data.isPwdValid = (res['1'] && res['2']);

                        if(res['1'] && res['2'] && !res['3']) {
                            $msgPwdEle.html('At least 1 speacial character(!@#$%^&*()) is required.');
                            jq('#'+eleId.input.pwd).parent().find('.field-check').addClass('error');
                            jq('#'+eleId.input.pwd).parent().find('.field-check').removeClass('validated');
                        }else {
                            $msgPwdEle.html(fn.LANG.MSG.ERR.INPUT.INVALID_PWD_LENTH + ' ');
                            jq('#'+eleId.input.pwd).parent().find('.field-check').addClass('error');
                            jq('#'+eleId.input.pwd).parent().find('.field-check').removeClass('validated');
                        }
                        if(data.isPwdValid){
                            $msgPwdEle.html('');
                            jq('#'+eleId.input.pwd).parent().find('.field-check').addClass('validated');
                            jq('#'+eleId.input.pwd).parent().find('.field-check').removeClass('error');
                        }

                        data.isNameVaild = validateName(data.nickname);
                        if(!data.isNameVaild['1'] || !data.isNameVaild['2'] || !data.isNameVaild['3'] || isAllEmptyString){
                            if(!data.isNameVaild['1'] || isAllEmptyString) {
                                $msgNameEle.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_NICKNAME);
                            }
                            if(!data.isNameVaild['3']){
                                $msgNameEle.html(fn.LANG.MSG.ERR.INPUT.INVALID_NICKNAME_LENGTH);
                            }
                            if(!data.isNameVaild['2']){
                                $msgNameEle.html(fn.LANG.MSG.ERR.INPUT.SPECIAL_CHARACTERS_ARE_NOT_ALLOWED);
                            }
                            // $wrapper.addClass('is-invalid');
                            // $wrapper.removeClass('is-valid');
                            jq('#'+eleId.input.name).parent().find('.field-check').addClass('error');
                            jq('#'+eleId.input.name).parent().find('.field-check').removeClass('validated');
                        }else {
                            // $wrapper.addClass('is-valid');
                            // $wrapper.removeClass('is-invalid');
                            jq('#'+eleId.input.name).parent().find('.field-check').addClass('validated');
                            jq('#'+eleId.input.name).parent().find('.field-check').removeClass('error');
                            $msgNameEle.html('');
                        }
                        if(!isValid || (!data.isNameVaild['1'] || !data.isNameVaild['2'] || !data.isNameVaild['3'] || isAllEmptyString) || !data.isPwdValid) return;

                        addLoading();

                        var params = {
                            nickname : data.nickname,
                            password : data.password
                        };

                        var regType = data.regType;
                        params.email = data.email;

                        var hcaptcharesponse = jq('.h-captcha iframe').attr('data-hcaptcha-response');

                        checkHCaptcha(hcaptcharesponse, function(){
                            //sign up + sign in
                            fn.SIGNUP(regType, params, function(res){

                                removeLoadingIcon();
                                if(res.returncode == CODE.SUCCESS){
                                    updateProfileArea();
                                    // closeTopStack();
                                    if(callback) callback(_uiType,res);
                                    if(uiCallType == 'login') onCompleteFunc = null;  // reset to prevent to return function twice
                                    closemodal();
                                }else {
                                    if(res.returncode){
                                        var msg = fn.LANG.MSG.ERR.UNKNOWN;
                                        if(res.detail == errDetail.EMAIL_IS_ALREADY_IN_USE){
                                            msg = fn.LANG.MSG.ERR.EMAIL_IS_ALREADY_IN_USE;
                                            // var $input = jq('#'+eleId.input.email);
                                            // var $indicator = $input.parent().find('.field-check');
                                            // showAni($indicator, ani.flash + ' ' + clsName.indicatorInvalid);
                                        }else if(res.detail == errDetail.WRONG_VERIFICATION_CODE ||
                                            res.detail == errDetail.TOO_MANY_SIGN_UP_WITH_SAME_IP ||
                                            res.detail == errDetail.THIS_PHONE_NUMBER_IS_ALREADY_USED_TO_VERIFY){
                                            msg = res.userMessage;
                                        }
                                        UI_message(msg, fn.LANG.BTN.CLOSE);
                                        //if(onError) onError(err);
                                    }else {
                                        UI_message(fn.LANG.MSG.ERR.ETC, fn.LANG.BTN.CLOSE);
                                    }
                                }

                            });
                        });

                    // }
                });
            }, aniDur)
        }

        function UI_signupAllModal(callback){
            var str = fn.UI_TEMPLATE.getSignupAllModal();
            var $wrapper = jq('#msg-wrapper');
            if($wrapper.length == 0){
                _doAddModal(str, callback);
            }else {
                // still exist; add a bit later
                $wrapper.removeClass('on');
                setTimeout(function(){
                    _doAddModal(str, callback);
                }, aniDur);
            }
            setTimeout(function () {
                jq('.pa-ui-btn-signup').on('click', function(e){
                    e.preventDefault();
                    UI_signinModal(callback);
                });
                //input : email
                jq('#btn-email').on('click', function(e){
                    e.preventDefault();
                    UI_signupModal(callback);
                });

                jq('.sns-button').on('click', function (e) {
                    addLoading();

                    //check type
                    var $self = jq(e.currentTarget)
                        ,id = $self.attr('id'),
                        snsName = (id.indexOf('fb') > -1) ? 'facebook' : 'google';
                    if(id.indexOf('apple') > -1) snsName = 'apple';
                    var _uiType = 'login';

                    fn.SIGNUP('sns', {snsName: snsName}, function(res){
                        if(false) console.log('sns sign up', res);
                        removeLoadingIcon();

                        if(res.returncode == CODE.SUCCESS){
                            // if(onComplete) onComplete(userObj, poc); // todo : check what to do
                            updateProfileArea();
                            // closeTopStack();
                            if(callback) callback(_uiType,res);
                            if(uiCallType == 'login') onCompleteFunc = null;  // reset to prevent to return function twice
                            closemodal();
                        }else {
                            if(res.returncode == 200){
                                //closed by user
                                if(snsName == 'google') {
                                    UI_message(fn.LANG.MSG.ERR.GOOGLE_SIGN_IN_WINDOW_CLOSED, fn.LANG.BTN.CLOSE);
                                }
                            }else if(res.returncode == 100001){
                                UI_message(res.userMessage, fn.LANG.BTN.CLOSE);
                            }else {
                                UI_message(fn.LANG.MSG.ERR.ETC, fn.LANG.BTN.CLOSE);
                            }

                            //0 "unknown"
                            //1 "email is already used"
                            //2 "wrong password"; min 8 max 50
                            //3 "Too many signup with same IP"
                            //11 "missing parameter : "
                        }
                    })
                })

            }, aniDur)
        }

        function validationMessage(val){
            var value = validateEmail(val);
            if(!value){
                jq('#'+eleId.input.email+'-msg').html(fn.LANG.MSG.ERR.INPUT.INVALID_EMAIL);
                jq('#'+eleId.input.email).parent().find('.field-check').addClass('error');
                jq('#'+eleId.input.email).parent().find('.field-check').removeClass('validated');
            }else {
                jq('#'+eleId.input.email+'-msg').html('');
                jq('#'+eleId.input.email).parent().find('.field-check').addClass('validated');
                jq('#'+eleId.input.email).parent().find('.field-check').removeClass('error');
            }

            return value;
        }

        var _attemp = 0;
        function UI_forgotPwdModal(callback){
            var str = fn.UI_TEMPLATE.getForgotPwdModal();
            var $wrapper = jq('#msg-wrapper');
            if($wrapper.length == 0){
                _doAddModal(str, callback);
            }else {
                // still exist; add a bit later
                $wrapper.removeClass('on');
                setTimeout(function(){
                    _doAddModal(str, callback);
                }, aniDur);
            }
            setTimeout(function () {
                jq('.pa-ui-btn-signin, #pa-ui-btn-signin').on('click', function(e){
                    e.preventDefault();
                    UI_signinModal(callback);
                });
                jq('#pa-ui-btn-signup').on('click', function(e){
                    e.preventDefault();
                    UI_signupAllModal(callback);
                })
                var data = {
                    email : null
                };
                if(sharableVars.email){
                    jq('#'+eleId.input.email).val(sharableVars.email);
                    data.email = sharableVars.email;
                }
                jq('#pa-ui-btn-submit').on('click', function(e){

                    var $msgEle = jq('#'+eleId.message)
                        ,$msgEmailEle = jq('#'+eleId.input.email+'-msg');
                    if(!data.email) {
                        $msgEmailEle.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_EMAIL);
                        return;
                    }

                    if(data.email){
                        //double check, will not proceed if invalid
                        var isValid = validationMessage(data.email);

                        if(!isValid) return;

                        addLoading();

                        fn.RESETPASSWORD(data.email, function (res) {
                            //call reset pwd api
                            removeLoadingIcon();
                            // if success
                            //  'The reset email has successfully sent.<br>Please check your email.';
                            var _txt = fn.LANG.MSG.INFO.RESET_PWD_HAS_SENT+'<br>'+fn.LANG.MSG.INFO.CHECK_YOUR_MAILBOX;
                            if(res.returncode != CODE.SUCCESS || !res.returncode){
                                _txt = fn.LANG.MSG.ERR.ETC;
                                jq('#pa-ui-msg').html(_txt);
                                setTimeout(function(){
                                    jq('#pa-ui-msg').html('');
                                }, 3000);
                            }else {
                                UI_message(_txt, 'Confirm', function(e){
                                    var self = this;
                                    if(e){
                                        // clicked close

                                    }else {
                                        if(false) console.log('the confirm button clicked 2');
                                    }
                                });
                            }
                            // if failed
                            // _txt = 'Failed to send the email.<br>Please try it again.';

                        })
                    }
                });

                //input : email
                jq('#'+eleId.input.email).on('change paste keyup', function(e){
                    if(false) console.log(jq(e.currentTarget).val());

                    var id = jq(e.currentTarget).attr('id');
                    var val = data.email = jq(e.currentTarget).val();

                    sharableVars.email = val;

                });

            }, aniDur)
        }

        /**
         *
         * @param castleno string. sponsor's castleno
         * @param callback
         * @constructor
         */
        function UI_userProfile(castleno, callback){
            addLoading();

            // 100 per page
            // todo : paging
            fn.CASTLE.GETPROFILEARENA(ITEMS_PER_LIST*20, 1, function(res){
                removeLoadingIcon();

                if(res.returncode == CODE.SUCCESS){
                    var str = fn.UI_TEMPLATE.getUserProfileModal(res);
                    var $wrapper = jq('#msg-wrapper');
                    if($wrapper.length == 0){
                        _doAddModal(str, callback);
                    }else {
                        // still exist; add a bit later
                        $wrapper.removeClass('on');
                        setTimeout(function(){
                            _doAddModal(str, callback);
                        }, aniDur);
                    }
                    setTimeout(function(){
                        resizeView();
                        //add event listener after rendering

                        var _sTimeout;
                        jq('#btn-copy-id').on('click', function(e){
                            var str = jq(this).find('.id-copy-txt').html();
                            var isCopied = fn.UTIL.copyToClipboard(str);

                            if(isCopied) {
                                var $self = jq(this);
                                $self.find('.id-copy-img').attr('src', 'static/img/btn-copied.png');
                                if(!_sTimeout){
                                    _sTimeout = setTimeout(function(){
                                        $self.find('.id-copy-img').attr('src', 'static/img/btn-copy.png');
                                        _sTimeout = null;
                                    }, 2000);
                                }
                            }
                        });

                        var data = {
                            file : undefined,
                        };

                        jq('#edit-profile-info').on('click', function(e){
                            UI_editUsername(function(){
                                var _me = _api.getMyInfo();
                                UI_userProfile(castleno, callback);
                            });
                        });

                        jq('#btn-setting').on('click', function(e){
                            UI_setting(castleno, callback);
                        });

                        // profile img upload
                        jq('#'+eleId.input.image).on('click', function (e){
                            //exception for some webviews

                            if(!_util.canFileUpload()){
                                e.preventDefault();
                                setTimeout(function (){
                                    message({text: fn.LANG.MSG.INFO.CHANGING_PROFILE_IMAGE_CAN_BE_USED_IN_ANY_OTHER_BROWSER},
                                        function(){
                                            setTimeout(function(){
                                                // editProfile(onComplete, onError);
                                            }, aniDur);
                                        },
                                        function(){
                                            setTimeout(function(){
                                                // editProfile(onComplete, onError);
                                            }, aniDur);
                                        }
                                    )}, aniDur);
                            }

                        });
                        //input : image
                        jq('#'+eleId.input.image).on('change', function (e) {

                            if(!_util.canFileUpload()){
                                e.preventDefault();
                                return false;
                            }

                            addLoading();

                            for( var j in e.currentTarget.files){
                                if(j !== 'length' && j !== 'item'){
                                    //accept only one file
                                    data.file = [];
                                    data.file.push(e.currentTarget.files[j]);
                                }
                            }

                            for(var i in data.file){
                                //data.file = {n:..., length : n}
                                var fileReader = new FileReader();
                                //var loadFile = function (fileReader, index) {
                                fileReader.onload = function (e) {
                                    if(false) console.log('image loaded', e.currentTarget.result);
                                    var imgsrc = e.currentTarget.result;
                                    var img = new Image();
                                    img.onload = function (e) {

                                        // upload image
                                        fn.resolve([
                                                _api.member.setMyInfo(null, null, null, null, null, data.file)],
                                            function(res3){

                                                removeLoadingIcon();
                                                switch(res3.returncode){
                                                    case 100:
                                                        fn.resolve([_api.member.getMyInfo()], function(res4){
                                                            if(res4.returncode == 100){
                                                                //success
                                                                // // needs to set as 'image'
                                                                // res.user.photo = userImg;
                                                                // _api.setMyInfo({image : userImg});
                                                                // if(callback) callback(res);

                                                                jq('.m-profile-photo > span > img').attr('src', imgsrc);
                                                                _util.polyfillExif(img, jq('.m-profile-photo > span'));

                                                                var _img = res4.message.image;
                                                                _api.setMyInfo({image: _img});
                                                            }else {

                                                            }
                                                        });

                                                        break;
                                                    default: //wrong file extension
                                                        // if(callback) _api.returnErr(res3.returncode, callback, res3.message);
                                                        break;
                                                }
                                            })
                                    }
                                    img.onerror = function(){
                                        if(false) console.log('err');
                                        removeLoadingIcon();
                                    }
                                    //var today = Math.round((new Date()).getTime() / 1000);
                                    img.crossOrigin = 'anonymous';
                                    img.src = e.target.result; //'?t='+today;
                                }
                                //}(fileReader, i);
                                if(false) console.log('files', data.file, i, data.file[i]);

                                fileReader.readAsDataURL(data.file[i]);
                            }
                        })
                    }, aniDur);
                }else {

                }
            });
        }

        function setSetting(key, val, onComplete){
            var _val1 = '',
                _val2 = '';
            if(key == 'setmode'){
                _val1 = val;
            }else if(key == 'emailyn'){
                _val2 = val;
            }
            addLoading();
            fn.CASTLE.UPDATESETARENA(_val1,_val2, function(res){
                removeLoadingIcon();
                if(res.returncode == CODE.SUCCESS){
                    if(key == 'setmode'){
                        _setmode = val;
                    }else if(key == 'emailyn'){
                        _emailyn = val;
                    }
                }else {
                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED_TRY_AGAIN, 'OK', null);
                }
            });
        }

        var _emailyn = 1;
        var _setmode = 2;   // 1:auto accept | 2: review all applicant..
        function UI_setting(castleno, onComplete){
            var hasContract = (castleno);
            addLoading();
            fn.CASTLE.UPDATESETARENA('','', function(res){
                removeLoadingIcon();
                if(res.returncode == CODE.SUCCESS){
                    _emailyn = res.emailyn;
                    _setmode = res.contractmode;
                    var str = fn.UI_TEMPLATE.getSettingModal(castleno);
                    if(!str) return;

                    var $wrapper = jq('#msg-wrapper');
                    _doAddModal(str, onComplete);
                    setTimeout(function(){

                        jq('#cm-chk-input1').prop('checked', (_emailyn == 1));
                        if(_setmode == 1){
                            jq('#cm-radio-input2').click();
                        }else {
                            jq('#cm-radio-input1').click();
                        }

                        jq('.cm-input-chk[name=app3]').on('click', function(e){
                            // if(false) console.log(jq(this).prop('checked'));
                            var _val = (jq(this).prop('checked')) ? 1 : 2;
                            setSetting('emailyn', _val);

                        });

                        jq('.cm-input-radio[name=app1]').on('click', function(e){
                            if(false) console.log(jq(this).val());
                            setSetting('setmode', jq(this).val());
                        });

                        jq('#t-id').on('focus blur', function (e) {
                            // validation
                            var _isValid = false;
                            var _val = jq(this).val();
                            if(_val == '') {
                                jq('#t-id-msg').html('Please enter Telegram ID');
                            }else {
                                _isValid = true;
                                jq('#t-id-msg').html('');
                            }
                        })

                        jq('#btn-send').on('click', function(e){
                            if(hasContract){

                                // validation
                                var _isValid = false;
                                var _val = jq('#t-id').val();
                                if(_val == '') {
                                    jq('#t-id-msg').html('Please enter Telegram ID');
                                }else {
                                    _isValid = true;
                                    jq('#t-id-msg').html('');
                                }

                                if(_isValid){
                                    UI_messageModal('Send Contract Request',
                                        'Your contract details will be forwarded to the castle owner who may contact you via Telegram.',
                                        function(e){
                                            if(e && e.message){

                                            }else {
                                                addLoading();
                                                fn.CASTLE.CONTACTREQUEST(castleno, _val, function(e){
                                                    removeLoadingIcon();
                                                    if(e.returncode == CODE.SUCCESS){
                                                        UI_toast5('Your contact details have been sent.', function(e){

                                                        });
                                                    }else {
                                                        UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED_TRY_AGAIN, 'OK', null);
                                                    }
                                                })
                                            }
                                        },
                                        true)
                                }

                            }else {
                                UI_toast5('You do not have a contract with any sponsor', function(e){

                                });
                            }

                        })

                        jq('#btn-logout').on('click', function(e){
                            addLoading();
                            _api.member.signOut(function(){
                                removeLoadingIcon();
                                jq('#btn-popup-close').click();
                            }, function(err) {
                                removeLoadingIcon();
                                if (err) {
                                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED_TRY_AGAIN, 'OK', null);
                                }
                            });
                        });


                    }, aniDur);
                }else {
                    UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED_TRY_AGAIN, 'OK', null);
                }
            })
        }

        function UI_messageModal(title, txt, onComplete, stack){
            var str = fn.UI_TEMPLATE.getMessage5Modal(title, txt);
            if(!str) return;

            _doAddModal(str, onComplete, undefined, stack);
            setTimeout(function(){

            }, aniDur);
        }

        var toastid = 1;
        var toastLast = 3;  // sec
        function UI_toast5(txt, onComplete){
            var str = fn.UI_TEMPLATE.getToastModal(toastid, txt);
            if(!str) return;

            _doAddModal(str, onComplete, undefined, true);

            var _ltime = toastLast; //(options.lastTime) ? options.lastTime : toastLast;
            (function(_id, __ltime){
                setTimeout(function(){
                    var _$toast = jq('.msg-modal.toast[data-id="'+_id+'"]');
                    setTimeout(function(){
                        var $close = _$toast.find('.btn-popup-close');
                        if($close.length > 0){
                            $close.click();
                        }
                    }, __ltime * 1000);
                }, aniDur);
            })(toastid, _ltime);
            toastid++;
        }

        function UI_editUsername(onComplete){
            var _me = _api.getMyInfo();
            var str = fn.UI_TEMPLATE.getUsernameModal();
            if(!str) return;

            var $wrapper = jq('#msg-wrapper');
            if($wrapper.length == 0){
                _doAddModal(str, onComplete);
                addUsernameBtnListener(onComplete);
            }else {
                // still exist; add a bit later
                $wrapper.removeClass('on');
                setTimeout(function(){
                    _doAddModal(str, onComplete);
                    addUsernameBtnListener(onComplete);
                }, aniDur);
            }
        }

        function addUsernameBtnListener(onComplete){
            var countryCode = jq('#'+eleId.input.countryCode + ' + .si-list-box button[data-selected=selected]').attr('data-value');
            if(countryCode == '') countryCode = null;
            jq('#'+eleId.input.countryCode).on('change', function(e){
                if(false) console.log(jq(e.currentTarget).val());

                var id = jq(e.currentTarget).attr('id');
                var val = jq(e.currentTarget).val();
                if(val === ''){
                    countryCode = null;
                    // jq('#'+id+'-msg').html(fn.LANG.MSG.ERR.INPUT.REQUIRED_COUNTRY);
                }else {
                    countryCode = jq(e.currentTarget).val();
                    // jq('#'+id+'-msg').html('');
                }

            });

            var _sBox = new Selectbox({id: eleId.input.countryCode,
                onSelect : function(e){
                    if(false) console.log('onSelect', e);

                    var val = jq(e.currentTarget).attr('data-value');
                    if(val === ''){
                        countryCode = null;
                        // jq('#'+id+'-msg').html(fn.LANG.MSG.ERR.INPUT.REQUIRED_COUNTRY);
                    }else {
                        countryCode = val;
                        // jq('#'+id+'-msg').html('');
                    }
                }
            });

            var isClicked = false;
            jq('#btn-save').on('click', function(e){
                e.stopPropagation();
                if(isClicked) return;
                isClicked = true;

                var _name = jq('#emoji-username').val();

                // validate name
                var isAllEmptyString = true;
                for ( var i in _name){
                    if (_name[i] != ' ') isAllEmptyString = false;
                }
                var isNameVaild = validateName(_name);
                var $wrapper = jq('#emoji-username').parent();
                var $msg = $wrapper.find('.tooltip.username span');
                var $wrapper2 = jq('#'+eleId.input.countryCode).parent();
                var $msg2 = $wrapper2.find('.tooltip.country span');
                if(!isNameVaild['1'] || !isNameVaild['2'] || !isNameVaild['3'] || isAllEmptyString){
                    if(!isNameVaild['1'] || isAllEmptyString) {
                        $msg.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_NICKNAME);
                    }
                    if(!isNameVaild['3']){
                        $msg.html(fn.LANG.MSG.ERR.INPUT.INVALID_NICKNAME_LENGTH);
                    }
                    if(!isNameVaild['2']){
                        $msg.html(fn.LANG.MSG.ERR.INPUT.SPECIAL_CHARACTERS_ARE_NOT_ALLOWED);
                    }
                    $wrapper.addClass('is-invalid');
                    $wrapper.removeClass('is-valid');
                }else {
                    $wrapper.addClass('is-valid');
                    $wrapper.removeClass('is-invalid');
                    $msg.html('');
                }

                if(!countryCode){
                    $msg2.html(fn.LANG.MSG.ERR.INPUT.REQUIRED_COUNTRY);
                }else {
                    $msg2.html('');
                }

                if(!isNameVaild['1'] || !isNameVaild['2'] || !isNameVaild['3'] || isAllEmptyString || !countryCode) {
                    isClicked = false;
                    return;
                }

                // save
                addLoading();
                fn.resolve([
                        _api.member.setMyInfo(_name, countryCode, null, null, null, null, null)],
                    function(res){
                        isClicked = false;
                        removeLoadingIcon();
                        if(res.returncode == CODE.SUCCESS){
                            _api.setMyInfo({nickname : _name, country_code : countryCode});
                            var _me = _api.getMyInfo();
                            if(_me.isAnonymous){
                                _api.setGuestInfo(_me);
                            }
                            // setTimeout(function () {
                            //     fn.LANG.setLang(req.languageCode);
                            // }, 600);
                            if(onComplete) onComplete();
                        }else if(res.returncode === CODE.SUCCESS_ERROR){
                            removeLoadingIcon();
                            UI_message(MESSAGES.ERROR_OCCURRED, 'OK', function(){
                                if(onComplete) onComplete();
                            });
                        }else {
                            removeLoadingIcon();
                            // etc;     
                            UI_message(MESSAGES.SYSTEM_ERROR_OCCURRED, 'OK', function(){
                                if(onComplete) onComplete();
                            });
                        }
                    });
            });
        }

        var selectedCurIdx = 1;
        var curIdx = 1; // default
        var curIdx2 = 1; // default
        var maxCate = _api.getEmojiCateLength();
        function UI_emojiModal(mode, onComplete){
            // run only the user is the first time play
            var _me = _api.getMyInfo(),
                isFirstPlay = _api.getFirstGuest();
            // comment below for test
            // if((_me.isAnonymous && !isFirstPlay) || !_me.isAnonymous){
            //     if(onComplete) onComplete();
            //     return;
            // }

            var str;
            var _mode = mode;
            if(mode == 'view'){
                str = fn.UI_TEMPLATE.getGuestModal();
            }else if(mode == 'edit'){
                _api.setFirstGuest(false);
                str = fn.UI_TEMPLATE.getEmojiModal();
            }

            if(!str) return;

            var $wrapper = jq('#msg-wrapper');
            if($wrapper.length == 0){
                _doAddModal(str, onComplete);
                addEmojiBtnListener(_mode, '#btn-emoji', onComplete);
            }else {
                // still exist; add a bit later
                $wrapper.removeClass('on');
                setTimeout(function(){
                    _doAddModal(str, onComplete);
                    addEmojiBtnListener(_mode, '#btn-emoji', onComplete);
                }, aniDur);
            }
        }

        var emojiSlider;
        // enable slider for emojis
        jq(w).on('activeEmojiSlider', function() {
            jq('.emoji-select-list').each(function() {
                if (!jq(this).hasClass('lightSlider')) {
                    emojiSlider = jq(this).lightSlider({
                        item: 1,
                        slideMargin: 0,
                        pager: false,
                        controls: false,
                        onAfterSlide: function (el) {
                            curIdx = emojiSlider.getCurrentSlideCount();
                            updateEmojiUI();
                        }
                    });
                }
            });
        });

        function updateEmojiUI(){
            // update arrows
            jq('.emoji-select-groups ul li').removeClass('on');
            jq('.emoji-select-groups ul li').eq(curIdx-1).addClass('on');

            if(curIdx == 1){
                jq('.esg-l').prop('disabled', true);
            }else if(curIdx == maxCate){
                jq('.esg-r').prop('disabled', true);
            }else {
                jq('.esg-l').prop('disabled', false);
                jq('.esg-r').prop('disabled', false);
            }
        }

        function moveTo(idx){
            emojiSlider.goToSlide(idx-1);
            curIdx = idx;

            updateEmojiUI();
        }

        // set up events
        function _doCloseModal(ev){
            if(!ev){
                if(jq('#msg-wrapper').length > 0){
                    jq('#msg-wrapper').removeClass('on');
                    var $super = jq('.'+eleClass.view.super);
                    if($super.hasClass('remove-vo')){
                        $super.removeClass('view-on');
                        $super.removeClass('remove-vo');
                    }
                    setTimeout(function(){
                        jq('#msg-wrapper').remove();
                        $super.removeClass('view-on2');
                    }, aniDur - 100);
                }
            }else {
                // stack modal
                var $wrapper = jq(ev.currentTarget).closest('.msgs-wrapper');
                $wrapper.removeClass('on');
                setTimeout(function(){
                    $wrapper.remove();
                    // $super.removeClass('view-on2');
                }, aniDur - 100);
            }
        }

        function _doAddModal(_templateStr, onComplete, noBg, stack){
            if(jq('#msg-wrapper').length > 0 && !stack) jq('#msg-wrapper').remove();

            var _newstr = _templateStr;
            if(stack){
                _newstr = _templateStr.replace('id="msg-wrapper" class="transition"', 'class="msgs-wrapper transition"')
                    .replace('id="btn-popup-close"', 'class="btn-popup-close"');
            }

            // add to the super view
            jq(_newstr).appendTo(jq('.'+eleClass.view.super));

            showView((typeof noBg != 'undefined') ? noBg : true);

            setTimeout(function () {
                if(!stack){
                    jq('#msg-wrapper').addClass('on');
                }else {
                    jq('.msgs-wrapper').addClass('on');
                }
            }, 10);

            if(!stack){
                // close btn
                jq('#btn-popup-close').on('click', function(e){
                    _doCloseModal();
                    _api.setFirstGuest(false);
                    if(onComplete) onComplete({message : 'USER_CLOSED'});
                })

                // ok btn
                jq('#btn-popup').on('click', function(e){
                    _doCloseModal();
                    if(onComplete) onComplete();
                })
            }else {
                // todo : .btn-popup, btn-popup-close can be multiple elements when this is called multiple times,
                //  should be handled individually
                // close btn
                jq('.btn-popup-close').on('click', function(e){
                    _doCloseModal(e);
                    _api.setFirstGuest(false);
                    if(onComplete) onComplete({message : 'USER_CLOSED'});
                })

                // ok btn
                jq('.btn-popup').on('click', function(e){
                    _doCloseModal(e);
                    if(onComplete) onComplete();
                })
            }
        }

        // has only modal
        function displayCustomModal(title) {

            var _self = this;
            var view = null;
            var popupContentClass = '',
                modalClass = 'modal-message modal-message-ui';
            var isAndroid = (_api.isAndroid() || _api.isIos()) ? ' is-native' : '';
            var str = '<div class="'+eleClass.modal.overlay+isAndroid+'">' +
                '<div class=" modal '+modalClass+'">'+
                '   <div class=" modal-dialog">'+
                '       <div class="modal-content page-loading">'+
                '           <div class="modal-content-inner">' +
                '               <div class="popup-content page-loading '+popupContentClass+'">'+
                '               <div class="hidescrollbar">'+
                //where contents come in
                '               </div>' +
                '           </div>'+
                '       </div>'+
                '   </div>'+
                '</div>'+
                // below element is for landscape only.
                // it shows roatating indicator when the orientation is portrait
                '<div class="modal-dialog-landscape-helper"><div class="modal-content"><i class="fa fa-undo"></i></div></div>'+
                '</div>'+
                '</div>';

            if(false) console.log('render plain modal layout!', title);

            //setView
            this.setView = function(viewStr){
                if(viewStr){
                    view = viewStr;
                }else {
                    return false;
                }
            }
            //onReady; triggered when view is set.
            this.onReady = null;
            //onClose; triggered when modal closed
            this.onClose = null;
            this.renderView = function(){
                if(view){
                    jq(view).appendTo('.hidescrollbar')
                    if(_self.onReady) _self.onReady();
                    jq('.close').on('click', function(e){
                        e.preventDefault();

                        if(_self.onClose) _self.onClose();
                        //close() will be ran by listener that added earlier than this one
                    });
                }else {
                    return false;
                }
            }
            this.close = function(){
                jq('.close').click();
            }

            render(str, 'body');

            return this;
        }

        function close(){
            if(false) console.log('close');

            _doCloseModal();

            // if(intv) clearInterval(intv);
            //
            // //give some time to animate
            // jq('.'+eleClass.modal.overlay).addClass('dismiss');
            // setTimeout(function(){
            //     jq('.'+eleClass.modal.overlay).remove();
            //     if(intv) clearInterval(intv);
            // }, 300);
        }

        //////////////////////////////////////          PUBLIC
        fn[moduleName] = { //api map
            eleIds : eleId,
            loading : addLoading,
            loadingFinish : removeLoadingIcon,
            // aa : UI_match_countdown,
            // aa2 : UI_match,
            getMessages : function(){
                return MESSAGES;
            },
            hideView : hideView,
            resizeView : resizeView,
            /**
             *
             * @param arr
             */
            loadAssets : function(obj){
                if(!obj || (obj && Object.keys(obj).length == 0)) return;
                var _style = 'position:absolute; top: -9999999999px; left: -99999999999px;width:0px;height:0px;';
                // var $loader = jq('<img src="" style="'+_style+'">');
                // $loader.appendTo('.'+eleClass.view.super);

                for (var i in obj){
                    var img = new Image();
                    img.src = obj[i]+'?v='+_api.getVer();
                    // if(false) console.log('load', obj[i]);
                }
            },

            /**
             *
             * @param type string.
             * @param options obj|null. data differs depending on the type
             * @param onComplete func|null. functions that called when SDK's UI disappears. the return parameter also differs
             * @constructor
             */
            CALL : function(type, options, onComplete){
                uiCallType = type;
                var _o = options;

                if(type != 'message' && type != 'promotion' && type != 'emojiModal' && type != 'login' && type != 'openPA'
                    && type != 'signinModal' && type != 'signupModal' && type != 'signupAllModal' && type != 'forgotPwdModal'
                    && type != 'userProfileModal'){
                    showView();
                }
                onCompleteFunc = onComplete;
                if(type == 'home'){
                    changeMenu(MENUS.HOME);
                }else if(type == 'result'){
                    // options : null
                    onResultParams = options;
                    changeMenu(MENUS.RESULT); // it will call UI_result
                }else if(type == 'match'){
                    // options : obj. gamedata
                    onMatchParams = options;
                    changeMenu(MENUS.MATCH); // it will call UI_match
                }else if(type == 'shop'){
                    // options : null
                    onShopParams = options;
                    changeMenu(MENUS.SHOP); // it will call UI_shop
                }else if(type == 'challenge'){
                    resetChallengeFrom();
                    // options : object
                    //  payload object. has 'action', 'data' keys
                    //  oppoObj object. opponent info object
                    //  lbName string. leaderboard name. when oppoObj is sent, this is required.
                    if(_o.payload || _o.payload === null) {
                        if(_o.payload === null || _o.payload.action != 'challenge'){
                            this.CALL('match', null, onComplete);
                            return;
                        }else {
                            // do nothing
                        }
                    }
                    UI_challenge_check_data(_o, onComplete);
                }else if(type == 'result_challenge'){
                    resetChallengeFrom();

                    function doGo(){
                        if(_o.score >= 0){
                            _o.match = _match_;
                        }
                        UI_result_challenge(_o, onComplete);
                    }
                    // options : object.
                    //  match object. when game finished
                    //  score number
                    //  update object. for fbig.update when 'playtype' = 2 (friend play)
                    //      text string
                    //      cta string
                    //      image string
                    // leaderboard string. fb leaderboard name
                    if(_o.isNewContinue && !_match_){
                        function doGet(){

                            fn.IGAPI.PLAYER.GETCUSTOMSAVEDATA(['_sdk_newcontinue'], function(res){
                                _match_ = JSON.parse(res._sdk_newcontinue);
                                _matchNo_ = _match_.matchno;
                                doGo();
                            }, function(err){
                                // removeLoadingIcon();
                                UI_message(MESSAGES.ERROR_OCCURRED_TRY_AGAIN, 'Ok', function(e){
                                    if(e){
                                        // user clicked the close button
                                    }else {
                                        doGet();
                                    }
                                });
                            });
                        }
                        doGet();
                    }else {
                        doGo();
                    }
                }else if(type == 'message'){
                    // options : obj
                    UI_message(_o.messageStr, _o.btnStr, onComplete);
                }else if(type == 'signinModal'){
                    UI_signinModal(onComplete);
                }else if(type == 'signupModal'){
                    UI_signupModal(onComplete);
                }else if(type == 'signupAllModal'){
                    UI_signupAllModal(onComplete);
                }else if(type == 'forgotPwdModal'){
                    UI_forgotPwdModal(onComplete);
                }else if(type == 'emojiModal'){
                    var _mode = (_o && _o.mode) ? _o.mode : 'view'; // default
                    UI_emojiModal(_mode, onComplete);
                }else if(type == 'userProfileModal'){
                    UI_userProfile((_o && _o.castleno) ? _o.castleno : null, onComplete);
                }else if(type == 'login'){
                    w.hcaptcha = undefined;
                    UI_signin(onComplete);
                }else if(type == 'openPA'){
                    UI_openPA(_o, onComplete);
                }
            }

            // for UI_APP
            ,CLOSE : close

            ,_doAddModal : _doAddModal
            ,_showView : showView
            ,getAnimationDelay : function(){ return aniDur; }
            ,getRandomImage : function(){ return randimg; }
            ,displayCustomModal : displayCustomModal
            ,aniLoadingFinished : aniLoadingFinished
            ,renderPage : renderPage
        };

    }).call(PASDKe20);

})(window);

/**
 * This is a template for a module of SDK
 * Created by Spike on 2020-10-28.
 * UI html template module. for SDK internal use only
 * Becuse html takes so much of lines in the code, it's better to separate with UI module.
 * Note that most of functions required data fetched from the server
 */
(function(w){

    (function(){

        var fn = this.fn;    //instance
        var self = this;
        var moduleName = 'UI_TEMPLATE';
        var _api = fn.API;
        var _util = fn.UTIL;
        //var _parent = fn[moduleName];     //for module extended

        //////////////////////////////////////          PRIVATE

        var jq = jQuery;
        var MATCH_RESULT = { // should change in UI too, when updated
            PENDING : 1,
            WIN : 2,
            LOSE : 3,
            DRAW : 4
        };

        var errCode = _api.getErrCode();
        var errMsg = _api.getErrMessage();
        var eleId = fn.UI.eleIds;

        ///////////////////////         FUNCTIONS

        w.onPhotoLoadError = function(e){
            var $this = jq(e.currentTarget);
            $this.attr('src', 'static/img/random-profile.png');
        }
        var profileImgPolyfill = 'this.onerror=null;this.src=\'static/img/random-profile.png\';';
        var flagImgPolyfill = 'this.onerror=null;this.src=\'static/img/flags/ZZ.png\';';

        function subTopMenuDiv(title, isStack){
            var str = ''+
                '<div id="sdk-top-sub">'+
                    '<div class="nav-bar">'+
                        '<p class="sub-header-title">'+title+'</p>'+
                        '<button class="sub-header-close" id="'+eleId.btn.subHeaderClose+'"><img src="static/img/btn-close.png" alt=""></button>'+
                    '</div>'+
                '</div>';
            if(isStack){
                str = ''+
                '<div class="sdk-top-sub">'+
                    '<div class="nav-bar con-flex cf-row cf-hor-space-between cf-ver-center">'+
                        '<button class="con-flex cf-ver-center sdk-btn-top-back" data-is-stack="1">'+
                            '<img alt="" class="top-back-img" src="static/img/btn-back-top.png">'+
                        '</button>'+
                        '<p class="sub-header-title">'+title+'</p>'+
                        '<div> </div>'+
                    '</div>'+
                '</div>';
            }
            return str;
        }

        /**
         *
         * @param data object. user profile data fetched from our server
         * @return {string}
         */
        function TPL_getProfile(data){
            var me = fn.API.getMyInfo();
            var editBtn = '';
            if(me.isAnonymous){
                editBtn += '<button type="button" id="edit-profile-name" class="btn-blue-round">' +
                    '<img class="ico" src="static/img/icon-edit-white.png" alt="">Edit' +
                '</button>';
            }

            var conStr = ''+
            '<div class="list-con profile-items">' +
                '<ul class="panel-list">' +
                    '<li class="panel-wrapper transition no-titles">' +
                        '<div class="item-list">' +
                            '<div class="pc-con bg-clear no-padding">' +

                                '<div class="con-flex cf-ver-center">'+
                                    '<div id="edit-profile-photo">' +
                                        '<div class="prf-img">' +
                                            '<img src="'+data.photo+'" alt="" onerror="'+profileImgPolyfill+'">' +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="con-flex cf-hor-space-between cf-ver-center full-width">' +
                                        '<div class="prf-title con-flex cf-col">' +
                                            '<p class="prf-name">'+data.nickname+'</p>' +
                                            '<span class="prf-flag"><img src="static/img/flags/'+data.countryCode+'.png" alt="'+data.country+' flag" onerror="'+flagImgPolyfill+'"></span>' +
                                        '</div>' +
                                        '<div class="pr-1">' +
                                            editBtn +
                                        '</div>'+
                                    '</div>' +
                                '</div>'+

                            '</div>' +
                        '</div>' +
                    '</li>' +
                '</ul>' +

                // ruby match result
                '<ul class="panel-list">' +
                    '<li class="panel-wrapper transition">' +
                        '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">' +
                            '<span><img src="static/img/icon-xp.png" class="pc-title-icon point" alt="">XP match result</span>' +
                        '</div>' +
                        '<div class="item-list">' +
                            '<div class="pc-con no-padding ruby-match-res">' +
                                '<div class="two-col-info ruby con-flex">'+

                                    '<div class="">' +
                                        '<span class="tci-title">Won</span>'+
                                        '<span class="tci-val"><span>'+_util.displayComma(data.match_wins)+'</span></span>'+
                                    '</div>' +
                                    '<div>' +
                                        '<span class="tci-title">Lost</span>'+
                                        '<span class="tci-val"><span>'+_util.displayComma(data.match_losts)+'</span></span>'+
                                    '</div>'+

                                '</div>'+
                            '</div>' +
                        '</div>' +
                    '</li>' +
                '</ul>' +

                // point match result
                '<ul class="panel-list">' +
                    '<li class="panel-wrapper transition">' +
                        '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">' +
                            '<span><img src="static/img/icon-point.png" class="pc-title-icon point" alt="">Practice match result</span>' +
                        '</div>' +
                            '<div class="item-list">' +
                                '<div class="pc-con no-padding point-match-res">' +
                                    '<div class="two-col-info point con-flex">'+

                                    '<div class="">' +
                                        '<span class="tci-title">Won</span>'+
                                        '<span class="tci-val"><span>'+_util.displayComma(data.exer_wins)+'</span></span>'+
                                    '</div>' +
                                    '<div>' +
                                        '<span class="tci-title">Lost</span>'+
                                        '<span class="tci-val"><span>'+_util.displayComma(data.exer_losts)+'</span></span>'+
                                    '</div>'+

                                '</div>'+
                            '</div>' +
                        '</div>' +
                    '</li>' +
                '</ul>' +

                // trophy
                // '<ul class="panel-list">' +
                //     '<li class="panel-wrapper transition">' +
                //         '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">' +
                //             '<span><img src="static/img/icon-trophy-white.png" class="pc-title-icon trophy" alt="">Total Trophy so far</span>' +
                //         '</div>' +
                //         '<div class="item-list">' +
                //             '<div class="pc-con no-padding point-match-res">' +
                //                 '<div class="two-col-info trophy con-flex">'+
                //
                //                     '<div class="">' +
                //                         '<span class="tci-title">Pro</span>'+
                //                         '<span class="tci-val">' +
                //                             '<span class="tci-ico"><img src="static/img/icon-trophy.png" alt=""></span>' +
                //                             '<span>'+_util.displayComma(data.totalgtrophy)+'</span>' +
                //                         '</span>'+
                //                     '</div>' +
                //                     '<div>' +
                //                         '<span class="tci-title">Practice</span>'+
                //                         '<span class="tci-val">' +
                //                             '<span class="tci-ico"><img src="static/img/icon-trophy-blue.png" alt=""></span>' +
                //                             '<span>'+_util.displayComma(data.totalstrophy)+'</span>' +
                //                         '</span>'+
                //                     '</div>'+
                //
                //                 '</div>'+
                //             '</div>' +
                //         '</div>' +
                //     '</li>' +
                // '</ul>' +
            '</div>';

            return conStr;
        }

        function TPL_getProfileEdit(){
            var me = fn.API.getMyInfo();
            var photo = me.image;

            var listStr = getEmojiList();
            var title = 'Update your emoji & name';
            
            var str = ''+
                subTopMenuDiv(title, true) +
                '<div class="sub-content scrollable">' +
                    '<div class="msg-form mt-1_5">' +
                        '<label for="name">' +
                            '<span>Update nickname</span>' +
                            '<input type="text" id="emoji-username" name="name" class="form-control black-deep" placeholder="Nickname" value="'+me.nickname+'" required>' +
                        '</label>' +
                        '<span class="tooltip bottom alert">' +
                            '<span></span>' +
                        '</span>'+
                    '</div>' +
                    '<div class="msg-form mt-1_5">' +
                        '<label for="name">' +
                            '<span>Update your emoji</span>' +
                        '</label>' +
                        listStr +
                    '</div>' +
                    '<div class="msg-form mt-3">' +
                        '<button type="button" class="btn btn-gradient btn-big bg-black" id="save"><span>Save</span></button>' +
                    '</div>' +
                '</div>';
            return str;
        }

        function TPL_getSignIn(){
            var str = '' +
                subTopMenuDiv('Login', true) +
                '<div class="sub-content scrollable">'+
                '<div class="login-wrapper ">'+
                    '<div class="signin-logo con-flex cf-hor-center cf-ver-center cf-col">'+
                        '<figure>'+
                            '<img src="static/img/logo-pa-color.png" alt="pocketarena logo">'+
                        '</figure>'+
                    '</div>'+
                    '<div class="tab-wrapper type-2">'+
                        '<div class="tab-header">'+
                            '<ul class="tab tab-all-2 con-flex cf-hor-space-between">'+
                                '<li class="on">'+
                                    '<button type="button">'+
                                        'Login'+
                                    '</button>'+
                                '</li>'+
                                '<li>'+
                                    '<button type="button">'+
                                        'Sign up'+
                                    '</button>'+
                                '</li>'+
                            '</ul>'+
                            '<span class="tab-active-indicator transition"></span>'+
                        '</div>'+
                    '</div>'+
                    '<div class="msg-form has-icon mt-2"> <!-- validation class : .is-valid -->'+
                        '<label for="'+eleId.input.email+'">'+
                            '<span><img src="static/img/icon-email.png" alt="" class="ico-label">Email</span>'+
                            '<input type="text" id="'+eleId.input.email+'" name="email" class="form-control black-deep" placeholder="Email">'+
                        '</label>'+
                        '<span class="tooltip bottom alert"><span></span></span>'+
                    '</div>'+
                    '<div class="msg-form has-icon mt-2 signup-field">'+
                        '<label for="'+eleId.input.name+'">'+
                            '<span><img src="static/img/icon-username.png" alt="" class="ico-label">Username</span>'+
                            '<input type="text" id="'+eleId.input.name+'" name="name" class="form-control black-deep" placeholder="Username">'+
                        '</label>'+
                        '<span class="tooltip bottom alert"><span></span></span>'+
                    '</div>'+
                    '<div class="msg-form has-icon mt-2"> <!-- validation class : .is-invalid -->'+
                        '<label for="'+eleId.input.pwd+'">'+
                            '<span><img src="static/img/icon-pwd.png" alt="" class="ico-label">Password</span>'+
                            '<input type="password" id="'+eleId.input.pwd+'" name="pwd" class="form-control black-deep" placeholder="Password">'+
                        '</label>'+
                        '<span class="tooltip bottom alert"><span></span></span>'+
                    '</div>'+
                    // '<script src="https://hcaptcha.com/1/api.js" async defer></script>' +
                    '<div class="h-captcha" data-sitekey="6e572aea-5b77-46ee-ba82-f57abb087962" data-theme="light"></div>'+
                    '<div class="msg-form signup-field mt-1 text-center txt-privacy">'+
                        'By joining, you agree to the <a href="https://pocketarena.com/terms_privacy" target="_blank">Terms of use and Privacy policy</a><br>'+
                        'as well as to receive occasional emails from us.'+
                    '</div>'+
                    '<div class="msg-form signin-field mt-2">'+
                        '<button type="button" class="btn type-text" id="forgot-pwd">Forgot password?</button>'+
                    '</div>'+
                    '<div class="panel-wrapper transition clear mt-2">'+
                        '<button type="button" class="btn btn-gradient-fill btn-big" id="sign-in-up">'+
                            'Login'+
                        '</button>'+
                    '</div>'+
                    // '<div class="msg-form signin-divider text-center con-flex cf-hor-space-between cf-ver-center">'+
                    //     '<span> </span><span class="divider-text">Or login with</span><span> </span>'+
                    // '</div>'+
                    '<div class="panel-wrapper clear sns-btns con-flex cf-ver-center cf-hor-space-between">'+
                        '<button type="button" class="btn btn-big con-flex cf-ver-center sns-button" id="btn-gg">'+
                            '<img src="static/img/icon-gg.png" alt="">'+
                            '<span>Google</span>'+
                        '</button>'+
                        '<button type="button" class="btn btn-big con-flex cf-ver-center sns-button" id="btn-fb">'+
                            '<img src="static/img/icon-fb.png" alt="">'+
                            '<span>Facebook</span>'+
                        '</button>'+
                    '</div>'+
                '</div>'+
                '</div>';
            return str;
        }

        function TPL_getTransactionHistoryItem(idx, data){
            var str = '';
            var i = idx;
            var _d = data;
            // local time
            var _date = moment(_d.registdate).format('YYYY-MM-DD HH:mm:ss').split(' ');
            var _useClass = (_d.get_use == 2) ? 'minus' : 'plus';   // 1:  / 2:
            var _amount = _d.xpamount;
            var _remaining = moment.utc(_d.expiredate).local().fromNow();
            var _stripe = ((i+1)%2 == 0) ? 'even' : 'odd';
            str += '<tr class="'+_stripe+'">'+
               '<td class="text-center td-list">'+
                   // '<span>05.Mar.2020</span>'+
                   // '<span>16:32</span>'+
                    '<span>'+_date[0]+'</span><span>'+_date[1]+'</span>'+
               '</td>'+
               '<td class="text-center td-list">'+
                   // '<span class="minus">-10 USDT</span>'+
                   '<span class="'+_useClass+'">'+_amount+'</span>'+
               '</td>'+
               '<td class="text-right td-list">'+
                   // '<span>1:1 Challenge</span>'+
                   // '<span>Winning Reward</span>'+
                    '<span>'+_remaining+'</span>'+
               '</td>'+
            '</tr>';
            return str;
        }

        function TPL_getMatchHistoryItem(clickedType, idx, data){
            var itemData = data; //ongoings[i];
            var matchResult = itemData.matchresult;
            var matchType = itemData.matchtype; // 1 = match(pro) 2 = practice
            var matchImgStr = (matchType == 2 || matchType == 4) ? 'xp' : 'point';
            var item = '';
            if(matchResult == MATCH_RESULT.PENDING){
                var isMyTurn = (itemData.roomid && itemData.matchsetno);
                var imgurl = (itemData.oppophoto == '') ? 'static/img/random-profile.png' : _api.replacePhotoPath(itemData.oppophoto);
                var name = (itemData.opponickname == '') ? 'Opponent' : itemData.opponickname;
                // var country = itemData.oppocountry;
                // var score = _util.displayComma(itemData.opposcore);
                // var reward = _util.displayComma(itemData.rewardamount);
                var entryFee = _util.displayComma(itemData.entryfee);
                var playDate = moment.utc(itemData.playdate).local().fromNow();
                var titleStr = (isMyTurn) ? 'It\'s your turn' : 'Now Playing';
                var btnImg = (isMyTurn) ? '<img src="static/img/btn-play.png" alt="">' : '';
                var isRequest = (isMyTurn) ? 'data-request="1"' : '';

                var isOlderThan3Days = false;
                if(clickedType == 1){
                    var diff = moment.utc().unix() - moment.utc(itemData.playdate).unix();
                    var days = diff/(60*60*24);
                    isOlderThan3Days = (days >= 3);
                }

                if(!isOlderThan3Days){  // show only items recent in 3 days
                    item = ''+
                        '<div class="pc-con no-padding">'+
                            '<button type="button" class="btn-play-info con-flex" data-match-result="'+itemData.matchresult+'" data-idx="'+idx+'" '+isRequest+'>'+
                                '<div class="play-info">'+
                                    '<div class="con-flex cf-ver-center">'+
                                        '<div class="play-img"><img src="'+imgurl+'" alt="" onerror="'+profileImgPolyfill+'"></div>'+
                                        '<div class="pi-title con-flex cf-hor-space-between cf-ver-center">'+
                                            '<div>'+
                                                '<p class="normal">'+titleStr+'</p>'+
                                                '<span><span class="vs">VS</span> '+name+'</span>'+
                                            '</div>'+
                                            '<div class="pi-side">'+btnImg+'</div>'+
                                        '</div>'+
                                    '</div>'+
                                    '<div class="additional con-flex">'+
                                    '<div class="a-time">Time : '+playDate+'</div>'+
                                    '<div class="a-headcount">2 Players</div>'+
                                    '<div class="a-entry">Entry <span class="price point"><img src="static/img/icon-'+matchImgStr+'.png" alt=""> '+entryFee+'</span></div>'+
                                '</div>'+
                            '</div>'+
                            '</button>'+
                        '</div>';
                }
            }else {
                var myScore = Number(itemData.myscore);
                var oppoScore = Number(itemData.opposcore);

                var imgurl = (itemData.oppophoto == '') ? 'static/img/random-profile.png' : _api.replacePhotoPath(itemData.oppophoto);
                var name = (itemData.opponickname == '') ? 'Opponent' : itemData.opponickname;
                // var country = itemData.oppocountry;
                // var score = _util.displayComma(itemData.opposcore);
                var reward = _util.displayComma(itemData.rewardamount);
                var entryFee = _util.displayComma(itemData.entryfee);
                var playDate = moment.utc(itemData.playdate).local().fromNow();

                var resultClass, resultStr, rewardStr;
                if(itemData.matchresult == MATCH_RESULT.WIN) {
                    resultClass = 'win';
                    resultStr = 'You won';
                    rewardStr = '<div class="reward point"><img src="static/img/icon-'+matchImgStr+'.png" alt=""> '+reward+'</div>';
                }else if(itemData.matchresult == MATCH_RESULT.LOSE) {
                    resultClass = 'lose';
                    resultStr = 'You lost';
                    rewardStr = '';
                }else if(itemData.matchresult == MATCH_RESULT.DRAW) {
                    reward = entryFee;
                    resultClass = 'draw';
                    resultStr = 'Draw';
                    rewardStr = '<div class="reward point"><img src="static/img/icon-'+matchImgStr+'.png" alt=""> '+reward+'</div>';
                }

                item = '' +
                '<div class="pc-con no-padding">'+
                    '<button type="button" class="btn-play-info con-flex" data-match-result="'+itemData.matchresult+'" data-idx="'+idx+'">'+ 
                        '<div class="play-info">'+
                            '<div class="con-flex cf-ver-center">'+
                                '<div class="play-img"><img src="'+imgurl+'" alt="" onerror="'+profileImgPolyfill+'"></div>'+
                                '<div class="pi-title con-flex cf-hor-space-between cf-ver-center">'+
                                    '<div>'+
                                        '<p class="'+resultClass+'">'+resultStr+'</p>'+
                                        '<span><span class="vs">VS</span> '+name+'</span>'+
                                    '</div>'+
                                    rewardStr+
                                '</div>'+
                            '</div>'+
                            '<div class="additional con-flex">'+
                                '<div class="a-time">Time : '+playDate+'</div>'+
                                '<div class="a-headcount">2 Players</div>'+
                                '<div class="a-entry">Entry <span class="price '+matchImgStr+'"><img src="static/img/icon-'+matchImgStr+'.png" alt=""> '+entryFee+'</span></div>'+
                            '</div>'+
                        '</div>'+
                    '</button>'+
                '</div>';
            }
            return item;
        }

        function TPL_getNoData(hide){
            var hideClass = '';
            if(hide) hideClass='hide';
            return '<div class="no-data con-flex cf-ver-center cf-hor-center '+hideClass+'">No data found</div>';
        }

        function TPL_getMatchHisotry(){
            var ongoingsStr = '' +
                '<li class="panel-wrapper transition" id="pending-list" style="display:none">'+
                    '<div class="pc-title con-flex cf-hor-space-between">'+
                        '<span>In Progress</span>'+
                    '</div>'+
                    '<div class="item-list">'+
                    '</div>' +
                    '<div class="btn-wrapper" style="display: none;"><button type="button" class="btn-middle" id="show-progress-btn">See more</button></div>'+
                '</li>';
            var requestStr = ''+
                '<li class="panel-wrapper transition" id="request-list" style="display: none">'+
                    '<div class="pc-title con-flex cf-hor-space-between">'+
                        '<span>Request Challenges</span>'+
                    '</div>'+
                    '<div class="item-list">'+
                    '</div>' +
                    '<div class="btn-wrapper" style="display: none;"><button type="button" class="btn-middle" id="show-request-btn">See more</button></div>'+
                '</li>';
            var finishedStr = '' +
                '<li class="panel-wrapper transition" id="finished-list" style="display: none">'+
                    '<div class="pc-title con-flex cf-hor-space-between">'+
                        '<span>Finished</span>'+
                    '</div>'+
                    '<div class="item-list">'+
                    '</div>' +
                    '<div class="btn-wrapper" style="display: none;"><button type="button" class="btn-middle" id="show-finished-btn">See more</button></div>'+
                '</li>';
            var matches = '' +
                '<div class="list-con" style="visibility: hidden">'+
                    '<ul class="panel-list">'+
                        ongoingsStr+
                        requestStr+
                        finishedStr+
                    '</ul>'+
                '</div>'+
                TPL_getNoData(true);    // put two cases and remove one of them depending on the data
            return matches;
        }

        function TPL_getMatchRoom(data){

            function createRecommendedStr(data){
                var _str = '';
                for(var i = 0; i < data.length; i++){
                    var itemData = data[i];
                    var isfriend = itemData.isfriend;
                    // var matchType = itemData.matchtype; // 1 = match(pro) 2 = practice 3 = recommend match 4 = recommend practice <= pa
                    var matchType = itemData.matchtype; // 1 = practice 2 = match(pro) 3 = recommend practice 4 = recommend match
                    var oppoMatchNo = itemData.oppomatchno; //itemData.matchsetno;
                    var matchClass = (matchType == 2 || matchType == 4) ? 'ruby' : 'point';
                    var matchImgStr = (matchType == 2 || matchType == 4) ? 'xp' : 'point';
                    var matchTitle = itemData.matchtitle;
                    var matchDesc = itemData.description;
                    if(itemData.description.toLowerCase() == 'try to get point'){
                        matchDesc = 'Try to get <span class="color-point">point</span>';
                    }else if(itemData.description.toLowerCase() == 'try to get ruby'){
                        matchDesc = 'Try to get <span class="color-ruby">ruby</span>';
                    }
                    var name = itemData.opponickname;
                    var imgUrl = _api.replacePhotoPath(itemData.oppophoto);
                    var country = itemData.oppocountry;
                    // var score = _util.displayComma(itemData.opposcore);
                    var reward = _util.displayComma(itemData.rewardamount);
                    var rewardTrophy = _util.displayComma(itemData.rewardtrophy);
                    var entryFee = _util.displayComma(itemData.entryfee);
                    var maxMember = _util.displayComma(itemData.maxmember);

                    var friendClass = '';
                    var friendIcon = '';
                    if(isfriend == 1){ // 1 or 0
                        friendClass = 'is-friend';
                        friendIcon = '<div class="border-people"><img src="static/img/frame-friend-red.png" alt="">' +
                        '</div>';
                    }

                    _str += '' +
                        '<div class="pc-con col-3 '+friendClass+' '+matchClass+'">'+
                            '<button type="button" type="button" class="btn-play-info con-flex" data-no="'+oppoMatchNo+'" data-idx="'+i+'">'+
                                '<div class="play-info recommended">'+
                                    '<div class="chg-img">' +
                                        '<img src="'+imgUrl+'" alt="" onerror="'+profileImgPolyfill+'">' +
                                        // '<div class="chg-reward-wrapper">' +
                                        //     '+<img src="static/img/icon-'+matchClass2+'-normal.png" alt="">'+ reward +
                                        // '</div>'+
                                    '</div>' +
                                    '<div class="chg-title">' +
                                        '<span class="chg-flag"><img src="static/img/flags/'+country+'.png" alt=""></span>' +
                                        '<span class="chg-name text-truncate">'+name+'</span>' +
                                    '</div>' +
                                    '<div class="chg-reward-new con-flex cf-hor-space-between cf-ver-center">' +
                                        '<span>Reward</span><span><img src="static/img/icon-'+matchImgStr+'.png" alt=""> '+reward+'</span>'+
                                    '</div>'+
                                    '<div class="btn-gradient chg-btn-style">' +
                                        '<span>Play</span>' +
                                        '<span class="chg-entry-fee"><img src="static/img/icon-'+matchImgStr+'.png" alt=""> '+entryFee+'</span>' +
                                    '</div>'+
                                '</div>' +
                            '</button>'+
                            friendIcon+
                        '</div>';
                }
                return _str;
            }

            var matches = data.matchinfo;
            var practices = data.practiceinfo;
            var recommended = data.recomminfo;

            var recommendedStr = '';
            var matchesStr = '';
            var practicesStr = '';

            var rcmItems = '';
            if(recommended.length > 0) {
                rcmItems += createRecommendedStr(recommended);
            }

            if(recommended.length > 0){
                recommendedStr = '' +
                    '<li class="panel-wrapper transition">'+ // accordion-closed
                        '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">'+
                            '<span>Recommended Opponent</span>'+
                        '</div>'+
                        '<div class="item-list con-flex cf-row cf-wrap cf-hor-space-between multi-cols">'+
                            rcmItems+
                        '</div>'+
                    '</li>';
            }

            var rooms = '';
            if(matches.length > 0 || practices.length > 0){
                if(matches.length > 0){
                    var items = '';
                    for(var i = 0; i < matches.length; i++){
                        var itemData = matches[i];
                        var matchType = itemData.matchtype; // 1 = practice 2 = match(pro) 3 = recommend practice 4 = recommend match
                        var matchSetNo = itemData.matchsetno;
                        var matchClass = (matchType == 2 || matchType == 4) ? 'ruby' : 'point';
                        var matchImgStr = (matchType == 2 || matchType == 4) ? 'xp' : 'point';
                        var matchTitle = itemData.matchtitle;
                        var matchDesc = itemData.description;
                        var matchimage = (matchTitle.indexOf('NOVICE') > -1) ? 'novice' : 'amarteur';
                        if(itemData.description.toLowerCase() == 'try to get point'){
                            matchDesc = 'Try to get <span class="color-point">point</span>';
                        }else if(itemData.description.toLowerCase() == 'try to get ruby'){
                            matchDesc = 'Try to get <span class="color-ruby">ruby</span>';
                        }
                        var name = itemData.opponickname;
                        // var country = itemData.oppocountry;
                        // var score = _util.displayComma(itemData.opposcore);
                        var reward = _util.displayComma(itemData.rewardamount);
                        var rewardTrophy = _util.displayComma(itemData.rewardtrophy);
                        var entryFee = _util.displayComma(itemData.entryfee);
                        var maxMember = _util.displayComma(itemData.maxmember);

                        items += '' +
                            '<div class="pc-con no-padding">'+
                                '<button type="button" type="button" class="btn-play-info con-flex" data-no="'+matchSetNo+'">'+
                                    '<div class="play-info challenge no-additional">'+
                                        '<div class="con-flex cf-ver-center">'+
                                            '<div class="challenge-emblem '+matchClass+' con-flex cf-hor-center cf-ver-center"><img src="static/img/icon-challenge-'+matchimage+'.png" alt=""><span class="chlg-players">1v1</span></div>'+
                                            '<div class="pi-title con-flex cf-hor-space-between cf-ver-center">'+
                                                '<div>'+
                                                    '<p class="normal">'+matchTitle+'</p>'+
                                                    '<div class="a-headcount '+matchClass+'">' +
                                                        // '<span>'+maxMember+' Players &nbsp;&bull;</span>' +
                                                        // '<span class="a-time">Prize ' +
                                                        //     '<span class="price">' +
                                                        //         '<img src="static/img/icon-'+matchClass+'.png" alt=""> '+reward+
                                                        //     '</span>' +
                                                        // '</span>' +
                                                        '<div class="chg-reward-new con-flex cf-hor-space-between cf-ver-center">' +
                                                            '<span>Prize</span><span><img src="static/img/icon-'+matchImgStr+'.png" alt=""> '+reward+'</span>'+
                                                        '</div>'+
                                                        '<div class="btn-gradient con-flex cf-hor-space-between"><span class="btn-text">Play</span> ' +
                                                            '<span class="price">' +
                                                                '<img src="static/img/icon-'+matchImgStr+'.png" alt=""> '+entryFee+
                                                            '</span>' +
                                                        '</div>'+
                                                    '</div>' +
                                                '</div>'+
                                                // '<div class="pi-side"><img src="static/img/btn-play.png" alt=""></div>'+
                                            '</div>'+
                                        '</div>'+
                                        // '<div class="additional con-flex">'+
                                        //     '<div class="a-time">Prize <span class="price color-'+matchClass2+'"><img src="static/img/icon-'+matchClass+'.png" alt=""> '+reward+'</span> + <span class="price color-trophy"><img src="static/img/icon-trophy.png" alt=""> '+rewardTrophy+'</span></div>'+
                                        //     '<div class="a-headcount">'+maxMember+' Players</div>'+
                                        //     '<div class="a-entry">Entry <span class="price '+matchClass+'"><img src="static/img/icon-'+matchClass+'.png" alt=""> '+entryFee+'</span></div>'+
                                        // '</div>'+
                                    '</div>'+
                                '</button>'+
                            '</div>';
                    }

                    matchesStr = '' +
                        '<li class="panel-wrapper transition">'+ // accordion-closed
                            '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">'+
                                '<span><span class="no">1:1</span> Challenge</span>'+
                                '<button type="button" class="btn-fold"><img src="static/img/icon-collapse.png" alt="" class="transition"></button>'+
                            '</div>'+
                            '<div class="item-list">'+
                                items+
                            '</div>'+
                        '</li>';
                }

                if(practices.length > 0){
                    var items = '';
                    var no1 = '';
                    for(var i = 0; i < practices.length; i++){
                        var itemData = practices[i];
                        var matchType = itemData.matchtype; // 1 = practice 2 = match(pro) 3 = recommend practice 4 = recommend match
                        var matchSetNo = itemData.matchsetno; // todo : check if it's unique id?
                        var matchClass = (matchType == 2 || matchType == 4) ? 'ruby' : 'point';
                        var matchImgStr = (matchType == 2 || matchType == 4) ? 'xp' : 'point';
                        no1 = (i == 0) ? 'no1' : '';
                        var matchTitle = itemData.matchtitle;
                        var matchDesc = itemData.description;
                        var matchimage = (matchTitle.indexOf('NOVICE') > -1) ? 'novice' : 'amarteur';
                        if(itemData.description.toLowerCase() == 'try to get point'){
                            matchDesc = 'Try to get <span class="color-point">point</span>';
                        }else if(itemData.description.toLowerCase() == 'try to get ruby') {
                            matchDesc = 'Try to get <span class="color-ruby">ruby</span>';
                        }
                        var name = itemData.opponickname;
                        // var country = itemData.oppocountry;
                        // var score = _util.displayComma(itemData.opposcore);
                        var reward = _util.displayComma(itemData.rewardamount);
                        var rewardTrophy = _util.displayComma(itemData.rewardtrophy);
                        var entryFee = _util.displayComma(itemData.entryfee);
                        var maxMember = _util.displayComma(itemData.maxmember);

                        items += '' +
                            '<div class="pc-con no-padding">'+
                                '<button type="button" type="button" class="btn-play-info con-flex" data-no="'+matchSetNo+'">'+
                                    '<div class="play-info challenge no-additional">'+
                                        '<div class="con-flex cf-ver-center">'+
                                            '<div class="challenge-emblem '+matchClass+' '+no1+' con-flex cf-hor-center cf-ver-center"><img src="static/img/icon-challenge-'+matchimage+'.png" alt=""><span class="chlg-players">1v1</span></div>'+
                                            '<div class="pi-title con-flex cf-hor-space-between cf-ver-center">'+
                                                '<div>'+
                                                    '<p class="normal">'+matchTitle+'</p>'+
                                                    // '<span class="uppercase darker">'+matchDesc+'</span>'+

                                                    '<div class="a-headcount '+matchClass+'">' +
                                                        // '<span>'+maxMember+' Players &nbsp;&bull;</span>' +
                                                        // '<span class="a-time">Prize ' +
                                                        //     '<span class="price">' +
                                                        //         '<img src="static/img/icon-'+matchClass+'.png" alt=""> '+reward+
                                                        //     '</span>' +
                                                        // '</span>' +
                                                        '<div class="chg-reward-new con-flex cf-hor-space-between cf-ver-center">' +
                                                            '<span>Prize</span><span><img src="static/img/icon-'+matchImgStr+'.png" alt=""> '+reward+'</span>'+
                                                        '</div>'+
                                                        '<div class="btn-gradient con-flex cf-hor-space-between"><span class="btn-text">Play</span> ' +
                                                            '<span class="price">' +
                                                                '<img src="static/img/icon-'+matchImgStr+'.png" alt=""> '+entryFee+
                                                            '</span>' +
                                                        '</div>'+
                                                    '</div>' +

                                                '</div>'+
                                                // '<div class="pi-side"><img src="static/img/btn-play.png" alt=""></div>'+
                                            '</div>'+
                                        '</div>'+
                                        // '<div class="additional con-flex">'+
                                        //     '<div class="a-time">Prize <span class="price color-'+matchClass2+'"><img src="static/img/icon-'+matchClass+'.png" alt=""> '+reward+'</span> + <span class="price color-trophy"><img src="static/img/icon-trophy-blue.png" alt=""> '+rewardTrophy+'</span></div>'+
                                        //     '<div class="a-headcount">'+maxMember+' Players</div>'+
                                        //     '<div class="a-entry">Entry <span class="price '+matchClass+'"><img src="static/img/icon-'+matchClass+'.png" alt=""> '+entryFee+'</span></div>'+
                                        // '</div>'+
                                    '</div>'+
                                '</button>'+
                            '</div>';
                    }

                    practicesStr = '' +
                        '<li class="panel-wrapper transition">'+ // accordion-closed
                            '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">'+
                                '<span><span class="no">1:1</span> Practice</span>'+
                                '<button type="button" class="btn-fold"><img src="static/img/icon-collapse.png" alt="" class="transition"></button>'+
                            '</div>'+
                            '<div class="item-list">'+
                                items+
                            '</div>'+
                        '</li>';
                }
                // '<button type="button" class="btn-middle" id="show-up-btn">See more</button>';

                var _temp = '' +
                    '<div class="list-con">'+
                    '<ul class="panel-list">'+
                        recommendedStr+
                        matchesStr+
                        practicesStr+
                    '</ul>'+
                    '</div>';
                rooms = _temp;
            }else {
                rooms = '<div class="no-data con-flex cf-ver-center cf-hor-center">No data found</div>';
            }
            return rooms;
        }

        function TPL_getChallenge(data){
            var matchSetNo = data.matchsetno;
            var matchType = data.matchtype;
            var title = data.matchtitle;
            var desc = data.description;
            var rewardClass = (matchType == 2 || matchType == 4) ? 'ruby' : 'point';
            var rewardImgStr = (matchType == 2 || matchType == 4) ? 'xp' : 'point';
            var reward = _util.displayComma(data.rewardamount);
            var entryFee = _util.displayComma(data.entryfee);

            var userInfo = _api.getMyInfo();

            var str = ''+
                subTopMenuDiv(title) +
                '<div class="sub-content">' +
                    '<div class="challenge-players">' +

                        '<div class="c-player no1 con-flex cf-hor-center cf-ver-center">'+
                            '<div class="chg-img">' +
                                '<img src="'+userInfo.photo+'" alt="" onerror="'+profileImgPolyfill+'">' +
                            '</div>' +
                            '<div class="chg-title">' +
                                '<p class="chg-name">'+userInfo.nickname+'</p>' +
                                '<span class="chg-flag"><img src="static/img/flags/'+userInfo.countryCode+'.png" alt=""></span>' +
                            '</div>'+
                        '</div>' +
                        '<div class="vs-str">VS</div>'+
                        '<div class="vs-loading" style="display: none"><img src="static/img/circle-countdown.png" alt=""></div>'+
                        '<div class="c-player no2 con-flex cf-hor-center cf-ver-center">'+
                            '<div class="chg-title text-right">' +
                                '<p class="chg-name">Play now,<br>We&apos;re finding<br>your opponent</p>' +
                                '<span class="chg-flag"><img src="static/img/flags/ZZ.png" alt="flag"></span>' +
                            '</div>'+
                            '<div class="chg-img">' +
                                '<img src="static/img/random-profile.png" alt="">' +
                            '</div>' +
                        '</div>'+

                    '</div>' +
                    '<div class="challenge-bottom bottom-btn-fixed">'+
                        '<div class="challenge-price-info con-flex cf-ver-center">'+
                            '<div class="challenge-reward-wrapper">'+
                                '<div class="challenge-reward '+rewardClass+'">'+    // ruby or point
                                    '<img src="static/img/icon-'+rewardImgStr+'.png" alt=""><span>'+reward+'</span>'+
                                '</div>' +
                            '</div>' +
                            '<div class="challenge-entry '+rewardClass+'">'+    // ruby or point
                                '<p class="challenge-copy">Winner takes all!</p>' +
                                '<span class="challenge-fee">Entry <img src="static/img/icon-'+rewardImgStr+'.png" alt=""><span>'+entryFee+'</span></span>' +
                            '</div>' +
                        '</div>' +
                        '<button class="btn-gradient btn-big" id="start-challenge" disabled><span>Start Challenge</span></button>' +
                    '</div>'+
                '</div>';
            return str;
        }

        /**
         *
         * @param 'match' object. a match data fetched from our server
         * @return {string}
         */
        function TPL_getChallengeResult(data){
            var resultType = data.matchresult;
            var userInfo = _api.getMyInfo();
            var title = '<span class="no">1:1</span> Challenge Result';
            var score = (data.myinfo.gamedata.score) ? _util.displayComma(data.myinfo.gamedata.score) : 0;
            var oppoScore = (data.oppoinfo.gamedata.score) ? _util.displayComma(data.oppoinfo.gamedata.score) : 0;
            var oppoName = data.oppoinfo.name;
            var oppoCountry = data.oppoinfo.country;
            var oppoPhoto = data.oppoinfo.photo;
            var entryFee = _util.displayComma(data.entryfee);
            var reward = _util.displayComma(data.rewardamount);
            var trophy = _util.displayComma(data.rewardtrophy);
            var rewardClass = (data.matchtype == 2 || data.matchtype == 4) ? 'ruby' : 'point';
            var rewardImgStr = (data.matchtype == 2 || data.matchtype == 4) ? 'xp' : 'point';
            var tropyImg = (data.matchtype == 2 || data.matchtype == 4) ? 'icon-trophy' : 'icon-trophy-blue';
            var winnerClassMe = ''; // to mark who is the winner
            var winnerClassOppo = ''; // to mark who is the winner

            var $topArea = '';
            if(resultType == MATCH_RESULT.WIN){    // win
                winnerClassMe = 'winner';
                $topArea = ''+
                    '<div class="result-top win">'+
                        '<figure class="result-img">'+
                            '<img src="static/img/icon-result-win.png" alt="">'+
                        '</figure>'+
                        '<p class="result-copy">You won</p>' +
                        '<p class="result-copy-sub">You\'ve got <img src="static/img/'+tropyImg+'.png" alt="">'+trophy+'</p>'+
                    '</div>';
            }else if(resultType == MATCH_RESULT.LOSE){ // lose
                winnerClassOppo = 'winner';
                $topArea = ''+
                    '<div class="result-top lose">'+
                        '<figure class="result-img">'+
                            '<img src="static/img/icon-result-lose.png" alt="">'+
                        '</figure>'+
                        '<p class="result-copy">You lost</p>'+
                        '<p class="result-copy-sub">Oops!</p>'+
                    '</div>';
            }else if(resultType == MATCH_RESULT.DRAW){ // draw
                $topArea = ''+
                    '<div class="result-top draw">'+
                        '<figure class="result-img">'+
                            '<img src="static/img/icon-result-draw.png" alt="">'+
                        '</figure>'+
                        '<p class="result-copy">You draw</p>'+
                        '<p class="result-copy-sub">Oops!</p>'+
                    '</div>';
            }else if(resultType == MATCH_RESULT.PENDING){ // pending
                title = 'Score submitted';
                oppoScore = 'WAIT';
                $topArea = ''+
                    '<div class="result-top submit">'+
                        '<figure class="result-img">'+
                            '<img src="static/img/icon-result-wait.png" alt="">'+
                        '</figure>'+
                        '<p class="result-copy">Wait until opponent finish the game.<br>'+
                        'You can see the result on main page later.</p>'+
                    '</div>';
            }

            var str = '' +
                subTopMenuDiv(title) +
                '<div class="sub-content">'+
                    $topArea+
                    '<ul class="panel-list">'+
                        '<li class="panel-wrapper transition no-titles">'+
                            '<div class="item-list">'+
                                '<div class="pc-con no-padding user '+winnerClassMe+'">'+ // .user is for the current player
                                    '<button type="button" class="btn-play-info con-flex">'+
                                        '<div class="rank-info con-flex cf-hor-space-between cf-ver-center">'+
                                            '<div class="ri-user-rank no-rank con-flex cf-ver-center">'+
                                                '<div class="ri-img">' +
                                                    '<img class="ani-win winner-marker" src="static/img/winner.png" alt="">'+
                                                    '<img src="'+userInfo.photo+'" alt="" onerror="'+profileImgPolyfill+'">' +
                                                    '<img class="ani-win halo1" src="static/img/halo.png" alt="">'+
                                                    '<img class="ani-win halo2" src="static/img/halo.png" alt="">'+
                                                    '<img class="ani-win highlight" src="static/img/highlight_effect.png" alt="">' +
                                                    '<div class="ani-win twinkle"></div>'+
                                                '</div>'+
                                                '<div class="con-flex cf-col">'+
                                                    '<p class="ri-name">'+userInfo.nickname+'</p>'+
                                                    '<span class="ri-flag"><img src="static/img/flags/'+userInfo.countryCode+'.png" alt=""></span>'+
                                                '</div>'+
                                            '</div>'+
                                            '<div class="ri-side">'+
                                                '<span class="big-no">'+score+'</span>'+
                                            '</div>'+
                                        '</div>'+
                                    '</button>'+
                                '</div>'+
                                '<div class="pc-con no-padding '+winnerClassOppo+'">'+
                                    '<button type="button" class="btn-play-info con-flex">'+
                                        '<div class="rank-info con-flex cf-hor-space-between cf-ver-center">'+
                                            '<div class="ri-user-rank no-rank con-flex cf-ver-center">'+
                                                '<div class="ri-img">' +
                                                    '<img class="ani-win winner-marker" src="static/img/winner.png" alt="">'+
                                                    '<img src="'+oppoPhoto+'" alt="" onerror="'+profileImgPolyfill+'">' +
                                                    '<img class="ani-win halo1" src="static/img/halo.png" alt="">'+
                                                    '<img class="ani-win halo2" src="static/img/halo.png" alt="">'+
                                                    '<img class="ani-win highlight" src="static/img/highlight_effect.png" alt="">' +
                                                    '<div class="ani-win twinkle"></div>' +
                                                '</div>'+
                                                '<div class="con-flex cf-col">'+
                                                    '<p class="ri-name">'+oppoName+'</p>'+
                                                    '<span class="ri-flag"><img src="static/img/flags/'+oppoCountry+'.png" alt=""></span>'+
                                                '</div>'+
                                            '</div>'+
                                            '<div class="ri-side">'+
                                                '<span class="big-no">'+oppoScore+'</span>'+
                                            '</div>'+
                                        '</div>'+
                                    '</button>'+
                                '</div>'+
                            '</div>'+
                        '</li>'+
                    '</ul>'+

                    '<div class="result-bottom">' +
                        '<div class="challenge-price-info con-flex cf-ver-center">'+
                            '<div class="challenge-reward-wrapper">'+
                                '<div class="challenge-reward '+rewardClass+'">'+    // ruby or point
                                    '<img src="static/img/icon-'+rewardImgStr+'.png" alt=""><span>'+reward+'</span>'+
                                '</div>' +
                            '</div>' +
                            '<div class="challenge-entry '+rewardClass+'">'+    // ruby or point
                                '<p class="challenge-copy">Winner takes all!</p>' +
                                '<div class="hor-divider"></div>'+
                                '<span class="challenge-fee">Entry <img src="static/img/icon-'+rewardImgStr+'.png" alt=""><span>'+entryFee+'</span></span>'+
                            '</div>'+
                        '</div>'+
                    '</div>'+
                    '<div class="bottom-btn-fixed"><button class="btn-gradient btn-big" id="btn-next"><span>Next</span></button></div>'+
                '</div>';
            return str;
        }

        function TPL_getRemainFree(){
            return '<span><img src="static/img/icon-timer.png" alt="" class="timer"><span id="remain-free">00:00:00</span></span>';
        }

        function TPL_getChallengeCountdown(){
            var str = ''+
                '<div id="match-countdown">' +
                    '<div>' +
                        '<p>Challenge will be started after</p>' +
                        '<div class="cd-wrapper"><img class="cd-round" src="static/img/circle-countdown.png" alt="">' +
                        '<span class="cd-no">3</span></div>' +
                    '</div>' +
                '</div>';
            return str;
        }

        function TPL_getShop(data, history){
            var shop = data.shopdata;
            var offers = shop.offerlist;    // array
            var rubies = shop.rubylist;    // array
            var points = shop.pointlist;    // array
            var frees = data.freelist;  // object
            var ads = data.adslist;  // object
            var historyObj = history;
            var type = '';

            function offerStr(){
                var str = '';
                if(offers.length > 0){
                    // todo : needs real data
                    type = 'offer';
                    var item = '';
                    for(var i = 0; i < offers.length; i++){
                        var itemData = offers[i];
                        var shopno = itemData.shopno;   //
                        var shopClass = (itemData.shoptype == 1) ? 'ruby' : 'point';
                        var imgurl = itemData.imageurl;
                        var oriPrice = _util.displayComma(itemData.oriprice).split('.')[0];
                        var amount = _util.displayComma(itemData.amount);
                        var addPrice = '';
                        if(itemData.addamount){
                            addPrice = '<span class="color-lemon">+ '+_util.displayComma(itemData.addamount)+'</span>';
                        }
                        item += '' +
                        '<div class="pc-con no-padding">'+
                            '<button type="button" class="btn-play-info con-flex" data-type="'+type+'" data-shopno="'+shopno+'">'+
                                '<div class="shop-info type-orange">'+
                                    '<div class="con-flex cf-ver-center cf-hor-space-between">'+
                                        '<div class="con-flex cf-ver-center">'+
                                            '<img src="'+imgurl+'" alt="" class="'+shopClass+'">'+
                                            '<span class="si-price">'+amount+' '+addPrice+'</span>'+
                                        '</div>'+
                                        '<div class="si-side yellow"><span>$'+oriPrice+'</span></div>'+
                                    '</div>'+
                                '</div>'+
                            '</button>'+
                        '</div>';
                    }

                    str = '' +
                    '<ul class="panel-list">'+
                        '<li class="panel-wrapper transition">'+
                            '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">'+
                                '<span>Limited time offer</span>'+
                            '</div>'+
                            '<div class="item-list">'+
                                item+
                            '</div>'+
                        '</li>'+
                    '</ul>';
                    return str;
                }else {
                    return str;
                }
            }

            function xpGuide(){
                var str = ''+
                    '<div class="panel-wrapper transition">' +
                        '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">' +
                            '<span>Automatic expiration guidance</span>' +
                        '</div>' +
                        '<div class="item-list">' +
                            '<div class="pc-con no-padding">' +
                                // '<button type="button" class="btn-play-info con-flex" data-type="'+type+'">'+
                                    '<div class="shop-info type-purple">'+
                                        '<div class="con-flex cf-ver-center">'+
                                            '<div class="reward-img point">' +
                                                '<span>' +
                                                    '<img src="static/img/shop-point-glow-thick.png" alt="" class="point-glow">' +
                                                    '<img src="static/img/icon-xp-normal.png" alt="" class="point">' +
                                                '</span>' +
                                            '</div>'+
                                            '<div class="si-title con-flex cf-hor-space-between cf-ver-center">'+
                                                '<div>'+
                                                    '<p class="text-transform-normal">XP automatically expires <span class="roboto">365</span> days after it is received.</p>'+
                                                '</div>'+
                                                // '<div class="si-side yellow btn-look"><span>get</span></div>'+
                                            '</div>'+
                                        '</div>'+
                                    '</div>'+
                                // '</button>'+
                            '</div>' +
                        '</div>' +
                    '</div>';

                return str;
            }

            function palogin(){
                var me = _api.getMyInfo();
                var _showLogin = (me.isAnonymous) ? '' : 'display:none;';
                var str = '' +
                    '<div class="panel-wrapper transition shop-login-wrapper" style="'+_showLogin+'">' +
                        '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">' +
                            '<span>Pocket arena login</span>' +
                        '</div>' +
                        '<div class="item-list">' +
                            '<div class="pc-con no-padding">' +
                                '<button class="btn-play-info con-flex" data-type="pa-login" type="button">' +
                                    '<div class="shop-info type-dark-purple">' +
                                        '<div class="con-flex cf-ver-center">' +
                                            '<div class="shop-login-reward">' +
                                                '<img src="static/img/icon-arena.png" alt="">' +
                                                '<div class="reward-img ruby">' +
                                                    '<span>' +
                                                        '<img alt="" class="point" src="static/img/icon-xp-twinkle.png">' +
                                                    '</span>' +
                                                        '<span class="watch-reward-amount">X1000</span>' +
                                                '</div>' +
                                            '</div>' +
                                            '<div class="shop-login-desc">' +
                                                '<p>You can get <span class="color-ruby">1000 XP</span> for free after ' +
                                                'logging in to Pocket Arena. ' +
                                                'And we also offer Daily Rewards every day.</p>' +
                                                '<span class="si-side btn-look yellow">Login</span>' +
                                            '</div>' +
                                        '</div>' +
                                    '</div>' +
                                '</button>' +
                            '</div>' +
                        '</div>' +
                    '</div>';
                return str;
            }

            function historyStr(){  // transaction history
                var str = '';
                // test
                // var historyObj = {
                //     "totalcount": 3,
                //     "totalpage": 1,
                //     "currentpage": 1,
                //     "hasnext": "0",
                //     "historyinfo": [
                //         {
                //             "xpno": "25",
                //             "xpamount": "-60",
                //             "remainamount": "0",
                //             "get_use": "2",
                //             "status": "1",
                //             "registdate": "2021-02-24 00:28:23",
                //             "expiredate": "2021-02-24 00:28:23"
                //         }
                //     ]
                // };
                if(historyObj){
                    if(historyObj.totalcount > 0){
                        str = '' +
                        '<div class="panel-wrapper transition" id="transaction-history">' +
                            '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">' +
                                '<span>Transaction History</span>' +
                            '</div>' +
                            '<div class="">' +
                                '<table class="table">'+
                                    '<colgroup>'+
                                        '<col class="t-date">'+     // date
                                        '<col class="t-amount">'+   // xp
                                        '<col class="t-desc">'+     // remaining days
                                    '</colgroup>'+
                                    '<tbody class="item-list">'+
                                    '<!-- repeat -->';
                                    for(var i = 0; i < historyObj.historyinfo.length; i++){
                                        str += TPL_getTransactionHistoryItem(i, historyObj.historyinfo[i]);

                                        // var _d = historyObj.historyinfo[i];
                                        // // local time
                                        // var _date = moment.utc(_d.registdate).format('YYYY-MM-DD HH:mm:ss').split(' ');
                                        // var _useClass = (_d.get_use == 2) ? 'minus' : 'plus';   // 1:  / 2:
                                        // var _amount = _d.xpamount;
                                        // var _remaining = moment.utc(_d.expiredate).fromNow();
                                        // str += '<tr class="odd">'+
                                        //    '<td class="text-center td-list">'+
                                        //        // '<span>05.Mar.2020</span>'+
                                        //        // '<span>16:32</span>'+
                                        //         '<span>'+_date[0]+'</span><span>'+_date[1]+'</span>'+
                                        //    '</td>'+
                                        //    '<td class="text-center td-list">'+
                                        //        // '<span class="minus">-10 USDT</span>'+
                                        //        '<span class="'+_useClass+'">'+_amount+'</span>'+
                                        //    '</td>'+
                                        //    '<td class="text-right td-list">'+
                                        //        // '<span>1:1 Challenge</span>'+
                                        //        // '<span>Winning Reward</span>'+
                                        //         '<span>'+_remaining+'</span>'+
                                        //    '</td>'+
                                        // '</tr>';
                                    }
                                    str +=  '<!-- end of repeat -->'+
                                    // '<tr class="even">'+
                                    //     '<td class="text-center td-list">'+
                                    //         '<span>05.Mar.2020</span>'+
                                    //         '<span>16:32</span>'+
                                    //     '</td>'+
                                    //     '<td class="text-center td-list">'+
                                    //         '<span class="plus">10 USDT</span>'+
                                    //         '<span class="plus">(Special Offer)</span>'+
                                    //     '</td>'+
                                    //     '<td class="text-right td-list">'+
                                    //         '<span>1:1 Challenge</span>'+
                                    //         '<span>Winning Reward</span>'+
                                    //     '</td>'+
                                    // '</tr>'+
                                    '</tbody>'+
                                '</table>' +
                            '</div>' +
                            '<div class="btn-wrapper" style="display: none;"><button type="button" class="btn-middle" id="show-transaction-btn">See more</button></div>'+
                        '</div>';
                    };
                }
                return str;
            }

            function rubyStr(){
                var str = '';

                if(rubies.length > 0){
                    type = 'ruby';
                    var item = '';

                    // sort items by amount
                    rubies.sort(function(a,b){
                        if ( a.amount < b.amount ){
                            return -1;
                        }
                        if ( a.amount > b.amount ){
                            return 1;
                        }
                        return 0;
                    });

                    for(var i = 0; i < rubies.length; i++){
                        var itemData = rubies[i];
                        var shopno = itemData.shopno;
                        var shopClass = 'ruby';
                        var imgurl = 'static/img/icon-ruby-twinkle.png'; // itemData.imageurl;
                        var oriPrice = (Number(itemData.oriprice) >= 1) ? _util.displayComma(itemData.oriprice).split('.')[0] : _util.displayComma(Number(itemData.oriprice));
                        var disPrice = (Number(itemData.disprice) >= 1) ? _util.displayComma(itemData.disprice).split('.')[0] : _util.displayComma(Number(itemData.disprice));
                        var priceLength = oriPrice.length;
                        var productId = itemData.productid;
                        var fontSize = '';
                        if(priceLength > 8) {
                            fontSize = '.57em';
                        }else if(priceLength > 7){
                            fontSize = '.63em';
                        }else if(priceLength > 6){
                            fontSize = '.7em';
                        }
                        var currencyImg = 'xp';
                        if(itemData.currency == 1){
                            currencyImg = 'point';
                        }else if(itemData.currency == 2){
                            // ruby(jewel)
                        }else if(itemData.currency == 3){
                            currencyImg = 'fpoc';
                        }else if(itemData.currency == 4){
                            currencyImg = 'fusdt';
                        }else if(itemData.currency == 5){
                            currencyImg = 'fbtc';
                        }else if(itemData.currency == 6){
                            currencyImg = 'feth';
                        }
                        var amount = _util.displayComma(itemData.amount);
                        var bgClass = (itemData.amount >= 2000) ? (itemData.amount >= 5000) ? 'blue-purple' : 'blue' : 'emerald-green';
                        var addPrice = '';
                        if(Number(itemData.addamount) > 0){
                            addPrice = ' <span class="color-lemon">+ '+_util.displayComma(itemData.addamount)+'</span>';
                        }

                        item += '' +
                        '<div class="pc-con no-padding">'+
                            '<button type="button" class="btn-play-info con-flex" data-type="'+type+'" data-shopno="'+shopno+'" data-product-id="'+productId+'">'+
                                '<div class="shop-info type-'+bgClass+'">'+
                                    '<div class="con-flex cf-col cf-ver-center cf-hor-space-between">'+
                                        '<div class="con-flex cf-ver-center">'+
                                            '<span class="ele-wrapper">'+
                                                '<img alt="" class="ruby" src="static/img/icon-ruby-twinkle.png">'+
                                                '<img src="static/img/light-focus.png" alt="">'+
                                            '</span>'+
                                            '<span class="si-price">'+amount+addPrice+'</span>'+
                                        '</div>'+
                                        '<div class="si-down '+bgClass+' btn-look">'+
                                            '<div class="currency-main">'+
                                                '<img src="static/img/icon-'+currencyImg+'-shadow.png" alt="">'+
                                                '<span>'+disPrice+'</span>'+
                                            '</div>'+
                                            '<span class="currency-help">&efDot; USD '+_util.displayComma(itemData.usd)+'</span>'+
                                        '</div>'+
                                    '</div>'+
                                '</div>'+
                            '</button>'+
                        '</div>';

                        // item += '' +
                        // '<div class="pc-con no-padding">'+
                        //     '<button type="button" class="btn-play-info con-flex" data-type="'+type+'" data-shopno="'+shopno+'">'+
                        //         '<div class="shop-info '+bgClass+'">'+
                        //             '<div class="con-flex cf-ver-center cf-hor-space-between">'+
                        //                 '<div class="con-flex cf-ver-center">'+
                        //                     '<img src="'+imgurl+'" alt="" class="'+shopClass+'">'+
                        //                     '<span class="si-price">'+amount+addPrice+'</span>'+
                        //                 '</div>'+
                        //                 '<div class="si-side yellow btn-look"><span style="font-size: '+fontSize+'">'+oriCurrency+oriPrice+'</span></div>'+
                        //             '</div>'+
                        //         '</div>'+
                        //     '</button>'+
                        // '</div>';
                    }

                    str = '' +
                        '<ul class="panel-list">'+
                        '<li class="panel-wrapper transition">'+
                            '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">'+
                                '<span>Purchase XP</span>'+
                            '</div>'+
                            '<div class="item-list col-2">'+
                                item+
                            '</div>'+
                        '</li>'+
                    '</ul>';
                    return str;
                }else {
                    return str;
                }
            }

            function pointStr(){
                var str = '';

                if(points.length > 0){
                    type = 'point';
                    var item = '';
                    for(var i = 0; i < points.length; i++){
                        var itemData = points[i];
                        var shopno = itemData.shopno;
                        var shopClass = 'point';
                        var imgurl = 'static/img/icon-point-twinkle.png'; //itemData.imageurl;
                        var oriPrice = _util.displayComma(itemData.oriprice).split('.')[0];
                        var amount = _util.displayComma(itemData.amount);
                        var bgClass = 'type-orange-purple';
                        var addPrice = '';
                        if(Number(itemData.addamount) > 0){
                            addPrice = ' <span class="color-lemon">+ '+_util.displayComma(itemData.addamount)+'</span>';
                        }

                        item += '' +
                        '<div class="pc-con no-padding">'+
                            '<button type="button" class="btn-play-info con-flex" data-type="'+type+'" data-shopno="'+shopno+'">'+
                                '<div class="shop-info '+bgClass+'">'+
                                    '<div class="con-flex cf-ver-center cf-hor-space-between">'+
                                        '<div class="con-flex cf-ver-center">'+
                                            '<img src="'+imgurl+'" alt="" class="'+shopClass+'">'+
                                            '<span class="si-price">'+amount+addPrice+'</span>'+
                                        '</div>'+
                                    '<div class="si-side blue ruby btn-look"><img src="static/img/icon-xp-edge-shadow.png" alt=""><span>'+oriPrice+'</span></div>'+
                                    '</div>'+
                                '</div>'+
                            '</button>'+
                        '</div>';
                    }

                    str = '' +
                        '<ul class="panel-list">'+
                        '<li class="panel-wrapper transition">'+
                            '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">'+
                                '<span>Purchase e-point</span>'+
                            '</div>'+
                            '<div class="item-list">'+
                                item+
                            '</div>'+
                        '</li>'+
                    '</ul>';
                    return str;
                }else {
                    return str;
                }
            }

            function moreStr(){
                var str = '';

                if(frees || ads){

                    var freeStr = '';
                    var adsStr = '';
                    if(frees){
                        type = 'free';
                        var shopClass = 'point';
                        var remainTime = '';
                        var rewardamount = frees.rewardpoint;
                        if(frees.canreceive != 1){
                            remainTime = TPL_getRemainFree();
                        }
                        freeStr = ''+
                            '<div class="pc-con no-padding">'+
                                '<button type="button" class="btn-play-info con-flex" data-type="'+type+'">'+
                                    '<div class="shop-info type-purple">'+
                                        '<div class="con-flex cf-ver-center">'+
                                            '<div class="reward-img '+shopClass+'">' +
                                                '<span>' +
                                                    '<img src="static/img/shop-point-glow-thick.png" alt="" class="'+shopClass+'-glow">' +
                                                    '<img src="static/img/icon-point-normal.png" alt="" class="'+shopClass+'">' +
                                                '</span>' +
                                                '<span class="watch-reward-amount">X'+rewardamount+'</span>' +
                                            '</div>'+
                                            '<div class="si-title con-flex cf-hor-space-between cf-ver-center">'+
                                                '<div id="remain-free-wrapper">'+
                                                    '<p>Next free point</p>'+
                                                    remainTime+
                                                '</div>'+
                                                '<div class="si-side yellow btn-look"><span>get</span></div>'+
                                            '</div>'+
                                        '</div>'+
                                    '</div>'+
                                '</button>'+
                            '</div>';
                    }
                    // if(ads){
                    //     type = 'ads';
                    //     var shopClass = 'ruby';
                    //     var watchTime = ads.watchcnt+'/'+ads.maxwatchcnt;
                    //     var canReceive = ads.canreceive; // 1 = can, 2 = can not
                    //     var rewardamount = ads.rewardruby;
                    //     adsStr = ''+
                    //     '<div class="pc-con no-padding">'+
                    //         '<button type="button" class="btn-play-info con-flex" data-type="'+type+'">'+
                    //             '<div class="shop-info type-purple">'+
                    //                 '<div class="con-flex cf-ver-center">'+
                    //                     '<div class="reward-img '+shopClass+'">' +
                    //                         '<span>' +
                    //                             '<img src="static/img/shop-ruby-glow-thick.png" alt="" class="'+shopClass+'-glow">' +
                    //                             '<img src="static/img/icon-ruby-normal.png" alt="" class="'+shopClass+'">' +
                    //                         '</span>' +
                    //                         '<span class="watch-reward-amount">X'+rewardamount+'</span></div>'+
                    //                     '<div class="si-title con-flex cf-hor-space-between cf-ver-center">'+
                    //                         '<div>'+
                    //                             '<p>Watch an ad</p>'+
                    //                             '<span class="watchcount">('+watchTime+')</span>'+
                    //                         '</div>'+
                    //                         '<div class="si-side watch"><img src="static/img/btn-watch.png" alt=""><p>Watch</p></div>'+
                    //                     '</div>'+
                    //                 '</div>'+
                    //             '</div>'+
                    //         '</button>'+
                    //     '</div>';
                    // }
                    var item = freeStr + adsStr;

                    str = '' +
                        '<ul class="panel-list">'+
                        '<li class="panel-wrapper transition">'+
                            '<div class="pc-title con-flex cf-hor-space-between cf-ver-center">'+
                                '<span>Get more rewards</span>'+
                            '</div>'+
                            '<div class="item-list">'+
                                item+
                            '</div>'+
                        '</li>'+
                    '</ul>';
                    return str;
                }else {
                    return str;
                }
            }

            var str = ''+
                '<div class="list-con">'+
                    // moreStr()+
                    // offerStr()+
                    xpGuide()+
                    palogin()+
                    historyStr()+
                    // rubyStr()+
                    pointStr()+
                '</div>';
            return str;
        }

        /**
         *
         * @param idx number. 0 = practice(point), 1 = match(ruby)
         * @param data
         * @return {string}
         * @constructor
         */
        function TPL_getLeaderboard(idx, data){

            var users = '';
            var _me = fn.API.getMyInfo();
            if(Number(data.totalcount) > 0){

                var lbType = data.leadertype;   // 1 = practice, 2 = ruby
                var name = data.userinfo.nickname;
                var imgurl = (_me.isAnonymous) ? _me.photo : data.userinfo.photo;
                var country = data.userinfo.country;
                var matchClass = (lbType == 2) ? 'ruby' : 'point';
                var matchImgStr = (lbType == 2) ? 'xp' : 'point';
                var myrank = data.userinfo.ranking;
                var myreward = (data.userinfo.reward >= 0 && data.userinfo.reward != '') ? _util.displayComma(data.userinfo.reward) : '-';
                var mytrophy = (data.userinfo.wins >= 0 && data.userinfo.wins != '') ? _util.displayComma(data.userinfo.wins) : '-';
                var trophyImg = (idx == 1) ? 'trophy' : 'trophy-blue';
                var item = '';
                if(data.currentpage == 1){ // get my data
                    item = '' + // my rank;
                        '<div class="pc-con no-padding user">'+ // .user is for the current player
                            '<button type="button" class="btn-play-info con-flex">'+
                                '<div class="rank-info con-flex cf-hor-space-between cf-ver-center">'+
                                    '<div class="ri-user-rank con-flex cf-ver-center">'+
                                        '<div class="ri-rank">'+((myrank > 0) ? myrank : '-')+'</div>'+
                                        '<div class="ri-img"><img src="'+imgurl+'" alt="" onerror="'+profileImgPolyfill+'"></div>'+
                                        '<div class="con-flex cf-col">'+
                                            '<p class="ri-name">'+name+'</p>'+
                                            '<span class="ri-flag"><img src="static/img/flags/'+country+'.png" alt=""></span>'+
                                        '</div>'+
                                    '</div>'+
                                    '<div class="ri-side">'+
                                        '<span><img src="static/img/icon-'+trophyImg+'.png" alt="" class="trophy"><span>'+mytrophy+'</span></span>'+
                                        '<span><img src="static/img/icon-'+matchImgStr+'.png" alt="" class="'+matchClass+'"><span>'+myreward+'</span></span>'+
                                    '</div>'+
                                '</div>'+
                            '</button>'+
                        '</div>';
                }
                for(var i = 0; i < data.leaderinfo.length; i++){
                    var itemData = data.leaderinfo[i];
                    var meClass = (Number(itemData.ranking) == myrank) ? 'user' : '';
                    var ranking = _util.displayComma(itemData.ranking);
                    var imgurl = itemData.photo;
                    var name = itemData.nickname;
                    var country = itemData.country;
                    var trophy = _util.displayComma(itemData.trophy);
                    var reward = _util.displayComma(itemData.reward);

                    item += '' +
                        '<div class="pc-con no-padding '+meClass+'">'+ // .user is for the current player
                            '<button type="button" class="btn-play-info con-flex">'+
                                '<div class="rank-info con-flex cf-hor-space-between cf-ver-center">'+
                                    '<div class="ri-user-rank con-flex cf-ver-center">'+
                                        '<div class="ri-rank">'+ranking+'</div>'+
                                        '<div class="ri-img"><img src="'+imgurl+'" alt="" onerror="'+profileImgPolyfill+'"></div>'+
                                        '<div class="con-flex cf-col">'+
                                            '<p class="ri-name">'+name+'</p>'+
                                            '<span class="ri-flag"><img src="static/img/flags/'+country+'.png" alt=""></span>'+
                                        '</div>'+
                                    '</div>'+
                                    '<div class="ri-side">'+
                                        '<span><img src="static/img/icon-'+trophyImg+'.png" alt="" class="trophy"><span>'+trophy+'</span></span>'+
                                        '<span><img src="static/img/icon-'+matchImgStr+'.png" alt="" class="'+matchClass+'"><span>'+reward+'</span></span>'+
                                    '</div>'+
                                '</div>'+
                            '</button>'+
                        '</div>';
                }

                if(data.currentpage == 1){
                    users = '' +
                        '<ul class="panel-list rank-list">'+ // rank-list has no style. it's to select in UI file
                            '<li class="panel-wrapper transition no-titles">'+
                                '<div class="item-list">'+
                                    item+
                                '</div>'+
                            '</li>'+
                        '</ul>';
                }else {
                    // if it's not first page, return only each leaderboard item
                    return item;
                }
            }else {
                users = '<div class="no-data con-flex cf-ver-center cf-hor-center">No data found</div>';
            }

            var tabCon = '';
            if(idx == 1){
                tabCon = '<div class="list-con">'+
                '<ul class="panel-list">'+
                    '<li class="panel-wrapper transition footer-only">'+
                        '<div class="item-list">'+
                            '<div class="pc-con no-padding">'+
                                '<button type="button" class="btn-play-info con-flex">'+
                                    '<div class="shop-info type-blue right">'+
                                        '<div class="con-flex cf-ver-center cf-hor-space-between">'+
                                            '<div class="si-title con-flex cf-ver-center">'+
                                            'Guaranteed:'+
                                            '</div>'+
                                            '<div class="si-side">'+
                                                '<span class="sparkle-con"><img src="static/img/halo-white.png" alt="" class="halo spin"><img src="static/img/rank-ruby.png" alt="" class="ruby"></span>'+
                                                '<span class="si-price">'+_util.displayComma(data.totalreward)+'</span>'+
                                            '</div>'+
                                        '</div>'+
                                    '</div>'+
                                '</button>'+
                            '</div>'+
                        '</div>'+
                        '<div class="pc-title con-flex cf-hor-space-between cf-ver-center color-yellow">'+
                            '<span>League ends:</span>'+
                            '<span class="font-thin countdown">--:--:--</span>'+
                        '</div>'+
                    '</li>'+
                '</ul>'+
                users+
                '</div>';
            }else {
                tabCon = '' +
                '<div class="list-con">'+
                    '<ul class="panel-list">'+
                        '<li class="panel-wrapper transition footer-only">'+
                            '<div class="item-list">'+
                                '<div class="pc-con no-padding">'+
                                    '<button type="button" class="btn-play-info con-flex">'+
                                        '<div class="shop-info type-purple right">'+
                                            '<div class="con-flex cf-ver-center cf-hor-space-between">'+
                                                '<div class="si-title con-flex cf-ver-center">'+
                                                'Guaranteed:'+
                                                '</div>'+
                                                '<div class="si-side">'+
                                                    '<span class="sparkle-con"><img src="static/img/halo-white.png" alt="" class="halo spin"><img src="static/img/rank-point.png" alt="" class="point"></span>'+
                                                    '<span class="si-price">'+_util.displayComma(data.totalreward)+'</span>'+
                                                '</div>'+
                                            '</div>'+
                                        '</div>'+
                                    '</button>'+
                                '</div>'+
                            '</div>'+
                            '<div class="pc-title con-flex cf-hor-space-between cf-ver-center color-yellow">'+
                                '<span>League ends:</span>'+
                                '<span class="font-thin countdown">--:--:--</span>'+
                            '</div>'+
                        '</li>'+
                    '</ul>'+
                    users+
                '</div>';
            }
            return tabCon;
        }

        function TPL_getMessage(msgStr, btnStr){
            var _btnStr = (btnStr) ? btnStr : 'OK';

            var str = '' +
                '<div id="msg-wrapper" class="transition">' +
                    '<div class="msg-modal transition">' +
                        '<button type="button" id="btn-popup-close"><img src="static/img/btn-close.png" alt=""></button>' +
                        '<div class="msg-content con-flex cf-col cf-hor-center cf-ver-center">'+msgStr+'</div>';
                        str += '<button type="button" class="btn-black ui-popup" id="btn-popup">'+_btnStr+'</button>';
                    str += '</div>' +
                '</div>';

            return str;
        }

        function TPL_getMsgLackOfEntryFee(){
            var str = '' +
                '<p class="msg-title">LACK OF ENTRY FEE</p>' +
                '<span class="msg-text">You have not enough the <span class="light-blue text-point">ENTRY FEE</span> to join the challenge. Please get enough <span class="light-blue text-point">ENTRY FEE</span> first then try again.</span>';
            return str;
        }

        function TPL_getMsgChallengeAgain(_name){
            var str = '' +
                '<p class="msg-title">CHALLENGE AGAIN</p>' +
                '<span class="msg-text">Do you want to rematch with<br>'+_name+'?</span>';
            return str;
        }

        function getEmojiList(){
            var me = fn.API.getMyInfo();
            var photo = me.image; //(me.photo.indexOf('http') > -1) ? me.photo : 'static/img/'+me.photo;

            var title = '';

            var curIdx = 1; // default
            var curIdx2 = 1; // default
            var maxCate = _api.getEmojiCateLength();
            var userphoto = _api.getMyInfo().photo;
            if(userphoto && userphoto.indexOf('http') == -1){
                var tempinfo = userphoto.split('/');
                var tempinfo2 = tempinfo[tempinfo.length - 1].split('.')[0];
                var idxinfo = tempinfo2.split('-');
                curIdx = idxinfo[0];
                curIdx2 = idxinfo[1];
                title = ''; //fn.LANG.LABELS.CHANGE_YOUR_EMOJI;
            }else {
                title = ''; //fn.LANG.LABELS.SELECT_YOUR_EMOJI;
            }
            var cateStr = '';
            var listStr = '';
            for(var i = 0; i < maxCate; i++){
                var listMax = _api.getEmojiCateImgLength(i);
                var _idx = i+1;
                var activeClass = (curIdx == _idx) ? 'on' : '';
                cateStr += '<li class="'+activeClass+'"><button type="button" value="'+_idx+'">' +
                    '<img class="esg" src="static/img/btn-group'+_idx+'.png" alt="">' +
                    '<img class="esg-on" src="static/img/btn-group'+_idx+'-selected.png" alt="">' +
                    '</button></li>';
                listStr += '<ul class="con-flex cf-wrap">';
                for(var j = 0; j < listMax; j++){
                    var _val = _idx+'-'+(j+1);
                    var onClass = '';
                    if(userphoto && userphoto.indexOf('http') == -1){
                        if(curIdx2 == (j+1) && curIdx == _idx) {
                            onClass = 'on';
                        }
                    }
                    listStr += '<li class="'+onClass+'"><button type="button" value="'+_val+'"><img src="'+_api.getEmojiImgPath()+_val+'.png" alt=""></button></li>';
                }
                listStr += '</ul>';
            }

            var activeL = (curIdx == 1) ? 'disabled' : '';
            var activeR = (curIdx == maxCate) ? 'disabled' : '';

            var str = '' +
                '<div class="emoji-select-container">' +
                    '<div class="emoji-select-list">' +
                        // '<ul>' +
                        // 	'<li><button type="button" value="0">0</button></li>' +
                        // '</ul>' +
                        listStr+
                    '</div>'+
                    '<div class="emoji-select-groups con-flex cf-ver-center cf-hor-center">' +
                        '<button type="button" class="esg-l '+activeL+'">' +
                            '<img src="static/img/btn-left.png" alt="">'+
                        '</button>'+
                        '<ul class="con-flex cf-hor-center">' +
                            cateStr+
                        '</ul>' +
                        '<button type="button" class="esg-r '+activeR+'">' +
                            '<img src="static/img/btn-right.png" alt="">'+
                        '</button>'+
                    '</div>'+
                '</div>';

            return str;
        }

        function TPL_getEmojiModal(){
            var me = fn.API.getMyInfo();
            var photo = me.image; //(me.photo.indexOf('http') > -1) ? me.photo : 'static/img/'+me.photo;

            // var title = '';
            //
            // var curIdx = 1; // default
            // var curIdx2 = 1; // default
            // var maxCate = 3;
            // var userphoto = _api.getMyInfo().photo;
            // if(userphoto && userphoto.indexOf('http') == -1){
            //     var tempinfo = userphoto.split('/');
            //     var tempinfo2 = tempinfo[tempinfo.length - 1].split('.')[0];
            //     var idxinfo = tempinfo2.split('-');
            //     curIdx = idxinfo[0];
            //     curIdx2 = idxinfo[1];
            //     title = '123'; //fn.LANG.LABELS.CHANGE_YOUR_EMOJI;
            // }else {
            //     title = '123'; //fn.LANG.LABELS.SELECT_YOUR_EMOJI;
            // }
            // var cateStr = '';
            // var listStr = '';
            // var listMax = 9;
            // for(var i = 0; i < maxCate; i++){
            //     var _idx = i+1;
            //     var activeClass = (curIdx == _idx) ? 'on' : '';
            //     cateStr += '<li class="'+activeClass+'"><button type="button" value="'+_idx+'">' +
            //         '<img class="esg" src="static/img/btn-group'+_idx+'.png" alt="">' +
            //         '<img class="esg-on" src="static/img/btn-group'+_idx+'-selected.png" alt="">' +
            //         '</button></li>';
            //     listStr += '<ul class="con-flex cf-wrap">';
            //     for(var j = 0; j < listMax; j++){
            //         var _val = _idx+'-'+(j+1);
            //         var onClass = '';
            //         if(userphoto && userphoto.indexOf('http') == -1){
            //             if(curIdx2 == (j+1) && curIdx == _idx) {
            //                 onClass = 'on';
            //             }
            //         }
            //         listStr += '<li class="'+onClass+'"><button type="button" value="'+_val+'"><img src="static/img/emojis/'+_val+'.png" alt=""></button></li>';
            //     }
            //     listStr += '</ul>';
            // }
            //
            // var activeL = (curIdx == 1) ? 'disabled' : '';
            // var activeR = (curIdx == maxCate) ? 'disabled' : '';
            var listStr = getEmojiList();

            var str = '' +
                '<div id="msg-wrapper" class="transition">' +
                    '<div class="msg-modal type-2 transition">' +
                        '<div class="modal-content">' +
                            '<article class="box-container notice shadow">' +
                                '<button type="button" id="btn-popup-close"><img src="static/img/btn-close.png" alt=""></button>' +
                                '<div class="modal-field-label">Update a username</div>' +
                                '<div class="modal-input-wrapper"><input type="text" id="emoji-username" name="name" class="modal-input text-center" value="'+me.nickname+'"></div>' +
                                '<span class="tooltip bottom alert">' +
                                    '<span></span>' +
                                '</span>'+
                                '<div class="modal-field-label">Update your emoji</div>' +
                                listStr+
                                // '<div class="emoji-select-container">' +
                                //     '<div class="emoji-select-list">' +
                                //         // '<ul>' +
                                //         // 	'<li><button type="button" value="0">0</button></li>' +
                                //         // '</ul>' +
                                //         listStr+
                                //     '</div>'+
                                //     '<div class="emoji-select-groups con-flex cf-ver-center cf-hor-center">' +
                                //         '<button type="button" class="esg-l '+activeL+'">' +
                                //             '<img src="static/img/btn-left.png" alt="">'+
                                //         '</button>'+
                                //         '<ul class="con-flex">' +
                                //             cateStr+
                                //         '</ul>' +
                                //         '<button type="button" class="esg-r '+activeR+'">' +
                                //             '<img src="static/img/btn-right.png" alt="">'+
                                //         '</button>'+
                                //     '</div>'+
                                // '</div>'+
                                '<div class="box-cta btn-msg-modal">' +
                                    '<button class="btn-gradient chg-btn-style bg-black" id="btn-emoji"><span>'+fn.LANG.BTN.SAVE+'</span></button>' +
                                '</div>' +
                            '</article>' +
                        '</div>' +
                    '</div>' +
                '</div>';

            return str;
        }

        function TPL_getUsernameModal(){
            var me = fn.API.getMyInfo();
            var countryArr = _api.getCountries();
            var countryOpts = '';
            var hasUserCountryCode = (me.countryCode);

            var selected = '';
            for(var i = 0; i < countryArr.length; i++){
                if(hasUserCountryCode){
                    selected = (me.countryCode.toLowerCase() === countryArr[i].code.toLowerCase()) ? 'selected' : '';
                }
                // countryOpts += '<option value="'+countryArr[i].code+'" '+selected+'>'+countryArr[i].name+'</option>';
                countryOpts += '<li><button type="button" data-value="'+countryArr[i].code+'" data-selected="'+selected+'"><span>'+countryArr[i].name+'</span></li>';
            }

            var str = '' +
                '<div id="msg-wrapper" class="transition">' +
                    '<div class="msg-modal type-2 transition">' +
                        '<div class="modal-content">' +
                            '<article class="box-container notice shadow">' +
                                '<button type="button" id="btn-popup-close"><img src="static/img/btn-close.png" alt=""></button>' +
                                '<div class="modal-field-label">Update a username</div>' +
                                '<div class="modal-input-wrapper">' +
                                    '<input type="text" id="emoji-username" name="name" class="modal-input text-center" value="'+me.nickname+'">' +
                                    '<span class="tooltip bottom alert username">' +
                                        '<span></span>' +
                                    '</span>'+
                                '</div>' +
                                '<div class="modal-field-label">Update your nationality</div>' +
                                '<div class="modal-input-wrapper">' +
                '<div class="select-input">' +
                    '<button type="button" id="'+eleId.input.countryCode+'" class="si-input-box con-flex cf-hor-space-between cf-ver-center">' +
                        '<span>-</span>' +
                        '<span class="ico-bullet transition"><img src="static/img/icon-arrow-down.png" alt=""></span>' +
                    '</button>' +
                    '<ul class="si-list-box">' +
                        '<li><button type="button" data-value="">'+fn.LANG.PLACEHOLDER.SELECT_COUNTRY+'</button></li>' +
                        countryOpts +
                    '</ul>' +
                '</div>' +
                                    // '<select id="'+eleId.input.countryCode+'" class="select-input">' +
                                    //     '<option value="">'+fn.LANG.PLACEHOLDER.SELECT_COUNTRY+'</option>'+
                                    //     countryOpts+
                                    // '</select>' +
                                    '<span class="tooltip bottom alert country">' +
                                    '<span></span>' +
                                    '</span>'+
                                '</div>' +
                                '<div class="box-cta btn-msg-modal">' +
                                    '<button class="btn-gradient chg-btn-style bg-black" id="btn-save"><span>'+fn.LANG.BTN.SAVE+'</span></button>' +
                                '</div>' +
                            '</article>' +
                        '</div>' +
                    '</div>' +
                '</div>';

            return str;
        }

        var imgLandscapeStr = _api.getOrientation() == 'l' ? '-landscape' : '';
        var wrapperScrollArea = _api.getOrientation() == 'l' ? 'scroll-landscape' : '';
        var imgNames = {
            logo : 'light-blue-logo'+ imgLandscapeStr + '.png'
        };

        function TPL_getSigninModal(){

            var hideClass = 'show-100-animate';
            var idPlaceholder = fn.LANG.PLACEHOLDER.EMAIL;

            //make html
            var eleTitle = '<h3 class="modal-title"><img src="static/img/PALogo.png" alt="">'+fn.LANG.TITLE.LOGIN+'</h3>';
            var eleFieldEmail =
                '<div class="form-field has-icon has-validation">'+
                    '<input id="'+eleId.input.email+'" type="email" name="email" ' +
                        'placeholder="'+idPlaceholder+'">'+
                    '<label for="'+eleId.input.email+'" class="input-icon">'+
                        '<i class="fas fa-id-card"></i>'+
                    '</label>'+
                    '<span class="field-check"></span>'+
                '</div>'+
                '<span id="'+eleId.input.email+'-msg" class="pa-ui-input-msg pa-ui-input-err"></span>';
            var eleFieldPwd =
                '<div class="form-field has-icon">'+
                    '<input id="'+eleId.input.pwd+'" type="password" name="password" ' +
                        'placeholder="'+fn.LANG.PLACEHOLDER.PWD+'">'+
                    '<label for="'+eleId.input.pwd+'" class="input-icon">'+
                        '<i class="fas fa-lock"></i>'+
                    '</label>'+
                '</div>'+
                '<span id="'+eleId.input.pwd+'-msg" class="pa-ui-input-msg pa-ui-input-err">' +
                    '<span id="pa-ui-ipm-1"></span>'+
                '</span>';
            var eleBtnSubmit = '<div class="form-field">'+
                '<button type="submit" id="'+eleId.btn.submit+'" class="btn btn-full btn-sign-up btn-submit">'+fn.LANG.BTN.CONTINUE+'</button>'+
                '</div>';
            var eleOr = '<div class="separator"><span>'+fn.LANG.WORD.OR+'</span></div>';
            var eleBtnFB = '<button type="button" id="sns-fb" class="sns-button btn btn-icon btn-full">' +
                '&nbsp;</button>',
                eleBtnGG = '<button type="button" id="sns-gg" class="sns-button btn btn-icon btn-full">' +
                    '&nbsp;</button>',
                eleBtnApple = '<div style="margin-bottom:.53em;"><button type="button" id="sns-apple" class="sns-button btn btn-icon btn-full">'+
                    '<img src="static/img/icon-apple.png" alt="">'+
                    '<span>Sign in with Apple</span>'+
                    '</button></div>';
            if(!_api.isIos()) eleBtnApple = '';

            var ribbon = '<div class="ribbon top-layer"><a href="javascript:void(0)" class="'+eleId.btn.signUp+'"><i class="fas fa-angle-left"></i> <span>Sign up</span></a></div>';
            var modalClass = 'modal-signin';
            var popupHeaderClass = 'header-signin';
            var popupContentClass = 'popup-signin';

            var str = '';
            if (_api.getOrientation() == 'l'){
                str =
                    '<div id="msg-wrapper" class="transition">' +
                        '<div class="msg-modal type-3 transition">' +
                            '<div class="modal-content '+modalClass+'">' +
                                '<span class="back modal-back"><i class="fas fa-arrow-left"></i></span>'+
                                '<div class="popup-header '+popupHeaderClass+'">'+
                                    ribbon+
                                '</div>'+
                                '<button type="button" id="btn-popup-close"><img src="static/img/btn-close-blue.png" alt=""></button>' +
                                '<div class="modal-content-inner '+popupContentClass+'">' +
                                    '<div class="form-container">'+
                                        eleTitle+
                                        '<form id="" action=\"\" method=\"POST\">'+
                                            '<span id="'+eleId.message+'" class="pa-ui-input-msg pa-ui-input-err"></span>'+
                                            // email sign up
                                            eleFieldEmail+
                                            eleFieldPwd+
                                            '<div>' +
                                                '<p style="text-align: center" class="mt-1_5em mb-1_5em"><a href="javascript:void(0)" id="pa-ui-btn-forgot-pwd"><span>'+fn.LANG.BTN.FORGOT_PWD+'</span></a></p>'+
                                            '</div>' +
                                                eleBtnApple+
                                            '<div class="">'+
                                                '<button type="submit" class="btn btn-full btn-sign-in btn-submit" id="'+eleId.btn.submit+'">'+fn.LANG.BTN.LOGIN+'</button>'+
                                            '</div>'+
                                            // sns sign up
                                            '<div class="row-layout form-field social-login">'+
                                                // '<div class="form-field social-login">' +
                                                    '<div class="col-sm-6">'+
                                                        eleBtnFB+
                                                    '</div>'+
                                                    '<div class="col-sm-6">'+
                                                        eleBtnGG+
                                                    '</div>'+
                                                // '</div>'+
                                            '</div>'+
                                        '</form>'+
                                    '</div>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +
                    '</div>';
            }else {    // todo
                str =
                    '<div class="form-container">'+
                        eleTitle+
                        '<form action="" class="">'+
                            '<span id="'+eleId.message+'" class="pa-ui-input-msg pa-ui-input-err"></span>'+
                            eleFieldEmail+
                            eleFieldPwd+
                            '<div class="row-layout form-field con-flex cf-hor-center cf-ver-center">'+
                                '<div class="col-sm-5 etc-signin create-and-forgot-btn-area" style="width: 45%;">'+
                                    '<p style="text-align: center"><a href="javascript:void(0)" id="pa-ui-btn-forgot-pwd"><span>'+fn.LANG.BTN.FORGOT_PWD+'</span></a></p>'+
                                '</div>'+
                                '<div class="col-sm-7" style="width: 55%;">'+
                                    '<button type="submit" class="btn btn-full btn-sign-in btn-submit" id="'+eleId.btn.submit+'">'+fn.LANG.BTN.LOGIN+'</button>'+
                                '</div>'+
                            '</div>'+
                            eleOr+
                            '<div class="row-layout form-field social-login">' +
                                '<div class="col-sm-6">'+
                                    eleBtnFB+
                                '</div>'+
                                '<div class="col-sm-6">'+
                                    eleBtnGG+
                                '</div>'+
                            '</div>' +
                        '</form>'+
                    '</div>';
            }
            return str;
        }

        function TPL_getSignupAllModal(){

            //make html
            var eleTitle = '<h3 class="modal-title"><img src="static/img/PALogo.png" alt="">' + fn.LANG.TITLE.SIGNUP + '</h3>';
            var eleFieldEmail = '<div class="form-field has-icon has-validation email-signup-field step-1">' +
                '<input id="' + eleId.input.email + '" type="email" name="email" placeholder="' + fn.LANG.PLACEHOLDER.EMAIL + '">' +
                '<label for="' + eleId.input.email + '" class="input-icon">' +
                '<i class="fas fa-envelope"></i>' +
                '</label>' +
                '<span class="field-check"></span>' +
                '</div>' +
                '<p id="' + eleId.input.email + '-msg" class="pa-ui-input-msg pa-ui-input-err email-signup-field step-1"></p>';
            var eleFieldName = '<div class="form-field has-icon has-validation step-2">' +
                '<input id="' + eleId.input.name + '" type="text" name="name" placeholder="' + fn.LANG.PLACEHOLDER.NICKNAME + '">' +
                '<label for="' + eleId.input.name + '" class="input-icon">' +
                '<i class="fas fa-user"></i>' +
                '</label>' +
                '<span class="field-check"></span>' +
                '</div>' +
                '<p id="' + eleId.input.name + '-msg" class="pa-ui-input-msg pa-ui-input-err step-2"></p>';
            var eleFieldPwd = '<div class="form-field has-icon has-validation step-2">' +
                '<input id="' + eleId.input.pwd + '" type="password" name="password" placeholder="' + fn.LANG.PLACEHOLDER.PWD + '">' +
                '<label for="' + eleId.input.pwd + '" class="input-icon">' +
                '<i class="fas fa-lock"></i>' +
                '</label>' +
                '<span class="field-check"></span>' +
                '</div>' +
                '<p id="' + eleId.input.pwd + '-msg" class="pa-ui-input-msg pa-ui-input-err step-2"></p>';
            var eleBtnSubmit = '<div class="form-field">' +
                '<button type="submit" id="' + eleId.btn.submit + '" class="btn btn-full btn-sign-up btn-submit">' + fn.LANG.BTN.CONTINUE + '</button>' +
                '</div>';
            var eleOr = '<div class="separator"><span>' + fn.LANG.WORD.OR + '</span></div>';
            var eleBtnFB = '<button type="button" id="sns-fb" class="sns-button btn btn-icon btn-full">' +
                '&nbsp;</button>',
                eleBtnGG = '<button type="button" id="sns-gg" class="sns-button btn btn-icon btn-full">' +
                    '&nbsp;</button>',
                eleBtnApple = '<div style="margin-top:.53em;" class="row-layout form-field social-login"><button type="button" id="sns-apple" class="sns-button btn btn-icon btn-full icon-left">'+
                    '<img src="static/img/icon-apple.png" alt="">'+
                    '<span>Sign in with Apple</span>'+
                    '</button></div>',
                eleBtnEmail = '<button type="button" id="btn-email" class="btn btn-icon btn-full">' +
                    '&nbsp;</button>';
            if(!_api.isIos()) eleBtnApple = '';
            var termsPP =
                '<div class="form-field term-of-use mt-0">' +
                '<p class="i-agree mt-1">' +
                fn.LANG.MSG.INFO.I_AGREE_TNC_PP("https://pocketarena.com/terms/") +
                '</p>' +
                '<span id="' + eleId.input.tncppAgree + '-msg" class="pa-ui-input-msg pa-ui-input-err"></span>' +
                '</div>';

            var _title = 'signup';
            var ribbon = '<div class="ribbon top-layer"><a href="javascript:void(0)" class="'+eleId.btn.signUp+'"><i class="fas fa-angle-left"></i> <span>Login</span></a></div>';
            var modalClass = 'modal-signup';
            var popupHeaderClass = 'header-signup'; // no-padding-top';
            var popupContentClass = 'popup-signup';

            var str = '';
            if (_api.getOrientation() == 'l') {
                str =
                    '<div id="msg-wrapper" class="transition">' +
                        '<div class="msg-modal type-3 transition">' +
                            '<div class="modal-content '+modalClass+'">' +
                                '<span class="back modal-back"><i class="fas fa-arrow-left"></i></span>'+
                                '<div class="popup-header '+popupHeaderClass+'">'+
                                    ribbon+
                                '</div>'+
                                '<button type="button" id="btn-popup-close"><img src="static/img/btn-close-blue.png" alt=""></button>' +
                                '<div class="modal-content-inner '+popupContentClass+'">' +
                                    '<div class="form-container">' +
                                        eleTitle +
                                        '<form id="" action=\"\" method=\"POST\">' +
                                            '<span id="' + eleId.message + '" class="pa-ui-input-msg pa-ui-input-err"></span>' +

                                            // email sign up
                                            '<div class="row-layout form-field social-login">' +
                                            eleBtnGG+
                                            '</div>'+
                                            '<div class="row-layout form-field social-login">' +
                                            eleBtnFB+
                                            '</div>'+
                                            eleBtnApple+
                                            eleOr+
                                            '<div class="row-layout form-field social-login">' +
                                            eleBtnEmail +
                                            '</div>'+

                                            termsPP +
                                        '</form>' +
                                    '</div>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +
                    '</div>';
            } else {    // todo
                str =
                    '<div class="form-container">' +
                    eleTitle +
                    '<form id="" action=\"\" method=\"POST\">' +
                    '<span id="' + eleId.message + '" class="pa-ui-input-msg pa-ui-input-err"></span>' +
                        // sns sign up
                        '<div class="row-layout form-field social-login">' +
                        eleBtnGG+
                        '</div>'+
                        '<div class="row-layout form-field social-login">' +
                        eleBtnFB+
                        '</div>'+
                        eleOr+
                        // email sign up
                        '<div class="row-layout form-field social-login">' +
                        eleBtnEmail +
                        '</div>'+

                        termsPP +
                    '</form>' +
                    '</div>';
            }
            return str;
        }

        function TPL_getForgotPwdModal(){

            var _title = 'forgot-password';
            var ribbon = '<div class="ribbon top-layer"><a href="javascript:void(0)" class="'+eleId.btn.signIn+'"><i class="fas fa-angle-left"></i> <span>'+fn.LANG.WORD.BACK+'</span></a></div>';
            var modalClass = 'modal-forgot-password';
            var popupHeaderClass = 'header-forgot-password';
            var popupContentClass = 'popup-forgot-password';

            var str =
                '<div id="msg-wrapper" class="transition">' +
                        '<div class="msg-modal type-3 transition">' +
                            '<div class="modal-content '+modalClass+'">' +
                                '<span class="back modal-back"><i class="fas fa-arrow-left"></i></span>'+
                                '<div class="popup-header '+popupHeaderClass+'">'+
                                    ribbon+
                                '</div>'+
                                '<button type="button" id="btn-popup-close"><img src="static/img/btn-close-blue.png" alt=""></button>' +
                                '<div class="modal-content-inner '+popupContentClass+'">' +
                                    '<div class="form-container">'+
                                        '<h3 class="modal-title">'+fn.LANG.TITLE.FORGOT_PASSWORD+'</h3>'+
                                        '<span id="'+eleId.message+'" class="pa-ui-input-msg pa-ui-input-err"></span>'+
                                        '<div class="form-field has-icon has-validation">'+
                                            '<input id="'+eleId.input.email+'" type="email" name="email" placeholder="'+fn.LANG.PLACEHOLDER.ID+'">'+
                                            '<label for="'+eleId.input.email+'" class="input-icon">'+
                                                '<i class="fas fa-envelope"></i>'+
                                            '</label>'+
                                            '<span class="field-check"></span>'+
                                        '</div>'+
                                        '<span id="'+eleId.input.email+'-msg" class="pa-ui-input-msg pa-ui-input-err"></span>'+
                                        '<div class="form-field">'+
                                            '<button id="'+eleId.btn.submit+'" type="button" class="btn btn-full btn-submit">'+fn.LANG.BTN.SUBMIT+'</button>'+
                                        '</div>'+
                                        '<div class="separator"><span>'+fn.LANG.WORD.OR+'</span></div>'+
                                        '<div class="row-layout form-field etc-forgot">' +
                                            '<div class="col-sm-6">'+
                                                '<button type="button" id="'+eleId.btn.signUp+'" class="btn btn-icon btn-full"><i class="fas fa-user"></i>'+fn.LANG.BTN.SIGN_UP+'</button>' +
                                            '</div>'+
                                            '<div class="col-sm-6">'+
                                                '<button type="button" id="'+eleId.btn.signIn+'" class="btn btn-icon btn-full"><i class="fas fa-sign-in-alt"></i>'+fn.LANG.BTN.LOGIN+'</button>' +
                                            '</div>'+
                                        '</div>' +
                                    '</div>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +
                '</div>';
            return str;
        }

        function getPlayTime(time){
            var _time = parseInt(time);
            var res1 = parseInt(moment.utc(moment.duration(60, "seconds").asMilliseconds()).format("DDD")) - 1;   // start from 1
            var res2 = moment.utc(moment.duration(_time, "seconds").asMilliseconds()).format("H[h] m[s]");
            return res1 + 'd '+res2;
        }

        // todo : language
        function TPL_getUserProfileModal(data){

            var _me = fn.API.getMyInfo();
            var modalClass = 'm-user-profile';
            var popupHeaderClass = '';
            var popupContentClass = '';
            var _settingBtn = '';

            var _playtime = Math.floor(Number(data.playtime)/60/60)+'hours'; //getPlayTime(data.playtime);

            // test
            // data.historyinfo = [
            //     {xpamount : '20', get_use : '1', expiredate: '2022-03-09 07:14:59', registdate: '2021-03-09 07:14:59'},
            //     {xpamount : '20', get_use : '2', expiredate: '2021-05-28 07:14:59', registdate: '2020-05-28 07:14:59'}
            // ];

            var _history = '';
            if(data.historyinfo.length == 0){
                _history = '<ul class="no-data con-flex cf-hor-center cf-ver-center">' +
                    '<li><span>No data found.</span></li>' +
                '</ul>';
            }else {
                // todo : paging
                var _now = moment();
                for(var i = 0; i < data.historyinfo.length; i++){
                    var _h = data.historyinfo[i];
                    var _expd = moment.utc(_h.expiredate).local();
                    var _diff = _expd.diff(_now, 'days');
                    var _class = (_diff <= 3) ? 'expire-soon ' : '';
                    var _minus = (_h.xpamount.indexOf('-') > -1) ? '-' : '';
                    _history += '' +
                        '<ul class="'+_class+'con-flex cf-hor-center cf-ver-center">' +
                            '<li><span>'+moment.utc(_h.registdate).local().format('DD.MMM.YYYY')+'</span></li>' +
                            '<li><img class="m-coin" src="static/img/icon-xp.png" alt=""> <span class="m-coin-val">'+_minus+fn.UTIL.displayComma(_h.xpamount.replace('-', ''))+'</span></li>' +
                            '<li><span>'+moment.utc(_h.expiredate).local().fromNow()+'</span></li>' +
                        '</ul>';
                }
            }
            if(!_me.isAnonymous){
                _settingBtn = '<li class="text-center">' +
                    '<button type="button" class="btn btn-cd" id="btn-setting"><strong>Setting</strong>' +
                    '</button></li>';
            }

            var tot = Number(data.userinfo.match_draws) + Number(data.userinfo.match_losts) + Number(data.userinfo.match_wins);
            var _win = fn.UTIL.displayComma(data.userinfo.match_wins); //+'/'+fn.UTIL.displayComma(tot);
            var _btnPALink = '<a href="https://pocketarena.com" target="_blank" class="con-flex cf-hor-center cf-ver-center">' +
                    '<img src="static/img/cd/icon-cd-pa-logo.png" alt="">' +
                    '<span>POCKET ARENA</span>' +
                '</a>';
            if(fn.API.isIos()) _btnPALink = '';

            var str = ''+
                '<div id="msg-wrapper" class="transition">' +
                    '<div class="msg-modal type-4 transition">' +   // type-4 : cd style
                        '<div class="modal-content '+modalClass+'">' +
                            '<div class="popup-header '+popupHeaderClass+'">'+
                                '<h3 class="modal-title">USER PROFILE</h3>'+
                            '</div>'+
                            '<button type="button" id="btn-popup-close"><img src="static/img/cd/btn-modal-close.png" alt=""></button>' +
                            '<div class="modal-content-inner '+popupContentClass+'">' +
                                '<div class="form-container">'+

                                    '<div class="con-flex">' +
                                        '<div class="profile-area">' +
                                            '<figure class="m-profile-photo">' +
                                                '<span>' + // style="background-image: url('+_me.photo+')">' +
                                                    '<img src="'+_me.photo+'" alt="" crossorigin="anonymous">' +
                                                '</span>' +
                                                '<label for="'+eleId.input.image+'" class="user-profile-img-edit-icon">' +
                                                    '<img src="static/img/cd/btn-edit-profile.png" alt="">' +
                                                    '<input type="file" id="'+eleId.input.image+'" name="img" accept=".png, .jpg, .jpeg" style="display: none;">' +
                                                '</label>' +
                                            '</figure>' +
                                            '<div class="m-name-location con-flex cf-hor-center cf-ver-center">' +
                                                '<button type="button" id="edit-profile-info" class="con-flex cf-hor-center cf-ver-center">' +
                                                    '<span class="m-loc">' +
                                                        '<img src="static/img/flags/'+_me.countryCode.toUpperCase()+'.png" alt="">' +
                                                    '</span> ' +
                                                    '<span class="m-name">'+_me.nickname+'</span>' +
                                                    '<img src="static/img/cd/btn-edit-profile.png" alt="">' +
                                                '</button>' +
                                            '</div>' +
                                            '<div class="m-id">' +
                                                '<span>ID: <button type="button" id="btn-copy-id" class="btn bg-clear">' +
                                                    '<span class="id-copy-txt">'+_me.id+'</span> ' +
                                                    '<span><img src="static/img/btn-copy.png" alt="" class="id-copy-img"></span> ' +
                                                '</button></span>' +
                                            '</div>' +
                                            '<div class="m-balance con-flex cf-hor-space-between cf-ver-center">' +
                                                '<span class="m-balance-icon"><img src="static/img/icon-xp.png" alt=""></span>' +
                                                '<span class="m-balance-val">'+fn.UTIL.displayComma(_me.rubyamount+'')+'</span>' +
                                            '</div>' +
                                            '<div class="m-record">' +
                                                '<ul class="con-flex cf-col">' +
                                                    '<li><span>Win :</span> <span>'+_win+'</span></li>' +
                                                    '<li><span>Played :</span> <span>'+_playtime+'</span></li>' +
                                                    _settingBtn +
                                                '</ul>' +
                                            '</div>' +
                                        '</div>' +

                                        '<div class="history-area">' +
                                            '<div class="m-history-title">Reward History</div>' +
                                            '<div class="m-table-header">' +
                                                '<ul class="con-flex cf-hor-center cf-ver-center">' +
                                                    '<li>Date</li>' +
                                                    '<li>XP</li>' +
                                                    '<li>Remaining days</li>' +
                                                '</ul>' +
                                            '</div>' +
                                            '<div class="m-table-body" style="display: none">' + // show by resizeView in js
                                                _history+
                                                // '<ul class="con-flex cf-hor-center cf-ver-center">' +
                                                //     '<li><span>23.02.2021</span></li>' +
                                                //     '<li><img class="m-coin" src="static/img/cd/icon-xp-coin-normal.png" alt=""> <span class="m-coin-val">600</span></li>' +
                                                //     '<li><span>333 days</span></li>' +
                                                // '</ul>' +
                                                // '<ul class="expire-soon con-flex cf-hor-center cf-ver-center">' +
                                                //     '<li><span>23.02.2021</span></li>' +
                                                //     '<li><img class="m-coin" src="static/img/cd/icon-xp-coin-normal.png" alt=""> <span class="m-coin-val">600</span></li>' +
                                                //     '<li><span>333 days</span></li>' +
                                                // '</ul>' +
                                                //
                                                // '<ul class="no-data con-flex cf-hor-center cf-ver-center">' +
                                                //     '<li><span>No data found.</span></li>' +
                                                // '</ul>' +
                                            '</div>' +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="m-btm-area con-flex cf-hor-space-between cf-ver-center">' +
                                        '<div class="m-btm-desc con-flex cf-hor-center cf-ver-center">' +
                                            '<img src="static/img/icon-xp.png" alt="">' +
                                            '<span>*Your earned XP automatically expires after 30 days.<br>To avoid losing it, please exchange to POC (Pocket Arena Token) at</span>' +
                                        '</div>' +
                                        '<div class="m-btm-pa-btn">' +
                                            _btnPALink +
                                        '</div>' +
                                    '</div>'+

                                '</div>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +
                '</div>';
            return str;
        }

        function TPL_getSettingModal(castleno){
            var _me = fn.API.getMyInfo();
            var modalClass = '';
            var popupHeaderClass = '';
            var popupContentClass = '';
            var _settingBtn = '';
            var hasContract = (castleno);
            var _contractStr = '';
            // if(hasContract){
                _contractStr = '<div class="t-box cf-col">' +
                    '<div class="text-left">Contact the Castle Owner on Telegram</div>' +
                    '<div class="con-flex cf-hor-start cf-ver-center form-field input-prefix">' +
                        '<span class="text-basic-color">@</span>' +
                        '<input type="text" id="t-id" class="text-basic-color text-left form-control" placeholder="Telegram ID" value="">'+
                        '<button type="button" id="btn-send" class="btn btn-img small">' +
                            '<img src="static/img/cd/btn_send_normal.png" alt="">' +
                        '</button>' +
                    '</div>' +
                    '<span id="t-id-msg" class="pa-ui-input-msg pa-ui-input-err"></span>' +
                '</div>';
            // }

            var str = '<div id="msg-wrapper" class="transition">' +
            '<div class="msg-modal type-5 transition">' +   // type-5 : game style
                '<div class="modal-content '+modalClass+'">' +
                    '<div class="popup-header '+popupHeaderClass+'">'+
                        '<h3 class="modal-title">SETTING</h3>'+
                    '</div>'+
                    '<button type="button" id="btn-popup-close"><img src="static/img/cd/btn-modal-close.png" alt=""></button>' +
                    '<div class="modal-content-inner '+popupContentClass+'">' +
                        '<div class="form-container">'+
                        '<div class="t-box cf-hor-space-between">' +
                            '<label for="cm-chk-input1" class="">Receive Message by email</label>' +
                            '<span class="cm-chk mr-0">' +
                                '<input id="cm-chk-input1" name="app3" class="cm-input-chk" type="checkbox">' +
                                '<label for="cm-chk-input1" class="cm-input-chk-label transition"></label>' +
                            '</span>' +
                        '</div>' +
                        '<div class="t-box cf-col">' +
                            '<div class="text-left">Auto accept castle from sponsor</div>' +
                            '<div class="con-flex cf-hor-space-between mt-1 mb-0_5">' +
                                '<span class="cm-chk w-50p text-left">' +
                                    '<input id="cm-radio-input1" name="app1" class="cm-input-radio" type="radio" value="2">' +
                                    '<label for="cm-radio-input1" class="cm-input-radio-label transition"></label>' +
                                    '<label for="cm-radio-input1" class="cm-input-label-text">Review castle first</label>' +
                                '</span>' +
                                '<span class="cm-chk w-50p text-left">' +
                                    '<input id="cm-radio-input2" name="app1" class="cm-input-radio" type="radio" value="1">' +
                                    '<label for="cm-radio-input2" class="cm-input-radio-label transition"></label>' +
                                    '<label for="cm-radio-input2" class="cm-input-label-text">Auto accept 1st contract</label>' +
                                '</span>' +
                            '</div>' +
                        '</div>' +
                        _contractStr+
                        '<button type="button" id="btn-logout" class="btn btn-img mt-0_5 mb-0_5">' +
                            '<img src="static/img/cd/btn_Logout_normal.png" alt="">' +
                        '</button>' +
                        '</div>' +
                    '</div>' +
                '</div>' +
            '</div>';
            return str;
        }

        function TPL_getMessage5Modal(title, txt){
            var _me = fn.API.getMyInfo();
            var modalClass = '';
            var popupHeaderClass = '';
            var popupContentClass = '';
            var _settingBtn = '';
            var _title = (title) ? title : 'Message';
            var _txt = (txt) ? txt : '';

            var str = '<div id="msg-wrapper" class="transition">' +
            '<div class="msg-modal type-5 transition">' +   // type-5 : game style
                '<div class="modal-content '+modalClass+'">' +
                    '<div class="popup-header '+popupHeaderClass+'">'+
                        '<h3 class="modal-title">'+_title+'</h3>'+
                    '</div>'+
                    '<button type="button" id="btn-popup-close"><img src="static/img/cd/btn-modal-close.png" alt=""></button>' +
                    '<div class="modal-content-inner '+popupContentClass+'">' +
                        '<p class="p-1">'+_txt+'</p>'+
                        '<button type="button" class="btn btn-img btn-popup mt-0_5 mb-0_5">' +
                            '<img src="static/img/cd/btn_OK_normal.png" alt="">' +
                        '</button>' +
                    '</div>' +
                '</div>' +
            '</div>';
            return str;
        }

        function TPL_getToastModal(id, txt){
            var modalClass = '';
            var popupHeaderClass = '';
            var popupContentClass = 'con-flex cf-ver-center';

            var str = '<div id="msg-wrapper" class="transition">' +
            '<div class="msg-modal type-5 toast transition" data-id="'+id+'">' +   // type-5 : game style
                '<div class="modal-content '+modalClass+'">' +
                    // '<div class="popup-header '+popupHeaderClass+'">'+
                    //     '<h3 class="modal-title">'+_title+'</h3>'+
                    // '</div>'+
                    '<img src="static/img/cd/Toast_box.png" alt="" class="toast-bg">'+
                    '<button type="button" id="btn-popup-close"><img src="static/img/cd/btn-modal-close.png" alt=""></button>' +
                    '<div class="modal-content-inner '+popupContentClass+'">' +
                        '<p class="p-1 full-width">'+txt+'</p>'+
                        // '<button type="button" class="btn btn-img btn-popup mt-0_5 mb-0_5">' +
                        //     '<img src="static/img/cd/btn_OK_normal.png" alt="">' +
                        // '</button>' +
                    '</div>' +
                '</div>' +
            '</div>';
            return str;
        }

        /**
         * email
         * @return {string}
         * @constructor
         */
        function TPL_getSignupModal(){

            var hideClass = 'show-100-animate';
            var idPlaceholder = fn.LANG.PLACEHOLDER.EMAIL;

            //make html
            var eleTitle = '<h3 class="modal-title"><img src="static/img/PALogo.png" alt="">'+fn.LANG.TITLE.SIGNUP+'</h3>';
            var eleFieldEmail = '<div class="form-field has-icon has-validation email-signup-field step-1">'+
                    '<input id="'+eleId.input.email+'" type="email" name="email" placeholder="'+fn.LANG.PLACEHOLDER.EMAIL+'">'+
                    '<label for="'+eleId.input.email+'" class="input-icon">'+
                        '<i class="fas fa-envelope"></i>'+
                    '</label>'+
                    '<span class="field-check"></span>'+
                '</div>'+
                '<p id="'+eleId.input.email+'-msg" class="pa-ui-input-msg pa-ui-input-err email-signup-field step-1"></p>';
            var eleFieldName = '<div class="form-field has-validation step-2 mt-0">'+
                    '<input id="'+eleId.input.name+'" type="text" name="name" placeholder="'+fn.LANG.PLACEHOLDER.NICKNAME+'">'+
                    '<span class="field-check"></span>'+
                '</div>'+
                '<p id="'+eleId.input.name+'-msg" class="pa-ui-input-msg pa-ui-input-err step-2"></p>';
            var eleFieldPwd = '<div class="form-field has-validation step-2 mt-0">'+
                    '<input id="'+eleId.input.pwd+'" type="password" name="password" placeholder="'+fn.LANG.PLACEHOLDER.PWD+'">'+
                    '<span class="field-check"></span>'+
                '</div>'+
                '<p id="'+eleId.input.pwd+'-msg" class="pa-ui-input-msg pa-ui-input-err step-2"></p>';
            var eleBtnSubmit = '<div class="form-field">'+
                '<button type="submit" id="'+eleId.btn.submit+'" class="btn btn-full btn-sign-up btn-submit">'+fn.LANG.BTN.SIGN_UP+'</button>'+
                '</div>';
            var eleOr = '<div class="separator"><span>'+fn.LANG.WORD.OR+'</span></div>';
            var eleBtnFB = '<button type="button" id="sns-fb" class="sns-button btn btn-icon btn-full">' +
                '&nbsp;</button>',
                eleBtnGG = '<button type="button" id="sns-gg" class="sns-button btn btn-icon btn-full">' +
                    '&nbsp;</button>';
            var termsPP =
                '<div class="form-field term-of-use">'+
                    '<p class="i-agree mb-0">' +
                        fn.LANG.MSG.INFO.I_AGREE_TNC_PP("https://pocketarena.com/terms/")+
                    '</p>'+
                    '<span id="'+eleId.input.tncppAgree+'-msg" class="pa-ui-input-msg pa-ui-input-err"></span>'+
                '</div>';
            var hcaptchaTxt = '<div class="h-captcha mt-0" data-sitekey="6e572aea-5b77-46ee-ba82-f57abb087962" data-theme="light"></div>';
            if(fn.API.isAndroid() || fn.API.isIos()) hcaptchaTxt = '';

            var ribbon = '<div class="ribbon top-layer"><a href="javascript:void(0)" class="'+eleId.btn.signUp+'"><i class="fas fa-angle-left"></i> <span>Back</span></a></div>';
            var modalClass = 'modal-signup';
            var popupHeaderClass = 'header-signup no-padding-top';
            var popupContentClass = 'popup-signup';

            var str = '';
            if (_api.getOrientation() == 'l'){
                str =
                    '<div id="msg-wrapper" class="transition">' +
                        '<div class="msg-modal type-3 wider transition">' +
                            '<div class="modal-content '+modalClass+'">' +
                                '<span class="back modal-back"><i class="fas fa-arrow-left"></i></span>'+
                                '<div class="popup-header '+popupHeaderClass+'">'+
                                    ribbon+
                                '</div>'+
                                '<button type="button" id="btn-popup-close"><img src="static/img/btn-close-blue.png" alt=""></button>' +
                                '<div class="modal-content-inner '+popupContentClass+'">' +
                                    '<div class="form-container">'+
                                        eleTitle+
                                        '<form id="" action=\"\" method=\"POST\">'+
                                            '<span id="'+eleId.message+'" class="pa-ui-input-msg pa-ui-input-err"></span>'+

                                            // email sign up
                                            eleFieldEmail+
                                            '<div class="row-layout form-field">'+
                                                // '<div class="form-field social-login">' +
                                                '<div class="col-sm-6">'+
                                                eleFieldName+
                                                '</div>'+
                                                '<div class="col-sm-6">'+
                                                eleFieldPwd+
                                                '</div>'+
                                                // '</div>'+
                                            '</div>'+
                                            hcaptchaTxt +
                                            eleBtnSubmit +
                                            // sns sign up
                                            // '<div class="row-layout form-field social-login">' +
                                            //     '<div class="col-sm-6">'+
                                            //         eleBtnFB+
                                            //     '</div>'+
                                            //     '<div class="col-sm-6">'+
                                            //         eleBtnGG+
                                            //     '</div>'+
                                            // '</div>' +
                                            termsPP+
                                        '</form>'+
                                    '</div>' +
                                '</div>' +
                            '</div>' +
                        '</div>' +
                    '</div>';
            }else {

                str =
                    '<div class="form-container">'+
                        eleTitle+
                        '<form id="" action=\"\" method=\"POST\">'+
                            '<span id="'+eleId.message+'" class="pa-ui-input-msg pa-ui-input-err"></span>'+

                                //email sign up : below email field is for email reg only
                                eleFieldEmail+
                                eleFieldName+
                                eleFieldPwd+

                                eleBtnSubmit+
                                // eleOr+
                                // sns sign up
                                // '<div class="row-layout form-field social-login">' +
                                //     '<div class="col-sm-6">'+
                                //         eleBtnFB+
                                //     '</div>'+
                                //     '<div class="col-sm-6">'+
                                //         eleBtnGG+
                                //     '</div>'+
                                // '</div>' +

                                termsPP+
                        '</form>'+
                    '</div>';
            }
            return str;
        }

        function TPL_getGuestModal(){
            var me = fn.API.getMyInfo();
            var photo = me.photo; //(me.photo.indexOf('http') > -1) ? me.photo : 'static/img/'+me.photo;
            var str = '' +
                '<div id="msg-wrapper" class="transition">' +
                    '<div class="msg-modal type-2 transition">' +
                        '<div class="modal-content">' +
                            '<article class="box-container notice shadow">' +
                                '<button type="button" id="btn-popup-close"><img src="static/img/btn-close.png" alt=""></button>' +
                                '<div class="modal-field-label">Your username</div>' +
                                '<div class="modal-input-wrapper"><div class="modal-input text-center">'+me.nickname+'</div>'+
                                '<div class="modal-field-label">Your emoji</div>' +
                                '<div class="emoji-select-container">' +
                                    '<img src="'+photo+'" class="emoji-current-user" alt="">'+
                                '</div>'+
                                '<div class="box-cta btn-msg-modal">' +
                                    '<button class="btn-gradient chg-btn-style" id="btn-emoji"><span>'+fn.LANG.BTN.EDIT+'</span></button>' +
                                '</div>' +
                            '</article>' +
                        '</div>' +
                    '</div>' +
                '</div>';

            return str;
        }

        function TPL_getChangePwdModal(options){
            var str = '' +
                '<div id="msg-wrapper" class="transition">' +
                    '<div class="msg-modal transition has-title">' +
                        '<button type="button" id="btn-popup-close"><img src="static/img/btn-close.png" alt=""></button>' +
                        '<div class="msg-title con-flex cf-col cf-hor-center cf-ver-center">'+options.title+'</div>'+
                        '<div class="msg-content con-flex cf-col cf-hor-center cf-ver-center">'+options.msg+'</div>'+
                        '<div class="msg-form con-flex cf-col cf-hor-center cf-ver-center mt-1_5">' +
                            '<label for="forgot-email" class="full-width">' +
                                '<input type="text" id="forgot-email" class="form-control black" placeholder="'+options.placeholder+'">' +
                            '</label>'+
                            '<span class="tooltip bottom alert"><span></span></span>'+
                        '</div>';
                str += '<button type="button" class="btn btn-black ui-popup mt-1_5" id="btn-popup" disabled>'+options.btnText+'</button>';
            str += '</div>' +
                '</div>';
            return str;
        }

        //////////////////////////////////////          PUBLIC
        //for new module
        fn[moduleName] = { //api map
            getProfile: TPL_getProfile
            ,getProfileEdit: TPL_getProfileEdit
            ,getSignIn: TPL_getSignIn
            ,getTransactionHistoryItem: TPL_getTransactionHistoryItem
            ,getMatchHistoryItem: TPL_getMatchHistoryItem
            ,getMatchHistory: TPL_getMatchHisotry
            ,getMatchRoom: TPL_getMatchRoom
            ,getChallenge: TPL_getChallenge
            ,getChallengeResult: TPL_getChallengeResult
            ,getChallengeCountdown: TPL_getChallengeCountdown
            ,getShop: TPL_getShop
            ,getLeaderboard: TPL_getLeaderboard
            ,getRemainFree : TPL_getRemainFree
            ,getMessage: TPL_getMessage
            ,getMsgLackOfEntryFee: TPL_getMsgLackOfEntryFee
            ,getMsgChallengeAgain : TPL_getMsgChallengeAgain
            ,getEmojiModal : TPL_getEmojiModal
            ,getUsernameModal : TPL_getUsernameModal
            ,getGuestModal : TPL_getGuestModal
            ,getChangePwdModal: TPL_getChangePwdModal
            ,getSigninModal : TPL_getSigninModal
            ,getSignupModal : TPL_getSignupModal
            ,getSignupAllModal : TPL_getSignupAllModal
            ,getForgotPwdModal : TPL_getForgotPwdModal
            ,getUserProfileModal : TPL_getUserProfileModal
            ,getSettingModal : TPL_getSettingModal
            ,getMessage5Modal : TPL_getMessage5Modal
            ,getToastModal : TPL_getToastModal
        };
        //for a module extended; like UI, and GAME
        //api map
        //_parent.METHOD = functionName;

    }).call(PASDKe20);

})(window);
/**
 * Created by Spike on 2019-12-06.
 * UI for App (Android)
 *
 * dependancy : UI.js
 */
(function(w){

    (function(){

        var fn = this.fn;    //instance
        var self = this;
        var moduleName = 'UI';
        var _parent = fn[moduleName];

        //////////////////////////////////////          PRIVATE

        var errCode = fn.API.getErrCode();

        var errMsg = fn.API.getErrMessage();

        var envDomain = fn.API.getEnvDomain();

        var aniDur = _parent.getAnimationDelay(),
            randimg = _parent.getRandomImage();

        var eleId = {
            native : {
                loadingOverlay : 'pa-ui-native-overlay',
                loading : 'pa-ui-native-loading'
            }
        }

        ///////////////////////         FUNCTIONS

        function exit(onOkay, onCancel, callback){


            // check if the popup is already open
            if (jQuery('#pa-ui-exit-modal').length > 0){
                // the cancel button must be exist
                jQuery('#pa-ui-cancel').click();
            }else {

                if (w.pauseGamePlay) w.pauseGamePlay();

                var title = fn.LANG.TITLE.EXIT;
                var word = fn.LANG.MSG.INFO.ARE_YOU_SURE_YOU_WANT_TO_EXIT;

                var modalClass = '';

                var view =
                    '<div id="msg-wrapper" class="transition is-native">' +
                    '<div class="msg-modal type-3 modal-native transition">' +
                    '<div class="modal-content '+modalClass+'">' +
                    '<div class="modal-content-inner">' +
                        '<span class="back modal-back"><i class="fas fa-arrow-left"></i></span>'+

                        '<div id="pa-ui-exit-modal">' +
                            '<h3 class="modal-title center-default">'+title+'</h3>' +
                            '<p class="big-p">' + word + '</p>' +
                            '<div class="form-container">' +
                            '   <div class="row-layout">' +
                                '   <div class="col-sm-6">' +
                                '       <button type="button" id="pa-ui-okay" class="btn btn-default btn-full">'+fn.LANG.WORD.YES+'</button>' +
                                '   </div>' +
                                '   <div class="col-sm-6">' +
                                '       <button type="button" id="pa-ui-cancel" class="btn btn-default btn-full bg-orange">'+fn.LANG.WORD.NO+'</button>' +
                                '   </div>' +
                            '   </div>' +
                            '</div>' +
                        '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                '</div>';

                // var _m = _parent.displayCustomModal();
                //
                // _parent.aniLoadingFinished();
                //
                // _parent.renderPage(view);

                // var str = fn.UI_TEMPLATE.getSigninModal();
                var $wrapper = jQuery('#msg-wrapper');
                if($wrapper.length == 0){
                    _parent._doAddModal(view, callback);
                }else {
                    // still exist; add a bit later
                    $wrapper.removeClass('on');
                    setTimeout(function(){
                        _parent._doAddModal(view, callback);
                    }, aniDur);
                }

                //add event listener after rendering
                //button : new challenge
                setTimeout(function(){
                    jQuery('#pa-ui-okay').on('click', function (e) {
                        e.preventDefault();

                        if(onOkay) onOkay();
                        if(fn.API.isAndroid()) {
                            if(false) console.log('call Android.gameExit')
                            Android.gameExit();
                        }
                        _parent.CLOSE();
                    })

                    jQuery('#pa-ui-cancel').on('click', function(e){
                        e.preventDefault();

                        // let game know it
                        if (w.resumeGamePlay) w.resumeGamePlay();

                        if(onCancel) onCancel({returncode: errCode.MODAL_CLOSED, message: ''});
                        //close() will be ran by listener that added earlier than this one
                        _parent.CLOSE();
                    })
                }, aniDur);
            }
        }

        // belows are for Android, to call js functions
        w.showExitPopup = exit;

        function showLoading(){
            // if(fn.API.isAndroid()){
                var overlay = jQuery('#'+eleId.native.loadingOverlay);
                if(overlay.length > 0){
                    overlay.css('display', 'block');
                }else {
                    // block every thing
                    jQuery('<div id="'+eleId.native.loadingOverlay+'" style="position:fixed;width:100%;height:100vh;top:0;left:0;z-index:99999999"><img src="static/img/cd/loading80.png" id="'+eleId.native.loading+'" alt="" style="position: absolute; top: 50%; left:50%;width:40px;height:40px;-moz-animation:loading-spin .75s linear infinite;-webkit-animation:loading-spin .75s linear infinite;animation:loading-spin .75s linear infinite;"></div>').appendTo('body');
                }
                // Android.showLoadingProgress()
            // }else {
            //     if(false) console.log('this method is only for Android');
            // }
        }

        function hideLoading(){
            // if(fn.API.isAndroid()) {
                var overlay = jQuery('#'+eleId.native.loadingOverlay);
                if(overlay.length > 0){
                    overlay.css('display', 'none');
                }
                // Android.hideLoadingProgress()
            // }else {
            //     if(false) console.log('this method is only for Android');
            // }
        }

        //////////////////////////////////////          PUBLIC
        //api map
        _parent.EXIT = exit;
        _parent.SHOWLOADING = showLoading;
        _parent.HIDELOADING = hideLoading;

    }).call(PASDKe20);

})(window);
/**
 * This is a template for a module of SDK
 * Created by (developer name) on 20xx-xx-xx.
 * Here comes logic description
 *
 */
(function(w){

    (function(){

        var fn = this.fn;    //instance
        var self = this;
        var moduleName = 'LANG';
        var _api = fn.API;

        //image folders follow below code in lowercase
        //ex for Korean language, /static/images/kr/image.png
        var langId = {
            EN : 'EN'
            ,KR : 'KR'
            ,DE : 'DE'
            // ,VN : 'VN'
        }

        // sync with DB
        var langCodeNo = {
            EN : 0,
            KR : 1,
            DE : 2
            // VN : 3
        }

        //////////////////////////////////////          PRIVATE

        var errCode = _api.getErrCode();

        var errMsg = _api.getErrMessage();

        var envDomain = _api.getEnvDomain();

        var lang = null;
        var langKeyword = langId.EN;
        if(w.EmojiGamesPALANG){
            if(false) console.log('init lang instance')
            lang = new EmojiGamesPALANG();
        }else {
            if(false) console.log('lang instance is not initialized')
        }


        ///////////////////////         FUNCTIONS

        function addProperties(obj){
            for(var i in obj){
                fn[moduleName][i] = obj[i]
            }
        }

        function setLang(val){
            //v1.0 users don't have country code
            var _val = (val) ? val : langId.EN;

            if(lang){

                //get previous language code
                var preLang = lang.getLang();
                if(false) console.log('prelang', preLang)

                if(_val.length > 2 && _val.indexOf('-')){
                    _val = val.substr(0, 2)     //lowercase
                }

                //check language code
                var _valLow = _val.toLowerCase();
                // if(_valLow === 'kr' || _valLow === 'kp' || _valLow === 'ko'){
                //     _val = 'ko'
                // }else if(_valLow === 'de') {
                //     _val = 'de'
                // // }else if(_valLow === 'vn') {
                // //    _val = 'vn'
                // }else {
                    _val = 'en';    // always en for now
                // }

                //change moment locale
                moment.locale(_val)

                var data;
                switch(_val){
                    case 'ko':
                        langKeyword = langId.KR;
                        data = lang.setLang(langId.KR);
                        break;
                    case 'de':
                        langKeyword = langId.DE;
                        data = lang.setLang(langId.DE);
                        break;
                    // case 'vn':
                    //     langKeyword = langId.VN;
                    //     data = lang.setLang(langId.VN);
                    //     break;
                    default:
                        langKeyword = _val;
                        data = lang.setLang(langId.EN);
                        break;
                }

                //temp for kr event
                //data = langId.KR;
                //langKeyword = langId.KR;

                //set all language properies to this module
                addProperties(data);

                //set a class to body for css text images
                jQuery('document').ready(function(){
                    var preLangLow = preLang.toLowerCase()
                    if(jQuery('body').hasClass('pa-lang-'+preLangLow)){
                        jQuery('body').removeClass('pa-lang-'+preLangLow)
                    }
                    jQuery('body').addClass('pa-lang-'+langKeyword.toLowerCase())
                })

            }else {
                return false;
            }
            if(false) console.log('setLang ', _val, langKeyword, fn[moduleName])
        }

        /**
         *
         * @param _for {null | string} 'imgPath' for imagePath
         * @return {*|string}
         */
        function getLang(_for){

            if(_for){

                //includes /
                if(lang.getLang() === langId.EN){
                    return '/';
                }else {
                    return '/'+lang.getLang().toLowerCase() +'/';
                }
            }else {
                return lang.getLang();
            }
        }

        /**
         * Date format depending on country
         * Asia: 2018-Oct-31 (YYYY/MM/DD)
         * Europe: 31-Oct-2018 (DD/MM/YYYY)
         * USA: Oct-31-2018 (MM/DD/YYYY)
         * @param string. country code
         * @param timestamp. timestamp
         * @param include. object  default null. {h: true,m: true,s: true}
         * @return {string} returns date format YYYY-MM-DD (d)
         */
        function getDateFormat(countryCode, timestamp, include){
            var date = new Date();
            var timestamp = (timestamp) ? timestamp : date.getTime()
            var _dateFormat = 'YYYY-MM-DD';     //default, asia
            var c = countryCode.toLowerCase();
            var res = null

            //europe
            if (c == 'be' || c == 'bg' || c == 'cz' || c == 'dk' || c == 'de' || c == 'ee' || c == 'ie' ||
                c == 'el' || c == 'es' || c == 'fr' || c == 'hr' || c == 'it' || c == 'cy' || c == 'lv' ||
                c == 'lt' || c == 'lu' || c == 'hu' || c == 'mt' || c == 'nl' || c == 'at' || c == 'pl' ||
                c == 'pt' || c == 'ro' || c == 'si' || c == 'sk' || c == 'fi' || c == 'se' || c == 'uk' ||
                c == 'is' || c == 'li' || c == 'no' || c == 'ch'
                ){
                _dateFormat = 'DD-MM-YYYY'

            //america
            }else if(c == 'us') {
                _dateFormat = 'MM-DD-YYYY'

            }else {
                //asia
                if (c == 'kr' || c == 'kp') {
                    //var dateStr = moment.unix(timestamp).format(_dateFormat);
                    //res = dateStr.replace(/(\d{4})-(\d{2})-(\d{2})/, '$1-$2-$3')
                }
            }

            if (include) {
                _dateFormat += ' '
                if (include.h) {

                    _dateFormat += 'HH'

                }
                if (include.m) {
                    if (include.h) { _dateFormat += ':' }
                    _dateFormat += 'mm'
                }
                if (include.s) {
                    if (include.h || include.m) { _dateFormat += ':' }
                    _dateFormat += 'ss'
                }
            }

            //res = customized date format
            return (res) ? res : moment.unix(timestamp).format(_dateFormat);

        }

        /**
         * Get list of supported languages
         * @return {{EN: string, KR: string, DE: string}}
         */
        function getList(){
            var list = []
            for (var i in langId){
                var name = '';
                if (i == 'DE') {
                    name = 'Deutsch';
                // }else if (i == 'VN'){
                //     name = 'Ting Vit';
                }else if (i == 'KR'){
                    name = '';
                }else {
                    name = 'English';
                }
                list.push({code: i, name : name})
            }
            return list;
        }

        function getLangCodeNo(code){
            return langCodeNo[code.toUpperCase()];
        }

        //////////////////////////////////////          PUBLIC
        fn[moduleName] = { //api map
            setLang : setLang
            ,getLang : getLang
            ,getLangCodeNo : getLangCodeNo
            ,getList : getList
            ,getDateFormat : getDateFormat
        };

    }).call(PASDKe20);

})(window);